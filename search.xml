<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>git æ’¤é”€ä¿®æ”¹</title>
      <link href="/2024/05/09/git-che-xiao-xiu-gai/"/>
      <url>/2024/05/09/git-che-xiao-xiu-gai/</url>
      
        <content type="html"><![CDATA[<h1 id="æœªä½¿ç”¨-git-add-ç¼“å­˜ä»£ç "><a href="#æœªä½¿ç”¨-git-add-ç¼“å­˜ä»£ç " class="headerlink" title="æœªä½¿ç”¨ git add ç¼“å­˜ä»£ç "></a>æœªä½¿ç”¨ <code>git add</code> ç¼“å­˜ä»£ç </h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ’¤é”€æŒ‡å®šæ–‡ä»¶ï¼Œ--å¾ˆé‡è¦ï¼Œæ²¡æœ‰--ï¼Œå°±å˜æˆäº†â€œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåˆ†æ”¯â€çš„å‘½ä»¤</span><span class="token function">git</span> checkout -- <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span><span class="token comment"># æ’¤é”€æ‰€æœ‰æ–‡ä»¶</span><span class="token function">git</span> checkout <span class="token builtin class-name">.</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç›¸å½“äº SVN çš„ <code>revert</code></p><h1 id="å·²ä½¿ç”¨-git-add-ç¼“å­˜ä»£ç æœªä½¿ç”¨-git-commit-æäº¤ä»£ç "><a href="#å·²ä½¿ç”¨-git-add-ç¼“å­˜ä»£ç æœªä½¿ç”¨-git-commit-æäº¤ä»£ç " class="headerlink" title="å·²ä½¿ç”¨ git add ç¼“å­˜ä»£ç æœªä½¿ç”¨ git commit æäº¤ä»£ç "></a>å·²ä½¿ç”¨ <code>git add</code> ç¼“å­˜ä»£ç æœªä½¿ç”¨ <code>git commit</code> æäº¤ä»£ç </h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ’¤é”€æŒ‡å®šæ–‡ä»¶</span><span class="token function">git</span> reset HEAD <span class="token operator">&lt;</span>file<span class="token operator">&gt;</span><span class="token comment"># æ’¤é”€æ‰€æœ‰æ–‡ä»¶</span><span class="token function">git</span> reset HEAD <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å·²ä½¿ç”¨-git-commit-æäº¤ä»£ç "><a href="#å·²ä½¿ç”¨-git-commit-æäº¤ä»£ç " class="headerlink" title="å·²ä½¿ç”¨ git commit æäº¤ä»£ç "></a>å·²ä½¿ç”¨ <code>git commit</code> æäº¤ä»£ç </h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å›é€€åˆ°å½“å‰ç‰ˆæœ¬çš„ä¸Šä¸€ç‰ˆæœ¬</span><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> HEAD^<span class="token comment"># å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬</span><span class="token function">git</span> reset <span class="token parameter variable">--hard</span> commit_id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¼ é€é—¨ï¼š<a href="https://april-cl.github.io/2024/03/21/git-ming-ling-xun-lian-ying-learngitbranching/#toc-heading-20">git å‘½ä»¤è®­ç»ƒè¥ learngitbranching</a></p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®°-å±±ç«¹è®°è´¦åç«¯ï¼ˆäº”ï¼‰</title>
      <link href="/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/"/>
      <url>/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/</url>
      
        <content type="html"><![CDATA[<p><a href="https://april-cl.github.io/2024/05/07/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-si/#toc-heading-10">ä¹¦æ¥ä¸Šå›</a>ï¼ŒæŠ¥é”™ç¿»è¯‘è¿‡æ¥å°±æ˜¯</p><blockquote><p>!æ— æ³•åŠ è½½åº”ç”¨ç¨‹åºï¼š å‚æ•°é”™è¯¯ï¼š ç”Ÿäº§ç¯å¢ƒç¼ºå°‘ secret_key_baseï¼Œè¯·ä½¿ç”¨ â€œbin/rails credentials:edit â€œè®¾ç½®è¯¥å­—ç¬¦ä¸²ã€‚</p></blockquote><h1 id="å¦‚ä½•ç®¡ç†å¯†é’¥"><a href="#å¦‚ä½•ç®¡ç†å¯†é’¥" class="headerlink" title="å¦‚ä½•ç®¡ç†å¯†é’¥"></a>å¦‚ä½•ç®¡ç†å¯†é’¥</h1><h2 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h2><p>master.key + keys =&gt; encrypted<br>å¯†é’¥ + åŠ å¯†å†…å®¹ =&gt; å¯†æ–‡</p><p>encrypted + master.key =&gt; keys<br>å¯†æ–‡ + å¯†é’¥ =&gt; è§£å¯†å†…å®¹</p><h2 id="Rails-è¯»å–-keys"><a href="#Rails-è¯»å–-keys" class="headerlink" title="Rails è¯»å– keys"></a>Rails è¯»å– keys</h2><p>æ‰“å¼€æ§åˆ¶å° <code>bin/rails console</code></p><p>è¾“å…¥ <code>Rails.application.credentials.config</code></p><p>å¯ä»¥æŸ¥çœ‹åˆ° keys ï¼ˆè¿™äº› keys å³åŠ å¯†å†…å®¹ï¼Œä¸èƒ½æ³„éœ²ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">~/r/mangosteen-rails <span class="token comment"># â¯â¯â¯ bin/rails console</span>irb<span class="token punctuation">(</span>main<span class="token punctuation">)</span>:001:<span class="token operator"><span class="token file-descriptor important">0</span>&gt;</span> Rails.application.credentials.config<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>:secret_key_base<span class="token operator">=</span><span class="token operator">&gt;</span>                                                                                       <span class="token string">"0b20f2b6b8dc0f440f4b0f22ebc74aec8c9156276728d5bcd2e96c3625aaeb4346ed94e6b507f647462cca583009e656e5486ece31d0f405506bec3af02605c"</span><span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Rails-å†™å…¥-keys"><a href="#Rails-å†™å…¥-keys" class="headerlink" title="Rails å†™å…¥ keys"></a>Rails å†™å…¥ keys</h2><ol><li><p>åˆ é™¤ config ç›®å½•ä¸‹ çš„ credentials.yml.enc å’Œ master.key æ–‡ä»¶ï¼ˆå¦‚æœä¹‹å‰æ‰§è¡Œè¿‡ä¸‹é¢æ“ä½œå°±ä¼šç”Ÿæˆè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼‰</p></li><li><p>è¾“å…¥å‘½ä»¤ <code>EDITOR="code --wait" bin/rails credentials:edit</code>ï¼Œä¼šç”Ÿæˆä¸€ä¸ª master.key æ–‡ä»¶ å’Œ xxxxx.credentials.yml æ–‡ä»¶ï¼Œå°† keys è®°å½•åœ¨ xxxxx.credentials.yml æ–‡ä»¶ï¼Œä¿å­˜å…³é—­ç¼–è¾‘å™¨ï¼Œè¿™ä¸ª xxxxx.credentials.yml æ–‡ä»¶ä¼šè‡ªåŠ¨é”€æ¯ï¼Œå¯ä»¥é€šè¿‡å‰é¢<a href="https://april-cl.github.io/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/#toc-heading-3">Rails è¯»å– keys</a>çš„æ–¹æ³•æ¥è¯»å–</p></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Adding config/master.key to store the encryption key: abf694bcb7a2f9973efbab9b0ebfe409Save this <span class="token keyword">in</span> a password manager your team can access.If you lose the key, no one, including you, can access anything encrypted with it.      create  config/master.keyFile encrypted and saved.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Rails-å¤šç¯å¢ƒå¯†é’¥"><a href="#Rails-å¤šç¯å¢ƒå¯†é’¥" class="headerlink" title="Rails å¤šç¯å¢ƒå¯†é’¥"></a>Rails å¤šç¯å¢ƒå¯†é’¥</h2><p>å¼€å‘ç¯å¢ƒå¯†é’¥</p><p>å‘½ä»¤ï¼š<code>EDITOR="code --wait" bin/rails credentials:edit</code></p><p>äº§ç‰©ï¼šconfig/master.keyã€config/credentials.yml.enc</p><p>ç”Ÿäº§ç¯å¢ƒå¯†é’¥</p><p>å‘½ä»¤ï¼š<code>EDITOR="code --wait" rails credentials:edit --environment production</code></p><p>äº§ç‰©ï¼šconfig/credentials/production.keyã€config/credentials/production.yml.enc</p><h2 id="è§£å†³-Missing-secret-key-base-for-â€˜productionâ€™-environment"><a href="#è§£å†³-Missing-secret-key-base-for-â€˜productionâ€™-environment" class="headerlink" title="è§£å†³ Missing secret_key_base for â€˜productionâ€™ environment"></a>è§£å†³ Missing <code>secret_key_base</code> for â€˜productionâ€™ environment</h2><ol><li>ä¿®æ”¹ bin/setup_post.hostï¼ŒæŠŠ <code>secret_key_base</code> å†™åˆ°ç¯å¢ƒå˜é‡</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ·»åŠ äº†è¿™ä¸ª -e RAILS_MASTER_KEY=$RAILS_MASTER_KEY</span><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">RAILS_MASTER_KEY</span><span class="token operator">=</span><span class="token variable">$RAILS_MASTER_KEY</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 <span class="token parameter variable">--network</span><span class="token operator">=</span>network1  <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token variable">$container_name</span> mangosteen:<span class="token variable">$version</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li><p>è¯»å–å¼€å‘ç¯å¢ƒçš„ <code>secret_key_base</code>ï¼Œå¯ä»¥é€šè¿‡å‰é¢<a href="https://april-cl.github.io/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/#toc-heading-3">Rails è¯»å– keys</a>çš„æ–¹æ³•æ¥è¯»å–ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å‰é¢<a href="https://april-cl.github.io/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/#toc-heading-4">Rails å†™å…¥ keys</a>çš„æ–¹æ³•æ¥é‡æ–°è·å–ä¸€ä¸ªï¼ŒæŠŠè¿™ä¸ª <code>secret_key_base</code> çš„å€¼å¤åˆ¶ä¸‹æ¥</p></li><li><p>è®¾ç½®ç”Ÿäº§ç¯å¢ƒçš„ <code>secret_key_base</code></p><ol><li><p>è¾“å…¥å‘½ä»¤ï¼š<code>EDITOR="code --wait" rails credentials:edit --environment production</code></p></li><li><p>åœ¨ç”Ÿæˆçš„ xxxxx.production.yml å†™å…¥ <code>secret_key_base: åˆšåˆšå¤åˆ¶çš„å¼€å‘ç¯å¢ƒsecret_key_base</code>ï¼Œå…³é—­ç¼–è¾‘é¡µä¼šè‡ªåŠ¨é”€æ¯è¿™ä¸ªæ–‡ä»¶</p></li></ol></li><li><p>é‡æ–°ç”Ÿæˆå¼€å‘ç¯å¢ƒçš„ <code>secret_key_base</code>ï¼Œé˜²æ­¢ç”Ÿäº§ç¯å¢ƒ <code>secret_key_base</code> æ³„éœ²</p></li><li><p>è¾“å…¥å‘½ä»¤ <code>bin/pack_for_host.sh</code> é‡æ–°æ‰“åŒ…</p></li><li><p>å¤åˆ¶ config/credentials/production.key å†…å®¹</p></li><li><p>å®¿ä¸»æœºæ‰§è¡Œ <code>RAILS_MASTER_KEY=xxxxxxxxxxxxxxx mangosteen_deploy/setup_host.sh</code>ï¼ˆè¿™é‡Œ RAILS_MASTER_KEY æ˜¯æ­¥éª¤ 1 å‘½åçš„ï¼Œxxxxxxxxxxxxxxx å°±æ˜¯ä¸Šé¢æ­¥éª¤ 6 å¤åˆ¶çš„å†…å®¹ï¼‰</p></li><li><p>æµè§ˆå™¨è®¿é—® <code>http://localhost:3000/</code>ï¼Œé¡µé¢å‡ºç° <code>{"message":"Welcome!"}</code> å³éƒ¨ç½²æˆåŠŸäº†</p></li></ol><p>ä½†æ˜¯è®¿é—® <code>http://localhost:3000/api/v1/items</code> è¿˜æ˜¯å¤±è´¥ï¼ŒåŸå› æ˜¯è¿˜æ²¡æœ‰é…ç½®ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“</p><h1 id="é…ç½®ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“"><a href="#é…ç½®ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“" class="headerlink" title="é…ç½®ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“"></a>é…ç½®ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“</h1><ol><li>ä¿®æ”¹ config/database.yml</li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">production</span><span class="token punctuation">:</span>  <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*default</span>  <span class="token key atrule">database</span><span class="token punctuation">:</span> mangosteen_production  <span class="token key atrule">username</span><span class="token punctuation">:</span> mangosteen  <span class="token key atrule">password</span><span class="token punctuation">:</span> &lt;%= ENV<span class="token punctuation">[</span><span class="token string">"DB_PASSWORD"</span><span class="token punctuation">]</span> %<span class="token punctuation">&gt;</span>  <span class="token key atrule">host</span><span class="token punctuation">:</span> &lt;%= ENV<span class="token punctuation">[</span><span class="token string">"DB_HOST"</span><span class="token punctuation">]</span> %<span class="token punctuation">&gt;</span>  <span class="token comment"># &lt;%= ENV["DB_PASSWORD"] %&gt; &lt;%= ENV["DB_HOST"] %&gt; ä½¿ç”¨ç¯å¢ƒå˜é‡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>ä¿®æ”¹ bin/setup_host.sh</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ·»åŠ äº† -e DB_HOST=$DB_HOST -e DB_PASSWORD=$DB_PASSWORD</span><span class="token function">docker</span> run <span class="token parameter variable">-e</span> <span class="token assign-left variable">DB_HOST</span><span class="token operator">=</span><span class="token variable">$DB_HOST</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">DB_PASSWORD</span><span class="token operator">=</span><span class="token variable">$DB_PASSWORD</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">RAILS_MASTER_KEY</span><span class="token operator">=</span><span class="token variable">$RAILS_MASTER_KEY</span> <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 <span class="token parameter variable">--network</span><span class="token operator">=</span>network1 <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token variable">$container_name</span> mangosteen:<span class="token variable">$version</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li><p>æ‰§è¡Œä¸Šé¢<a href="https://april-cl.github.io/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/#toc-heading-6">è§£å†³ Missing <code>secret_key_base</code> for â€˜productionâ€™ environment</a> çš„æ­¥éª¤2/3/4/5/6</p></li><li><p>å®¿ä¸»æœºæ‰§è¡Œ <code>DB_HOST=db-for-mangosteen DB_PASSWORD=123456 RAILS_MASTER_KEY=xxxxxxxxxxxxxxx mangosteen_deploy/setup_host.sh</code>ï¼ˆä¸¾ä¸€åä¸‰ç†è§£DB_HOSTã€DB_PASSWORDï¼‰</p></li><li><p>å®¿ä¸»æœºæ‰§è¡Œ <code>docker exec -it mangosteen-prod-1 bin/rails db:create db:migrate</code> åˆ›å»ºå’Œè¿ç§»æ•°æ®åº“ï¼ˆmangosteen-prod-1 ä¹Ÿå¯ä»¥æ”¹æˆå®¹å™¨ idï¼‰</p></li><li><p>æµè§ˆå™¨è®¿é—® <code>http://localhost:3000/api/v1/items</code>ï¼Œé¡µé¢å‡ºç° <code>"resources":[],"pager":{"page":null,"per_page":100,"count":0}}</code> å³è®¿é—®æ¥å£æˆåŠŸäº†</p></li></ol><blockquote><p>ä¸ºä»€ä¹ˆä¸ç”¨ <code>curl http://localhost:3000/ -v</code> å’Œ <code>curl http://localhost:3000/api/v1/items -v</code><br>    è¿™é‡Œå…¶å®æ­£å¸¸æ˜¯å¯ä»¥ curl å‡ºæ¥çš„ï¼Œå°±å¾ˆå¥‡æ€ªæˆ‘çš„å‡ºä¸æ¥ï¼Œä¸€ç›´å¡åœ¨è¿”å›é‚£é‡Œï¼Œå°è¯• curl ç™¾åº¦å’Œæœ¬åœ°çš„å…¶å®ƒç«¯å£ä¹Ÿæ˜¯æˆåŠŸçš„ï¼Œè¯´æ˜ curl æ²¡é—®é¢˜ï¼Œä½†æ˜¯æµè§ˆå™¨è®¿é—®ä¹Ÿæ˜¯æˆåŠŸçš„ï¼Œè¯´æ˜æ¥å£ä¹Ÿæ²¡é—®é¢˜ï¼Œso I donâ€™t understand why â€¦</p></blockquote><hr><p><strong>è°¨æ…æ“ä½œï¼šå¦‚ä½•åˆ é™¤ç”Ÿäº§ç¯å¢ƒæ•°æ®åº“</strong></p><ol><li><p>å®¿ä¸»æœºæ‰§è¡Œ <code>docker exec -it mangosteen-prod-1 bash</code> è¿›å…¥å®¹å™¨å†…éƒ¨</p></li><li><p>è¾“å…¥ <code>DISABLE_DATABASE_ENVIRONMENT_CHECK=1 bin/rails db:drop</code></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rails </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®°-å±±ç«¹è®°è´¦åç«¯ï¼ˆå››ï¼‰</title>
      <link href="/2024/05/07/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-si/"/>
      <url>/2024/05/07/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-si/</url>
      
        <content type="html"><![CDATA[<h1 id="è´­ä¹°ä¾¿å®œçš„äº‘æœåŠ¡å™¨"><a href="#è´­ä¹°ä¾¿å®œçš„äº‘æœåŠ¡å™¨" class="headerlink" title="è´­ä¹°ä¾¿å®œçš„äº‘æœåŠ¡å™¨"></a>è´­ä¹°ä¾¿å®œçš„äº‘æœåŠ¡å™¨</h1><p>éœ€è¦è´­ä¹°æœåŠ¡å™¨å®é™…æ“ä½œ</p><h1 id="é…ç½®æœåŠ¡å™¨"><a href="#é…ç½®æœåŠ¡å™¨" class="headerlink" title="é…ç½®æœåŠ¡å™¨"></a>é…ç½®æœåŠ¡å™¨</h1><h2 id="ç™»å½•"><a href="#ç™»å½•" class="headerlink" title="ç™»å½•"></a>ç™»å½•</h2><ul><li><p>ä¸æ¨èä½¿ç”¨ã€Œç”¨æˆ·å + å¯†ç ã€ç™»å½•ï¼Œå®¹æ˜“å¿˜ï¼Œä¸”ä¸å®‰å…¨</p></li><li><p>æ¨èä½¿ç”¨ ssh-copy-id ä¸Šä¼ å…¬é’¥ï¼Œä½¿ç”¨ ssh ç™»å½•</p></li><li><p>å…·ä½“æ•™ç¨‹è¯·è‡ªå·±æœç´¢ï¼ˆä¸åŒç³»ç»Ÿå‘½ä»¤ä¸åŒï¼‰</p></li></ul><h2 id="é˜²ç«å¢™"><a href="#é˜²ç«å¢™" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h2><ul><li><p>æ¨èå¼€å¯æµ‹è¯•ç«¯å£ï¼Œå¦‚ 3000ã€3001ã€5000ã€8000ã€8080</p></li><li><p>è‡ªè¡Œé€‰æ‹©æ˜¯å¦å¼€å¯é‡è¦ç«¯å£ï¼Œå› ä¸ºéœ€è¦å¤‡æ¡ˆï¼Œå¦‚ 80ã€443</p></li></ul><h2 id="ç”¨æˆ·æƒé™"><a href="#ç”¨æˆ·æƒé™" class="headerlink" title="ç”¨æˆ·æƒé™"></a>ç”¨æˆ·æƒé™</h2><ul><li><p>æ¨èåªåœ¨ root ç”¨æˆ·é‡Œå®‰è£… Docker å³å¯</p></li><li><p>æ¯ä¸ªåº”ç”¨åˆ›å»ºä¸€ä¸ªç‹¬ç«‹ç”¨æˆ·ï¼Œå¹¶åŠ å…¥ docker ç”¨æˆ·ç»„</p></li><li><p>åˆ‡å¿Œç”¨ root ç®¡ç†æ‰€æœ‰åº”ç”¨</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºç‹¬ç«‹ç”¨æˆ· ubuntu add user to group</span>adduser mangosteen<span class="token comment"># ubuntu install docker</span><span class="token function">apt-get</span> update<span class="token comment"># ç”¨æˆ·æˆæƒ</span><span class="token comment"># ç™»å½• root è´¦å·</span><span class="token function">ssh</span> root@æœåŠ¡å™¨ip<span class="token comment"># åˆ›å»º /home/mangosteen/.ssh ç›®å½•</span><span class="token function">mkdir</span> /home/mangosteen/.ssh<span class="token comment"># å¤åˆ¶ authorized_keys æ–‡ä»¶åˆ°åˆšåˆ›å»ºçš„ç›®å½•</span><span class="token function">cp</span> ~/.ssh/authorized_keys /home/mangosteen/.ssh<span class="token builtin class-name">cd</span> /home/mangosteen<span class="token function">chown</span> <span class="token parameter variable">-R</span> mangosteen:mangosteen .ssh<span class="token comment"># ç™»å½•æˆåŠŸ</span><span class="token function">ssh</span> mangosteen@æœåŠ¡å™¨ip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="éƒ¨ç½²æ€è·¯"><a href="#éƒ¨ç½²æ€è·¯" class="headerlink" title="éƒ¨ç½²æ€è·¯"></a>éƒ¨ç½²æ€è·¯</h1><h2 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h2><ul><li><p>å‡†å¤‡ä¸€ä¸ªæ–°ç”¨æˆ·ï¼ˆçœ‹ä¸Šæ–‡ï¼‰</p></li><li><p>å‡†å¤‡å¥½ Dockerï¼ˆçœ‹ä¸Šæ–‡ï¼‰</p></li><li><p>ä¸Šä¼  Dockerfile</p></li><li><p>ä¸Šä¼ æºä»£ç </p></li><li><p>ç”¨ Dockerfile æ„å»ºè¿è¡Œç¯å¢ƒ</p></li><li><p>åœ¨è¿è¡Œç¯å¢ƒé‡Œè¿è¡Œæºä»£ç </p></li><li><p>ä½¿ç”¨ Nginx åšè½¬å‘</p></li></ul><h2 id="ç‰ˆæœ¬æ›´æ–°"><a href="#ç‰ˆæœ¬æ›´æ–°" class="headerlink" title="ç‰ˆæœ¬æ›´æ–°"></a>ç‰ˆæœ¬æ›´æ–°</h2><ul><li><p>ä¸Šä¼ æ–° Dockerfile</p></li><li><p>ä¸Šä¼ æ–°æºä»£ç </p></li><li><p>ç”¨ Dockerfile æ„å»ºæ–°è¿è¡Œç¯å¢ƒ</p></li><li><p>åœ¨æ–°ç¯å¢ƒè¿è¡Œæ–°ä»£ç </p></li><li><p>ä½¿ç”¨ Nginx åšè½¬å‘</p></li></ul><h2 id="é…ç½®å‰ç«¯ç”Ÿäº§ç¯å¢ƒ"><a href="#é…ç½®å‰ç«¯ç”Ÿäº§ç¯å¢ƒ" class="headerlink" title="é…ç½®å‰ç«¯ç”Ÿäº§ç¯å¢ƒ"></a>é…ç½®å‰ç«¯ç”Ÿäº§ç¯å¢ƒ</h2><ul><li><p>å°†ä»£ç ä¸­çš„è·¯å¾„æ›¿æ¢æˆ CDN è·¯å¾„</p></li><li><p>ä¸Šä¼ æ‰“åŒ…å¥½çš„ CSS å’Œ JS ä»£ç åˆ° CDN</p></li><li><p>å°† html æ–‡ä»¶ä¸Šä¼ åˆ°åç«¯æœåŠ¡å™¨</p></li><li><p>ä½¿ç”¨ Nginx å¤„ç† html æ–‡ä»¶è¯·æ±‚</p></li></ul><h1 id="åœ¨å®¿ä¸»æœºé‡Œéƒ¨ç½²"><a href="#åœ¨å®¿ä¸»æœºé‡Œéƒ¨ç½²" class="headerlink" title="åœ¨å®¿ä¸»æœºé‡Œéƒ¨ç½²"></a>åœ¨å®¿ä¸»æœºé‡Œéƒ¨ç½²</h1><p>bin ç›®å½•æ–°å»º pack_for_host.sh, setup_host.sh</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># pack_for_host.sh</span><span class="token assign-left variable">dir</span><span class="token operator">=</span>oh-my-env<span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">date</span> +<span class="token string">'%Y%m%d-%H%M%S'</span><span class="token variable">)</span></span><span class="token assign-left variable">dist</span><span class="token operator">=</span>tmp/mangosteen-<span class="token variable">$time</span>.tar.gz<span class="token assign-left variable">current_dir</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> $0<span class="token variable">)</span></span><span class="token assign-left variable">deploy_dir</span><span class="token operator">=</span>/workspaces/<span class="token variable">$dir</span>/mangosteen_deploy<span class="token function">yes</span> <span class="token operator">|</span> <span class="token function">rm</span> tmp/mangosteen-*.tar.gz<span class="token punctuation">;</span> <span class="token function">yes</span> <span class="token operator">|</span> <span class="token function">rm</span> <span class="token variable">$deploy_dir</span>/mangosteen-*.tar.gz<span class="token punctuation">;</span> <span class="token function">tar</span> <span class="token parameter variable">--exclude</span><span class="token operator">=</span><span class="token string">"tmp/cache/*"</span> <span class="token parameter variable">-czv</span> <span class="token parameter variable">-f</span> <span class="token variable">$dist</span> *<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> <span class="token variable">$deploy_dir</span><span class="token function">cp</span> <span class="token variable">$current_dir</span>/<span class="token punctuation">..</span>/config/host.Dockerfile <span class="token variable">$deploy_dir</span>/Dockerfile<span class="token function">cp</span> <span class="token variable">$current_dir</span>/setup_host.sh <span class="token variable">$deploy_dir</span>/<span class="token function">mv</span> <span class="token variable">$dist</span> <span class="token variable">$deploy_dir</span><span class="token builtin class-name">echo</span> <span class="token variable">$time</span> <span class="token operator">&gt;</span> <span class="token variable">$deploy_dir</span>/version<span class="token builtin class-name">echo</span> <span class="token string">'DONE!'</span><span class="token comment"># setup_host.sh</span><span class="token assign-left variable">DB_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span><span class="token assign-left variable">container_name</span><span class="token operator">=</span>mangosteen-prod-1<span class="token assign-left variable">version</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> mangosteen_deploy/version<span class="token variable">)</span></span><span class="token builtin class-name">echo</span> <span class="token string">'docker build ...'</span><span class="token function">docker</span> build mangosteen_deploy <span class="token parameter variable">-t</span> mangosteen:<span class="token variable">$version</span><span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-aq</span> <span class="token parameter variable">-f</span> <span class="token assign-left variable">name</span><span class="token operator">=</span>^mangosteen-prod-1$<span class="token variable">)</span></span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  <span class="token builtin class-name">echo</span> <span class="token string">'docker rm ...'</span>  <span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable">$container_name</span><span class="token keyword">fi</span><span class="token builtin class-name">echo</span> <span class="token string">'docker run ...'</span><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3000</span>:3000 <span class="token parameter variable">--network</span><span class="token operator">=</span>network1 <span class="token parameter variable">-e</span> <span class="token assign-left variable">DB_PASSWORD</span><span class="token operator">=</span><span class="token variable">$DB_PASSWORD</span> <span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token variable">$container_name</span> mangosteen:<span class="token variable">$version</span><span class="token builtin class-name">echo</span> <span class="token string">'DONE!'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>config ç›®å½•æ–°å»º host.Dockerfile</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">FROM ruby:3.0.0ENV RAILS_ENV productionRUN <span class="token function">mkdir</span> /mangosteenRUN bundle config mirror.https://rubygems.org https://gems.ruby-china.comWORKDIR /mangosteenADD mangosteen-*.tar.gz ./RUN bundle config <span class="token builtin class-name">set</span> <span class="token parameter variable">--local</span> without <span class="token string">'development test'</span>RUN bundle <span class="token function">install</span>ENTRYPOINT bundle <span class="token builtin class-name">exec</span> puma<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¼€å‘å®¹å™¨ç»ˆç«¯è¿è¡Œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> +x bin/*.shbin/pack_for_host.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å›åˆ° windows oh-my-env ç›®å½•ï¼Œä¼šçœ‹åˆ°æ‰“åŒ…å¥½çš„ mangosteen_deployï¼Œä½¿ç”¨ cmder æˆ– git bash è¿è¡Œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mangosteen_deploy/setup_host.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è¿™ä¸ªæ—¶å€™ <code>docker ps -a</code> å‘ç°å¯åŠ¨å¤±è´¥äº†</p><p>ä½¿ç”¨ <code>docker logs [CONTAINER ID]</code> æŸ¥çœ‹åŸå› </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">!</span> Unable to load application: ArgumentError: Missing <span class="token variable"><span class="token variable">`</span>secret_key_base<span class="token variable">`</span></span> <span class="token keyword">for</span> <span class="token string">'production'</span> environment, <span class="token builtin class-name">set</span> this string with <span class="token variable"><span class="token variable">`</span>bin/rails credentials:edit<span class="token variable">`</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è§£å†³è§<a href="https://april-cl.github.io/2024/05/09/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-wu/">ä¸‹ç¯‡</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rails </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®°-å±±ç«¹è®°è´¦åç«¯ï¼ˆä¸‰ï¼‰</title>
      <link href="/2024/05/07/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-san/"/>
      <url>/2024/05/07/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-san/</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…-RSpec"><a href="#å®‰è£…-RSpec" class="headerlink" title="å®‰è£… RSpec"></a>å®‰è£… RSpec</h1><p><a href="https://github.com/rspec/rpec-rails">çœ‹æ–‡æ¡£</a></p><ol><li>Gemfile æ–‡ä»¶</li></ol><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby">group <span class="token symbol">:development</span><span class="token punctuation">,</span> <span class="token symbol">:test</span> <span class="token keyword">do</span>  gem <span class="token string-literal"><span class="token string">"debug"</span></span><span class="token punctuation">,</span> <span class="token symbol">platforms</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">%i[ mri mingw x64_mingw ]</span></span>  gem <span class="token string-literal"><span class="token string">'rspec-rails'</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'~&gt; 6.0.0'</span></span> <span class="token comment">#æ–°å¢</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>ç»ˆç«¯è¿è¡Œ</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Download and install</span>$ bundle <span class="token function">install</span><span class="token comment"># Generate boilerplate configuration files</span><span class="token comment"># (check the comments in each generated file for more information)</span>$ bin/rails generate rspec:install    create  .rspec    create  spec    create  spec/spec_helper.rb    create  spec/rails_helper.rb<span class="token comment"># åˆ›å»ºæµ‹è¯• model æ–‡ä»¶</span>$ bin/rails generate rspec:model user    create  spec/models/user_spec.rb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>é…ç½®æµ‹è¯•æ•°æ®åº“</li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># config/database.yml </span><span class="token key atrule">test</span><span class="token punctuation">:</span>  <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*default</span>  <span class="token key atrule">database</span><span class="token punctuation">:</span>   <span class="token key atrule">username</span><span class="token punctuation">:</span>   <span class="token key atrule">password</span><span class="token punctuation">:</span>   <span class="token key atrule">host</span><span class="token punctuation">:</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li> åœ¨æµ‹è¯•ç¯å¢ƒåˆ›å»ºæ•°æ®åº“</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æµ‹è¯•ç¯å¢ƒ åˆ›å»ºæ•°æ®åº“</span><span class="token assign-left variable">RAILS_ENV</span><span class="token operator">=</span>test bin/rails db:create<span class="token comment"># æµ‹è¯•ç¯å¢ƒ è¿ç§»æ•°æ®åº“</span><span class="token assign-left variable">RAILS_ENV</span><span class="token operator">=</span>test bin/rails db:migrate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>å¯åŠ¨æµ‹è¯•ç”¨ä¾‹</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bundle <span class="token builtin class-name">exec</span> rspec<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="å¦‚ä½•æµ‹è¯•è¯·æ±‚"><a href="#å¦‚ä½•æµ‹è¯•è¯·æ±‚" class="headerlink" title="å¦‚ä½•æµ‹è¯•è¯·æ±‚"></a>å¦‚ä½•æµ‹è¯•è¯·æ±‚</h1><p>åˆ›å»ºæµ‹è¯•è¯·æ±‚æ–‡ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ bin/rails generate rspec:request items    create  spec/requests/items_spec.rb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å…·ä½“æµ‹è¯•ç”¨ä¾‹çœ‹é¡¹ç›®ä»£ç </p><h1 id="å¦‚ä½•ä½¿ç”¨-SecureRandom"><a href="#å¦‚ä½•ä½¿ç”¨-SecureRandom" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ SecureRandom"></a>å¦‚ä½•ä½¿ç”¨ SecureRandom</h1><ol><li>åˆ›å»ºæµ‹è¯•è¯·æ±‚æ–‡ä»¶</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ bin/rails generate rspec:request validation_codes    create  spec/requests/validation_codes_spec.rb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li>å®Œå–„ controller</li></ol><p><a href="https://api.rubyonrails.org/classes/ActiveRecord/SecureToken/ClassMethods.html">ActiveRecord::SecureToken::ClassMethods</a></p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># app/controllers/api/v1/validation_codes_controller.rb</span><span class="token keyword">class</span> <span class="token class-name">Api</span><span class="token double-colon punctuation">::</span><span class="token constant">V1</span><span class="token double-colon punctuation">::</span>ValidationCodesController <span class="token operator">&lt;</span> ApplicationController  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>    code <span class="token operator">=</span> SecureRandom<span class="token punctuation">.</span>random_number<span class="token punctuation">.</span>to_s<span class="token punctuation">[</span><span class="token number">2.</span><span class="token number">.7</span><span class="token punctuation">]</span>    validation_code <span class="token operator">=</span> <span class="token class-name">ValidationCode</span><span class="token punctuation">.</span><span class="token keyword">new</span> email<span class="token operator">:</span> params<span class="token punctuation">[</span><span class="token symbol">:email</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token symbol">kind</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'sign_in'</span></span><span class="token punctuation">,</span> <span class="token symbol">code</span><span class="token operator">:</span> code    <span class="token keyword">if</span> validation_code<span class="token punctuation">.</span>save      head <span class="token number">200</span>    <span class="token keyword">else</span>      reder json<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token symbol">errors</span><span class="token operator">:</span> validation_code<span class="token punctuation">.</span>errors<span class="token punctuation">}</span>    <span class="token keyword">end</span>  <span class="token keyword">end</span><span class="token keyword">end</span><span class="token comment"># app/models/validation_code.rb</span><span class="token keyword">class</span> <span class="token class-name">ValidationCode</span> <span class="token operator">&lt;</span> ApplicationRecord    has_secure_token <span class="token symbol">:code</span><span class="token punctuation">,</span> <span class="token symbol">length</span><span class="token operator">:</span> <span class="token number">24</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>Ctrl + P</code> æœç´¢ <code>schema.rb</code> å¯ä»¥æŸ¥çœ‹æœ‰æ•°æ®è¡¨å“ªäº›å­—æ®µ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rails </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git æ‹‰å–æŒ‡å®šç‰ˆæœ¬</title>
      <link href="/2024/05/06/git-la-qu-zhi-ding-ban-ben/"/>
      <url>/2024/05/06/git-la-qu-zhi-ding-ban-ben/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> checkout <span class="token operator">&lt;</span>commit-hash<span class="token operator">&gt;</span><span class="token comment"># commit-hash ç‰ˆæœ¬å·</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç›¸å½“äº SVN çš„ <code>update to revision</code></p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®°-å±±ç«¹è®°è´¦åç«¯ï¼ˆäºŒï¼‰</title>
      <link href="/2024/05/06/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-er/"/>
      <url>/2024/05/06/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-er/</url>
      
        <content type="html"><![CDATA[<h1 id="è§£å†³-Docker-ä¾èµ–æŒä¹…åŒ–é—®é¢˜"><a href="#è§£å†³-Docker-ä¾èµ–æŒä¹…åŒ–é—®é¢˜" class="headerlink" title="è§£å†³ Docker ä¾èµ–æŒä¹…åŒ–é—®é¢˜"></a>è§£å†³ Docker ä¾èµ–æŒä¹…åŒ–é—®é¢˜</h1><ul><li><p>å“ªäº›ä¾èµ–æ²¡æœ‰æŒä¹…åŒ–ï¼Ÿ<br>ruby çš„ gems æ²¡æœ‰æŒä¹…åŒ–<br>archlinux çš„ postgresql-libs æ²¡æœ‰æŒä¹…åŒ–</p></li><li><p>å¦‚ä½•è§£å†³<br>ä½¿ç”¨ mount å‚æ•°å’Œ Dockerfile çš„ RUN æŒ‡ä»¤æ¥è§£å†³</p><ul><li>ä½¿ç”¨ mount å‚æ•°<br>.devcontainer/devcontainer.json<br>æ·»åŠ  â€œsource=gems,target=/usr/local/rvm/gems,type=volumeâ€,<br>æ³¨æ„å¥å°¾é€—å·ä¹Ÿè¦å†™</li><li>ä½¿ç”¨ RUN æŒ‡ä»¤<br>.devcontainer/Dockerfile<br>æ–‡æœ«æ·»åŠ  RUN yes | pacman -S postgresql-libs</li></ul></li></ul><p>rebuild åè¦é‡æ–°è®¾ç½®å›½å†…é•œåƒ <code>bundle config mirror.https://rubygems.org https://gems.ruby-china.com</code></p><h1 id="REST-é£æ ¼æ˜¯ä»€ä¹ˆ"><a href="#REST-é£æ ¼æ˜¯ä»€ä¹ˆ" class="headerlink" title="REST é£æ ¼æ˜¯ä»€ä¹ˆ"></a>REST é£æ ¼æ˜¯ä»€ä¹ˆ</h1><ul><li><p>çœ‹è§è·¯å¾„å°±çŸ¥é“è¯·æ±‚ä»€ä¹ˆä¸œè¥¿<br>  items - æ•°æ®<br>  tags - æ ‡ç­¾<br>  validation_codes - éªŒè¯ç </p></li><li><p>çœ‹è§åŠ¨è¯å°±çŸ¥é“æ˜¯ä»€ä¹ˆæ“ä½œ<br>  get - è·å–<br>  post - åˆ›å»º<br>  patch - æ›´æ–°<br>  delete - åˆ é™¤</p></li><li><p>çœ‹è§çŠ¶æ€ç å°±çŸ¥é“ç»“æœæ˜¯ä»€ä¹ˆ<br>  200 - æˆåŠŸ<br>  201 - åˆ›å»ºæˆåŠŸ<br>  401 - æœªç™»å½•<br>  402 - éœ€ä»˜è´¹<br>  403 - æ²¡æœ‰æƒé™<br>  404 - æœªæ‰¾åˆ°<br>  412 - ä¸æ»¡è¶³å‰ææ¡ä»¶<br>  422 - æ— æ³•å¤„ç†ï¼Œå‚æ•°æœ‰é—®é¢˜<br>  429 - è¯·æ±‚å¤ªé¢‘ç¹<br>  400 - å…¶ä»–æ‰€æœ‰é”™è¯¯ï¼Œè¯¦ç»†åŸå› å¯ä»¥æ”¾åœ¨ body é‡Œ</p></li></ul><h1 id="APIæ¦‚è¦è®¾è®¡"><a href="#APIæ¦‚è¦è®¾è®¡" class="headerlink" title="APIæ¦‚è¦è®¾è®¡"></a>APIæ¦‚è¦è®¾è®¡</h1><p>è§è¯¾ä»¶</p><h1 id="è·¯ç”±ä¸åˆ†é¡µ"><a href="#è·¯ç”±ä¸åˆ†é¡µ" class="headerlink" title="è·¯ç”±ä¸åˆ†é¡µ"></a>è·¯ç”±ä¸åˆ†é¡µ</h1><h2 id="ç”Ÿæˆè·¯ç”±"><a href="#ç”Ÿæˆè·¯ç”±" class="headerlink" title="ç”Ÿæˆè·¯ç”±"></a>ç”Ÿæˆè·¯ç”±</h2><p><a href="https://april-cl.github.io/2024/04/30/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-yi/#toc-heading-4">å›é¡¾ä¸€ä¸‹</a>ï¼Œå‰é¢æ˜¯æ‰‹å†™åˆ›å»ºè·¯ç”±ï¼Œç°åœ¨æ¥ä½¿ç”¨ Rails æä¾›çš„<a href="https://ruby-china.github.io/rails-guides/v4.1/routing.html">è·¯ç”±</a>åŠŸèƒ½ï¼ŒRails è·¯ç”±èƒ½è¯†åˆ« URLï¼Œå°†å…¶åˆ†å‘ç»™æ§åˆ¶å™¨çš„åŠ¨ä½œè¿›è¡Œå¤„ç†ï¼Œè¿˜èƒ½ç”Ÿæˆè·¯å¾„å’Œ URLï¼Œæ— éœ€ç›´æ¥åœ¨è§†å›¾ä¸­ç¡¬ç¼–ç å­—ç¬¦ä¸²ã€‚</p><p><a href="https://ruby-china.github.io/rails-guides/v4.1/routing.html#%E6%8E%A7%E5%88%B6%E5%99%A8%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E5%92%8C%E8%B7%AF%E7%94%B1">æ§åˆ¶å™¨å‘½åç©ºé—´å’Œè·¯ç”±</a></p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># config/routes.rb</span>Rails<span class="token punctuation">.</span>application<span class="token punctuation">.</span>routes<span class="token punctuation">.</span>draw <span class="token keyword">do</span>  namespace <span class="token symbol">:api</span> <span class="token keyword">do</span>    namespace <span class="token symbol">:v1</span> <span class="token keyword">do</span>      <span class="token comment"># /api/v1/xxx</span>      resources <span class="token symbol">:validation_codes</span><span class="token punctuation">,</span> <span class="token symbol">only</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token symbol">:create</span><span class="token punctuation">]</span>      <span class="token comment"># only: [:create] åªç”Ÿæˆ create æ¥å£</span>      resources <span class="token symbol">:session</span><span class="token punctuation">,</span> <span class="token symbol">only</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token symbol">:create</span><span class="token punctuation">,</span> <span class="token symbol">:destory</span><span class="token punctuation">]</span>      <span class="token comment"># å•Šå•Šå•Šåšç¬”è®°æ‰å‘ç°è¿™é‡Œ destroy æ‹¼å†™é”™äº†æ‰€ä»¥æ²¡ç”Ÿæˆ ğŸ¤¦ğŸ»â€â™€</span>      resources <span class="token symbol">:me</span><span class="token punctuation">,</span> <span class="token symbol">only</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token symbol">:show</span><span class="token punctuation">]</span>      resources <span class="token symbol">:items</span>      resources <span class="token symbol">:tags</span>      <span class="token keyword">end</span>    <span class="token keyword">end</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œå‘½ä»¤ <code>bin/rails routes</code></p><p>ä¼šç”Ÿæˆ</p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token constant">POST</span>   <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>validation_codes<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>   api<span class="token operator">/</span>v1<span class="token operator">/</span>validation_codes<span class="token comment">#create</span><span class="token constant">POST</span>   <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>session<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>            api<span class="token operator">/</span>v1<span class="token operator">/</span>session<span class="token comment">#create</span><span class="token constant">GET</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>me<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>             api<span class="token regex-literal"><span class="token regex">/v1/me</span></span><span class="token comment">#show</span><span class="token constant">GET</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>              api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token comment">#index</span><span class="token constant">POST</span>   <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>              api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token comment">#create</span><span class="token constant">GET</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>          api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token comment">#show</span><span class="token constant">PATCH</span>  <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>          api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token comment">#update</span><span class="token constant">PUT</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>          api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token comment">#update</span><span class="token constant">DELETE</span> <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>          api<span class="token operator">/</span>v1<span class="token operator">/</span>items<span class="token comment">#destroy</span><span class="token constant">GET</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>               api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token comment">#index</span><span class="token constant">POST</span>   <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>               api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token comment">#create</span><span class="token constant">GET</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>           api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token comment">#show</span><span class="token constant">PATCH</span>  <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>           api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token comment">#update</span><span class="token constant">PUT</span>    <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>           api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token comment">#update</span><span class="token constant">DELETE</span> <span class="token operator">/</span>api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token operator">/</span><span class="token symbol">:id</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token symbol">:format</span><span class="token punctuation">)</span>           api<span class="token operator">/</span>v1<span class="token operator">/</span>tags<span class="token comment">#destroy</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å»ºæ¨¡"><a href="#å»ºæ¨¡" class="headerlink" title="å»ºæ¨¡"></a>å»ºæ¨¡</h2><p>å‚ç…§å‰é¢<a href="https://april-cl.github.io/2024/04/30/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-yi/#toc-heading-3">æ•°æ®åº“å»ºæ¨¡</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»º ValidationCode æ•°æ®è¡¨</span>bin/rails g model ValidationCode email:string kind:string used_at:datetime<span class="token comment"># åˆ›å»º item æ•°æ®è¡¨</span>bin/rails g model item iser_id:integer amount:integer notes:text tags_id:integer happen_at:datetime<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åŒæ­¥åˆ°æ•°æ®åº“ <code>bin/rails db:migrate</code></p><h2 id="åˆ›å»º-controller"><a href="#åˆ›å»º-controller" class="headerlink" title="åˆ›å»º controller"></a>åˆ›å»º controller</h2><p>å‚ç…§å‰é¢<a href="https://april-cl.github.io/2024/04/30/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-yi/#toc-heading-5">åˆ›å»º controller</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bin/rails g controller Api::V1::Validation_codes createbin/rails g controller Api::V1::Items<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å®‰è£…-kaminari"><a href="#å®‰è£…-kaminari" class="headerlink" title="å®‰è£… kaminari"></a>å®‰è£… kaminari</h2><p><a href="https://github.com/kaminari/kaminari">kaminari github</a></p><p>åœ¨ Gemfile é‡Œé¢æ·»åŠ  <code>gem 'kaminari'</code></p><p>ç»ˆç«¯æ‰§è¡Œ <code>bundle</code> </p><p>ç„¶åé‡å¯ <code>bin/rails s</code></p><p>ä¿®æ”¹é…ç½® config/initializers/kaminari_config.rb</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Rails </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®°-å±±ç«¹è®°è´¦åç«¯ï¼ˆä¸€ï¼‰</title>
      <link href="/2024/04/30/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-yi/"/>
      <url>/2024/04/30/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang-hou-duan-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»ºåç«¯é¡¹ç›®"><a href="#åˆ›å»ºåç«¯é¡¹ç›®" class="headerlink" title="åˆ›å»ºåç«¯é¡¹ç›®"></a>åˆ›å»ºåç«¯é¡¹ç›®</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŠŠå›½å¤–åœ°å€æ¢æˆå›½å†…åœ°å€</span>gem sources <span class="token parameter variable">--add</span> https://gems.ruby-china.com/ <span class="token parameter variable">--remove</span> https://rubygems.org/<span class="token comment"># è®¾ç½®å›½å†…é•œåƒ</span>bundle config mirror.https://rubygems.org https://gems.ruby-china.com<span class="token comment"># å®‰è£… Rails</span>gem <span class="token function">install</span> rails <span class="token parameter variable">-v</span> <span class="token number">7.0</span>.2.3<span class="token comment"># å®‰è£… postresql é©±åŠ¨</span>pacman <span class="token parameter variable">-S</span> postgresql-libs<span class="token comment"># è¿›å…¥å·¥ä½œç›®å½•</span><span class="token builtin class-name">cd</span> ~/repos<span class="token comment"># åˆ›å»º Rails é¡¹ç›®ï¼Œ--api åªä½¿ç”¨ api æ¨¡å¼ï¼Œæ•°æ®åº“ä½¿ç”¨ postgresqlï¼Œè·³è¿‡æµ‹è¯•ï¼Œé¡¹ç›®å</span>rails new <span class="token parameter variable">--api</span> <span class="token parameter variable">--database</span><span class="token operator">=</span>postgresql --skip-test mangosteen-1<span class="token comment"># ç”¨ VSCodeæ‰“å¼€ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥æŠŠåŸæ¥çš„çª—å£å…³æ‰äº†</span>code mangosteen-1<span class="token comment"># æ–°å»ºç»ˆç«¯</span>bundle exe rails server<span class="token comment"># æˆ–è€… bin/rails s</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç­‰å¾…ç«¯å£å¯åŠ¨</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">=</span><span class="token operator">&gt;</span> Booting Puma<span class="token operator">=</span><span class="token operator">&gt;</span> Rails <span class="token number">7.0</span>.4.2 application starting <span class="token keyword">in</span> development <span class="token operator">=</span><span class="token operator">&gt;</span> Run <span class="token variable"><span class="token variable">`</span>bin/rails server <span class="token parameter variable">--help</span><span class="token variable">`</span></span> <span class="token keyword">for</span> <span class="token function">more</span> startup optionsPuma starting <span class="token keyword">in</span> single mode<span class="token punctuation">..</span>.* Puma version: <span class="token number">5.6</span>.5 <span class="token punctuation">(</span>ruby <span class="token number">3.0</span>.0-p0<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token string">"Birdie's Version"</span><span class="token punctuation">)</span>*  Min threads: <span class="token number">5</span>*  Max threads: <span class="token number">5</span>*  Environment: development*          PID: <span class="token number">8005</span>* Listening on http://127.0.0.1:3000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµè§ˆå™¨è®¿é—® <code>http://127.0.0.1:3000</code>ï¼Œå‘ç°</p><p><code>ActiveRecord::ConnectionNotEstablished</code></p><p>æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œå› ä¸ºæ²¡æœ‰æ•°æ®åº“ï¼Œç»ˆç«¯è¿è¡Œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span>      <span class="token parameter variable">--name</span> db-for-mangosteen      <span class="token parameter variable">-e</span> <span class="token assign-left variable">POSTGRES_USER</span><span class="token operator">=</span>mangosteen      <span class="token parameter variable">-e</span> <span class="token assign-left variable">POSTGRES_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>      <span class="token parameter variable">-e</span> <span class="token assign-left variable">POSTGRES_DB</span><span class="token operator">=</span>mangosteen_dev      <span class="token parameter variable">-e</span> <span class="token assign-left variable">PGDATA</span><span class="token operator">=</span>/var/lib/postgresql/data/pgdata      <span class="token parameter variable">-v</span> mangosteen-data:/var/lib/postgresql/data      <span class="token parameter variable">--network</span><span class="token operator">=</span>network1      postgres:14<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿®æ”¹ database.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">development</span><span class="token punctuation">:</span>  <span class="token key atrule">&lt;&lt;</span><span class="token punctuation">:</span> <span class="token important">*default</span>  <span class="token key atrule">database</span><span class="token punctuation">:</span> mangosteen_dev  <span class="token key atrule">username</span><span class="token punctuation">:</span> mangosteen  <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>  <span class="token key atrule">host</span><span class="token punctuation">:</span> db<span class="token punctuation">-</span>for<span class="token punctuation">-</span>mangosteen<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†æ¬¡è¿è¡Œ <code>bin/rails s</code> çœ‹åˆ°ä¸‹é¢å°±æˆåŠŸå•¦</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hp8ypnov4zj211y0gv774.jpg" alt="Railså¯åŠ¨æˆåŠŸ.png"></p><h1 id="åŸæ¥-Rails-è¿™ä¹ˆçˆ½"><a href="#åŸæ¥-Rails-è¿™ä¹ˆçˆ½" class="headerlink" title="åŸæ¥ Rails è¿™ä¹ˆçˆ½"></a>åŸæ¥ Rails è¿™ä¹ˆçˆ½</h1><h2 id="æ•°æ®åº“å»ºæ¨¡"><a href="#æ•°æ®åº“å»ºæ¨¡" class="headerlink" title="æ•°æ®åº“å»ºæ¨¡"></a>æ•°æ®åº“å»ºæ¨¡</h2><p>å»ºæ¨¡å·¥å…·ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># bin/rails generate model NAME [field[:type][:index] field[:type][:index]] [options]</span>bin/rails g model user email:string name:string<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¼šåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶</p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># app/models/user.rb</span><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token operator">&lt;</span> ApplicationRecord<span class="token keyword">end</span><span class="token comment"># db/migrate/20230413060421_create_users.rb</span><span class="token keyword">class</span> <span class="token class-name">CreateUsers</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Migration<span class="token punctuation">[</span><span class="token number">7.0</span><span class="token punctuation">]</span>  <span class="token operator">/</span><span class="token operator">/</span> ä¿®æ”¹æ•°æ®åº“  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">change</span></span>    <span class="token operator">/</span><span class="token operator">/</span> åˆ›å»ºä¸€ä¸ª users è¡¨    create_table <span class="token symbol">:users</span> <span class="token keyword">do</span> <span class="token operator">|</span>t<span class="token operator">|</span>      <span class="token operator">/</span><span class="token operator">/</span> t<span class="token punctuation">.</span>type <span class="token symbol">:XXX</span> æ·»åŠ ç±»å‹ä¸º type çš„ <span class="token constant">XXX</span> å­—æ®µ       t<span class="token punctuation">.</span>string <span class="token symbol">:email</span>      t<span class="token punctuation">.</span>string <span class="token symbol">:name</span>      <span class="token operator">/</span><span class="token operator">/</span> t<span class="token punctuation">.</span>timestamps ä¼šç”Ÿæˆ created_atï¼ˆåˆ›å»ºæ—¶é—´ï¼‰å’Œ updated_atï¼ˆæ›´æ–°æ—¶é—´ï¼‰ ä¸¤ä¸ªå­—æ®µ      t<span class="token punctuation">.</span>timestamps    <span class="token keyword">end</span>  <span class="token keyword">end</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://blog.csdn.net/Toml_/article/details/130881482#:~:text=Rails%20%E7%9A%84%E6%A0%87%E5%87%86%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%A6%82%E4%B8%8B%EF%BC%9A%20app%2F%20%23%20%E6%A0%B8%E5%BF%83%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E4%BB%A3%E7%A0%81%20%E2%94%9C%E2%94%80%E2%94%80%20assets%2F%20%23,%E2%94%9C%E2%94%80%E2%94%80%20channels%2F%20%23%20ActionCable%20websockets%20%E9%80%9A%E4%BF%A1%E7%9B%B8%E5%85%B3%E7%9A%84%20channel%20%E6%96%87%E4%BB%B6">Rails ç›®å½•ç»“æ„è¯´æ˜</a></p><p>æ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼ŒåŒæ­¥åˆ°æ•°æ®åº“</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">bin/rails db:migrate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åˆ›å»ºè·¯ç”±"><a href="#åˆ›å»ºè·¯ç”±" class="headerlink" title="åˆ›å»ºè·¯ç”±"></a>åˆ›å»ºè·¯ç”±</h2><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># config/routes.rb</span><span class="token operator">/</span><span class="token operator">/</span> curl http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>users<span class="token operator">/</span><span class="token number">1</span>ï¼Œä¼šè°ƒç”¨ users çš„ show æ–¹æ³•get <span class="token string-literal"><span class="token string">'/users/:id'</span></span><span class="token punctuation">,</span> <span class="token symbol">to</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'users#show'</span></span><span class="token operator">/</span><span class="token operator">/</span> curl <span class="token operator">-</span><span class="token constant">X</span> <span class="token constant">POST</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">:</span><span class="token number">3000</span><span class="token operator">/</span>usersï¼Œä¼šè°ƒç”¨ users çš„ create æ–¹æ³•post <span class="token string-literal"><span class="token string">'/users'</span></span><span class="token punctuation">,</span> <span class="token symbol">to</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">'users#create'</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ›å»º-controller"><a href="#åˆ›å»º-controller" class="headerlink" title="åˆ›å»º controller"></a>åˆ›å»º controller</h2><p>æ§åˆ¶å™¨ç”Ÿæˆå™¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># bin/rails generate controller NAME [action action] [options]</span>bin/rails g controller <span class="token function">users</span> create show<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¼šåˆ›å»ºä¸€ä¸ªå®ç°æ–¹æ³•çš„æ–‡ä»¶</p><pre class="line-numbers language-ruby" data-language="ruby"><code class="language-ruby"><span class="token comment"># app/controllers/users_controller.rb</span><span class="token keyword">class</span> <span class="token class-name">UsersController</span> <span class="token operator">&lt;</span> ApplicationController  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">create</span></span>  <span class="token keyword">end</span>  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">show</span></span>  <span class="token keyword">end</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Rails </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®°-å±±ç«¹è®°è´¦</title>
      <link href="/2024/04/29/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang/"/>
      <url>/2024/04/29/shi-zhan-pian-bi-ji-shan-zhu-ji-zhang/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å‘ç¯å¢ƒä»‹ç»"><a href="#å¼€å‘ç¯å¢ƒä»‹ç»" class="headerlink" title="å¼€å‘ç¯å¢ƒä»‹ç»"></a>å¼€å‘ç¯å¢ƒä»‹ç»</h1><ol><li><p>å®‰è£… <a href="https://www.docker.com/products/docker-desktop/">Docker</a> å®¢æˆ·ç«¯ã€ä¸€ä¸ªå°æ’æ›²ï¼Œå®‰è£…å®Œé‡å¯åç¬”è®°æœ¬å±…ç„¶å‡ºç°â€œå¤±è”â€ï¼ˆå§‹ç»ˆè¿ä¸ä¸Šç½‘ç»œï¼ŒWLANé€‚é…å™¨å¤±è¸ªäº†ï¼‰ã€é™·å…¥â€œå¼€ç«¯â€å¾ªç¯ï¼ˆæ— æ³•å…³æœºä¸€ç›´åœ¨é‡å¯ï¼‰å¥‡è‘©ç°è±¡ï¼Œå½“æ—¶æ˜¯åœ¨ BISO æŠŠ Hyper-V å…³äº†ï¼Œè®¾å¤‡ç®¡ç†å™¨-&gt;ç½‘ç»œé€‚é…å™¨ï¼Œæ›´æ–°é©±åŠ¨è§£å†³äº†â€œå¤±è”â€ï¼Œè®¾ç½®-&gt;ç”µæºå’Œç¡çœ -&gt;å…¶ä»–ç”µæºè®¾ç½®-&gt;å…³æœºè®¾ç½®ï¼Œå–æ¶ˆæ‰å¯ç”¨å¿«é€Ÿå¯åŠ¨å‰é¢çš„âˆšè§£å†³äº†â€œå¼€ç«¯â€å¾ªç¯ã€‘</p></li><li><p>å¼€å¯ WSL2 åŠŸèƒ½ï¼ˆ<code>wsl --list --verbose</code> æŸ¥çœ‹æ˜¯å¦å¼€å¯ï¼‰ï¼Œ<a href="https://segmentfault.com/a/1190000041078669">Win10 å®‰è£… Docker Desktop ( åŸºäºWSL2ï¼ŒWSL vs Hyper-V)</a></p></li><li><p>ç»™ Docker åŠ é€Ÿ</p></li></ol><p>Docker å®¢æˆ·ç«¯è®¾ç½®-&gt;Docker Engine</p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"registry-mirrors"</span><span class="token operator">:</span> <span class="token punctuation">[</span>    <span class="token string">"https://ustc-edu-cn.mirror.aliyuncs.com"</span><span class="token punctuation">,</span>    <span class="token string">"https://hub-mirror.c.163.com"</span><span class="token punctuation">,</span>    <span class="token string">"https://mirror.baidubce.com"</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li><p>VSCode å®‰è£…æ’ä»¶ <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers">Dev Containers</a></p></li><li><p>åœ¨ VSCode ä¸­æ‰“å¼€ <a href="https://github.com/FrankFang/oh-my-env-1">oh-my-env</a>ï¼ŒæŒ‰ä¸‹ <code>Ctrl + Shift + P</code>ï¼Œè¾“å…¥ <code>reopen in container</code>ï¼Œå›è½¦ç­‰å¾…ç‰‡åˆ»è¿›å…¥å¼€å‘ç¯å¢ƒï¼ˆèµ„æºç®¡ç†å™¨ç›®å½•åæ—è¾¹ä¼šæ˜¾ç¤º<code>[å¼€å‘å®¹å™¨:OHMYENV]</code>æˆ–è€…<code>[Dev Container:OHMYENV]</code>ï¼‰</p></li><li><p>å‘½ä»¤è¡Œè¿è¡Œ <code>docker network create network1</code></p></li><li><p>ä½¿ç”¨ ruby3 å’Œè‡ªå¸¦çš„ node</p></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rvm use <span class="token number">3</span>nvm use system<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="7"><li><a href="https://april-cl.github.io/2023/02/25/docker-pei-zhi-git-zhang-hao/">é…ç½® github ssh</a></li></ol><h1 id="å…³äº-oh-my-env"><a href="#å…³äº-oh-my-env" class="headerlink" title="å…³äº oh-my-env"></a>å…³äº oh-my-env</h1><pre class="line-numbers language-none"><code class="language-none">.â”œâ”€.devcontainerâ”œâ”€.vscodeâ”œâ”€mangosteen_deployâ””â”€temp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªç›®å½•æ˜¯å†…å¤–å…±äº«çš„, windows å’Œ Linux éƒ½å¯ä»¥è®¿é—®ï¼Œæ€§èƒ½ä¸€èˆ¬ï¼Œtemp ç”¨ä½œä¸­è½¬ç«™</p><p>è¿™é‡Œæä¾›äº† ~/roepos ç›®å½•ï¼Œè¿™æ˜¯ Linux ä¸“äº«çš„ï¼Œæ€§èƒ½è¾ƒå¥½ï¼Œé»˜è®¤åœ¨è¿™ä¸ªç›®å½•å·¥ä½œ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /root/repos<span class="token comment"># or</span><span class="token comment"># cd ~/repos</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç¼–ç¨‹ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>äººç”Ÿæ˜¯æ—·é‡ï¼Œä¸æ˜¯è½¨é“</title>
      <link href="/2024/04/16/ren-sheng-shi-kuang-ye-bu-shi-gui-dao/"/>
      <url>/2024/04/16/ren-sheng-shi-kuang-ye-bu-shi-gui-dao/</url>
      
        <content type="html"><![CDATA[<p>ä¸Šæ˜ŸæœŸä¸€å£æ°”è¯»äº†ã€ŠES6çš„æ ‡å‡†å…¥é—¨ ç¬¬2ç‰ˆã€‹ï¼Œå½“æ—¶è¯»å®Œæ˜¯æƒ³å†™ä¸ªç¬”è®°çš„ï¼Œå†™çš„è¿‡ç¨‹åˆæ¶Œç°äº†ä¸€äº›æ—çš„æƒ³æ³•ï¼Œè€Œååˆä¸€å¤´æ‰å…¥ã€Šæ·±å…¥æµ…å‡ºNode.jsã€‹çš„é˜…è¯»ä¸­ï¼Œé‚£äº›æƒ³æ³•ä¹Ÿå°±ä¸€ç›´èººåœ¨è‰ç¨¿ä¸­äº†ã€‚ä»Šå¤©æœ¬æ˜¯è¦åšç‚¹é¢˜è¡¥è¡¥è„‘çš„ï¼Œæ—©ä¸ŠèŠ±è´¹äº†è¾ƒå¤šæ—¶é—´ä¹°èœå¤‡èœï¼Œè¿˜æœ‰ä¸€äº›æ‚ä¸ƒæ‚å…«çš„äº‹æƒ…è¦åšï¼Œå‰©ä¸‹ç‚¹æ—¶é—´è¾ƒé›¶ç¢ï¼Œé‚£å°±æŠŠè‰ç¨¿ç¿»å‡ºæ¥å†™å®Œï¼Œé©¬ä¸Šè¸å…¥è€Œç«‹ä¹‹å¹´ï¼Œæƒå½“å†™ä¸ªåºå§ï¼ˆè™½ç„¶å¯¹äº30å²å¥³å­ç§°å‘¼åŠè€å¾å¨˜å¹¶éè´¬ä¹‰ï¼Œå¯æ˜¯æˆ‘æ¥å—ä¸äº†ï¼Œå¯èƒ½å¿ƒæ™ºä¸å¤Ÿå§ğŸ˜ºï¼‰</p><p>æˆ‘ä¸€ç›´ä¸å¥½å†™ä½œï¼Œå°¤è®°å¾—è¯»ä¹¦æ—¶æœŸä½œæ–‡æ€»æ˜¯è¦æ‹–åˆ° deadline æ‰ä¼šåŠ¨ç¬”ï¼Œå½“æ—¶å¯èƒ½è®¤ä¸ºçµæ„Ÿæ˜¯é€¼å‡ºæ¥çš„ï¼Œç°åœ¨è§‰å¾—ä¸è¿‡æ˜¯ç§¯ç´¯ä¸å¤Ÿä¸°å¯ŒåŠ ä¹‹æˆ‘åˆæ˜¯ä¸ªâ€˜é’æ„ŸåŠ›å¼ºâ€™çš„äººï¼Œè®°ä¸ä½äº‹ï¼Œè€Œå‘½é¢˜ä½œæ–‡æˆ‘æœ€ä¸ºè®¨åŒï¼Œæ–‡ç« æœ€åçš„èµ°å‘æ€»èƒ½ä¸é¢˜ç›®ç›¸å·®åä¸‡å…«åƒé‡Œã€‚</p><p>ä» 2020 å¹´é‡æ–°å­¦ä¹ å‰ç«¯ï¼Œæˆ‘å¼€å§‹åŸ¹å…»è‡ªå·±ç”¨æ–‡å­—è®°å½•çš„ä¹ æƒ¯ï¼Œå¤§å¤šæ•°æ˜¯å·¥ä½œé—®é¢˜çš„è®°å½•ï¼Œè¿™äº›è®°å½•ä¹Ÿç¡®å®åœ¨åé¢å·¥ä½œä¸­ç»™æˆ‘å¸¦æ¥äº†ä¾¿åˆ©ï¼Œæˆ‘å¯èƒ½ä¼šè®°ä¸ä½æŸäº›é—®é¢˜çš„è§£æ³•ï¼Œä½†åªè¦æˆ‘è®°å½•è¿‡çš„é—®é¢˜æˆ‘ä¸€èˆ¬æ€»èƒ½è®°ä½ï¼Œä¸‹æ¬¡å“ªæ€•å¿˜è®°äº†æ€ä¹ˆè§£å†³ä¹Ÿèƒ½é€šè¿‡é—®é¢˜è®°å½•æ‰¾å›å½“æ—¶çš„è®°å¿†ï¼ˆå¤§æ¦‚æ˜¯ key æ¯” value å¥½è®°ğŸ‘€ï¼‰ã€‚</p><p>å‰æœŸå‡ºäºä¹ æƒ¯å…»æˆï¼Œæ€»ä¼šå¼ºè¿«è‡ªå·±æ‰¾çŸ¥è¯†ç‚¹è¿›è¡Œè®ºè¿°æ€»ç»“ï¼Œè€Œå½“æ—¶è‡ªå·±çš„ç»éªŒè¾ƒå°‘ï¼Œè½¬è¡Œçš„è¿«åˆ‡å¿ƒç†ä½¿å¾—æˆ‘éš¾ä»¥é™ä¸‹å¿ƒåœ°å»é˜…è¯»è¡Œä¸šå¤§ä½¬æˆ–å›¢é˜Ÿç¼–æ’°çš„ä¹¦ï¼Œå¯¹äºä¸æ‡‚çš„ç‚¹æ€»æ˜¯ä»¥ç½‘ä¸ŠèµåŒé‡å¤šæˆ–å¾ˆå¤šäººè¯´çš„ä¸ºå‡†ï¼Œå¤šå°‘æœ‰äº›äººäº‘äº¦äº‘äº†ï¼Œè·å–çš„çŸ¥è¯†ä¹Ÿæ¯”è¾ƒé›¶æ•£ï¼Œè‹¥æ˜¯ä»¥ä¸æ‡‚çš„ç‚¹æ•£å‘å…³è”çš„çŸ¥è¯†æ›´æ˜¯è¶…è„±ç†è§£ï¼Œå°±åƒä¸¤åœ°æœ¬æœ‰æ¡¥æ¢äº¤é€šï¼Œä½†å› ä¸ºæˆ‘ä¸å¾—å…¶æ³•ï¼Œæ€»æ˜¯æ˜ç™½ä¸äº†å®ƒä»¬ä¹‹é—´çš„è”ç³»ã€‚æœ€è¿‘æ²‰ä¸‹å¿ƒè¯»ä¹¦ï¼ŒæƒŠå–œçš„å‘ç°ä½œè€…çš„ç¼–å†™æ€»ç»“å¦‚åŒç«ç‚¬èˆ¬é©±æ•£æˆ‘çš„æ€ç»´è¿·éšœï¼Œå› ä¸ºæœ‰äº†å‰è¾ˆçš„å¾ªå¾ªå–„è¯±ï¼ŒåŸæœ¬éš¾ä»¥å…³è”ç†è§£çš„çŸ¥è¯†ä¹Ÿå¦‚åŒèœ˜è››ç½‘èˆ¬ä¸²è¡Œèµ·æ¥ã€‚å½“ç„¶ï¼Œè¿™æˆ–è®¸ä¹Ÿå¾—ç›Šäºè¿™å‡ å¹´çš„å·¥ä½œç»éªŒï¼Œä½¿å¾—å½“ä¸€äº›ç•¥å¾®å¤æ‚çš„åœºæ™¯èƒ½å¤Ÿåœ¨è„‘æµ·ä¸­æµ®ç°ä»¥åŠ©ç†è§£ã€‚</p><p>ä¸ºä»€ä¹ˆè¯´æ˜¯é‡æ–°å­¦ä¹ å‰ç«¯å‘¢ï¼Œå…¶å®åœ¨ 2015 å¹´å¤§ä¸‰æ—¶æˆ‘å·²ç»å¼€å§‹è‡ªå­¦å‰ç«¯ï¼Œå¤§äºŒæ—¶æœ‰ä¸€é—¨æŒ‚ç§‘äº†ï¼Œå½“æ—¶å¿ƒé‡Œå¾ˆä¸æœæ°”ï¼Œæš—æš—å‘èª“è¦åœ¨å¤§ä¸‰æ‹¿åˆ°å¥–å­¦é‡‘è¯æ˜è‡ªå·±ï¼Œæ‰€ä»¥å¤§ä¸‰ä¸€å¹´ä¸ºäº†å­¦åˆ†å‚åŠ äº†å¾ˆå¤šæ´»åŠ¨ï¼Œè¿˜é€‰ä¿®äº†å¹¶ä¸ç†Ÿæ‚‰çš„è¯¾ç¨‹ï¼Œä¹Ÿæ˜¯åœ¨è¿™å½“ä¸­è®¤è¯†å¹¶å–œæ¬¢ä¸Šå‰ç«¯å¼€å‘ï¼Œæœç„¶å…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆï¼Œé‚£ä¸€å¹´æˆ‘æ€»æ˜¯æœ‰äº‹æ²¡äº‹å¾€å›¾ä¹¦é¦†è·‘ï¼Œä»æ·±å…¥æµ…å‡ºç³»åˆ—çœ‹åˆ°çŠ€ç‰›ä¹¦ï¼ŒåŠ ä¸Šä¸åŒå…¶çƒ¦çš„ä¸Šæœºå®è·µï¼Œä¸ä»…æ‰“ä¸‹å‰ç«¯åŸºç¡€ï¼Œè¿˜é¡ºå¸¦è¾…åŠ©æå‡äº†å¯¹ä¸“ä¸šè¯¾ç¨‹çš„ç†è§£èƒ½åŠ›ï¼Œæœ€åæ‹¿äº†ä¸€ä¸ªä¸‰ç­‰å¥–å­¦é‡‘ã€‚</p><p>è¯´å›çœ‹ä¹¦ï¼Œæ˜¨å¤©è¯»å®Œã€Šæˆ‘çš„å¤–å©†ï¼Œä»ä¸å†…è€—ã€‹ï¼Œé‡Œé¢çš„å¾ˆå¤šè§‚ç‚¹æˆ‘å¾ˆæ˜¯å—ç”¨ã€‚</p><blockquote><p>ä¸è¦ç”¨åƒè‹¦è·å¾—é“å¾·ä¸Šçš„å´‡é«˜æ„Ÿå’Œèµ„æ ¼æ„Ÿ</p></blockquote><p>è¿˜åœ¨åæœˆå­çš„æ—¶å€™ï¼Œå› ä¸ºæ˜¯æ¯ä¹³å–‚å…»ï¼Œè€å…¬æè®®è¯´æ™šä¸Šä»–é€šå®µä¸ç¡ï¼Œå¨ƒé†’äº†å°±å«æˆ‘æˆ–è€…æ˜¯å¥¶ç²‰ä»£æ›¿ï¼Œå‡ºäºç†¬å¤œä¼¤èº«çš„è€ƒè™‘ï¼Œæˆ‘å¸Œæœ›è€å…¬èƒ½æœ‰æ›´å¤šç²¾åŠ›åº”å¯¹ç™½å¤©çš„å·¥ä½œï¼Œè€Œä¸”æˆ‘è‡ªèº«ç¡çœ æµ…ï¼Œå¨ƒä¸€å“¼æˆ‘å°±é†’äº†ï¼Œå½“æ—¶æˆ‘å¹¶æ²¡æœ‰åŒæ„è¿™æ ·åšï¼Œè‡ªç„¶æœˆå­é‡Œæ²¡æœ‰ä¼‘æ¯å¥½ï¼Œäººä¹Ÿè¶Šå‘çš„è™šä¸”æŠ‘éƒã€‚è€Œæˆ‘å§‹ç»ˆè‡ªæˆ‘æ„ŸåŠ¨äºè‡ªå·±çš„ç‰ºç‰²ï¼Œåœ¨åé¢çš„æ—¥å­é‡Œï¼Œæ¯æ¬¡å› ä¸ºå¸¦å¨ƒçš„é—®é¢˜å‘ç”Ÿäº‰åµï¼Œæˆ‘æ€»ä¼šå› ä¸ºè¿™æ ·çš„äº‹è®¤å®šè‡ªå·²å¥‰çŒ®å·¨å¤§è€Œå¦å®šè¿™ä¸€è·¯è€å…¬çš„ä»˜å‡ºã€‚ç°åœ¨æƒ³æ¥å¦‚æœå½“åˆä¸æ˜¯é‚£ä¹ˆæ‹§å·´ï¼Œä¼šæ˜¯æ€æ ·å‘¢</p><p>å¤§å­¦æ¯•ä¸šæ—¶æˆ‘æ„å‘æ˜¯åšä¸ªç¨‹åºå‘˜ï¼Œå‡ ç•ªç¢°å£è¿«äºå…ˆå°±ä¸šç§¯ç´¯èµ„é‡‘çš„æƒ³æ³•ï¼Œå½“æ—¶åœ¨ä¸€ä¸ªäº²æˆšçš„ä»‹ç»ä¸‹æ¥åˆ°ä»“åº“åšç±»ä¼¼è´¢ä¼šåŠ©ç†çš„å·¥ä½œã€‚ç†ç§‘å‡ºèº«æ€ç»´è¿˜ç®—ä¸é”™ï¼Œæ‰€ä»¥é‚£äº›å¤æ‚éš¾å¤„ç†çš„æ•°æ®å¯¹æˆ‘è€Œè¨€è¿˜èƒ½å¯¹ä»˜ï¼Œä¸è¿‡æ¯•ç«Ÿä¸æ˜¯ä¸“ç§‘å‡ºèº«ï¼Œæ‰€ä»¥åœ¨ç©ºæš‡æ—¶é—´æˆ‘ä¼šçœ‹ä¹¦å­¦ä¹ ä¸€äº›ä¾¿æ·æŠ€å·§æå‡æ•ˆç‡ã€‚å½“æ—¶ä¸€ä¸ªåŒäº‹ç¬‘è¯´æˆ‘éƒ½æ¯•ä¸šäº†è¿˜è¦çœ‹ä¹¦ï¼Œæˆ‘ä¸ä»¥ä¸ºç„¶ï¼Œä¸”ä¸è¯´æˆ‘çœ‹çš„ä¹¦ç¡®å®äºå½“æ—¶å·¥ä½œæœ‰æ‰€è£¨ç›Šï¼Œå°±ç®—æˆ‘çœ‹çš„åªæ˜¯ä¸€éƒ¨å°è¯´ï¼Œæˆ‘ä»ä¹¦ä¸­ä½“ä¼šåˆ°äº†å¦å¤–ä¸€ç§äººç”Ÿï¼Œä»è€Œå¯¹è‡ªå·±æœªæ¥çš„è§„åˆ’æ›´æ¸…æ™°ä¸€åˆ†ï¼Œé‚£äºå½“ä¸‹è€Œè¨€çš„æˆ‘ä¾¿æ˜¯æœ‰ç”¨çš„ã€‚æ›´è€…ï¼Œæˆ‘ä»ä¸è®¤ä¸ºå­¦ä¹ ä»…é™äºå­¦æ ¡ï¼Œæ¯•ç«Ÿäººé™…äº¤å¾€ã€ç« ç¨‹åŠç†ç­‰æ›´å¤šæ˜¯åœ¨ç¤¾ä¼šå®è·µä¸­ä¹ å¾—çš„ã€‚</p><p>ç¬¬ä¸€ä»½å·¥ä½œä¸ºæˆ‘ç§¯ç´¯äº†ä¸€ç‚¹èµ„é‡‘ï¼Œå°½ç®¡è¿™åœ¨è½¬è¡Œå‰çš„ç©ºçª—æœŸå·²ç»æ¶ˆè€—æ— å‡ ï¼Œä½†æ¯æ¯å›æƒ³èµ·æ¥æˆ‘æ€»è¦æ„Ÿæ¿€è‡ªå·±å½“æ—¶è¿™ä»½å›ºæ‰§ã€‚ä¹‹å‰çš„å·¥ä½œæ— é‡å¤§å˜æ•…åº”è¯¥å¯ä»¥è®©æˆ‘å®‰å®‰ç¨³ç¨³å¾…ä¸Šåå‡ äºŒåå¹´ï¼Œä½†æ¸©æ°´ç…®é’è›™æœ€æ˜¯æ¶ˆç£¨äººçš„æ„å¿—ï¼Œä¸€çœ¼æœ›åˆ°å¤´çš„æ—¥å­å§‹ç»ˆè®©æˆ‘æä¸èµ·æ¿€æƒ…ã€‚åæ¥ç»“å©šç”Ÿå­ï¼Œæœ‰æ®µæ—¶é—´ä¸¥é‡æ„Ÿè§‰è®°å¿†åŠ›è¡°é€€ï¼Œåˆå§‹ç»ˆå¯¹ç¨‹åºå‘˜å¿ƒæœ‰æ‰§å¿µï¼Œäºæ˜¯æˆ‘ä¹°äº†ä¸€äº›å‰ç«¯æ–¹é¢çš„è¯¾ç¨‹ï¼Œå¾—ç›ŠäºåšæŒå­¦ä¹ çš„ä¹ æƒ¯ï¼Œç”Ÿé”ˆèˆ¬çš„å¤§è„‘åœ¨ä¸€æ¬¡æ¬¡æ€ç»´è®­ç»ƒä¸­å¼€å§‹æ…¢æ…¢è½¬åŠ¨èµ·æ¥ã€‚å…¶å®å½“æ—¶çš„æƒ³æ³•ä»…ä»…æ˜¯æƒ³è®©è‡ªå·±è„‘å­æ´»è·ƒèµ·æ¥ï¼Œå¹¶æ²¡æœ‰å¤šå¤§çš„å†³å¿ƒèƒ½å¤Ÿåƒä¸Šè¿™ç¢—é¥­ï¼Œåé¢å­¦çš„å¤šäº†ï¼Œè€Œä¸”æœ‰äººæŒ‡è·¯ï¼Œæ¥è§¦åˆ°çš„ä¾‹å­å¤šäº†ï¼Œæ‰ç‡ƒèµ·æ„å¿—ï¼šæ—¢ç„¶åˆ«äººå¯ä»¥ï¼Œé‚£æˆ‘ä¹Ÿè¡Œï¼ç°åœ¨å›æƒ³èµ·æ¥ï¼Œåº†å¹¸é‚£æ®µæ—¥å­çš„åšæŒï¼Œå¥¶å¨ƒå…¥ç¡ååˆæŒ‘ç¯å¤œè¯»ï¼Œç¬¬äºŒå¤©é¡¶ç€ä¸ªç†ŠçŒ«çœ¼ä¸Šç­ï¼Œä»¥åŠåé¢èº«å­åƒä¸æ¶ˆè£¸è¾å¸¦å¨ƒå­¦ä¹ ï¼Œæ‰èƒ½ä»æœˆä¼‘ä¸€å¤©åˆ°æœˆä¼‘å…­å¤©ï¼ˆç°åœ¨çš„æˆ‘è¦æœç€æ›´å¤§çš„ç›®æ ‡å‰è¿›ğŸ’ªï¼‰</p><p>è½¬ä¸šä¸ç†Ÿæ‚‰çš„é¢†åŸŸï¼Œæœ‰äººå‹‡å¾€æ— ç•ï¼Œæœ‰äººå´ååˆ†å¿Œæƒ®ï¼Œæˆ‘ä¾¿æ˜¯åè€…ã€‚å…¶å®ç°åœ¨æƒ³æ¥ï¼Œè¿™ä»½å¿Œæƒ®æ˜¯ä¸å¿…è¦çš„ï¼Œç¼šæ‰‹ç¼šè„šã€‚åœ¨æ²¡æ‰¾åˆ°ç¬¬äºŒä»½å·¥ä½œå‰ï¼Œæˆ‘æ€»æ˜¯ç»™è‡ªå·±å¿ƒç†è®¾é™ï¼Œå¯¹è‡ªå·±çš„å­¦ä¹ æˆæœä¸è‡ªä¿¡ï¼Œç”šè‡³å¸¦å…¥åˆ«äººçš„è§†è§’è½»è§†è‡ªå·±è½¬è¡Œçš„æƒ³æ³•ã€‚è€Œåœ¨æˆ‘å…¥èŒåï¼Œé€šè¿‡å¯¹å‰äººçš„è§‚æ‘©ï¼Œæˆ‘æ‰æ„è¯†åˆ°æˆ‘è™½ä¸è‡³ä¼˜å¼‚ä¹Ÿå¹¶ä¸å·®åŠ²ã€‚</p><p>ä»¥å‰æˆ‘å–œæ¬¢æ‰“æ¸¸æˆã€å–œæ¬¢è´­ç‰©ï¼Œå±å¤§ç‚¹äº‹ä¹Ÿè¦å‘ä¸ªåœˆå›¾ä¸ªçƒ­é—¹ï¼Œè€Œç°åœ¨çš„æˆ‘æ€»ä¹ æƒ¯ç‚¹å¼€è¯»ä¹¦è½¯ä»¶æ›¿æ¢æ›¾ç»ç€è¿·çš„çŸ­è§†é¢‘APPï¼Œå¯ä»¥åŠå¹´ä¸æ‰“å¼€æ·˜å®ï¼Œæ–°æ‰‹æœºä»æ¥æ²¡å®‰è£…è¿‡æ¸¸æˆï¼Œæœ‹å‹åœˆæ—©å·²å…³é—­ï¼Œå¯è§å–œæ¬¢ä¹Ÿä¸æ˜¯ä¸€æˆä¸å˜ï¼Œç”šè‡³å¯ä»¥é€†å‘å‘å±•ã€‚ä½†æˆ‘ä¹Ÿæ¬£äºæ¥å—è¿™ç§è½¬å˜ï¼Œä¸æˆ‘è€Œè¨€è¿™æ˜¯ä¸€ç§æˆé•¿ã€‚ç°åœ¨çš„æˆ‘çœ‹å½“æ—¶çš„çˆ±å¥½ä¼šè§‰å¾—æµªè´¹æ—¶é—´ï¼Œä½†å½“æ—¶çš„æˆ‘è‚¯å®šå› ä¸ºèƒ½åšå–œæ¬¢çš„äº‹æƒ…è€Œå¼€å¿ƒçš„ï¼Œæ—¢ç„¶å·²ç»äº«å—è¿‡äº†çš„æ—¶å…‰ï¼Œå›å¿†é‡Œå°±ä¸è¯¥å¸¦å…¥ä¸Šå¸è§†è§’å¹æ¯›æ±‚ç–µï¼Œæ¯•ç«Ÿæˆ‘ä¸èƒ½ä¿è¯å››åå²çš„æˆ‘å†æ¥çœ‹ç°åœ¨çš„çˆ±å¥½æ˜¯å¦æœ‰äº›æ²‰é—·ï¼Œæ‰€ä»¥æ´»åœ¨å½“ä¸‹æœ€å¥½äº†ã€‚</p><p>å†™åˆ°è¿™ï¼Œå…¶å®å’Œæ ‡é¢˜æ²¡ä»€ä¹ˆå…³ç³»ï¼Œæ ‡é¢˜æ˜¯æˆ‘åœ¨å†™çš„æ—¶å€™åˆšå¥½æƒ³åˆ°çš„ä¸€å¥è¯ï¼Œè€Œä¸”å‰é¢è¯´äº†ï¼Œæˆ‘å†™æ–‡ä¼šè·‘é¢˜å§ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšæƒ³ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³ git push æŠ¥é”™è¶…æ—¶</title>
      <link href="/2024/04/05/jie-jue-git-push-bao-cuo-chao-shi/"/>
      <url>/2024/04/05/jie-jue-git-push-bao-cuo-chao-shi/</url>
      
        <content type="html"><![CDATA[<p>é—®é¢˜ï¼š<code>git push</code> ä¸€ç›´å¤±è´¥</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Failed to connect to github.com port <span class="token number">443</span> after <span class="token number">21079</span> ms: Couldn't connect to server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è§£å†³ï¼šå»æ‰å…¨å±€ git ä»£ç†</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> http.proxy<span class="token function">git</span> config <span class="token parameter variable">--global</span> <span class="token parameter variable">--unset</span> https.proxy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode é…ç½®å¤‡å¿˜å½•</title>
      <link href="/2024/04/03/vscode-pei-zhi-bei-wang-lu/"/>
      <url>/2024/04/03/vscode-pei-zhi-bei-wang-lu/</url>
      
        <content type="html"><![CDATA[<h1 id="é…åˆ-Cmder"><a href="#é…åˆ-Cmder" class="headerlink" title="é…åˆ Cmder"></a>é…åˆ Cmder</h1><ol><li><p><code>Ctrl + Shift + P</code> æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ <code>settings.json</code> å›è½¦ï¼Œä¼šæ‰“å¼€ä¸€ä¸ªé…ç½®æ–‡ä»¶</p></li><li><p>ä¿®æ”¹ git.path å’Œ pathï¼Œè¿™é‡Œåœ°å€è¦è®¾ç½®æˆè‡ªå·±çš„å®‰è£…è·¯å¾„ï¼Œç”¨æœç´¢ç¥å™¨ everything è¾“å…¥ git.exe</p></li></ol><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"git.path"</span><span class="token operator">:</span> <span class="token string">"D:\\cmder\\vendor\\git-for-windows\\bin\\bash.exe"</span><span class="token punctuation">,</span><span class="token property">"terminal.integrated.profiles.windows"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"bash"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"D:\\cmder\\vendor\\git-for-windows\\bin\\bash.exe"</span><span class="token punctuation">,</span>        <span class="token property">"args"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>é‡å¯ä¸‹ VSCode </li></ol><blockquote><p>ä¸€ç‚¹ç¢ç¢å¿µ<br>    æ‰˜â€™å¤§å§¨å¦ˆâ€™çš„ç¦ï¼Œç—…äº†ä¸€ä¸ªæ˜ŸæœŸï¼ŒåºŠä¸Šèººäº†ä¸¤å¤©ï¼Œä»Šå¤©å‹‰å¼ºèƒ½èµ·æ¥ç ç å­—äº†ï¼Œä¸è¿‡è¿™å‡ å¤©å€’æ˜¯å¾—äº†ç©ºçœ‹å®Œä¸€æœ¬ã€Šé‡‘ç²‰ä¸–å®¶ã€‹ï¼Œå˜¿å˜¿~~~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªå®šä¹‰EChartså›¾è¡¨-è®¾å¤‡è¿è¡ŒçŠ¶æ€å›¾</title>
      <link href="/2024/03/22/zi-ding-yi-echarts-tu-biao-she-bei-yun-xing-zhuang-tai-tu/"/>
      <url>/2024/03/22/zi-ding-yi-echarts-tu-biao-she-bei-yun-xing-zhuang-tai-tu/</url>
      
        <content type="html"><![CDATA[<p>ç¿»ç¬”è®°çœ‹åˆ°ä¸¤å¹´å‰ä¸€ä¸ªå½“æ—¶è€—è´¹æŒºé•¿æ—¶é—´çš„çœ‹æ¿é¡µé¢ï¼Œç°åœ¨çœ‹æ¥å†™çš„æœ‰äº›å¼±æ™ºï¼Œä¸è¿‡ä¹Ÿä¾§é¢è¯´æ˜ç›¸è¾ƒäºä¹‹å‰æœ‰æ‰€æˆé•¿å§ï¼ˆè‡³å°‘æˆ‘è§‰å¾—ğŸ¤­ï¼‰</p><h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>ä¸€ä¸ªæœºå°å¯¹åº”ä¸€ä¸ªæŸ±å½¢å›¾ï¼ŒæŸ±å½¢å›¾åæ˜ æœºå°ä»ç™½ç­ï¼ˆå½“å¤©æ—©8ç‚¹åˆ°æ™š8ç‚¹ï¼‰åˆ°å¤œç­ï¼ˆå½“å¤©æ™š8ç‚¹åˆ°æ¬¡æ—¥æ—©8ç‚¹ï¼‰çš„è¿è¡ŒçŠ¶æ€ï¼Œç”¨ä¸åŒé¢œè‰²è¡¨ç¤ºï¼Œæ¯ä¸ªæŸ±å½¢å›¾åé¢è¿˜éœ€è¦æ ‡æ³¨æ”¹æœºå°çš„ç›¸å…³å‚æ•°</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å½“æ—¶é‡åˆ°çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼š</p><ol><li><p>è¿è¡ŒçŠ¶æ€æ˜¯å˜åŒ–çš„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨å¸¸è§„çš„æŸ±çŠ¶å›¾è¡¨ç¤ºï¼Œå®ƒçš„æ•ˆæœç±»ä¼¼äº<a href="https://echarts.apache.org/examples/zh/editor.html?c=bar-y-category-stack">å †å æ¡å½¢å›¾</a></p></li><li><p>æŒ‰ç…§éœ€æ±‚æœºå°åç§°å’Œå‚æ•°åº”è¯¥æ˜¾ç¤ºæˆåŒ Y è½´çš„æ ·å­ï¼Œä½†æ˜¯æœºå°å‚æ•°æœ‰å¤šåˆ—</p></li></ol><h2 id="è§£å†³"><a href="#è§£å†³" class="headerlink" title="è§£å†³"></a>è§£å†³</h2><p>å¯¹äºé—®é¢˜1ï¼Œå½“æ—¶æ°å¥½çœ‹åˆ°å®˜ç½‘æä¾›çš„<a href="https://echarts.apache.org/examples/zh/editor.html?c=custom-profile">æ€§èƒ½åˆ†æå›¾</a>å¾ˆé€‚é…ï¼Œæ‰€ä»¥ç…§ç€æ¨¡æ‹Ÿå‡ºæ¥äº†</p><p>å¯¹äºé—®é¢˜2ï¼Œå½“æ—¶æƒ³åˆ°çš„åŠæ³•æ˜¯æŠŠæ‰€æœ‰å‚æ•°å†™åœ¨åŒä¸€ Y è½´ï¼Œç”¨è½¬ä¹‰å­—ç¬¦ <code>\t</code> æ ¼å¼ï¼ˆç°åœ¨æƒ³æ¥æœ‰ç‚¹è ¢ğŸ¤¦ğŸ»ï¼Œåé¢çŸ¥é“äº†å…¶å® <code>ECharts</code> æ˜¯æ”¯æŒå¤š Y è½´çš„ï¼‰</p><p><code>option</code> é…ç½®å¦‚ä¸‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">tooltip</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">const</span> start <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">&gt;</span> <span class="token number">24</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span>                interval<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">16</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span>            <span class="token keyword">const</span> end <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">9</span> <span class="token operator">&gt;</span> <span class="token number">24</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span>                interval<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">15</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">9</span>            <span class="token keyword">return</span> <span class="token string">'æ—¶é—´æ®µï¼š'</span> <span class="token operator">+</span> start <span class="token operator">+</span> <span class="token string">'æ—¶ - '</span> <span class="token operator">+</span> end <span class="token operator">+</span> <span class="token string">'æ—¶&lt;br/&gt;'</span> <span class="token operator">+</span> params<span class="token punctuation">.</span>marker <span class="token operator">+</span> params<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'ï¼š'</span> <span class="token operator">+</span> Math                <span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>value<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' åˆ†é’Ÿ'</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">grid</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">'120'</span><span class="token punctuation">,</span>        <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token string">'300'</span><span class="token punctuation">,</span>        <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token string">'10'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">xAxis</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">è®¾å¤‡è¿è¡ŒçŠ¶æ€</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>        <span class="token literal-property property">nameLocation</span><span class="token operator">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>        <span class="token literal-property property">nameGap</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>        <span class="token literal-property property">nameTextStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#FFF'</span><span class="token punctuation">,</span>            <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>            <span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token string">'bold'</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>        interval<span class="token punctuation">,</span>        <span class="token literal-property property">max</span><span class="token operator">:</span> interval <span class="token operator">*</span> hours<span class="token punctuation">,</span>        <span class="token literal-property property">axisLabel</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#FFF'</span><span class="token punctuation">,</span>            <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>value <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span> <span class="token operator">&gt;</span> <span class="token number">24</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>value <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">16</span> <span class="token operator">:</span> Math                    <span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>value <span class="token operator">/</span> interval<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">axisPointer</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">triggerTooltip</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>            <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">splitLine</span><span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">yAxis</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æœºå°ç¼–å·  \näº§å“ç¼–å·  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">nameLocation</span><span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">,</span>            <span class="token literal-property property">nameGap</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>            <span class="token literal-property property">nameTextStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">verticalAlign</span><span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>                <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">'right'</span><span class="token punctuation">,</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#FFF'</span><span class="token punctuation">,</span>                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>                <span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token string">'bold'</span><span class="token punctuation">,</span>                <span class="token literal-property property">lineHeight</span><span class="token operator">:</span> <span class="token number">24</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token literal-property property">inverse</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token literal-property property">axisLine</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token literal-property property">axisTick</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">axisLabel</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#FFF'</span><span class="token punctuation">,</span>                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> window<span class="token punctuation">.</span>screen<span class="token punctuation">.</span>availHeight <span class="token operator">&gt;</span> <span class="token number">1000</span> <span class="token operator">?</span> <span class="token number">16</span> <span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>                <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'\n'</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token literal-property property">data</span><span class="token operator">:</span> machineList<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span>            <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">å¹³å‡æˆå‹å‘¨æœŸ\t\t\tåˆæ¨¡æ•°\t\t\tè¾¾æˆç‡</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>            <span class="token literal-property property">nameLocation</span><span class="token operator">:</span> <span class="token string">'start'</span><span class="token punctuation">,</span>            <span class="token literal-property property">nameGap</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>            <span class="token literal-property property">nameTextStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">align</span><span class="token operator">:</span> <span class="token string">'left'</span><span class="token punctuation">,</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#FFF'</span><span class="token punctuation">,</span>                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>                <span class="token literal-property property">fontWeight</span><span class="token operator">:</span> <span class="token string">'bold'</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token literal-property property">inverse</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">axisLine</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token literal-property property">axisTick</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token literal-property property">axisLabel</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#FFF'</span><span class="token punctuation">,</span>                <span class="token literal-property property">fontSize</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token literal-property property">data</span><span class="token operator">:</span> infoList<span class="token punctuation">,</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token literal-property property">series</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>        <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'custom'</span><span class="token punctuation">,</span>        <span class="token literal-property property">labelLine</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        renderItem<span class="token punctuation">,</span>        <span class="token literal-property property">encode</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">data</span><span class="token operator">:</span> machineItemList    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>renderItem</code> å‡½æ•°</p><p><code>custom</code> ç³»åˆ—éœ€è¦å¼€å‘è€…è‡ªå·±æä¾›å›¾å½¢æ¸²æŸ“çš„é€»è¾‘ã€‚è¿™ä¸ªæ¸²æŸ“é€»è¾‘ä¸€èˆ¬å‘½åä¸º <code>renderItem</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">renderItem</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> api</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> categoryIndex <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> start <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">coord</span><span class="token punctuation">(</span><span class="token punctuation">[</span>api<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> categoryIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> end <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">coord</span><span class="token punctuation">(</span><span class="token punctuation">[</span>api<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> categoryIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> height <span class="token operator">=</span> api<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">0.4</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> rectShape <span class="token operator">=</span> echarts<span class="token punctuation">.</span>graphic<span class="token punctuation">.</span><span class="token function">clipRectByRect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token literal-property property">x</span><span class="token operator">:</span> start<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token literal-property property">y</span><span class="token operator">:</span> start<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span>        <span class="token literal-property property">width</span><span class="token operator">:</span> end<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> start<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token literal-property property">height</span><span class="token operator">:</span> height    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        <span class="token literal-property property">x</span><span class="token operator">:</span> params<span class="token punctuation">.</span>coordSys<span class="token punctuation">.</span>x<span class="token punctuation">,</span>        <span class="token literal-property property">y</span><span class="token operator">:</span> params<span class="token punctuation">.</span>coordSys<span class="token punctuation">.</span>y<span class="token punctuation">,</span>        <span class="token literal-property property">width</span><span class="token operator">:</span> params<span class="token punctuation">.</span>coordSys<span class="token punctuation">.</span>width<span class="token punctuation">,</span>        <span class="token literal-property property">height</span><span class="token operator">:</span> params<span class="token punctuation">.</span>coordSys<span class="token punctuation">.</span>height    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>        rectShape <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'rect'</span><span class="token punctuation">,</span>            <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'shape'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token literal-property property">shape</span><span class="token operator">:</span> rectShape<span class="token punctuation">,</span>            <span class="token literal-property property">style</span><span class="token operator">:</span> api<span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•°æ®çš„æ ¼å¼ç±»ä¼¼è¿™æ ·</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/* å˜é‡è¯´æ˜    * machineListï¼šæœºå°åˆ—è¡¨æ•°ç»„    * infoListï¼š[[å¹³å‡æˆå‹å‘¨æœŸï¼Œåˆæ¨¡æ•°ï¼Œè¾¾æˆç‡],...]    * machineItemList: [{        * nameçŠ¶æ€        * value[machineList.indexï¼Œèµ·å§‹xåæ ‡ï¼Œç»“æŸxåæ ‡ï¼Œå·®å€¼]        * itemStyle{        * normal: {color} green:æ­£å¸¸;yellow:å¾…æœº;red:å¼‚å¸¸;orange:ä¿®æ¨¡;gray:å…³æœº        * }    * }]*/</span><span class="token punctuation">{</span>    <span class="token string-property property">"machineList"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"æœºå°1 "</span><span class="token punctuation">,</span>        <span class="token comment">// ...</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string-property property">"infoList"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token string">"         0.00           0      0.00%"</span><span class="token punctuation">,</span>        <span class="token comment">// ...</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token string-property property">"machineItemList"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"æ­£å¸¸"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"green"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"å¼‚å¸¸"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"red"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"å¾…æœº"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"yellow"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"åœæœº"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"gray"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment">// æ­¤å¤„çœç•¥äº†92ä¸ªå¯¹è±¡ï¼Œæ¯100ä¸ªå¯¹è±¡ä¸ºä¸€ä¸ªæœºå°æ•°æ®ï¼Œå› ä¸ºåç«¯ä¼ å›çš„æ•°æ®å³ä¸€ä¸ªå°æ—¶ä¸€ç§çŠ¶æ€ï¼Œä¸€å¤©24ä¸ªå°æ—¶ï¼Œæ¯ä¸€ä¸ªå°æ—¶å­˜åœ¨4ç§çŠ¶æ€å¯èƒ½ï¼Œå·®å€¼ä¸º100è¡¨ç¤ºè¯¥æ—¶æ®µçŠ¶æ€</span>        <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"æ­£å¸¸"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"green"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"å¼‚å¸¸"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"red"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"å¾…æœº"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"yellow"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"åœæœº"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2400</span><span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"gray"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"æ­£å¸¸"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"green"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"å¼‚å¸¸"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"red"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"å¾…æœº"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"yellow"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>         <span class="token punctuation">{</span> <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"åœæœº"</span><span class="token punctuation">,</span> <span class="token string-property property">"value"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string-property property">"itemStyle"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"normal"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">"color"</span><span class="token operator">:</span> <span class="token string">"gray"</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token comment">// ...</span>    <span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•ˆæœ"><a href="#æ•ˆæœ" class="headerlink" title="æ•ˆæœ"></a>æ•ˆæœ</h2><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnzrzptwi3j21520cqtf9.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ECharts </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git å‘½ä»¤è®­ç»ƒè¥ learngitbranching</title>
      <link href="/2024/03/21/git-ming-ling-xun-lian-ying-learngitbranching/"/>
      <url>/2024/03/21/git-ming-ling-xun-lian-ying-learngitbranching/</url>
      
        <content type="html"><![CDATA[<p>ç›®å‰å…¬å¸ç”¨çš„ä»£ç ç®¡ç†å·¥å…·æ˜¯ <code>SVN</code>ï¼Œç”¨ä¹…äº†å€’æ˜¯æœ‰ç‚¹è®°ä¸æ¸… <code>git</code> çš„ç”¨æ³•äº†ï¼Œè¶ç€è¿™å‡ æ—¥ç©ºäº†å›é¡¾å›é¡¾ï¼ŒæœçœŸå‘ç°äº†ä¸ªå¥½ç©çš„ç½‘ç«™ <a href="https://learngitbranching.js.org/?locale=zh_CN">learngitbranching</a>ï¼Œè¿˜è¡¥ä¸Šäº†ä»¥å‰é’»ç ”ä¸ä¼šçš„çŸ¥è¯†ç›²åŒºï¼Œè®°å½•ä¸‹ç­”æ¡ˆ~</p><p>ä¸‹é¢ä»£ç å—ä¸º <code>learngitbranching</code> æä¾›çš„ç­”æ¡ˆï¼ˆä½¿ç”¨ <code>show solution</code> å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ï¼‰ï¼Œè§†é¢‘æ˜¯æˆ‘è‡ªå·±å†™çš„ç­”æ¡ˆï¼Œæœ‰äº›å¯¹ä¸ä¸Šï¼Œä¸è¿‡å€’æ˜¯æ®Šé€”åŒå½’</p><h1 id="åŸºç¡€ç¯‡"><a href="#åŸºç¡€ç¯‡" class="headerlink" title="åŸºç¡€ç¯‡"></a>åŸºç¡€ç¯‡</h1><h2 id="Git-Commit"><a href="#Git-Commit" class="headerlink" title="Git Commit"></a>Git Commit</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> commit$ <span class="token function">git</span> commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1302227299&amp;bvid=BV1eu4m1T75F&amp;cid=1477053279&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Branch"><a href="#Git-Branch" class="headerlink" title="Git Branch"></a>Git Branch</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> branch bugFix$ <span class="token function">git</span> checkout bugFix<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1952193285&amp;bvid=BV1uC411t7T1&amp;cid=1477087242&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Merge"><a href="#Git-Merge" class="headerlink" title="Git Merge"></a>Git Merge</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> bugFix$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> commit$ <span class="token function">git</span> merge bugFix<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1602242343&amp;bvid=BV1rm421J74F&amp;cid=1477087887&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Rebase"><a href="#Git-Rebase" class="headerlink" title="Git Rebase"></a>Git Rebase</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> bugFix$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout bugFix$ <span class="token function">git</span> rebase main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1352115494&amp;bvid=BV1N6421c7uT&amp;cid=1477088762&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h1 id="é«˜çº§ç¯‡"><a href="#é«˜çº§ç¯‡" class="headerlink" title="é«˜çº§ç¯‡"></a>é«˜çº§ç¯‡</h1><h2 id="åˆ†ç¦»çš„-HEAD"><a href="#åˆ†ç¦»çš„-HEAD" class="headerlink" title="åˆ†ç¦»çš„ HEAD"></a>åˆ†ç¦»çš„ HEAD</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout C4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1202094945&amp;bvid=BV1xF4m1F7VP&amp;cid=1477116376&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="ç›¸å¯¹å¼•ç”¨ï¼ˆ-ï¼‰"><a href="#ç›¸å¯¹å¼•ç”¨ï¼ˆ-ï¼‰" class="headerlink" title="ç›¸å¯¹å¼•ç”¨ï¼ˆ^ï¼‰"></a>ç›¸å¯¹å¼•ç”¨ï¼ˆ^ï¼‰</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout bugFix^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1702129143&amp;bvid=BV1SK421Y7Bg&amp;cid=1477118549&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="ç›¸å¯¹å¼•ç”¨2ï¼ˆ-ï¼‰"><a href="#ç›¸å¯¹å¼•ç”¨2ï¼ˆ-ï¼‰" class="headerlink" title="ç›¸å¯¹å¼•ç”¨2ï¼ˆ~ï¼‰"></a>ç›¸å¯¹å¼•ç”¨2ï¼ˆ~ï¼‰</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> branch <span class="token parameter variable">-f</span> main C6$ <span class="token function">git</span> checkout HEAD~1$ <span class="token function">git</span> branch <span class="token parameter variable">-f</span> bugFix HEAD~1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1802150423&amp;bvid=BV1Xt421G7YS&amp;cid=1477120547&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="æ’¤é”€å˜æ›´"><a href="#æ’¤é”€å˜æ›´" class="headerlink" title="æ’¤é”€å˜æ›´"></a>æ’¤é”€å˜æ›´</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> reset HEAD~1$ <span class="token function">git</span> checkout pushed$ <span class="token function">git</span> revert HEAD<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1802038862&amp;bvid=BV1Kt421G7me&amp;cid=1477121604&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h1 id="ç§»åŠ¨æäº¤è®°å½•"><a href="#ç§»åŠ¨æäº¤è®°å½•" class="headerlink" title="ç§»åŠ¨æäº¤è®°å½•"></a>ç§»åŠ¨æäº¤è®°å½•</h1><h2 id="Git-Cherry-pick"><a href="#Git-Cherry-pick" class="headerlink" title="Git Cherry-pick"></a>Git Cherry-pick</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> cherry-pick C3 C4 C7<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1402222007&amp;bvid=BV1Rr421t7sS&amp;cid=1478082826&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="äº¤äº’å¼-rebase"><a href="#äº¤äº’å¼-rebase" class="headerlink" title="äº¤äº’å¼ rebase"></a>äº¤äº’å¼ rebase</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> overHere<span class="token comment"># é€‰æ‹© C3 C4 C5ï¼Œç„¶åè°ƒæ¢ C4 C5 çš„ä½ç½®</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1252014124&amp;bvid=BV1UJ4m1j7dU&amp;cid=1478085862&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h1 id="æ‚é¡¹"><a href="#æ‚é¡¹" class="headerlink" title="æ‚é¡¹"></a>æ‚é¡¹</h1><h2 id="åªå–ä¸€ä¸ªæäº¤è®°å½•"><a href="#åªå–ä¸€ä¸ªæäº¤è®°å½•" class="headerlink" title="åªå–ä¸€ä¸ªæäº¤è®°å½•"></a>åªå–ä¸€ä¸ªæäº¤è®°å½•</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> main <span class="token comment"># åªé€‰æ‹© C4</span>$ <span class="token function">git</span> rebase bugFix main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1502003248&amp;bvid=BV1uD42177DR&amp;cid=1478086568&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="æäº¤çš„æŠ€å·§-1"><a href="#æäº¤çš„æŠ€å·§-1" class="headerlink" title="æäº¤çš„æŠ€å·§ #1"></a>æäº¤çš„æŠ€å·§ #1</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> HEAD~2<span class="token comment"># è°ƒæ¢ C2 C3 çš„ä½ç½®</span>$ <span class="token function">git</span> commit <span class="token parameter variable">--amend</span>$ <span class="token function">git</span> rebase <span class="token parameter variable">-i</span> HEAD~2<span class="token comment"># è°ƒæ¢ C3' C2'' çš„ä½ç½®</span>$ <span class="token function">git</span> rebase caption main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1102175836&amp;bvid=BV1kA4m1P7jJ&amp;cid=1478087275&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="æäº¤çš„æŠ€å·§-2"><a href="#æäº¤çš„æŠ€å·§-2" class="headerlink" title="æäº¤çš„æŠ€å·§ #2"></a>æäº¤çš„æŠ€å·§ #2</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> cherry-pick C2$ <span class="token function">git</span> commit <span class="token parameter variable">--amend</span>$ <span class="token function">git</span> cherry-pick C3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1952211230&amp;bvid=BV1NC411t7Ro&amp;cid=1478087767&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Tag"><a href="#Git-Tag" class="headerlink" title="Git Tag"></a>Git Tag</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> tag v1 side~1$ <span class="token function">git</span> tag v0 main~2$ <span class="token function">git</span> checkout v1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1152226324&amp;bvid=BV1xZ421t77x&amp;cid=1480767138&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Describe"><a href="#Git-Describe" class="headerlink" title="Git Describe"></a>Git Describe</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> commit<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1952091735&amp;bvid=BV1EC41187MG&amp;cid=1480767461&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h1 id="é«˜çº§è¯é¢˜"><a href="#é«˜çº§è¯é¢˜" class="headerlink" title="é«˜çº§è¯é¢˜"></a>é«˜çº§è¯é¢˜</h1><h2 id="å¤šæ¬¡-Rebase"><a href="#å¤šæ¬¡-Rebase" class="headerlink" title="å¤šæ¬¡ Rebase"></a>å¤šæ¬¡ Rebase</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> rebase main bugFix$ <span class="token function">git</span> rebase bugFix side$ <span class="token function">git</span> rebase side another$ <span class="token function">git</span> rebase another main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1052189921&amp;bvid=BV1jH4y1W78Y&amp;cid=1480767985&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="ä¸¤ä¸ª-parent-èŠ‚ç‚¹"><a href="#ä¸¤ä¸ª-parent-èŠ‚ç‚¹" class="headerlink" title="ä¸¤ä¸ª parent èŠ‚ç‚¹"></a>ä¸¤ä¸ª parent èŠ‚ç‚¹</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> branch bugWork main^^2^<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1102097616&amp;bvid=BV1tA4m1P7ra&amp;cid=1480770491&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="çº ç¼ ä¸æ¸…çš„åˆ†æ”¯"><a href="#çº ç¼ ä¸æ¸…çš„åˆ†æ”¯" class="headerlink" title="çº ç¼ ä¸æ¸…çš„åˆ†æ”¯"></a>çº ç¼ ä¸æ¸…çš„åˆ†æ”¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout one$ <span class="token function">git</span> cherry-pick C4 C3 C2$ <span class="token function">git</span> checkout two$ <span class="token function">git</span> cherry-pick C5 C4 C3 C2$ <span class="token function">git</span> branch <span class="token parameter variable">-f</span> three C2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1602138184&amp;bvid=BV122421P71o&amp;cid=1480771098&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h1 id="Push-amp-Pull-â€”â€”-Git-è¿œç¨‹ä»“åº“ï¼"><a href="#Push-amp-Pull-â€”â€”-Git-è¿œç¨‹ä»“åº“ï¼" class="headerlink" title="Push &amp; Pull â€”â€” Git è¿œç¨‹ä»“åº“ï¼"></a>Push &amp; Pull â€”â€” Git è¿œç¨‹ä»“åº“ï¼</h1><h2 id="Git-Clone"><a href="#Git-Clone" class="headerlink" title="Git Clone"></a>Git Clone</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> clone<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1802095499&amp;bvid=BV1st421G7GM&amp;cid=1480772400&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="è¿œç¨‹åˆ†æ”¯"><a href="#è¿œç¨‹åˆ†æ”¯" class="headerlink" title="è¿œç¨‹åˆ†æ”¯"></a>è¿œç¨‹åˆ†æ”¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout o/main$ <span class="token function">git</span> commit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1352138293&amp;bvid=BV1F6421c7ZK&amp;cid=1480773271&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Fetch"><a href="#Git-Fetch" class="headerlink" title="Git Fetch"></a>Git Fetch</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> fetch<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1752238562&amp;bvid=BV1Wx421Q74x&amp;cid=1480773952&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Pull"><a href="#Git-Pull" class="headerlink" title="Git Pull"></a>Git Pull</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> pull<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1952144309&amp;bvid=BV1sC41187vQ&amp;cid=1480775059&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="æ¨¡æ‹Ÿå›¢é˜Ÿåˆä½œ"><a href="#æ¨¡æ‹Ÿå›¢é˜Ÿåˆä½œ" class="headerlink" title="æ¨¡æ‹Ÿå›¢é˜Ÿåˆä½œ"></a>æ¨¡æ‹Ÿå›¢é˜Ÿåˆä½œ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> clone$ <span class="token function">git</span> fakeTeamwork <span class="token number">2</span>$ <span class="token function">git</span> commit$ <span class="token function">git</span> pull<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1202177208&amp;bvid=BV16F4m1F7jT&amp;cid=1480776263&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-Push"><a href="#Git-Push" class="headerlink" title="Git Push"></a>Git Push</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> commit$ <span class="token function">git</span> commit$ <span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1602148879&amp;bvid=BV1z2421P7cQ&amp;cid=1481286624&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="åç¦»çš„å†å²æäº¤"><a href="#åç¦»çš„å†å²æäº¤" class="headerlink" title="åç¦»çš„å†å²æäº¤"></a>åç¦»çš„å†å²æäº¤</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> clone$ <span class="token function">git</span> fakeTeamwork$ <span class="token function">git</span> commit$ <span class="token function">git</span> pull <span class="token parameter variable">--rebase</span>$ <span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1002244414&amp;bvid=BV1Sx4y127Ry&amp;cid=1481287267&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="é”å®šçš„-Main"><a href="#é”å®šçš„-Main" class="headerlink" title="é”å®šçš„ Main"></a>é”å®šçš„ Main</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> reset <span class="token parameter variable">--hard</span> o/main$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> feature C2$ <span class="token function">git</span> push origin feature<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1452183439&amp;bvid=BV1zi42197ih&amp;cid=1481287913&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h1 id="å…³äº-origin-å’Œå®ƒçš„å‘¨è¾¹-â€”â€”-Git-è¿œç¨‹ä»“åº“é«˜çº§æ“ä½œ"><a href="#å…³äº-origin-å’Œå®ƒçš„å‘¨è¾¹-â€”â€”-Git-è¿œç¨‹ä»“åº“é«˜çº§æ“ä½œ" class="headerlink" title="å…³äº origin å’Œå®ƒçš„å‘¨è¾¹ â€”â€” Git è¿œç¨‹ä»“åº“é«˜çº§æ“ä½œ"></a>å…³äº origin å’Œå®ƒçš„å‘¨è¾¹ â€”â€” Git è¿œç¨‹ä»“åº“é«˜çº§æ“ä½œ</h1><h2 id="æ¨é€ä¸»åˆ†æ”¯"><a href="#æ¨é€ä¸»åˆ†æ”¯" class="headerlink" title="æ¨é€ä¸»åˆ†æ”¯"></a>æ¨é€ä¸»åˆ†æ”¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> fetch$ <span class="token function">git</span> rebase o/main side1$ <span class="token function">git</span> rebase side1 side2$ <span class="token function">git</span> rebase side2 side3$ <span class="token function">git</span> rebase side3 main$ <span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1552023913&amp;bvid=BV1t1421Q7TY&amp;cid=1481288347&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="åˆå¹¶è¿œç¨‹ä»“åº“"><a href="#åˆå¹¶è¿œç¨‹ä»“åº“" class="headerlink" title="åˆå¹¶è¿œç¨‹ä»“åº“"></a>åˆå¹¶è¿œç¨‹ä»“åº“</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> pull$ <span class="token function">git</span> merge side1$ <span class="token function">git</span> merge side2$ <span class="token function">git</span> merge side3$ <span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1102125280&amp;bvid=BV1qA4m1P7aH&amp;cid=1481288791&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="è¿œç¨‹è¿½è¸ª"><a href="#è¿œç¨‹è¿½è¸ª" class="headerlink" title="è¿œç¨‹è¿½è¸ª"></a>è¿œç¨‹è¿½è¸ª</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> side o/main$ <span class="token function">git</span> commit$ <span class="token function">git</span> pull <span class="token parameter variable">--rebase</span>$ <span class="token function">git</span> push<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1552262318&amp;bvid=BV1f1421S7bf&amp;cid=1481289372&amp;p=1 scrolling=" no"="" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-push-çš„å‚æ•°"><a href="#Git-push-çš„å‚æ•°" class="headerlink" title="Git push çš„å‚æ•°"></a>Git push çš„å‚æ•°</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> push origin main$ <span class="token function">git</span> push origin foo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1852473087&amp;bvid=BV16p42117HK&amp;cid=1481289931&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-push-çš„å‚æ•°2"><a href="#Git-push-çš„å‚æ•°2" class="headerlink" title="Git push çš„å‚æ•°2"></a>Git push çš„å‚æ•°2</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> push origin main^:foo$ <span class="token function">git</span> push origin foo:main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1352269909&amp;bvid=BV13z421f71v&amp;cid=1481290401&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-fetch-çš„å‚æ•°"><a href="#Git-fetch-çš„å‚æ•°" class="headerlink" title="Git fetch çš„å‚æ•°"></a>Git fetch çš„å‚æ•°</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> fetch origin main~1:foo$ <span class="token function">git</span> fetch origin foo:main$ <span class="token function">git</span> checkout foo$ <span class="token function">git</span> merge main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1752342464&amp;bvid=BV1Rx421Q7Ci&amp;cid=1481290816&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="æ²¡æœ‰-source-çš„-source"><a href="#æ²¡æœ‰-source-çš„-source" class="headerlink" title="æ²¡æœ‰ source çš„ source"></a>æ²¡æœ‰ source çš„ source</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> push origin :foo$ <span class="token function">git</span> fetch origin :bar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1302306333&amp;bvid=BV1Tu4m1M7X1&amp;cid=1481291330&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><h2 id="Git-pull-çš„å‚æ•°"><a href="#Git-pull-çš„å‚æ•°" class="headerlink" title="Git pull çš„å‚æ•°"></a>Git pull çš„å‚æ•°</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> pull origin bar:foo$ <span class="token function">git</span> pull origin main:side<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><div style="position: relative; width: 100%; height: 0; padding-bottom: 75%;"><iframe src="//player.bilibili.com/player.html?aid=1952276544&amp;bvid=BV1xC411t7Ey&amp;cid=1481291545&amp;p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" style="position: absolute; width: 100%; height: 100%; Left: 0; top: 0;"></iframe></div><blockquote><p>ä¸€ç‚¹ç¢ç¢å¿µâ€”â€”å¼„è§†é¢‘çœŸæ˜¯è¦äº†è€å‘½<br>    è§†é¢‘æ˜¯ç”¨è¿œç¨‹æ§åˆ¶è½¯ä»¶å½•å±åšçš„ï¼Œç›´æ¥ä¸Šä¼ åˆ°Bç«™æŠ¥ <code>P1-è¯¥è§†é¢‘æ•°æ®æœ‰è¯¯ï¼Œè¯·æ£€æŸ¥å¹¶ä¿®å¤è§†é¢‘æ•°æ®åé‡æ–°ä¸Šä¼ </code>ï¼Œç½‘ä¸ŠæŸ¥åˆ°å¯¼å…¥è§†é¢‘ç¼–è¾‘è½¯ä»¶å†å¯¼å‡ºå°±å¯ä»¥äº†ï¼Œè¯•äº†ä¸‹æœç„¶è¡Œ~<br>    æŠŠä¸‰åå‡ ä¸ªè§†é¢‘é‡æ–°ç”Ÿæˆå¥½ï¼Œå› ä¸ºæ˜¯å°Šè´µçš„éæ­£å¼ä¼šå‘˜æ‰€ä»¥ä¸€å¤©åªèƒ½ä¸Šä¼ äº”ä¸ªè§†é¢‘ï¼Œso ~~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git å‘½ä»¤ä¹‹ git rebase</title>
      <link href="/2024/03/21/git-ming-ling-zhi-git-rebase/"/>
      <url>/2024/03/21/git-ming-ling-zhi-git-rebase/</url>
      
        <content type="html"><![CDATA[<h2 id="git-rebase-å‚æ•°1-å‚æ•°2"><a href="#git-rebase-å‚æ•°1-å‚æ•°2" class="headerlink" title="git rebase å‚æ•°1 å‚æ•°2"></a>git rebase å‚æ•°1 å‚æ•°2</h2><p>å¤åˆ¶ä¸€ç³»åˆ—æäº¤è®°å½•æ”¾åœ¨å¦ä¸€ä¸ªåœ°æ–¹ï¼Œæ³¨æ„ï¼šå¹¶ä¸ä¼šæ”¹å˜è¢«æ¥ä¸‹å»çš„åˆ†æ”¯æŒ‡å‘ï¼Œä½†æ˜¯æŠŠHEADèŠ‚ç‚¹æŒ‡å‘è¢«å¤åˆ¶çš„èŠ‚ç‚¹<br>å‚æ•°1ï¼šè¦è¢«æ¥ä¸‹å»çš„èŠ‚ç‚¹/åˆ†æ”¯<br>å‚æ•°2ï¼šå¦‚æœæ²¡å†™å°±æ˜¯ä»å½“å‰çš„HEADèŠ‚ç‚¹ä¸å‚æ•°1çš„äº¤å‰ç‚¹å¼€å§‹åˆ°å½“å‰çš„HEADèŠ‚ç‚¹çš„æäº¤è®°å½•å¤åˆ¶åˆ°å‚æ•°1åé¢ï¼Œå¦‚æœå†™äº†å°±æ˜¯å‚æ•°2ä¸å‚æ•°1çš„äº¤å‰ç‚¹å¼€å§‹åˆ°å‚æ•°2çš„æäº¤è®°å½•å¤åˆ¶åˆ°å‚æ•°1åé¢</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> foo$ <span class="token function">git</span> commit$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> bar$ <span class="token function">git</span> commit$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> commit<span class="token comment"># å‚æ•°2æœªæŒ‡å®šï¼Œä» main åˆ†æ”¯ä¸ foo åˆ†æ”¯çš„äº¤å‰ç‚¹åˆ° main åˆ†æ”¯æ‰€åœ¨çš„èŠ‚ç‚¹çš„æäº¤è®°å½•ä¼šå¤åˆ¶åˆ° foo åˆ†æ”¯æ‰€åœ¨çš„èŠ‚ç‚¹åé¢ï¼Œæ³¨æ„ foo åˆ†æ”¯æ‰€åœ¨çš„èŠ‚ç‚¹å¹¶æ²¡æœ‰å˜åŒ–</span>$ <span class="token function">git</span> rebase foo<span class="token comment"># å‚æ•°2æŒ‡å®šä¸º barï¼Œä» bar åˆ†æ”¯ä¸ foo åˆ†æ”¯çš„äº¤å‰ç‚¹åˆ° bar åˆ†æ”¯æ‰€åœ¨çš„èŠ‚ç‚¹çš„æäº¤è®°å½•ä¼šå¤åˆ¶åˆ° foo åˆ†æ”¯æ‰€åœ¨çš„èŠ‚ç‚¹åé¢ï¼Œæ³¨æ„ HEAD ç”±æŒ‡å‘ main å˜æˆæŒ‡å‘ bar</span>$ <span class="token function">git</span> rebase foo bar<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‡’å¾—åšåŠ¨å›¾äº†ï¼ŒæŠŠä»£ç å¤åˆ¶åˆ° <a href="https://learngitbranching.js.org/?locale=zh_CN&amp;NODEMO=">learngitbranchingæ²™ç®±</a> çœ‹çœ‹æ•ˆæœå§</p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git å‘½ä»¤ä¹‹ git branch -f</title>
      <link href="/2024/03/20/git-ming-ling-zhi-git-branch-f/"/>
      <url>/2024/03/20/git-ming-ling-zhi-git-branch-f/</url>
      
        <content type="html"><![CDATA[<h2 id="git-branch-f-å‚æ•°1-å‚æ•°2"><a href="#git-branch-f-å‚æ•°1-å‚æ•°2" class="headerlink" title="git branch -f å‚æ•°1 å‚æ•°2"></a>git branch -f å‚æ•°1 å‚æ•°2</h2><p>æ”¹å˜åˆ†æ”¯æŒ‡å‘æäº¤èŠ‚ç‚¹ï¼Œæ³¨æ„ï¼Œå¹¶ä¸ä¼šæ”¹å˜å½“å‰HEADæŒ‡å‘<br>å‚æ•°1ï¼šæ˜¯è¦ç§»åŠ¨çš„åˆ†æ”¯<br>å‚æ•°2ï¼šå¦‚æœæ²¡å†™å°±æ˜¯å°†å‚æ•°1æŒ‡å‘ HEAD æ‰€åœ¨çš„èŠ‚ç‚¹ï¼Œå¦‚æœå†™äº†å°±æ˜¯å°†å‚æ•°1æŒ‡å‘è¯¥å‚æ•°çš„èŠ‚ç‚¹</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> foo$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout <span class="token parameter variable">-b</span> bar$ <span class="token function">git</span> commit$ <span class="token function">git</span> checkout main$ <span class="token function">git</span> commit<span class="token comment"># å‚æ•°2æœªæŒ‡å®šï¼Œå½“å‰ HEAD æŒ‡å‘ mainï¼Œæ‰€ä»¥ä¼šæŠŠ foo ç§»åŠ¨åˆ° main æ‰€åœ¨çš„èŠ‚ç‚¹</span>$ <span class="token function">git</span> branch <span class="token parameter variable">-f</span> foo<span class="token comment"># å‚æ•°2æŒ‡å®šäº† barï¼Œæ‰€ä»¥ä¼šæŠŠ foo ç§»åŠ¨åˆ° bar æ‰€åœ¨çš„èŠ‚ç‚¹</span>$ <span class="token function">git</span> branch <span class="token parameter variable">-f</span> foo bar<span class="token comment"># å‚æ•°2æœªæŒ‡å®šï¼Œå½“å‰ HEAD æŒ‡å‘ mainï¼Œæ‰€ä»¥ä¼šæŠŠ main ç§»åŠ¨åˆ° main æ‰€åœ¨çš„èŠ‚ç‚¹ï¼Œå³æ²¡æœ‰å˜åŒ–</span>$ <span class="token function">git</span> branch <span class="token parameter variable">-f</span> main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‡’å¾—åšåŠ¨å›¾äº†ï¼ŒæŠŠä»£ç å¤åˆ¶åˆ° <a href="https://learngitbranching.js.org/?locale=zh_CN&amp;NODEMO=">learngitbranchingæ²™ç®±</a> çœ‹çœ‹æ•ˆæœå§</p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£å†³npmè®¾ç½®registry.npmmirror.comä»æŠ¥é”™registry.npm.taobao.orgçš„é—®é¢˜</title>
      <link href="/2024/03/19/jie-jue-npm-she-zhi-registry-npmmirror-com-reng-bao-cuo-registry-npm-taobao-org-de-wen-ti/"/>
      <url>/2024/03/19/jie-jue-npm-she-zhi-registry-npmmirror-com-reng-bao-cuo-registry-npm-taobao-org-de-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>æ—©ä¸Šæ‰“ç®—è¿è¡Œç”µè„‘é‡Œé¢ä¸€ä¸ªè®¸ä¹…æ²¡åŠ¨è¿‡çš„é¡¹ç›®ï¼Œåœ¨è¾“å…¥ <code>npm install</code> æ—¶æŠ¥äº†ä¸€ä¸ªé”™</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> ERR<span class="token operator">!</span> code CERT_HAS_EXPIRED<span class="token function">npm</span> ERR<span class="token operator">!</span> request to https://registry.npm.taobao.org/yorkie/download/yorkie-2.0.0.tgz failed, reason: certificate has expired<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å—¯ <code>https://registry.npm.taobao.org</code> è¿‡æœŸäº†</p><p>But</p><p>ğŸ¤” æˆ‘è®°ç€æˆ‘è®¾ç½®çš„æ˜¯ <code>https://registry.npmmirror.com/</code> å•Š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&gt;</span> <span class="token function">npm</span> config get registryhttps://registry.npmmirror.com/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å°è¯• <code>npm config set strict-ssl false</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&gt;</span> <span class="token function">npm</span> config <span class="token builtin class-name">set</span> strict-ssl <span class="token boolean">false</span><span class="token operator">&gt;</span> <span class="token function">npm</span> cache <span class="token function">clear</span> <span class="token parameter variable">--force</span><span class="token operator">&gt;</span> <span class="token function">npm</span> <span class="token function">install</span><span class="token punctuation">..</span>. // çœç•¥è¿‡ç¨‹added <span class="token number">1560</span> packages <span class="token keyword">in</span> 5m<span class="token number">17</span> packages are looking <span class="token keyword">for</span> funding<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ğŸ˜€ å˜¿å˜¿æˆäº†</p><p>ä¸è¿‡ <code>npm config set strict-ssl false</code> æ˜¯ä»€ä¹ˆæ„æ€å‘¢</p><p>æŸ¥äº†ä¸€ä¸‹ï¼Œ<code>strict-ssl</code> æ˜¯ <code>npm</code> ä¸­ç”¨äºæ§åˆ¶ <code>SSL</code> è¯ä¹¦æ ¡éªŒçš„é€‰é¡¹ï¼Œå½“å…¶ä¸º <code>true</code> æ—¶ï¼Œ<code>npm</code> ä¼šå¯¹è¿æ¥çš„æœåŠ¡å™¨çš„ <code>SSL</code> è¯ä¹¦è¿›è¡Œä¸¥æ ¼çš„æ ¡éªŒï¼Œå¹¶è¦æ±‚å®ƒæ˜¯ç”±å¯ä¿¡çš„è®¤è¯æœºæ„é¢å‘çš„ã€‚å¦‚æœæ ¡éªŒå¤±è´¥ï¼Œ<code>npm</code> å°†æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨å¹¶ä¼šæŠ¥é”™ï¼›å½“å…¶ä¸º <code>false</code> æ—¶ï¼Œåˆ™ <code>npm</code> å°†ä¸ä¼šå¯¹æœåŠ¡å™¨çš„ <code>SSL</code> è¯ä¹¦è¿›è¡Œæ ¡éªŒï¼Œå¹¶ä¸”å³ä½¿è¯ä¹¦æ˜¯ç”±ä¸å¯ä¿¡çš„è®¤è¯æœºæ„é¢å‘çš„ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œè¿™å°±å­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œæ‰€ä»¥é—®é¢˜è§£å†³å®Œäº†è¿˜æ˜¯èµ¶ç´§è®¾ç½®å›å»å§</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&gt;</span> <span class="token function">npm</span> config <span class="token builtin class-name">set</span> strict-ssl <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>2024.05.09 æ›´æ–°<br>    è¿™æ¬¡æ˜¯ç”¨ yarn é‡åˆ°è¿™ä¸ªé—®é¢˜å•¦ï¼ŒæŠŠé¡¹ç›®ä¸­çš„ <code>yarn.lock</code> æ–‡ä»¶åˆ æ‰å† <code>yarn install</code> å°±å¥½äº†</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>win10 æ‰¾ä¸åˆ°Hyper-Vçš„è§£å†³åŠæ³•</title>
      <link href="/2024/03/18/win10-zhao-bu-dao-hyper-v-de-jie-jue-ban-fa/"/>
      <url>/2024/03/18/win10-zhao-bu-dao-hyper-v-de-jie-jue-ban-fa/</url>
      
        <content type="html"><![CDATA[<p>æ‰“ç®—å®‰è£… Docker æ—¶å‘ç°ç”µè„‘æ²¡æœ‰å¯åŠ¨ Hyper-V é€‰é¡¹ï¼ˆæ§åˆ¶é¢æ¿-&gt;ç¨‹åº-&gt;å¯ç”¨æˆ–å…³é—­ windows åŠŸèƒ½ï¼‰</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnuwb118y6j20cs0knjyt.jpg"></p><p>äºæ˜¯ç™¾åº¦ä¸€ä¸‹è§£å†³å•¦~~~</p><p>å…ˆåœ¨æ¡Œé¢æ–°å»ºä¸€ä¸ªè®°äº‹æœ¬ï¼Œå¤åˆ¶ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼Œä¿®æ”¹æ–‡ä»¶ååç¼€ä¸º <code>cmd</code>ï¼Œå³é”®è¯¥æ–‡ä»¶ç‚¹å‡»<code>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ</code></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">pushd "%~dp0" dir /b %SystemRoot%\servicing\Packages\*Hyper-V*.mum &gt;hyper-v.txt for /f %%i in ('findstr /i . hyper-v.txt 2^&gt;nul') do dism /online /norestart /add-package:"%SystemRoot%\servicing\Packages\%%i" del hyper-v.txt Dism /online /enable-feature /featurename:Microsoft-Hyper-V-All /LimitAccess /ALL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¼šè‡ªåŠ¨å¼¹å‡ºä¸€ä¸ªçª—å£ï¼Œæ˜¾ç¤º<code>æ­£åœ¨å¤„ç† XXX</code>ï¼Œè€å¿ƒç­‰å¾…å‡ åˆ†é’Ÿï¼Œå®‰è£…å¥½äº†åä¼šæç¤º<code>æ˜¯å¦ç«‹å³é‡æ–°å¯åŠ¨è®¡ç®—æœºï¼Ÿï¼ˆY/Nï¼‰</code>ï¼Œè¾“å…¥ Yï¼Œç­‰é‡å¯æˆåŠŸåå°±å¯ä»¥çœ‹åˆ° Hyper-V é€‰é¡¹äº†</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnuwbtlrxlj20bu0ko46a.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºHBuilderXçš„ä¸€äº›ç–‘éš¾æ‚ç—‡</title>
      <link href="/2024/03/15/guan-yu-hbuilderx-de-yi-xie-yi-nan-za-zheng/"/>
      <url>/2024/03/15/guan-yu-hbuilderx-de-yi-xie-yi-nan-za-zheng/</url>
      
        <content type="html"><![CDATA[<p>ä»¥ä¸‹å¤§éƒ¨åˆ†ä¸ºéå®˜æ–¹æ¥æºï¼Œå±äºççŒ«ç¢°ä¸Šæ­»è€—å­è§£æ³•ï¼Œå¦‚æœç½‘ä¸Šæ‰¾ä¸ç€å°±è¯•è¯•å§~~~<br>å¯èƒ½ä¼šæŒç»­æ›´æ–°ï¼Œå–å†³äºé‡åˆ°çš„å‘å¤šä¸å¤šï¼ˆé€ƒ~</p><h2 id="çœŸæœº-æ¨¡æ‹Ÿå™¨è°ƒè¯•"><a href="#çœŸæœº-æ¨¡æ‹Ÿå™¨è°ƒè¯•" class="headerlink" title="çœŸæœº/æ¨¡æ‹Ÿå™¨è°ƒè¯•"></a>çœŸæœº/æ¨¡æ‹Ÿå™¨è°ƒè¯•</h2><ol><li>æ£€æµ‹åˆ°å½“å‰ä½¿ç”¨çš„ADBä¸æ”¯æŒåå‘ä»£ç†ï¼Œå¦‚æœå‡ºç°è¿æ¥ä¸ä¸Šçš„é—®é¢˜ï¼Œè¯·æ›´æ¢HBuilderè‡ªå¸¦çš„ADBè¿›è¡ŒçœŸæœºè¿è¡Œæˆ–ä¿æŒæ‰‹æœºå’Œç”µè„‘åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸‹</li></ol><p>è§£å†³ï¼šåœ¨HBuilderXçš„å®‰è£…ç›®å½•ä¸‹æ‰¾åˆ°adb.exeï¼ˆè·¯å¾„å¤§æ¦‚é•¿è¿™æ ·ï¼šHBuilderX.3.8.4.20230531\HBuilderX\plugins\launcher-tools\tools\adbsï¼‰ï¼ŒåŒå‡»å®ƒï¼Œå†é‡å¯HBuilderXè¿è¡Œ</p><ol start="2"><li>æœ¬åº”ç”¨æ— æ³•ç‹¬ç«‹è¿è¡Œï¼Œéœ€ä¸HBuilderXæ­é…ä½¿ç”¨ã€‚<br><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnrqmve8wkj20xa0iqgo0.jpg"></li></ol><p>è§£å†³ï¼šé‡å¯ï¼é‡å¯ï¼é‡å¯ï¼HBuilderX é‡å¯ï¼å¦‚æœæ˜¯è¿è¡Œåˆ°æ¨¡æ‹Ÿå™¨ä¹ŸæŠŠæ¨¡æ‹Ÿå™¨é‡å¯ä¸‹</p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äºweb-viewç»„ä»¶å±‚çº§è¿‡é«˜å¯¼è‡´å…¶å®ƒè§†å›¾ç»„ä»¶ä¸å¯è§†çš„è§£å†³åŠæ³•</title>
      <link href="/2024/03/15/guan-yu-web-view-zu-jian-ceng-ji-guo-gao-dao-zhi-qi-ta-shi-tu-zu-jian-bu-ke-shi-de-jie-jue-ban-fa/"/>
      <url>/2024/03/15/guan-yu-web-view-zu-jian-ceng-ji-guo-gao-dao-zhi-qi-ta-shi-tu-zu-jian-bu-ke-shi-de-jie-jue-ban-fa/</url>
      
        <content type="html"><![CDATA[<h2 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h2><p>å½“ç‚¹å‡»å·¦è¾¹çº¢è‰²æ¡†å†…çš„å•å·æ—¶ï¼Œå³è¾¹é»„è‰²æ¡†å±•ç¤ºåŒºåŸŸæ˜¾ç¤ºå¯¹åº”çš„ä¿¡æ¯ï¼ˆè§†é¢‘æˆ–è€…PDFï¼‰ã€‚å¦‚æœè¯¥å•å·åŒæ—¶å­˜åœ¨è§†é¢‘æˆ–è€…PDFï¼Œåˆ™ç»¿è‰²æ¡†å•é€‰æŒ‰é’®ç»„æ˜¾ç¤ºè§†é¢‘å’ŒPDFå•é€‰æ¡†ï¼Œå¦‚æœåªå­˜åœ¨ä¸€ç§åˆ™åªæ˜¾ç¤ºä¸€ç§å•é€‰æ¡†ã€‚<br><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnrncom665j20jd0eaq4f.jpg"><br><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnrnhedhbaj20jg0eb757.jpg"></p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>å¸ƒå±€å¦‚ä¸‹</p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;&lt;view class="pageContainer"&gt;&lt;view class="sidebar"&gt;&lt;h3 class="orderHeader"&gt;&lt;text&gt;ç”Ÿäº§å•å·&lt;/text&gt;&lt;u-button icon="reload" @click="getOrderList"&gt;&lt;/u-button&gt;&lt;/h3&gt;&lt;ul v-if="hasOrder" class="orderList"&gt;&lt;li v-for="(item,index) in orderList" :key="index" :class="{active: activeOrder === index}"@click="clickOrder(item, index)"&gt;&lt;text&gt;{{item}}&lt;/text&gt;&lt;/li&gt;&lt;/ul&gt;&lt;u-empty v-else mode="list" iconSize="36" marginTop="20"&gt;&lt;/u-empty&gt;&lt;/view&gt;&lt;view class="displayArea"&gt;&lt;template v-if="sopInfo.isExist"&gt;&lt;video v-if="radioValue === 'video'" style="width: 100%;height: 100%;" :src="sopUrl" controls loopautoplay&gt;&lt;/video&gt;&lt;scroll-view style="height: 100%;" v-if="radioValue === 'pdf'" scroll-y="true"&gt;&lt;web-view :src="sopUrl" :update-title="false" :webview-styles="webviewStyles"&gt;&lt;/web-view&gt;&lt;/scroll-view&gt;&lt;/template&gt;&lt;dataNull v-else title="æš‚æ— ç›¸å…³èµ„æ–™~"&gt;&lt;/dataNull&gt;&lt;/view&gt;&lt;!-- #ifdef H5 --&gt;&lt;u-radio-group class="modeGroup" placement="row" v-model="radioValue" @change="changeRadio"&gt;&lt;template v-for="(r, i) in radioList"&gt;&lt;u-radio v-if="r.show" :customStyle="{marginLeft: '16px'}" labelColor="white" :label="r.label":name="r.name"&gt;&lt;/u-radio :key="i"&gt;&lt;/template&gt;&lt;/u-radio-group&gt;&lt;!-- #endif --&gt;&lt;/view&gt;&lt;/template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ³¨æ„1"><a href="#æ³¨æ„1" class="headerlink" title="æ³¨æ„1"></a>æ³¨æ„1</h2><p>å³è¾¹é»„è‰²åŒºåŸŸä¸ºä¸€ä¸ª <code>web-view</code> ç»„ä»¶ï¼Œ<code>web-view</code> æ˜¯ä¸€ä¸ª web æµè§ˆå™¨ç»„ä»¶ï¼Œå¯ä»¥ç”¨æ¥æ‰¿è½½ç½‘é¡µçš„å®¹å™¨ï¼Œä¼šè‡ªåŠ¨é“ºæ»¡æ•´ä¸ªé¡µé¢ï¼Œnvue ä½¿ç”¨éœ€è¦æ‰‹åŠ¨æŒ‡å®šå®½é«˜ï¼Œå³è¿™é‡Œ <code>webviewStyles</code></p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script&gt;export default {data() {return {webviewStyles: {width: '',height: '',top: '44px',left: '224px'}            }},    }&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ³¨æ„2"><a href="#æ³¨æ„2" class="headerlink" title="æ³¨æ„2"></a>æ³¨æ„2</h2><p>web-viewç»„ä»¶åœ¨Appå’Œå°ç¨‹åºä¸­å±‚çº§è¾ƒé«˜ï¼Œå¦‚éœ€è¦åœ¨vueé¡µé¢ä¸­å†™ä»£ç ä¸ºweb-viewç»„ä»¶è¦†ç›–å†…å®¹ï¼Œå°ç¨‹åºç«¯æ— è§£ï¼Œåªèƒ½ç”±web-viewçš„ç»„ä»¶è‡ªå·±å¼¹å‡ºdivï¼Œ<a href="https://uniapp.dcloud.net.cn/component/web-view.html">å®˜æ–¹æ–‡æ¡£</a>æä¾›äº†4ç§è§£å†³æ–¹æ³•ï¼Œè¿™é‡Œç”¨çš„æ˜¯ <code>plus.nativeObj.view</code></p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">// radioListæ˜¯ä¸€ä¸ªå­˜æ”¾å•é€‰æ¡†æŒ‰é’®ç»„æ•°æ®çš„æ•°ç»„radioList.forEach((radio, index, list) =&gt; {    radio.view = null   // è¿™é‡Œéœ€æŠŠä¹‹å‰æ¸²æŸ“çš„viewå¯¹è±¡æ¸…é™¤    radio.view = new plus.nativeObj.View(radio.name + 'View', {        top: this.topDist + (index * 40) + 'px',        left: this.leftDist + 'px',        height: '30px',        width: '60px',        zIndex: '10'    })    radio.view.drawRect({        color: that.radioValue === radio.name ? 'rgb(41, 121, 255)' : 'gray',        radius: '10px'    }, {        top: '0px',        left: '0px',        width: '100%',        height: '100%'    }, radio.name)    radio.view.drawText(radio.label, {}, {        align: 'center',        color: '#fff'    })    radio.view.addEventListener("click", function(e) {        radio.view.drawRect({            color: 'rgb(41, 121, 255)',            radius: '10px'        }, {}, radio.name)        list[(index + 1) % 2].view.drawRect({            color: 'gray',            radius: '10px'        }, {}, list[(index + 1) % 2].name)        that.changeRadio(radio.name)    }, false)})// å¦‚æœæ˜¯å­˜åœ¨è§†é¢‘/PDFå°±æ˜¾ç¤ºè§†é¢‘/PDFå•é€‰æ¡†ï¼ˆ`.show()`ï¼‰ï¼Œåä¹‹å°±éšè—ï¼ˆ`.hide()`ï¼‰watch: {    radioList: {        deep: true,        handler: function(newValue) {            //#ifdef APP-PLUS            newValue.forEach(item =&gt; {                item.show ? item.view.show() : item.view.hide()            })            //#endif        }    }},// é¡µé¢é”€æ¯æ—¶è®°å¾—æ¸…ç†closePlusView() {    //#ifdef APP-PLUS    this.radioList.forEach(radio =&gt; {        radio.view.close()    })    //#endif},<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°å½• APP æ‰«æä¸€ç»´ç ä¸å‡†ç¡®çš„åŸå› </title>
      <link href="/2024/03/15/ji-lu-app-sao-miao-yi-wei-ma-bu-zhun-que-de-yuan-yin/"/>
      <url>/2024/03/15/ji-lu-app-sao-miao-yi-wei-ma-bu-zhun-que-de-yuan-yin/</url>
      
        <content type="html"><![CDATA[<p><code>plus.barcode.Barcode(domId, filters, styles, autoDecodeCharset)</code></p><p><em><strong>å‚æ•°ï¼š</strong></em></p><ul><li>domId: ( String ) å¿…é€‰ å…³è”DOMæ ‡ç­¾çš„æ ‡è¯†<br>ç³»ç»Ÿå°†æŸ¥æ‰¾åˆ°æ­¤idçš„DOMæ ‡ç­¾èŠ‚ç‚¹ï¼Œè®¾ç½®æ‰«ç è¯†åˆ«æ§ä»¶çš„ä½ç½®å’Œå¤§å°ä¸å…¶ä¿æŒä¸€è‡´ã€‚</li><li>filters: ( Array[Number] ) å¯é€‰ æ¡ç ç±»å‹è¿‡æ»¤å™¨<br>æ¡ç ç±»å‹å¸¸é‡æ•°ç»„ï¼Œé»˜è®¤æƒ…å†µæ”¯æŒQRã€EAN13ã€EAN8ç±»å‹ã€‚ é€šè¿‡æ­¤å‚æ•°å¯è®¾ç½®æ‰«ç è¯†åˆ«æ”¯æŒçš„æ¡ç ç±»å‹ï¼ˆæ³¨æ„ï¼šè®¾ç½®æ”¯æŒçš„æ¡ç ç±»å‹è¶Šå¤šï¼Œæ‰«æè¯†åˆ«é€Ÿåº¦å¯èƒ½å°†ä¼šé™ä½ï¼‰ã€‚</li><li>styles: ( BarcodeStyles ) å¯é€‰ æ¡ç è¯†åˆ«æ§ä»¶æ ·å¼<br>ç”¨äºè®¾ç½®æ‰«ç æ§ä»¶åœ¨é¡µé¢ä¸­æ˜¾ç¤ºçš„æ ·å¼ï¼Œå¦‚æ‰«ç æ¡†ã€æ‰«ç æ¡çš„é¢œè‰²ç­‰ã€‚</li><li>autoDecodeCharset: ( Boolean ) å¿…é€‰ è‡ªåŠ¨è§£ç å­—ç¬¦é›†<br>  å¯å–å€¼ï¼š<ul><li>false - å°†äºŒç»´ç è§£ç æ•°æ®å½“åšutf-8å­—ç¬¦é›†å¤„ç†ï¼Œå¯¹äºéutf-8å­—ç¬¦é›†æ•°æ®å¯èƒ½ä¼šå‡ºç°ä¹±ç </li><li>true - è‡ªåŠ¨æ£€æµ‹äºŒç»´ç è§£ç æ•°æ®ï¼Œå…¼å®¹å¤„ç†utf-8ã€GBKã€Big5ç¼–ç æ ¼å¼çš„å­—ç¬¦<br>é»˜è®¤å€¼ä¸ºfalseã€‚<br>æ³¨æ„ï¼šHBuilderX2.9.5+ç‰ˆæœ¬Androidå¹³å°æ”¯æŒï¼ŒiOSå¹³å°æš‚ä¸æ”¯æŒã€‚</li></ul></li></ul><p><em><strong>è¿”å›å€¼ï¼š</strong></em><br>Barcode : æ‰«ç è¯†åˆ«æ§ä»¶å¯¹è±¡</p><p><em><strong>æ³¨æ„</strong></em><br>filtersé»˜è®¤æƒ…å†µæ”¯æŒQRã€EAN13ã€EAN8ç±»å‹ï¼Œè€Œé¡¹ç›®ç”¨åˆ°çš„ä¸€ç»´ç æ˜¯CODE128ç±»å‹ï¼Œæ‰€ä»¥åº”è¯¥ä¿®æ”¹ä¸€ä¸‹filters</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">plus<span class="token punctuation">.</span>barcode<span class="token punctuation">.</span>Barcode</span><span class="token punctuation">(</span><span class="token string">'bcid'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>plus<span class="token punctuation">.</span>barcode<span class="token punctuation">.</span><span class="token constant">QR</span><span class="token punctuation">,</span>plus<span class="token punctuation">.</span>barcode<span class="token punctuation">.</span><span class="token constant">CODE39</span><span class="token punctuation">,</span>plus<span class="token punctuation">.</span>barcode<span class="token punctuation">.</span><span class="token constant">CODE128</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zb-table åŠ¨æ€æ˜¾ç¤ºæ“ä½œæŒ‰é’®</title>
      <link href="/2024/03/14/zb-table-dong-tai-xian-shi-cao-zuo-an-niu/"/>
      <url>/2024/03/14/zb-table-dong-tai-xian-shi-cao-zuo-an-niu/</url>
      
        <content type="html"><![CDATA[<p>åœ¨uni-appå¼€å‘æ—¶é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦ç”¨è¡¨æ ¼æ˜¾ç¤ºå†…å®¹ï¼Œæœ‰ä¸€åˆ—æ“ä½œåˆ—è¦æ±‚æ ¹æ®æŸåˆ—å†…å®¹æ˜¾ç¤ºå¯¹åº”æ“ä½œ</p><p><code>ä¾‹å­ï¼šæœ‰å®Œæˆæ—¶é—´çš„è¡Œæ“ä½œåˆ—ä¸èƒ½æ˜¾ç¤ºã€åˆ é™¤ã€‘ã€ã€å®Œæˆã€‘æŒ‰é’®</code></p><p>åœ¨ DCLOUD æ’ä»¶å¸‚åœºä¸‹è½½å®‰è£… <a href="https://ext.dcloud.net.cn/plugin?id=7511">zb-table</a> æ’ä»¶ï¼ŒæŸ¥çœ‹æ–‡æ¡£ï¼Œæ²¡æ‰¾åˆ°å¯ä»¥åŠ¨æ€æ˜¾ç¤ºæ“ä½œåˆ—æŒ‰é’®çš„ç¤ºä¾‹ï¼Œäºæ˜¯ç ”ç©¶æºä»£ç ï¼Œå‘ç°æ“ä½œåˆ—çš„æ¸²æŸ“ç”±ä¸€ä¸ª permission å‡½æ•°æ‰§è¡Œ</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">permission</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> renders<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>permissionBtn <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>permissionBtn <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">permissionBtn</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> renders<span class="token punctuation">,</span> index<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> renders<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…¶ä¸­ <code>permissionBtn</code> æ˜¯ä¸€ä¸ª <code>props</code>ï¼Œæ˜¯ä¸€ä¸ªè¿”å›è¦æ¸²æŸ“çš„æ“ä½œæŒ‰é’®æ•°ç»„çš„å‡½æ•°ï¼Œç”¨æ³•å¦‚ä¸‹</p><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">// çˆ¶ç»„ä»¶ï¼ˆçœç•¥äº†ä¸€äº›ä»£ç ï¼‰&lt;zb-table :columns="columns" :permissionBtn="permissionFun" @complete="completeFun" @delete="deleteFun" ... &gt;&lt;/zb-table&gt;columns:[    ...    {        type: 'operation',        label: 'æ“ä½œ',        align: 'center',        fixed: true,        width: 150,        renders: [{            name: 'å®Œæˆ',            type: 'primary',            func: "complete"        }, {            name: 'åˆ é™¤',            type: 'warn',            func: "delete",        }]    }]permissionFun( row, renders, index ) {    if (æ²¡æœ‰å®Œæˆæ—¶é—´) {// æ ¹æ®ä¸Šé¢ä¾‹å­çš„åˆ¤æ–­æ¡ä»¶ï¼Œè¿”å›ä¸¤ä¸ªæŒ‰é’®        return [renders[0], renders[1]]    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1hnqcol1nenj20i004p75n.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/03/08/hello-world/"/>
      <url>/2024/03/08/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>less ä¸­ä½¿ç”¨ url è®¾ç½®é—®é¢˜</title>
      <link href="/2023/02/28/less-zhong-shi-yong-url-she-zhi-wen-ti/"/>
      <url>/2023/02/28/less-zhong-shi-yong-url-she-zhi-wen-ti/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-less" data-language="less"><code class="language-less"><span class="token selector">.content</span> <span class="token punctuation">{</span>  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">"@/assets/imgs/logo.png"</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æŠ¥é”™</p><pre class="line-numbers language-node" data-language="node"><code class="language-node"> ERROR  Failed to compile with 1 error                                             09:49:35This relative module was not found:* ./@/assets/imgs/logo.png in ./node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!./node_modules/postcss-loader/src??ref--10-oneOf-1-2!./node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!./node_modules/cache-loader/dist/cjs.js??ref--0-0!./node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist??ref--0-1!./src/views/Login.vue?vue&amp;type=style&amp;index=0&amp;id=26084dc2&amp;lang=less&amp;scoped=true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§£å†³</p><pre class="line-numbers language-less" data-language="less"><code class="language-less"><span class="token selector">.content(<span class="token variable">@url</span>)</span> <span class="token punctuation">{</span>  <span class="token property">background-image</span><span class="token punctuation">:</span> ~<span class="token string">'url("@/assets/imgs/logo.png")'</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ <code>(@url)</code> | <code>~'url()'</code></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LESS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Dockeré…ç½®gitè´¦å·</title>
      <link href="/2023/02/25/docker-pei-zhi-git-zhang-hao/"/>
      <url>/2023/02/25/docker-pei-zhi-git-zhang-hao/</url>
      
        <content type="html"><![CDATA[<h2 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h2><p>åœ¨ Docker é‡Œé¢åˆ›å»ºçš„é¡¹ç›®ï¼Œä¸Šä¼  Github å¤±è´¥</p><pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">~/r/mangosteen-1 # â¯â¯â¯ git push -u origin maingit@github.com: Permission denied (publickey).fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœºç¿»ä¸€ä¸‹å°±æ˜¯ï¼šæƒé™è¢«æ‹’ç»ï¼ˆå…¬é’¥ï¼‰</p><h2 id="æ€æ ·åš"><a href="#æ€æ ·åš" class="headerlink" title="æ€æ ·åš"></a>æ€æ ·åš</h2><p>åœ¨ Docker ç¯å¢ƒé‡Œé¢çš„ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">ssh-agent<span class="token builtin class-name">eval</span> <span class="token variable"><span class="token variable">$(</span>ssh-agent <span class="token parameter variable">-s</span><span class="token variable">)</span></span>ssh-keygen <span class="token parameter variable">-o</span> <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-b</span> <span class="token number">4096</span> <span class="token parameter variable">-C</span> <span class="token string">"ç”¨æˆ·å"</span>ssh-add ~/.ssh/id_rsa<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸€ç›´å›è½¦ï¼Œå¥½äº†ä¹‹åå¯ä»¥åœ¨ Docker å®¢æˆ·ç«¯çœ‹åˆ° ssh ç›®å½•é‡Œé¢æœ‰3ä¸ªæ–‡ä»¶</p><pre class="line-numbers language-none"><code class="language-none">id_rsaid_rsa.pub // å¤åˆ¶è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„å†…å®¹known_hosts<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç™»å½• Github<br>Settings<br>=ã€‹ SSH and GPG keys<br>=ã€‹ New SSH key</p><ul><li>Titleï¼ˆæ ‡è¯†åï¼‰</li><li>Keyï¼ˆid_rsa.pub æ–‡ä»¶é‡Œé¢çš„å†…å®¹ï¼‰</li></ul><p>å›åˆ° Docker ç¯å¢ƒé‡Œé¢çš„ç»ˆç«¯è¾“å…¥ <code>ssh -T git@github.com</code> å‡ºç°ä»¥ä¸‹è¯­å¥è¡¨ç¤ºé…ç½®æˆåŠŸ</p><pre class="line-numbers language-zsh" data-language="zsh"><code class="language-zsh">~/repos # â¯â¯â¯ ssh -T git@github.com   Hi April-cl! You've successfully authenticated, but GitHub does not provide shell access.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/qq_38537503/article/details/119571562">Dockerä¸­é…ç½®Gitç¯å¢ƒ</a></p><p>å¿«ä¸€å¹´æ²¡å†™å•¦~~~ï¼Œå¯çœŸæ‡’å•Š ğŸ«¥</p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sliceã€substrã€substringã€spliceã€splitçš„ç”¨æ³•</title>
      <link href="/2022/04/02/slice-substr-substring-splice-split-de-yong-fa/"/>
      <url>/2022/04/02/slice-substr-substring-splice-split-de-yong-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h1><p>æˆªå–å­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼ˆä¸æ”¹å˜åŸå­—ç¬¦ä¸²æˆ–æ•°ç»„ï¼‰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span>arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="substrï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"><a href="#substrï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰" class="headerlink" title="substrï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰"></a>substrï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</h1><p>æˆªå–å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼ˆä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼‰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">str<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h1><p>æˆªå–å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼ˆä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼‰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸ <code>slice</code> çš„åŒºåˆ«ï¼š</p><ul><li><p>å‚æ•°ä¸ºæ­£æ•°çš„æ—¶å€™ç»“æœæ²¡åŒºåˆ«</p></li><li><p>å‚æ•°ä¸ºè´Ÿæ—¶ï¼Œ<code>slice</code> å€’æ•°è®¡æ•°ï¼Œ<code>substring</code> å°†è´Ÿæ•°ç½®ä¸º0</p></li><li><p><code>start</code> ä½ç½®åœ¨ <code>end</code> ä¹‹åæ—¶ <code>slice</code> è¿”å›ç©ºå­—ç¬¦ä¸²ï¼Œ<code>substring</code> ä»è¿”å›ä¸¤ä¸ªå‚æ•°ä½ç½®å­—ç¬¦ä¸²</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'abcdefghijklmnopqrstuvwxyz'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.slice(3)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.substring(3)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.slice(3, 8)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.substring(3, 8)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.slice(3, 1)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.substring(3, 1)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.slice(-3)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.substring(-3)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.slice(-3, 7)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'str.substring(-3, 7)'</span><span class="token punctuation">,</span> str<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// str.slice(3) defghijklmnopqrstuvwxyz</span><span class="token comment">// str.substring(3) defghijklmnopqrstuvwxyz</span><span class="token comment">// str.slice(3, 8) defgh</span><span class="token comment">// str.substring(3, 8) defgh</span><span class="token comment">// str.slice(3, 1) </span><span class="token comment">// str.substring(3, 1) bc</span><span class="token comment">// str.slice(-3) xyz</span><span class="token comment">// str.substring(-3) abcdefghijklmnopqrstuvwxyz</span><span class="token comment">// str.slice(-3, 7) </span><span class="token comment">// str.substring(-3, 7) abcdefg</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="splice"><a href="#splice" class="headerlink" title="splice"></a>splice</h1><p>ç”¨äºæ•°ç»„æ“ä½œï¼Œå¯ä»¥å¯¹æ•°ç»„ä¸­çš„å…ƒç´ è¿›è¡Œåˆ é™¤ã€æ’å…¥å’Œæ›¿æ¢ï¼ˆä¼šæ”¹å˜åŸæ•°ç»„ï¼‰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> num<span class="token punctuation">,</span> arg1<span class="token punctuation">,</span> arg2<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="split"><a href="#split" class="headerlink" title="split"></a>split</h1><p>ä»¥åŸºäºæŒ‡å®šçš„åˆ†éš”ç¬¦å°†ä¸€ä¸ªå­—ç¬¦ä¸²åˆ†å‰²æˆ å¤šä¸ªå­å­—ç¬¦ä¸²ï¼Œå¹¶å°†ç»“æœæ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼ˆä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼‰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'åˆ†éš”å­—ç¬¦ä¸²'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä»ä¸€é“æ·±æ‹·è´é¢è¯•é¢˜ä¸­å­¦åˆ°çš„çŸ¥è¯†è®°å½•</title>
      <link href="/2022/04/01/cong-yi-dao-shen-kao-bei-mian-shi-ti-zhong-xue-dao-de-zhi-shi-ji-lu/"/>
      <url>/2022/04/01/cong-yi-dao-shen-kao-bei-mian-shi-ti-zhong-xue-dao-de-zhi-shi-ji-lu/</url>
      
        <content type="html"><![CDATA[<p>ä»¥å‰å¿ƒé‡Œä¸€ç›´å¾ˆæŠµè§¦åˆ·é¢˜ï¼Œä¸è¿‡æœ€è¿‘çœ‹äº†ä¸å°‘é¢è¯•é¢˜æ‰å‘ç°é€šè¿‡è¿™äº›é¢˜åå€’æ˜¯æœ‰ä¸å°‘æ”¶è·ï¼Œæœ‰ç©ºçœ‹çœ‹å°±å½“æ˜¯å¤¯å®åŸºç¡€å§ ~</p><p>åœ¨ç†è§£æ·±/æµ…æ‹·è´ä¹‹å‰å…ˆå¼„æ˜ç™½å¯¹è±¡èµ‹å€¼ã€‚</p><p>å½“æˆ‘ä»¬æŠŠä¸€ä¸ªå¯¹è±¡èµ‹å€¼ç»™ä¸€ä¸ªæ–°çš„å˜é‡æ—¶ï¼Œèµ‹çš„å…¶å®<strong>æ˜¯è¯¥å¯¹è±¡çš„åœ¨æ ˆä¸­çš„åœ°å€ï¼Œè€Œä¸æ˜¯å †ä¸­çš„æ•°æ®</strong>ã€‚ä¹Ÿå°±æ˜¯ä¸¤ä¸ªå¯¹è±¡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œæ— è®ºå“ªä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œå…¶å®éƒ½æ˜¯æ”¹å˜çš„å­˜å‚¨ç©ºé—´çš„å†…å®¹ï¼Œå› æ­¤ï¼Œä¸¤ä¸ªå¯¹è±¡æ˜¯è”åŠ¨çš„ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'ha'</span><span class="token punctuation">,</span>    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj0 <span class="token operator">=</span> objobj0<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token string">'haha'</span>obj0<span class="token punctuation">.</span>c<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token boolean">false</span>obj0<span class="token punctuation">.</span>c<span class="token punctuation">.</span>e <span class="token operator">=</span> <span class="token number">2</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj0'</span><span class="token punctuation">,</span> obj0<span class="token punctuation">)</span><span class="token comment">// obj {a: 1, b: 'haha', c: {d: false, e: 2}}</span><span class="token comment">// obj0 {a: 1, b: 'haha', c: {d: false, e: 2}}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ·±æ‹·è´å’Œæµ…æ‹·è´çš„å®šä¹‰"><a href="#æ·±æ‹·è´å’Œæµ…æ‹·è´çš„å®šä¹‰" class="headerlink" title="æ·±æ‹·è´å’Œæµ…æ‹·è´çš„å®šä¹‰"></a>æ·±æ‹·è´å’Œæµ…æ‹·è´çš„å®šä¹‰</h1><h2 id="æµ…æ‹·è´"><a href="#æµ…æ‹·è´" class="headerlink" title="æµ…æ‹·è´"></a>æµ…æ‹·è´</h2><p>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ï¼Œæ‰€ä»¥<strong>å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡</strong>ã€‚</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0uh2h04q6j20s10b4dhi.jpg" alt="æµ…æ‹·è´.png"></p><h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p>å°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥,ä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡ï¼Œä¸”<strong>ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡</strong>ã€‚</p><p>å¯¹äºä¸Šé¢çš„ä¾‹å­</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0uh48ofijj20w10b40uc.jpg" alt="æ·±æ‹·è´.png"></p><h1 id="å®ç°æµ…æ‹·è´"><a href="#å®ç°æµ…æ‹·è´" class="headerlink" title="å®ç°æµ…æ‹·è´"></a>å®ç°æµ…æ‹·è´</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">shallowClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'ha'</span><span class="token punctuation">,</span>    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token function">shallowClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>obj1<span class="token punctuation">.</span>b <span class="token operator">=</span> <span class="token string">'haha'</span>obj1<span class="token punctuation">.</span>c<span class="token punctuation">.</span>d <span class="token operator">=</span> <span class="token boolean">false</span>obj1<span class="token punctuation">.</span>c<span class="token punctuation">.</span>e <span class="token operator">=</span> <span class="token number">2</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj'</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj1'</span><span class="token punctuation">,</span> obj1<span class="token punctuation">)</span><span class="token comment">// obj {a: 1, b: 'ha', c: {d: false, e: 2}}</span><span class="token comment">// obj1 {a: 1, b: 'haha', c: {d: false, e: 2}}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å®ç°æ·±æ‹·è´"><a href="#å®ç°æ·±æ‹·è´" class="headerlink" title="å®ç°æ·±æ‹·è´"></a>å®ç°æ·±æ‹·è´</h1><h2 id="ç”¨JSON"><a href="#ç”¨JSON" class="headerlink" title="ç”¨JSON"></a>ç”¨JSON</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj3 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç¼ºç‚¹ï¼š</p><ul><li><p>ä¸æ”¯æŒ Dateã€æ­£åˆ™ã€undefinedã€å‡½æ•°ç­‰æ•°æ®ï¼ˆè®°å¿†ç‚¹ï¼šJSONå­˜å‚¨çš„æ•°æ®ç±»å‹ï¼‰</p></li><li><p>ä¸æ”¯æŒå¼•ç”¨ï¼ˆç¯çŠ¶ç»“æ„ï¼Œ<code>obj.self=obj</code>ï¼‰</p></li></ul><h2 id="ç”¨é€’å½’"><a href="#ç”¨é€’å½’" class="headerlink" title="ç”¨é€’å½’"></a>ç”¨é€’å½’</h2><p>å…³äºå®ç°æ·±æ‹·è´ä»£ç éšä¾¿ä¸€æœå°±æœ‰äº†ï¼Œä½†ä¸€å¤§ä¸²ä»£ç æœ¬å°ç™½çœ‹å¾—äº‘é‡Œé›¾é‡Œï¼Œä¸‹é¢ä¸€æ­¥ä¸€æ­¥è§£é‡Šï¼Œè™½ç¹çï¼Œä½†æœ‰åŠ©äºç†è§£ã€‚</p><h3 id="1-åˆ¤æ–­åŸºæœ¬ç±»å‹-å¼•ç”¨ç±»å‹"><a href="#1-åˆ¤æ–­åŸºæœ¬ç±»å‹-å¼•ç”¨ç±»å‹" class="headerlink" title="1. åˆ¤æ–­åŸºæœ¬ç±»å‹ | å¼•ç”¨ç±»å‹"></a>1. åˆ¤æ–­åŸºæœ¬ç±»å‹ | å¼•ç”¨ç±»å‹</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// è¿™é‡Œå…ˆç©ºç€ï¼Œæ¥ä¸‹æ¥è¦é’ˆå¯¹ç±»åšåˆ¤æ–­</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-åˆ¤æ–­ç±»ï¼ˆå‡½æ•°-æ•°ç»„-æ­£åˆ™-æ—¥æœŸ-æ™®é€šå¯¹è±¡ï¼‰"><a href="#2-åˆ¤æ–­ç±»ï¼ˆå‡½æ•°-æ•°ç»„-æ­£åˆ™-æ—¥æœŸ-æ™®é€šå¯¹è±¡ï¼‰" class="headerlink" title="2. åˆ¤æ–­ç±»ï¼ˆå‡½æ•° | æ•°ç»„ | æ­£åˆ™ | æ—¥æœŸ | æ™®é€šå¯¹è±¡ï¼‰"></a>2. åˆ¤æ–­ç±»ï¼ˆå‡½æ•° | æ•°ç»„ | æ­£åˆ™ | æ—¥æœŸ | æ™®é€šå¯¹è±¡ï¼‰</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> result  <span class="token comment">// æ·±æ‹·è´ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// è¿™é‡Œå…ˆç©ºç€ï¼Œæ¥ä¸‹æ¥è¦é’ˆå¯¹å‡½æ•°ç±»å‹åšåˆ¤æ–­</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// æˆ–è€… result = new Array()</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// æˆ–è€… result= new RegExp(obj.source, obj.flags)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// æ—¥æœŸç±»å‹-0å˜æˆæ—¶é—´æˆ³</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-åˆ¤æ–­æ™®é€šå‡½æ•°-ç®­å¤´å‡½æ•°"><a href="#3-åˆ¤æ–­æ™®é€šå‡½æ•°-ç®­å¤´å‡½æ•°" class="headerlink" title="3. åˆ¤æ–­æ™®é€šå‡½æ•° | ç®­å¤´å‡½æ•°"></a>3. åˆ¤æ–­æ™®é€šå‡½æ•° | ç®­å¤´å‡½æ•°</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> result  <span class="token comment">// æ·±æ‹·è´ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æœ‰ prototype å°±æ˜¯æ™®é€šå‡½æ•°</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// æˆ–è€… result = new Array()</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// æˆ–è€… result= new RegExp(obj.source, obj.flags)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// æ—¥æœŸç±»å‹-0å˜æˆæ—¶é—´æˆ³</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>  <span class="token comment">// è¿™é‡Œåªè€ƒè™‘åˆ°ç¬¬ä¸€å±‚å±æ€§</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-è€ƒè™‘æ›´æ·±å±‚å±æ€§ï¼ˆé€’å½’ï¼‰"><a href="#4-è€ƒè™‘æ›´æ·±å±‚å±æ€§ï¼ˆé€’å½’ï¼‰" class="headerlink" title="4. è€ƒè™‘æ›´æ·±å±‚å±æ€§ï¼ˆé€’å½’ï¼‰"></a>4. è€ƒè™‘æ›´æ·±å±‚å±æ€§ï¼ˆé€’å½’ï¼‰</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> result  <span class="token comment">// æ·±æ‹·è´ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æœ‰ prototype å°±æ˜¯æ™®é€šå‡½æ•°</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// æˆ–è€… result = new Array()</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// æˆ–è€… result= new RegExp(obj.source, obj.flags)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// æ—¥æœŸç±»å‹-0å˜æˆæ—¶é—´æˆ³</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-è€ƒè™‘ç¯çŠ¶å¼•ç”¨ï¼ˆobj-self-objï¼‰"><a href="#5-è€ƒè™‘ç¯çŠ¶å¼•ç”¨ï¼ˆobj-self-objï¼‰" class="headerlink" title="5. è€ƒè™‘ç¯çŠ¶å¼•ç”¨ï¼ˆobj.self=objï¼‰"></a>5. è€ƒè™‘ç¯çŠ¶å¼•ç”¨ï¼ˆ<code>obj.self=obj</code>ï¼‰</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// åé¢å›ç­”ä¸ºä»€ä¹ˆè¦ç”¨ Map</span><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> result  <span class="token comment">// æ·±æ‹·è´ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æœ‰ prototype å°±æ˜¯æ™®é€šå‡½æ•°</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// æˆ–è€… result = new Array()</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// æˆ–è€… result= new RegExp(obj.source, obj.flags)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// æ—¥æœŸç±»å‹-0å˜æˆæ—¶é—´æˆ³</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>        map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¯çŠ¶å¼•ç”¨å³å¯¹è±¡çš„å±æ€§é—´æ¥æˆ–ç›´æ¥çš„å¼•ç”¨äº†è‡ªèº«å¯¼è‡´é€’å½’è¿›å…¥æ­»å¾ªç¯å¯¼è‡´æ ˆå†…å­˜æº¢å‡ºï¼Œæ‰€ä»¥éœ€è¦å¦å¤–å¼€è¾Ÿä¸€ä¸ªå­˜å‚¨ç©ºé—´ï¼Œæ¥å­˜å‚¨å½“å‰å¯¹è±¡å’Œæ‹·è´å¯¹è±¡çš„å¯¹åº”å…³ç³»ï¼Œå½“éœ€è¦æ‹·è´å½“å‰å¯¹è±¡æ—¶ï¼Œå…ˆå»å­˜å‚¨ç©ºé—´ä¸­æ‰¾ï¼Œæœ‰æ²¡æœ‰æ‹·è´è¿‡è¿™ä¸ªå¯¹è±¡ï¼Œå¦‚æœæœ‰çš„è¯ç›´æ¥è¿”å›ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ç»§ç»­æ‹·è´ã€‚é‚£ä¹ˆè¿™ä¸ªå­˜å‚¨ç©ºé—´çš„æ•°æ®æ ¼å¼åº”è¯¥ä¸º <code>key-value</code> å½¢å¼ï¼Œå¹¶ä¸” <code>key</code> å¯èƒ½æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥é€‰æ‹© <code>Map</code> è¿™ç§æ•°æ®ç»“æ„ã€‚</p><h3 id="6-è€ƒè™‘-map-åº”è¯¥åœ¨å“ªå£°æ˜"><a href="#6-è€ƒè™‘-map-åº”è¯¥åœ¨å“ªå£°æ˜" class="headerlink" title="6. è€ƒè™‘ map åº”è¯¥åœ¨å“ªå£°æ˜"></a>6. è€ƒè™‘ map åº”è¯¥åœ¨å“ªå£°æ˜</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'ha'</span><span class="token punctuation">,</span>    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>obj1<span class="token punctuation">.</span>self <span class="token operator">=</span> obj1console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj1'</span><span class="token punctuation">,</span>obj1<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'obj2'</span><span class="token punctuation">,</span>obj2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œåä¼šå‘ç° <code>obj2</code> ä¹Ÿæœ‰ <code>self</code> å±æ€§ï¼Œæ‰€ä»¥ <code>map</code> ä¸è¯¥å£°æ˜ä¸ºå…¨å±€å˜é‡</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> result  <span class="token comment">// æ·±æ‹·è´ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æœ‰ prototype å°±æ˜¯æ™®é€šå‡½æ•°</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// æˆ–è€… result = new Array()</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// æˆ–è€… result= new RegExp(obj.source, obj.flags)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// æ—¥æœŸç±»å‹-0å˜æˆæ—¶é—´æˆ³</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>        map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="7-è€ƒè™‘æ‹·è´åº”è¯¥æ˜¯æ‹·è´è‡ªèº«å±æ€§"><a href="#7-è€ƒè™‘æ‹·è´åº”è¯¥æ˜¯æ‹·è´è‡ªèº«å±æ€§" class="headerlink" title="7. è€ƒè™‘æ‹·è´åº”è¯¥æ˜¯æ‹·è´è‡ªèº«å±æ€§"></a>7. è€ƒè™‘æ‹·è´åº”è¯¥æ˜¯æ‹·è´è‡ªèº«å±æ€§</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span>obj<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> result  <span class="token comment">// æ·±æ‹·è´ç»“æœ</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// æœ‰ prototype å°±æ˜¯æ™®é€šå‡½æ•°</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">obj</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// æˆ–è€… result = new Array()</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result<span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// æˆ–è€… result= new RegExp(obj.source, obj.flags)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj <span class="token operator">-</span> <span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// æ—¥æœŸç±»å‹-0å˜æˆæ—¶é—´æˆ³</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>        map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> result    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> obj    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡³æ­¤ç®—æ˜¯åŸºæœ¬ç»“æŸäº†ï¼Œä¸€ä¸ªå®Œæ•´çš„æ·±æ‹·è´åº”å½“è¿˜è¦è€ƒè™‘æ›´å¤šçš„æƒ…å†µï¼ˆå¦‚è·¨ iframeï¼‰ï¼Œè¿™é‡Œåªæ˜¯å®ç°äº†ä¸€äº›åŸºæœ¬çš„åŠŸèƒ½ï¼Œä¸è¿‡åœ¨è¿™ä¸ªæ¨ç†è¿‡ç¨‹æˆ‘å—ç›Šè‰¯å¤šï¼š</p><ul><li><p>åˆ¤æ–­æ•°æ®ç±»å‹å’Œå¯¹è±¡ç±»å‹</p></li><li><p>å…¨å±€å˜é‡çš„å½±å“</p></li><li><p>Map ç”¨æ³•</p></li><li><p>æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°åŒºåˆ«</p></li><li><p>é€’å½’æ€ç»´</p></li><li><p>è€ƒè™‘é—®é¢˜åº”å½“ä¸¥è°¨ï¼Œæ—¢è¦å‘å‰å¤šèµ°ä¸€æ­¥ï¼Œè¿˜è¦å¾€åå¤šçœ‹ä¸€çœ¼</p></li></ul><h1 id="ä½¿ç”¨-lodash-åº“"><a href="#ä½¿ç”¨-lodash-åº“" class="headerlink" title="ä½¿ç”¨ lodash åº“"></a>ä½¿ç”¨ lodash åº“</h1><h2 id="clone-æ–¹æ³•"><a href="#clone-æ–¹æ³•" class="headerlink" title="_.clone æ–¹æ³•"></a>_.clone æ–¹æ³•</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string-property property">'a'</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'b'</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">var</span> shallow <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span>objects<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>shallow<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> objects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="cloneDeep-æ–¹æ³•"><a href="#cloneDeep-æ–¹æ³•" class="headerlink" title="_.cloneDeep æ–¹æ³•"></a>_.cloneDeep æ–¹æ³•</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string-property property">'a'</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">'b'</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">var</span> deep <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">cloneDeep</span><span class="token punctuation">(</span>objects<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deep<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> objects<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// =&gt; false</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue è‡ªå®šä¹‰æŒ‡ä»¤</title>
      <link href="/2022/03/27/vue-zi-ding-yi-zhi-ling/"/>
      <url>/2022/03/27/vue-zi-ding-yi-zhi-ling/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ä¹‹å‰ Vue å­¦ä¹ ä¸­æœ‰ç¯‡<a href="https://april-cl.github.io/2021/08/26/xiao-bai-cai-bi-ji-vue-er-zhi-ling/">ç¬”è®°</a>è®°å½•äº†é¡¹ç›®ä¸­å¸¸ç”¨çš„å†…ç½®æŒ‡ä»¤ï¼Œæ­¤å¤– Vue ä¹Ÿå…è®¸æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤ã€‚</p><h1 id="å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤"></a>å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤</h1><p>åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹è‡ªå®šä¹‰æŒ‡ä»¤ï¼ŒåŒæ—¶è¿™ä¸ªæŒ‡ä»¤ä¹Ÿèƒ½å¤Ÿç”¨äºå…¨å±€ï¼Œå³ä»»ä½•ç»„ä»¶éƒ½èƒ½å¤Ÿä½¿ç”¨è¿™ä¸ªå…¨å±€æŒ‡ä»¤ã€‚å¦‚è¦å£°æ˜å¤šä¸ªå…¨å±€æŒ‡ä»¤ï¼Œå¤šæ¬¡è°ƒç”¨ <code>Vue.directive</code>ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å£°æ˜å…¨å±€æŒ‡ä»¤ï¼Œæ³¨æ„åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹</span><span class="token comment">// æ³¨å†Œ</span>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'my-directive'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">componentUpdated</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// æ³¨å†Œ (æŒ‡ä»¤å‡½æ•°)</span>Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'my-directive-fun'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// è¿™é‡Œå°†ä¼šè¢« `bind` å’Œ `update` è°ƒç”¨</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// getterï¼Œè¿”å›å·²æ³¨å†Œçš„æŒ‡ä»¤</span><span class="token keyword">var</span> myDirective <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'my-directive'</span><span class="token punctuation">)</span><span class="token comment">// ä½¿ç”¨å…¨å±€æŒ‡ä»¤ï¼Œåœ¨ä»»ä½•ç»„ä»¶ä¸­éƒ½å¯ä»¥ä½¿ç”¨ v-my-directive</span><span class="token operator">&lt;</span>myComponent v<span class="token operator">-</span>my<span class="token operator">-</span>directive <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>myComponent<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤"></a>å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤</h1><p>åœ¨æŸä¸ªç»„ä»¶ Vue ç»„ä»¶ä¸‹è¿›è¡Œå£°æ˜ï¼Œåªèƒ½åœ¨è¯¥ Vue ç»„ä»¶çš„å®ä¾‹ä¸­ä½¿ç”¨ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å£°æ˜å±€éƒ¨æŒ‡ä»¤</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token operator">...</span>        <span class="token literal-property property">directives</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token string-property property">"my-directive"</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token function-variable function">update</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token function-variable function">componentUpdated</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>                <span class="token function-variable function">unbind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token comment">// åªèƒ½åœ¨è¯¥ç»„ä»¶ä¸­ä½¿ç”¨å±€éƒ¨æŒ‡ä»¤</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>div v<span class="token operator">-</span>my<span class="token operator">-</span>directive <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„åŒºåˆ†ï¼šå…¨å±€æ˜¯ <code>Vue.directive</code>ï¼Œå±€éƒ¨æ˜¯ <code>directives</code></p></blockquote><h1 id="é’©å­å‡½æ•°"><a href="#é’©å­å‡½æ•°" class="headerlink" title="é’©å­å‡½æ•°"></a>é’©å­å‡½æ•°</h1><p>æ‘˜æŠ„è‡ª<a href="https://cn.vuejs.org/v2/guide/custom-directive.html#%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0">æ–‡æ¡£</a></p><ul><li><p>bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®ã€‚</p></li><li><p>insertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)ã€‚</p></li><li><p>updateï¼šæ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­ VNode æ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–°ã€‚</p></li><li><p>componentUpdatedï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ã€‚</p></li><li><p>unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚</p></li></ul><h1 id="é’©å­å‡½æ•°å‚æ•°"><a href="#é’©å­å‡½æ•°å‚æ•°" class="headerlink" title="é’©å­å‡½æ•°å‚æ•°"></a>é’©å­å‡½æ•°å‚æ•°</h1><ul><li>elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOMã€‚</li><li>bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹ propertyï¼š<ul><li>nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€ã€‚</li><li>valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼šv-my-directive=â€1 + 1â€ ä¸­ï¼Œç»‘å®šå€¼ä¸º 2ã€‚</li><li>oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨ã€‚</li><li>expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-my-directive=â€1 + 1â€ ä¸­ï¼Œè¡¨è¾¾å¼ä¸º â€œ1 + 1â€ã€‚</li><li>argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-my-directive:foo ä¸­ï¼Œå‚æ•°ä¸º â€œfooâ€ã€‚</li><li>modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šv-my-directive.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }ã€‚</li></ul></li><li>vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹ã€‚</li><li>oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Vue<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'demo'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token function-variable function">bind</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding<span class="token punctuation">,</span> vnode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>stringify    el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span>      <span class="token string">'name: '</span>       <span class="token operator">+</span> <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span> <span class="token operator">+</span>      <span class="token string">'value: '</span>      <span class="token operator">+</span> <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span> <span class="token operator">+</span>      <span class="token string">'expression: '</span> <span class="token operator">+</span> <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>expression<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span> <span class="token operator">+</span>      <span class="token string">'argument: '</span>   <span class="token operator">+</span> <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>arg<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span> <span class="token operator">+</span>      <span class="token string">'modifiers: '</span>  <span class="token operator">+</span> <span class="token function">s</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>modifiers<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'&lt;br&gt;'</span> <span class="token operator">+</span>      <span class="token string">'vnode keys: '</span> <span class="token operator">+</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>vnode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#hook-arguments-example'</span><span class="token punctuation">,</span>  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'hello!'</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hook-arguments-example<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">v-demo:</span>foo.a.b</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0onjhp1u8j20ci06imz8.jpg"></p><h1 id="æŒ‡ä»¤çš„ä½œç”¨ä»¥åŠä½¿ç”¨åœºæ™¯"><a href="#æŒ‡ä»¤çš„ä½œç”¨ä»¥åŠä½¿ç”¨åœºæ™¯" class="headerlink" title="æŒ‡ä»¤çš„ä½œç”¨ä»¥åŠä½¿ç”¨åœºæ™¯"></a>æŒ‡ä»¤çš„ä½œç”¨ä»¥åŠä½¿ç”¨åœºæ™¯</h1><ul><li>ç”¨äº DOM æ“ä½œ</li></ul><p>Vue ç»„ä»¶/å®ä¾‹çš„ä¸»è¦ç”¨äºæ•°æ®ç»‘å®šã€äº‹ä»¶ç›‘å¬ã€DOM æ›´æ–°ï¼Œè€ŒæŒ‡ä»¤çš„ä½œç”¨ä¸»è¦æ˜¯å®ŒæˆåŸç”ŸDOMæ“ä½œã€‚</p><ul><li>å‡å°‘é‡å¤</li></ul><p>å½“æˆ‘ä»¬éœ€è¦é‡å¤å¤šæ¬¡ç›¸åŒçš„åŸç”Ÿ DOM æ“ä½œï¼Œæˆ–è€…æ˜¯è¿›è¡Œä¸€äº›æ¯”è¾ƒå¤æ‚çš„åŸç”Ÿ DOM æ“ä½œæ—¶ï¼Œå¯ä»¥å€ŸåŠ©æŒ‡ä»¤æ¥å®Œæˆã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vue å¯¹ data åšäº†ä»€ä¹ˆ</title>
      <link href="/2022/03/23/vue-de-data-shu-xing/"/>
      <url>/2022/03/23/vue-de-data-shu-xing/</url>
      
        <content type="html"><![CDATA[<p>åœ¨ Vue é¡¹ç›®ä¸­ï¼Œé€šè¿‡ <code>let vm = new Vue({data: myData})</code> å°±å¯ä»¥åœ¨å½“æ•°æ®å‘ç”Ÿå˜åŒ–åï¼Œä½¿ç”¨åˆ°è¯¥æ•°æ®çš„è§†å›¾ä¹Ÿä¼šç›¸åº”è¿›è¡Œè‡ªåŠ¨æ›´æ–°ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>æœ¬æ–‡ä¸ä»æºç åˆ†æ Vue å¯¹ data åšäº†ä»€ä¹ˆï¼ˆæ¯•ç«Ÿæˆ‘ä¹Ÿè¯»ä¸æ‡‚æºç ğŸ˜œï¼‰ï¼Œåªä¸ºè®°å½•å­¦ä¹ åˆ°çš„ç ”ç©¶æ–¹æ³•ï¼Œæœ‰æ—¶ï¼Œæ–¹æ³•æ¯”çŸ¥è¯†æœ¬èº«æ›´é‡è¦ä¸æ˜¯ä¹ˆï¼ˆæˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼‰</p><p>é¦–å…ˆï¼Œè¿™é‡Œå–ä¸ªå…³å­ï¼Œæ’‡å¼€ Vueï¼Œå­¦å‡ ä¸ª ES6 çš„æ–°è¯­æ³•</p><h1 id="getter-setter"><a href="#getter-setter" class="headerlink" title="getter / setter"></a>getter / setter</h1><p>get è¯­æ³•å°†å¯¹è±¡å±æ€§ç»‘å®šåˆ°æŸ¥è¯¢è¯¥å±æ€§æ—¶å°†è¢«è°ƒç”¨çš„å‡½æ•°</p><p>å½“å°è¯•è®¾ç½®å±æ€§æ—¶ï¼Œset è¯­æ³•å°†å¯¹è±¡å±æ€§ç»‘å®šåˆ°è¦è°ƒç”¨çš„å‡½æ•°</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">_num</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>  <span class="token keyword">get</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_num <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token keyword">set</span> <span class="token function">num</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_num <span class="token operator">=</span> n <span class="token punctuation">}</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>num<span class="token punctuation">)</span>obj<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0kz7l4zitj207c04hq3l.jpg"></p><p>å¤§ç™½è¯è®²å®ƒä»¬çš„ç”¨æ³•å°±æ˜¯ getter è°ƒç”¨æ—¶ä¸åŠ æ‹¬å·çš„å‡½æ•°ï¼Œsetter ç”¨ <code>= xxx</code> å¯¹å±æ€§èµ‹å€¼</p><h1 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty()"></a>Object.defineProperty()</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">Object.defineProperty()</a> æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡</p><p>å®ƒçš„è¯­æ³•</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç°åœ¨æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œdata å¯¹è±¡çš„ n å±æ€§å€¼ä¸èƒ½å°äº0</p><p>ç»“åˆ getter / setter çš„ç”¨æ³•</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> data1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>data1<span class="token punctuation">.</span>_n <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// _n ç”¨æ¥å·å·å­˜å‚¨ n çš„å€¼</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data1<span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_n  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>_n <span class="token operator">=</span> value  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚ä¸€ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data1<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>data1<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚ä¸€ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data1<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> è®¾ç½®ä¸º -1 å¤±è´¥</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>data1<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚ä¸€ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data1<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> è®¾ç½®ä¸º 1 æˆåŠŸ</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0kziyrdnuj20ea084mzh.jpg" alt="éœ€æ±‚ä¸€.png"></p><p>å€˜è‹¥è¿™é‡Œç›´æ¥ä¿®æ”¹ <code>data1._n</code> å‘¢ï¼Ÿ</p><p>å¯ä»¥å‘ç° <code>data1.n</code> ä¹Ÿè¢«ä¿®æ”¹äº†</p><p>è€ƒè™‘å°† <code>_n</code> åŒ…è£…ä¸ºä¸€ä¸ªåŒ¿åå¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡ä»£ç†å‡½æ•°è®¿é—®</p><h1 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> data2 <span class="token operator">=</span> <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// æ‹¬å·é‡Œæ˜¯åŒ¿åå¯¹è±¡ï¼Œæ— æ³•è®¿é—®</span><span class="token keyword">function</span> <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>     <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> data<span class="token punctuation">.</span>n    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>value<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span>      data<span class="token punctuation">.</span>n <span class="token operator">=</span> value    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> obj  <span class="token comment">// obj å°±æ˜¯ä»£ç†</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚äºŒï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data2<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>data2<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚äºŒï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data2<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ï¼Œè®¾ç½®ä¸º -1 å¤±è´¥</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>data2<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚äºŒï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data2<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ï¼Œè®¾ç½®ä¸º 1 æˆåŠŸ</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0l0bqv7oqj20cy097gob.jpg" alt="éœ€æ±‚äºŒ.png"></p><p>å‡å¦‚å…ˆå®šä¹‰ <code>myData = {n:0}</code>ï¼Œå†å°† <code>myData</code> å¯¹è±¡ä¼ é€’ç»™åŒ¿åå¯¹è±¡ï¼ˆ<code>data2 = proxy({ data:myData })</code>ï¼‰ï¼Œåˆ™ä»å¯ä»¥é€šè¿‡ <code>myData.n</code> æ¥ä¿®æ”¹ <code>data2.n</code> çš„å€¼ï¼Œæ‰€ä»¥éœ€è¦å¯¹ä»£ç†æ¥æ”¶çš„æ•°æ®è¿›è¡Œç›‘å¬</p><h1 id="æ•°æ®ç›‘å¬"><a href="#æ•°æ®ç›‘å¬" class="headerlink" title="æ•°æ®ç›‘å¬"></a>æ•°æ®ç›‘å¬</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> myData <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token keyword">let</span> data3 <span class="token operator">=</span> <span class="token function">proxy2</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span>myData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">function</span> <span class="token function">proxy2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>data<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">let</span> value <span class="token operator">=</span> data<span class="token punctuation">.</span>n  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> value    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>newValue<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">return</span>      value <span class="token operator">=</span> newValue    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// å°±åŠ äº†ä¸Šé¢å‡ å¥ï¼Œè¿™å‡ å¥è¯ä¼šç›‘å¬ data</span>  <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'n'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> data<span class="token punctuation">.</span>n    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">{</span>      data<span class="token punctuation">.</span>n <span class="token operator">=</span> value    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> obj <span class="token comment">// obj å°±æ˜¯ä»£ç†</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚ä¸‰ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data3<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>myData<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚ä¸‰ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data3<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ï¼Œè®¾ç½®ä¸º -1 å¤±è´¥äº†</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>myData<span class="token punctuation">.</span>n <span class="token operator">=</span> <span class="token number">1</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">éœ€æ±‚ä¸‰ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data3<span class="token punctuation">.</span>n<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ï¼Œè®¾ç½®ä¸º 1 æˆåŠŸäº†</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0l0q6ntybj20ca0djgpj.jpg" alt="éœ€æ±‚ä¸‰.png"></p><h1 id="Vue-çš„-data"><a href="#Vue-çš„-data" class="headerlink" title="Vue çš„ data"></a>Vue çš„ data</h1><p>ç°åœ¨ï¼Œå›è¿‡å¤´æ¥çœ‹çœ‹ <code>let vm = new Vue({data: myData})</code> åšäº†ä»€ä¹ˆ</p><ol><li><p>è®© <code>vm</code> æˆä¸º <code>myData</code> çš„ä»£ç†ï¼Œç”± <code>vm</code> å…¨æƒè´Ÿè´£ <code>myData</code> å¯¹è±¡çš„å±æ€§è¯»å†™</p></li><li><p>å¯¹ <code>myData</code> çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬ï¼Œå½“ <code>myData</code> çš„å±æ€§å‘ç”Ÿå˜åŒ–åˆ™é€šçŸ¥ <code>vm</code> è°ƒç”¨ <code>render(data)</code> æ›´æ–° UI</p></li></ol><h1 id="Vue-set-å’Œ-this-set"><a href="#Vue-set-å’Œ-this-set" class="headerlink" title="Vue.set å’Œ this.$set"></a>Vue.set å’Œ this.$set</h1><p>çœ‹å‰é¢ <code>Object.defineProperty()</code> çš„ç”¨æ³•å¯ä»¥çŸ¥é“å¿…é¡»è¦æœ‰ä¸€ä¸ª <code>prop</code> æ‰å¯ä»¥ç›‘å¬ä»£ç† obj[prop]ï¼Œåœ¨Vue æ–‡æ¡£ä¸­ [Vue ç¤ºä¾‹] -&gt; [æ•°æ®ä¸æ–¹æ³•] ä¸€èŠ‚ä¸­ä¹ŸæåŠ </p><blockquote><p>å½“ä¸€ä¸ª Vue å®ä¾‹è¢«åˆ›å»ºæ—¶ï¼Œå®ƒå°† data å¯¹è±¡ä¸­çš„æ‰€æœ‰çš„ property åŠ å…¥åˆ° Vue çš„å“åº”å¼ç³»ç»Ÿä¸­ï¼Œæ¯”å¦‚ï¼š<code>var vm = new Vue({ data: { a: 1 }})</code>ã€‚å½“è¿™äº› property çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè§†å›¾å°†ä¼šäº§ç”Ÿâ€œå“åº”â€ï¼Œå³åŒ¹é…æ›´æ–°ä¸ºæ–°çš„å€¼ã€‚å½“è¿™äº›æ•°æ®æ”¹å˜æ—¶ï¼Œè§†å›¾ä¼šè¿›è¡Œé‡æ¸²æŸ“ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯åªæœ‰å½“å®ä¾‹è¢«åˆ›å»ºæ—¶å°±å·²ç»å­˜åœ¨äº data ä¸­çš„ property æ‰æ˜¯å“åº”å¼çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ æ·»åŠ ä¸€ä¸ªæ–°çš„ propertyï¼Œæ¯”å¦‚ï¼š<code>vm.b = 'hi'</code> é‚£ä¹ˆå¯¹ b çš„æ”¹åŠ¨å°†ä¸ä¼šè§¦å‘ä»»ä½•è§†å›¾çš„æ›´æ–°ã€‚å¦‚æœä½ çŸ¥é“ä½ ä¼šåœ¨æ™šäº›æ—¶å€™éœ€è¦ä¸€ä¸ª propertyï¼Œä½†æ˜¯ä¸€å¼€å§‹å®ƒä¸ºç©ºæˆ–ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä½ ä»…éœ€è¦è®¾ç½®ä¸€äº›åˆå§‹å€¼ã€‚</p></blockquote><p>ä½†å¦‚æœä¸€å¼€å§‹ä¸çŸ¥é“è¿™ä¸ª <code>property</code>ï¼Œåˆ™å¯ä»¥é€šè¿‡ <code>Vue.set()</code> æˆ– <code>vm.$set()</code> åŠ¨æ€æ·»åŠ </p><p>ä½œç”¨ï¼š</p><ul><li><p>æ–°å¢ property</p></li><li><p>è‡ªåŠ¨åˆ›å»ºä»£ç†å’Œç›‘å¬</p></li><li><p>è§¦å‘ UI æ›´æ–°ï¼ˆä½†ä¸ä¼šç«‹å³æ›´æ–°ï¼‰</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSS çš„ä¼ªç±»å’Œä¼ªå…ƒç´ </title>
      <link href="/2022/03/17/css-de-wei-lei-he-wei-yuan-su/"/>
      <url>/2022/03/17/css-de-wei-lei-he-wei-yuan-su/</url>
      
        <content type="html"><![CDATA[<p>æ˜¨å¤©åœ¨å†™æ–‡ç« çš„æ—¶å€™å‘ç°å¯¹ä¼ªç±»å’Œä¼ªå…ƒç´ çš„æ¦‚å¿µæœ‰äº›æ··æ·†ï¼ŒæŸ¥é˜…ä¸€ç•ªæœ‰æ‰€æ”¶è·ï¼Œè®°ä¸€ä¸‹~</p><h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ä¼ªç±»å³å‡çš„ç±»ï¼Œè¡¨ç¤ºè¢«é€‰æ‹©å…ƒç´ çš„æŸç§çŠ¶æ€ï¼Œé€šå¸¸å¯ä»¥æ·»åŠ ç±»æ¥è¾¾åˆ°æ•ˆæœï¼Œå¦‚ <code>:hover</code>ã€‚</p><p>ä¼ªå…ƒç´ å³å‡å…ƒç´ ï¼Œè¡¨ç¤ºè¢«é€‰æ‹©å…ƒç´ çš„æŸä¸ªéƒ¨åˆ†ï¼Œè¿™ä¸ªéƒ¨åˆ†çœ‹èµ·æ¥åƒä¸€ä¸ªç‹¬ç«‹çš„å…ƒç´ ï¼Œæ¢å¥è¯è¯´é€šå¸¸éœ€è¦é€šè¿‡æ·»åŠ å…ƒç´ æ‰èƒ½è¾¾åˆ°æ•ˆæœï¼Œå¦‚ <code>::before</code>ã€‚</p><h2 id="è¡¨ç¤ºæ–¹æ³•"><a href="#è¡¨ç¤ºæ–¹æ³•" class="headerlink" title="è¡¨ç¤ºæ–¹æ³•"></a>è¡¨ç¤ºæ–¹æ³•</h2><p>åœ¨ CSS3 ä¸­ï¼Œè§„å®šäº†ä¼ªç±»ç”¨ä¸€ä¸ªå†’å·ï¼ˆ:ï¼‰è¡¨ç¤ºï¼Œä¼ªå…ƒç´ ç”¨ä¸¤ä¸ªå†’å·è¡¨ç¤ºï¼ˆ::ï¼‰ã€‚ä½†é™¤äº† selectionï¼Œå…¶ä½™å››ä¸ªä¼ªå…ƒç´ é€‰æ‹©å™¨å·²ç»åœ¨ CSS2 ä¸­å­˜åœ¨ä¸”å’Œä¼ªç±»ç”¨çš„æ˜¯ä¸€æ ·çš„å•å†’å·è¡¨ç¤ºçš„ã€‚ä¸ºäº†å‘ä¸‹å…¼å®¹ï¼Œç°åœ¨çš„æµè§ˆå™¨ä¸­ä¼ªå…ƒç´ é€‰æ‹©å™¨ç”¨å•å†’å·å’ŒåŒå†’å·éƒ½å¯ä»¥ã€‚åœ¨æ²¡æœ‰å…¼å®¹é—®é¢˜çš„æƒ…å†µä¸‹ï¼Œå»ºè®® CSS3 æ ‡å‡†æ¥å¼€å‘ã€‚</p><p>ä¸‹é¢ä¸¾å‡ ä¸ªæ —å­æ¥å¸®åŠ©æ¶ˆåŒ–ä¸Šé¢çš„æ–‡å­—</p><p>ä¾‹ 1ï¼šå°†ä¸€è¡Œå­—ç¬¦ä¸²çš„é¦–å­—æ¯å˜æˆçº¢è‰²</p><p>ç°åœ¨ä¸ç”¨ä¼ªå…ƒç´ åº”è¯¥å¦‚ä½•å®ç°ï¼Ÿç”¨ CSS slector é€‰æ‹©ï¼Ÿæƒ³äº†ä¸€æ™šä¸Šä¹Ÿæ²¡æƒ³å‡ºæ¥ï¼Œæ—¢ç„¶æ²¡æ³•é€‰æ‹©ä¹Ÿå°±æ²¡æ³•æ·»åŠ ä¸€ä¸ªç±»æ¥æ”¹å˜é¦–å­—æ¯çš„é¢œè‰²ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>I am snow<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ·»åŠ å…ƒç´ è¯•è¯•ï¼Œå¦‚ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªå…ƒç´  span å°†é¦–å­—æ¯åŒ…è£¹èµ·æ¥ï¼Œè¿›è€Œæ”¹å˜å…¶é¢œè‰²ï¼ŒæˆåŠŸäº†ã€‚è¿™é‡Œï¼Œå…³é”®ç‚¹åœ¨äºæˆ‘ä»¬åˆ›å»ºäº†æ–°çš„å…ƒç´ è¾¾åˆ°äº†::first-letterçš„ä½œç”¨ï¼Œä¸”ä¸èƒ½é€šè¿‡æ·»åŠ å…¶ä»–ç±»æ¥å®ç°è¿™ä¸€æ•ˆæœï¼Œå› æ­¤å°†::first-letterå«åšä¼ªå…ƒç´ è€Œä¸æ˜¯ä¼ªç±»ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token value css language-css"><span class="token punctuation">{</span><span class="token punctuation">{</span></span></span></span> <span class="token attr-name"><span class="token namespace">color:</span></span> <span class="token attr-name">red</span> <span class="token attr-name">}}</span><span class="token punctuation">&gt;</span></span>I<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span> am snow<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¾‹ 2: å¦‚ä¸‹è¦å°† I am snow è¿™å¥è¯å˜ä¸ºçº¢è‰²</p><p>å¾ˆç®€å•ç”¨:first-childï¼ŒåŒæ ·æ·»åŠ ä¸€ä¸ªç±»è¯•è¯•ï¼Œæ˜¾ç„¶å¾ˆå®¹æ˜“è¾¾åˆ°åŒæ ·æ•ˆæœï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åˆ›å»ºæ–°çš„å…ƒç´ åªæ˜¯æ·»åŠ äº†ä¸€ä¸ªç±».red-lineï¼Œå› æ­¤å°†:first-childå«åšä¼ªç±»è€Œä¸æ˜¯ä¼ªå…ƒç´ ï¼Œå°½ç®¡å®ƒå’Œ::first-letteråœ¨è¯­ä¹‰ä¸Šååˆ†ç›¸ä¼¼ã€‚</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">div:first-child { color: red;}æˆ–.red-line {   color: red;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>red-line<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>I am snow<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸¤ä¸ªä¾‹å­æˆ‘ä»è¿™ç¯‡æ–‡ç« ã€Š<a href="https://juejin.cn/post/6844903810951806989">ä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«</a>ã€‹æŠ„å½•è¿‡æ¥çš„ï¼Œå¯¹è¿™ä¸¤è€…çš„åŒºåˆ«ä¹Ÿæ˜¯åœ¨çœ‹è¿‡è¿™ä¸¤ä¸ªä¾‹å­åè±ç„¶å¼€æœ—çš„ ğŸ™‚</p><h1 id="ä¼ªå…ƒç´ "><a href="#ä¼ªå…ƒç´ " class="headerlink" title="ä¼ªå…ƒç´ "></a>ä¼ªå…ƒç´ </h1><ul><li><p><code>::before</code>ï¼šåˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œå…¶å°†æˆä¸ºåŒ¹é…é€‰ä¸­çš„å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­å…ƒç´ ã€‚å¸¸é€šè¿‡ <code>content</code> å±æ€§æ¥ä¸ºä¸€ä¸ªå…ƒç´ æ·»åŠ ä¿®é¥°æ€§çš„å†…å®¹ã€‚æ­¤å…ƒç´ é»˜è®¤ä¸ºè¡Œå†…å…ƒç´ ã€‚</p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>ä¸€äº›å¼•ç”¨<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span>, ä»–è¯´, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>æ¯”æ²¡æœ‰å¥½<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span>ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">q::before</span> <span class="token punctuation">{</span>   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Â«"</span><span class="token punctuation">;</span>   <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">q::after</span> <span class="token punctuation">{</span>   <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Â»"</span><span class="token punctuation">;</span>   <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0g4xonn0ij208c00umx7.jpg"></p></li><li><p><code>::after</code>ï¼šç”¨æ¥åˆ›å»ºä¸€ä¸ªä¼ªå…ƒç´ ï¼Œä½œä¸ºå·²é€‰ä¸­å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ ã€‚é€šå¸¸ä¼šé…åˆ <code>content</code> å±æ€§æ¥ä¸ºè¯¥å…ƒç´ æ·»åŠ è£…é¥°å†…å®¹ã€‚è¿™ä¸ªè™šæ‹Ÿå…ƒç´ é»˜è®¤æ˜¯è¡Œå†…å…ƒç´ ã€‚</p></li><li><p><code>::first-letter</code>ï¼šä¼šé€‰ä¸­å—çº§å…ƒç´ ç¬¬ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå­—æ¯ï¼Œå¹¶ä¸”æ–‡å­—æ‰€å¤„çš„è¡Œä¹‹å‰æ²¡æœ‰å…¶ä»–å†…å®¹ï¼ˆå¦‚å›¾ç‰‡å’Œå†…è”çš„è¡¨æ ¼ï¼‰ã€‚</p></li><li><p><code>::first-line</code>ï¼šåœ¨å—çº§å…ƒç´ çš„ç¬¬ä¸€è¡Œåº”ç”¨æ ·å¼ã€‚ç¬¬ä¸€è¡Œçš„é•¿åº¦å–å†³äºå¾ˆå¤šå› ç´ ï¼ŒåŒ…æ‹¬å…ƒç´ å®½åº¦ï¼Œæ–‡æ¡£å®½åº¦å’Œæ–‡æœ¬çš„æ–‡å­—å¤§å°ã€‚</p></li><li><p><code>::section</code>ï¼šåº”ç”¨äºæ–‡æ¡£ä¸­è¢«ç”¨æˆ·é«˜äº®çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚ä½¿ç”¨é¼ æ ‡æˆ–å…¶ä»–é€‰æ‹©è®¾å¤‡é€‰ä¸­çš„éƒ¨åˆ†ï¼‰ã€‚</p></li><li><p><code>::slotted()</code>ï¼šç”¨äºé€‰å®šé‚£äº›è¢«æ”¾åœ¨ HTMLæ¨¡æ¿ ä¸­çš„å…ƒç´ ã€‚</p></li><li><p><code>::placehoder</code>ï¼šå¯ä»¥é€‰æ‹©ä¸€ä¸ªè¡¨å•å…ƒç´ çš„å ä½æ–‡æœ¬ï¼Œå®ƒå…è®¸å¼€å‘è€…å’Œè®¾è®¡å¸ˆè‡ªå®šä¹‰å ä½æ–‡æœ¬çš„æ ·å¼ã€‚</p></li></ul><h1 id="ä¼ªç±»"><a href="#ä¼ªç±»" class="headerlink" title="ä¼ªç±»"></a>ä¼ªç±»</h1><h2 id="çŠ¶æ€ç±»ä¼ªç±»"><a href="#çŠ¶æ€ç±»ä¼ªç±»" class="headerlink" title="çŠ¶æ€ç±»ä¼ªç±»"></a>çŠ¶æ€ç±»ä¼ªç±»</h2><ul><li><p><code>:link</code>ï¼šæ­£å¸¸çš„é“¾æ¥ï¼Œå³æœªè¢«ç‚¹å‡»æ—¶</p></li><li><p><code>:visited</code>ï¼šç‚¹å‡»å</p></li><li><p><code>:hover</code>ï¼šæ‚¬åœæ—¶</p></li><li><p><code>:active</code>ï¼šè¢«æ¿€æ´»æ—¶</p></li><li><p><code>:focus</code>ï¼šèšç„¦æ—¶</p></li></ul><p>ä¸ºäº†å¯ä»¥æ­£ç¡®åœ°æ¸²æŸ“é“¾æ¥å…ƒç´ çš„æ ·å¼ï¼Œ<code>:link</code> ä¼ªç±»é€‰æ‹©å™¨åº”å½“æ”¾åœ¨å…¶ä»–ä¼ªç±»é€‰æ‹©å™¨çš„å‰é¢ï¼Œå¹¶ä¸”éµå¾ªLVHAçš„å…ˆåé¡ºåºï¼Œå³ï¼š<code>:link</code> â€” <code>:visited</code> â€” <code>:hover</code> â€” <code>:active</code></p><h2 id="ç»“æ„ç±»ä¼ªç±»"><a href="#ç»“æ„ç±»ä¼ªç±»" class="headerlink" title="ç»“æ„ç±»ä¼ªç±»"></a>ç»“æ„ç±»ä¼ªç±»</h2><ul><li><p><code>:not()</code>ï¼šç”¨æ¥åŒ¹é…ä¸ç¬¦åˆä¸€ç»„é€‰æ‹©å™¨çš„å…ƒç´ ã€‚ç”±äºå®ƒçš„ä½œç”¨æ˜¯é˜²æ­¢ç‰¹å®šçš„å…ƒç´ è¢«é€‰ä¸­ï¼Œå®ƒä¹Ÿè¢«ç§°ä¸ºåé€‰ä¼ªç±»</p> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* é€‰æ‹©æ‰€æœ‰ä¸æ˜¯æ®µè½ï¼ˆpï¼‰çš„å…ƒç´  */</span><span class="token selector">:not(p)</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p><code>:first-child</code>ï¼šè¡¨ç¤ºåœ¨ä¸€ç»„å…„å¼Ÿå…ƒç´ ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This text is selected!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This text isn't selected.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>This text isn't selected: it's not a `p`.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This text isn't selected.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">p:first-child</span> <span class="token punctuation">{</span>   <span class="token property">color</span><span class="token punctuation">:</span> lime<span class="token punctuation">;</span>   <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>   <span class="token property">padding</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0fmpvb8eqj208s05r3zl.jpg"></p></li><li><p><code>:last-child</code>ï¼šä»£è¡¨çˆ¶å…ƒç´ çš„æœ€åä¸€ä¸ªå­å…ƒç´ </p></li><li><p><code>:only-child</code>ï¼šåŒ¹é…æ²¡æœ‰ä»»ä½•å…„å¼Ÿå…ƒç´ çš„å…ƒç´ </p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>I am a lonely only child.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span><span class="token punctuation">&gt;</span></span>I have siblings.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>So do I!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>I also have siblings, <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>but this is an only child.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">main :only-child</span> <span class="token punctuation">{</span>   <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0g4uf09glj208q03gjs3.jpg"></p></li><li><p><code>:nth-child(n)</code>ï¼šåŒ¹é…ç¬¬nä¸ªå…ƒç´ </p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>first<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 1!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 3!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 5!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Span 7!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">.first span:nth-child(2n+1)</span> <span class="token punctuation">{</span>   <span class="token property">background-color</span><span class="token punctuation">:</span> lime<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0fmp7atouj208m01lt92.jpg"></p></li><li><p><code>:nth-last-child(n)</code>ï¼šå€’æ•°ç¬¬nä¸ªå…ƒç´ </p></li><li><p><code>:first-of-type</code>ï¼šè¡¨ç¤ºä¸€ç»„å…„å¼Ÿå…ƒç´ ä¸­å…¶ç±»å‹çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This `div` is first!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>nested `span` is first<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>nested `em` is first<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>, but this <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">&gt;</span></span>nested `em` is last<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">&gt;</span></span>!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>nested `span` gets styled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b</span><span class="token punctuation">&gt;</span></span>This `b` qualifies!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This is the final `div`.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">article :first-of-type</span> <span class="token punctuation">{</span>   <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0fmqady4qj208t04l75p.jpg"></p></li><li><p><code>:last-of-type</code>ï¼šè¡¨ç¤ºäº†åœ¨ï¼ˆå®ƒçˆ¶å…ƒç´ çš„ï¼‰å­å…ƒç´ åˆ—è¡¨ä¸­ï¼Œæœ€åä¸€ä¸ªç»™å®šç±»å‹çš„å…ƒç´ </p></li><li><p><code>:only-of-type</code>ï¼šä»£è¡¨äº†ä»»æ„ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ æ²¡æœ‰å…¶ä»–ç›¸åŒç±»å‹çš„å…„å¼Ÿå…ƒç´ </p></li><li><p><code>:nth-of-type(n)</code>ï¼šé’ˆå¯¹å…·æœ‰ä¸€ç»„å…„å¼ŸèŠ‚ç‚¹çš„æ ‡ç­¾, ç”¨ n æ¥ç­›é€‰å‡ºåœ¨ä¸€ç»„å…„å¼ŸèŠ‚ç‚¹çš„ä½ç½®</p></li><li><p><code>:nth-last-of-type(n)</code>ï¼šç‰¹å®šç±»å‹å€’æ•°ç¬¬nä¸ª</p></li><li><p><code>:target</code>ï¼šä»£è¡¨ä¸€ä¸ªå”¯ä¸€çš„é¡µé¢å…ƒç´ (ç›®æ ‡å…ƒç´ )ï¼Œå…¶id ä¸å½“å‰URLç‰‡æ®µåŒ¹é…</p></li><li><p><code>:empty</code>ï¼šä»£è¡¨æ²¡æœ‰å­å…ƒç´ çš„å…ƒç´ ã€‚å­å…ƒç´ åªå¯ä»¥æ˜¯å…ƒç´ èŠ‚ç‚¹æˆ–æ–‡æœ¬ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰ã€‚æ³¨é‡Šæˆ–å¤„ç†æŒ‡ä»¤éƒ½ä¸ä¼šäº§ç”Ÿå½±å“</p></li></ul><h2 id="è¡¨å•ç›¸å…³ä¼ªç±»"><a href="#è¡¨å•ç›¸å…³ä¼ªç±»" class="headerlink" title="è¡¨å•ç›¸å…³ä¼ªç±»"></a>è¡¨å•ç›¸å…³ä¼ªç±»</h2><ul><li><p><code>:checked</code>ï¼šè¡¨ç¤ºä»»ä½•å¤„äºé€‰ä¸­çŠ¶æ€çš„ radio (<code>&lt;input type="radio"&gt;</code>), checkbox (<code>&lt;input type="checkbox"&gt;</code>) æˆ–(â€œselectâ€) å…ƒç´ ä¸­çš„ option HTML å…ƒç´ (â€œoptionâ€)</p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-input<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yes<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>yes<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>radio<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-input<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>no<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>No<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opt-in<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opt-in<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Check me!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>my-select<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fruit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opt1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Apples<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opt2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Grapes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opt3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Pears<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">input:checked + label</span> <span class="token punctuation">{</span>   <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">input[type="radio"]:checked</span> <span class="token punctuation">{</span>   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 3px orange<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">input[type="checkbox"]:checked</span> <span class="token punctuation">{</span>   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 3px hotpink<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">option:checked</span> <span class="token punctuation">{</span>   <span class="token property">box-shadow</span><span class="token punctuation">:</span> 0 0 0 3px lime<span class="token punctuation">;</span>   <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0g53mslz3j209n04awes.jpg"></p></li><li><p><code>:disabled</code>ï¼šè¡¨ç¤ºä»»ä½•è¢«ç¦ç”¨çš„å…ƒç´ </p></li><li><p><code>:enabled</code>ï¼šè¡¨ç¤ºä»»ä½•è¢«å¯ç”¨çš„å…ƒç´ </p></li><li><p><code>:required</code>ï¼šè¡¨ç¤ºä»»æ„è®¾ç½®äº†requiredå±æ€§çš„ <code>&lt;input&gt;</code>ï¼Œ<code>&lt;select&gt;</code>, æˆ– <code>&lt;textarea&gt;</code> å…ƒç´ </p></li><li><p><code>:read-only</code>:è¡¨ç¤ºå…ƒç´ ä¸å¯è¢«ç”¨æˆ·ç¼–è¾‘çš„çŠ¶æ€ï¼ˆå¦‚é”å®šçš„æ–‡æœ¬è¾“å…¥æ¡†ï¼‰</p></li><li><p><code>:valid</code>ï¼šè¡¨ç¤ºå†…å®¹éªŒè¯æ­£ç¡®çš„ <code>&lt;input&gt;</code> æˆ–å…¶ä»– <code>&lt;form&gt;</code> å…ƒç´ </p></li><li><p><code>:invalid</code>ï¼šè¡¨ç¤ºä»»æ„å†…å®¹æœªé€šè¿‡éªŒè¯çš„ <code>&lt;input&gt;</code> æˆ–å…¶ä»– <code>&lt;form&gt;</code> å…ƒç´ </p></li><li><p><code>:optional</code>ï¼šè¡¨ç¤ºä»»æ„æ²¡æœ‰requiredå±æ€§çš„<code> &lt;input&gt;</code>ï¼Œ<code>&lt;select&gt;</code> æˆ– <code>&lt;textarea&gt;</code> å…ƒç´ ä½¿ç”¨å®ƒ</p></li><li><p><code>:default</code>ï¼šè¡¨ç¤ºä¸€ç»„ç›¸å…³å…ƒç´ ä¸­çš„é»˜è®¤è¡¨å•å…ƒç´ </p></li><li><p><code>:in-range</code>ï¼šä»£è¡¨ä¸€ä¸ª <code>&lt;input&gt;</code> å…ƒç´ ï¼Œå…¶å½“å‰å€¼å¤„äºå±æ€§ min å’Œmax é™å®šçš„èŒƒå›´ä¹‹å†…</p></li><li><p><code>:out-of-range</code>ï¼šè¡¨ç¤ºä¸€ä¸ª <code>&lt;input&gt;</code> å…ƒç´ ï¼Œå…¶å½“å‰å€¼å¤„äºå±æ€§ min å’Œ max é™å®šçš„èŒƒå›´å¤–</p></li><li><p><code>:indeterminate</code>ï¼šè¡¨ç¤ºçŠ¶æ€ä¸ç¡®å®šçš„è¡¨å•å…ƒç´ </p></li><li><p><code>:scope</code>ï¼šè¡¨ç¤ºä½œä¸ºé€‰æ‹©å™¨è¦åŒ¹é…çš„å‚è€ƒç‚¹çš„å…ƒç´ </p></li></ul><h2 id="å…¶ä»–ä¼ªç±»"><a href="#å…¶ä»–ä¼ªç±»" class="headerlink" title="å…¶ä»–ä¼ªç±»"></a>å…¶ä»–ä¼ªç±»</h2><ul><li><p><code>:root</code>ï¼šåŒ¹é…æ–‡æ¡£æ ‘çš„æ ¹å…ƒç´ ã€‚å¯¹äº HTML æ¥è¯´ï¼Œ:root è¡¨ç¤º <code>&lt;html&gt;</code> å…ƒç´ ï¼Œé™¤äº†ä¼˜å…ˆçº§æ›´é«˜ä¹‹å¤–ï¼Œä¸ html é€‰æ‹©å™¨ç›¸åŒ</p></li><li><p><code>:fullscreen</code>ï¼šåº”ç”¨äºå½“å‰å¤„äºå…¨å±æ˜¾ç¤ºæ¨¡å¼çš„å…ƒç´ ã€‚ å®ƒä¸ä»…ä»…é€‰æ‹©é¡¶çº§å…ƒç´ ï¼Œè¿˜åŒ…æ‹¬æ‰€æœ‰å·²æ˜¾ç¤ºçš„æ ˆå†…å…ƒç´ </p></li><li><p><code>:dir()</code>ï¼šåŒ¹é…ç‰¹å®šæ–‡å­—ä¹¦å†™æ–¹å‘çš„å…ƒç´ </p></li><li><p><code>:lang()</code>ï¼šåŸºäºå…ƒç´ è¯­è¨€æ¥åŒ¹é…é¡µé¢å…ƒç´ </p> <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>This English quote has a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>nested<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span> quote inside.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fr<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>This French quote has a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>nested<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span> quote inside.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>de<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>This German quote has a <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>q</span><span class="token punctuation">&gt;</span></span>nested<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span> quote inside.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>q</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre> <pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">:lang(en) &gt; q</span> <span class="token punctuation">{</span> <span class="token property">quotes</span><span class="token punctuation">:</span> <span class="token string">'\201C'</span> <span class="token string">'\201D'</span> <span class="token string">'\2018'</span> <span class="token string">'\2019'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token selector">:lang(fr) &gt; q</span> <span class="token punctuation">{</span> <span class="token property">quotes</span><span class="token punctuation">:</span> <span class="token string">'Â« '</span> <span class="token string">' Â»'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token selector">:lang(de) &gt; q</span> <span class="token punctuation">{</span> <span class="token property">quotes</span><span class="token punctuation">:</span> <span class="token string">'Â»'</span> <span class="token string">'Â«'</span> <span class="token string">'\2039'</span> <span class="token string">'\203A'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p> <img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0g5zehlr3j20ct02a3ys.jpg"></p></li></ul><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://juejin.cn/post/6976646049456717838">ä¸€ç¯‡ææ¸…ä¼ªç±»å’Œä¼ªå…ƒç´ </a></p><p><a href="https://juejin.cn/post/6844903810951806989">ä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼„æ‡‚ BFC å¥–åŠ±ä¸€é¡¿ KFC</title>
      <link href="/2022/03/14/nong-dong-bfc-jiang-li-yi-dun-kfc/"/>
      <url>/2022/03/14/nong-dong-bfc-jiang-li-yi-dun-kfc/</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€</p><p>å¯¹äº BFC çš„æ¦‚å¿µå’Œåº”ç”¨åœºæ™¯ä¸€ç›´å¾ˆæ¨¡ç³Šï¼Œè¶ç€ç–«æƒ…åœ¨å®¶æœ‰é—²ç€é‡äº†è§£ä¸€ä¸‹ï¼Œåšä¸ªæ€»ç»“ã€‚</p><h1 id="BFC-æ˜¯ä»€ä¹ˆ"><a href="#BFC-æ˜¯ä»€ä¹ˆ" class="headerlink" title="BFC æ˜¯ä»€ä¹ˆ"></a>BFC æ˜¯ä»€ä¹ˆ</h1><p>BFC å…¨ç§°ï¼šBlock Formatting Contextï¼Œ åä¸ºã€å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€</p><h1 id="BFC-è§¦å‘æ¡ä»¶"><a href="#BFC-è§¦å‘æ¡ä»¶" class="headerlink" title="BFC è§¦å‘æ¡ä»¶"></a>BFC è§¦å‘æ¡ä»¶</h1><ul><li>æ ¹å…ƒç´ ï¼ˆ<code>&lt;html&gt;</code>ï¼‰</li><li>æµ®åŠ¨å…ƒç´ ï¼ˆå…ƒç´ çš„ float ä¸æ˜¯ noneï¼‰</li><li>ç»å¯¹å®šä½å…ƒç´ ï¼ˆå…ƒç´ çš„ position ä¸º absolute æˆ– fixedï¼‰</li><li>è¡Œå†…å— inline block å…ƒç´ </li><li>overflow å€¼ä¸ä¸º visible çš„å—å…ƒç´ </li><li>å¼¹æ€§å…ƒç´ ï¼ˆdisplayä¸º flex æˆ– inline-flexå…ƒç´ çš„ç›´æ¥å­å…ƒç´ ï¼‰</li></ul><h1 id="BFC-çš„çº¦æŸè§„åˆ™"><a href="#BFC-çš„çº¦æŸè§„åˆ™" class="headerlink" title="BFC çš„çº¦æŸè§„åˆ™"></a>BFC çš„çº¦æŸè§„åˆ™</h1><ul><li>å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½®</li><li>å‚ç›´æ–¹å‘ä¸Šçš„è·ç¦»ç”±marginå†³å®š</li><li>æ¯ä¸ªå…ƒç´ çš„å·¦å¤–è¾¹è·ä¸åŒ…å«å—çš„å·¦è¾¹ç•Œç›¸æ¥è§¦ï¼ˆä»å·¦å‘å³ï¼‰ï¼Œå³ä½¿æµ®åŠ¨å…ƒç´ ä¹Ÿæ˜¯å¦‚æ­¤</li><li>BFCçš„åŒºåŸŸä¸ä¼šä¸floatçš„å…ƒç´ åŒºåŸŸé‡å </li><li>è®¡ç®—BFCçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li><li>BFCå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“åˆ°å¤–é¢å…ƒç´ ï¼Œåä¹‹äº¦ç„¶</li></ul><h1 id="è§£å†³äº†ä»€ä¹ˆé—®é¢˜"><a href="#è§£å†³äº†ä»€ä¹ˆé—®é¢˜" class="headerlink" title="è§£å†³äº†ä»€ä¹ˆé—®é¢˜"></a>è§£å†³äº†ä»€ä¹ˆé—®é¢˜</h1><h2 id="æ¸…é™¤æµ®åŠ¨"><a href="#æ¸…é™¤æµ®åŠ¨" class="headerlink" title="æ¸…é™¤æµ®åŠ¨"></a>æ¸…é™¤æµ®åŠ¨</h2><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>JS Bin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">    <span class="token selector">.aside</span> <span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>      <span class="token property">background</span><span class="token punctuation">:</span>lightpink<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.container</span><span class="token punctuation">{</span>      <span class="token property">width</span><span class="token punctuation">:</span>150px<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span>220px<span class="token punctuation">;</span>      <span class="token property">background</span><span class="token punctuation">:</span>mediumturquoise<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.outer_box1, .outer_box2</span><span class="token punctuation">{</span>      <span class="token property">margin</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.outer_box2 .container</span> <span class="token punctuation">{</span>      <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer_box1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aside<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HaHa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HeHe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer_box2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>aside<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HaHa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HeHe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0c6244z08j20q40irn2q.jpg"></p><h2 id="é˜²æ­¢-margin-åˆå¹¶"><a href="#é˜²æ­¢-margin-åˆå¹¶" class="headerlink" title="é˜²æ­¢ margin åˆå¹¶"></a>é˜²æ­¢ margin åˆå¹¶</h2><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>JS Bin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">      <span class="token selector">p</span> <span class="token punctuation">{</span>          <span class="token property">color</span><span class="token punctuation">:</span> #f55<span class="token punctuation">;</span>          <span class="token property">background</span><span class="token punctuation">:</span> #fcc<span class="token punctuation">;</span>          <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>          <span class="token property">line-height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>          <span class="token property">text-align</span><span class="token punctuation">:</span>center<span class="token punctuation">;</span>          <span class="token property">margin</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>          <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token selector">.wrap</span> <span class="token punctuation">{</span>      <span class="token property">display</span><span class="token punctuation">:</span> flow-root    <span class="token punctuation">}</span>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>    ä¸¤ä¸ªç›¸é‚»Boxå‚ç›´æ–¹å‘marginé‡å     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Haha<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hehe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>    åœ¨på¤–é¢åŒ…è£¹ä¸€å±‚å®¹å™¨ï¼Œå¹¶è§¦å‘è¯¥å®¹å™¨ç”Ÿæˆä¸€ä¸ªæ–°BFC    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Haha<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Hehe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0c5edk7skj20qb0i0afh.jpg"></p><h2 id="è§£å†³é«˜åº¦å¡Œé™·"><a href="#è§£å†³é«˜åº¦å¡Œé™·" class="headerlink" title="è§£å†³é«˜åº¦å¡Œé™·"></a>è§£å†³é«˜åº¦å¡Œé™·</h2><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>JS Bin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">    <span class="token selector">.box</span><span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span>left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span>100px<span class="token punctuation">;</span>      <span class="token property">background</span><span class="token punctuation">:</span>rosybrown<span class="token punctuation">;</span>      <span class="token property">color</span><span class="token punctuation">:</span>#fff<span class="token punctuation">;</span>      <span class="token property">margin</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token selector">.outer_box1, .outer_box2</span><span class="token punctuation">{</span>    <span class="token property">background</span><span class="token punctuation">:</span>lightblue<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token selector">.outer_box2</span><span class="token punctuation">{</span>    <span class="token property">display</span><span class="token punctuation">:</span>inline-block<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer_box1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HaHa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HeHe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>outer_box2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HaHa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>HeHe<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0c5rll4f6j20q80hc79f.jpg"></p><h1 id="BFC-çš„å‰¯ä½œç”¨"><a href="#BFC-çš„å‰¯ä½œç”¨" class="headerlink" title="BFC çš„å‰¯ä½œç”¨"></a>BFC çš„å‰¯ä½œç”¨</h1><ul><li>display: table å¯èƒ½å¼•å‘å“åº”æ€§é—®é¢˜</li><li>overflow: scroll å¯èƒ½äº§ç”Ÿå¤šä½™çš„æ»šåŠ¨æ¡</li><li>float: left å°†æŠŠå…ƒç´ ç§»è‡³å·¦ä¾§ï¼Œå¹¶è¢«å…¶ä»–å…ƒç´ ç¯ç»•</li><li>overflow: hidden å°†è£åˆ‡æº¢å‡ºå…ƒç´ </li></ul><p>å¯ä»¥ä½¿ç”¨çš„ <code>display: flow-root</code> æ¥è§¦å‘ BFC æ¶ˆé™¤å‰¯ä½œç”¨</p><hr><p>é˜¿ä¸çŸ¥ä¸è§‰å› ä¸ºç–«æƒ…å®…åœ¨å®¶å·²ç»æœ‰20æ¥å¤©äº†ï¼Œæˆ‘çš„è®°å¿†è¿˜åœç•™åœ¨2æœˆä»½ ğŸ‚ </p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº wx.navigateToã€wx.redirectToã€wx.reLaunchã€wx.switchTab å’Œ wx.navigateBack çš„åŒºåˆ«</title>
      <link href="/2022/03/07/guan-yu-wx-navigateto-wx-redirectto-wx-relaunch-wx-switchtab-he-wx-navigateback-de-qu-bie/"/>
      <url>/2022/03/07/guan-yu-wx-navigateto-wx-redirectto-wx-relaunch-wx-switchtab-he-wx-navigateback-de-qu-bie/</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>æ¥å£</th><th>ç”¨æ³•</th><th>å‚æ•°(æ ‡*ä¸ºå¿…å¡«å‚æ•°)</th><th>è·¯ç”±æ–¹å¼</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>wx.navigateTo(Object object)</td><td>ç”¨äºä¿ç•™å½“å‰é¡µé¢ã€è·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œä½†ä¸èƒ½è·³åˆ° tabbar é¡µé¢</td><td>{<br>*url: string,<br><br>events: Object,<br><br>success: function,<br><br>fail: function,<br><br>complete: function<br>}</td><td>æ‰“å¼€æ–°é¡µé¢</td><td>é¡µé¢ä¸å¤šçš„å°ç¨‹åºæ¨èä½¿ç”¨</td></tr><tr><td>wx.redirectTo(Object object)</td><td>ç”¨äºå…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œä½†ä¸èƒ½è·³åˆ° tabbar é¡µé¢</td><td>{<br>*url: string,<br><br>success: function,<br><br>fail: function,<br><br>complete: function<br>}</td><td>é¡µé¢é‡å®šå‘</td><td>é¡µé¢è¿‡å¤šæ—¶ï¼Œè¢«ä¿ç•™é¡µé¢ä¼šæŒ¤å å¾®ä¿¡åˆ†é…ç»™å°ç¨‹åºçš„å†…å­˜ï¼Œæˆ–æ˜¯è¾¾åˆ°å¾®ä¿¡æ‰€é™åˆ¶çš„5å±‚é¡µé¢æ ˆ</td></tr><tr><td>wx.navigateBack(Object object)</td><td>ç”¨äºå…³é—­å½“å‰é¡µé¢ï¼Œå¹¶è¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢</td><td>{<br>delta: number,<br><br>success: function,<br><br>fail: function,<br><br>complete: function<br>}</td><td>é¡µé¢è¿”å›</td><td>è¿”å›å†å²é¡µé¢</td></tr><tr><td>wx.switchTab(Object object)</td><td>ç”¨äºè·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢</td><td>{<br>*url: string,<br><br>success: function,<br><br>fail: function,<br><br>complete: function<br>}</td><td>Tab åˆ‡æ¢</td><td>tabBar é¡µé¢è·³è½¬</td></tr><tr><td>wx.reLaunch(Object object)</td><td>ç”¨äºå…³é—­å†…å­˜ä¸­æ‰€æœ‰ä¿ç•™çš„é¡µé¢ï¼Œå†è·³è½¬åˆ°ç›®æ ‡é¡µé¢</td><td>{<br>*url: string,<br><br>success: function,<br><br>fail: function,<br><br>complete: function<br>}</td><td>é‡å¯åŠ¨</td><td>åŒ wx.redirectTo</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å¾®ä¿¡å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆåä¸€ï¼‰</title>
      <link href="/2022/03/06/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-shi-yi/"/>
      <url>/2022/03/06/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-shi-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="æˆ‘çš„è®¢å•"><a href="#æˆ‘çš„è®¢å•" class="headerlink" title="æˆ‘çš„è®¢å•"></a>æˆ‘çš„è®¢å•</h1><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h0093p0kdyj20ak0imn0r.jpg" alt="æˆ‘çš„è®¢å•.png"></p><h2 id="è·å–å†å²è®¢å•æ•°æ®"><a href="#è·å–å†å²è®¢å•æ•°æ®" class="headerlink" title="è·å–å†å²è®¢å•æ•°æ®"></a>è·å–å†å²è®¢å•æ•°æ®</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages/my-order/my-order.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">const</span> db <span class="token operator">=</span> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> _ <span class="token operator">=</span> db<span class="token punctuation">.</span>command<span class="token keyword">const</span> good_collect <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'order-data'</span><span class="token punctuation">)</span><span class="token keyword">const</span> Price <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'e-commerce_price'</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>    <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token punctuation">{</span>        Price<span class="token punctuation">,</span>         <span class="token literal-property property">res_data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token keyword">async</span> <span class="token function">get_menu</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">try</span> <span class="token punctuation">{</span>                <span class="token keyword">let</span> field_obj <span class="token operator">=</span> <span class="token punctuation">{</span>                    <span class="token literal-property property">transac_status</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                    <span class="token literal-property property">table_number</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                    <span class="token literal-property property">order_time</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                    <span class="token literal-property property">sett_amount</span><span class="token operator">:</span> <span class="token boolean">true</span>                <span class="token punctuation">}</span>                <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> good_collect<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token string">'order_time'</span><span class="token punctuation">,</span> <span class="token string">'desc'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span>field_obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>res_data <span class="token operator">=</span> res<span class="token punctuation">.</span>data            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get_menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é€‰æ‹©äººæ•°é¡µé¢"><a href="#é€‰æ‹©äººæ•°é¡µé¢" class="headerlink" title="é€‰æ‹©äººæ•°é¡µé¢"></a>é€‰æ‹©äººæ•°é¡µé¢</h1><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h009ekvbdsj20af0in0wd.jpg" alt="é€‰æ‹©äººæ•°.png"></p><h2 id="æ‰«æäºŒç»´ç è·å–æ¡Œå·"><a href="#æ‰«æäºŒç»´ç è·å–æ¡Œå·" class="headerlink" title="æ‰«æäºŒç»´ç è·å–æ¡Œå·"></a>æ‰«æäºŒç»´ç è·å–æ¡Œå·</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages/index/index.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>table_number <span class="token operator">=</span> e<span class="token punctuation">.</span>number    wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'table_num'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1h009w45uflj20iv0rgn5m.jpg" alt="e.png"></p><h2 id="æŸ¥è¯¢å½“å‰æ¡Œå·ç»“è´¦çŠ¶æ€"><a href="#æŸ¥è¯¢å½“å‰æ¡Œå·ç»“è´¦çŠ¶æ€" class="headerlink" title="æŸ¥è¯¢å½“å‰æ¡Œå·ç»“è´¦çŠ¶æ€"></a>æŸ¥è¯¢å½“å‰æ¡Œå·ç»“è´¦çŠ¶æ€</h2><ul><li><p>å½“å‰æ¡Œå·å†å²è®¢å•å·²ç»“æŸï¼Œå³å¼€å§‹æ–°è®¢å•</p></li><li><p>å½“å‰æ¡Œå·å­˜åœ¨å†å²è®¢å•æœªç»“è´¦ï¼Œåˆ™è·³è½¬åˆ°è®¢å•è¯¦æƒ…é¡µ</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages/index/index.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token keyword">async</span> <span class="token function">query_order</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token keyword">await</span> good_collect<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">table_number</span><span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span>table_number<span class="token punctuation">,</span> <span class="token literal-property property">transac_status</span><span class="token operator">:</span> <span class="token string">'unsettled'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                wx<span class="token punctuation">.</span><span class="token function">reLaunch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/order-details/details'</span>                <span class="token punctuation">}</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">//TODO handle the exception</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>table_number <span class="token operator">=</span> e<span class="token punctuation">.</span>number    wx<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'table_num'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>number<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">query_order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€‰æ‹©äººæ•°"><a href="#é€‰æ‹©äººæ•°" class="headerlink" title="é€‰æ‹©äººæ•°"></a>é€‰æ‹©äººæ•°</h2><p>é€šè¿‡ <code>wx.setStorageSync('number_of_diners', item)</code> æ¥å£ä¿å­˜é€‰æ‹©äººæ•°</p><h2 id="ç‚¹å‡»å¼€å§‹è·³è½¬ç‚¹å•é¡µé¢"><a href="#ç‚¹å‡»å¼€å§‹è·³è½¬ç‚¹å•é¡µé¢" class="headerlink" title="ç‚¹å‡»å¼€å§‹è·³è½¬ç‚¹å•é¡µé¢"></a>ç‚¹å‡»å¼€å§‹è·³è½¬ç‚¹å•é¡µé¢</h2><p>é€šè¿‡ <code>x.getStorageSync('number_of_diners')</code> å’Œ <code>wx.getStorageSync('table_num')</code> æ¥å£è·å–æ¡Œå·å’Œäººæ•°</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆåï¼‰</title>
      <link href="/2022/03/05/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-shi/"/>
      <url>/2022/03/05/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¢å•è¯¦æƒ…é¡µ"><a href="#è®¢å•è¯¦æƒ…é¡µ" class="headerlink" title="è®¢å•è¯¦æƒ…é¡µ"></a>è®¢å•è¯¦æƒ…é¡µ</h1><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz93xhbd9j20ao0ii41w.jpg" alt="è®¢å•è¯¦æƒ…é¡µ.png"></p><h2 id="è·å–è®¢å•æ•°æ®"><a href="#è·å–è®¢å•æ•°æ®" class="headerlink" title="è·å–è®¢å•æ•°æ®"></a>è·å–è®¢å•æ•°æ®</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages/order-details/details.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>        Price<span class="token punctuation">,</span>        <span class="token literal-property property">overall</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token literal-property property">other_data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">comp_data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token literal-property property">goods_data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token keyword">async</span> <span class="token function">get_menu</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            <span class="token keyword">let</span> field_obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">number_of_diners</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">transac_status</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">order_receiving</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">openid</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span>            <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> good_collect<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">table_number</span><span class="token operator">:</span> <span class="token string">'002'</span><span class="token punctuation">,</span> <span class="token literal-property property">transac_status</span><span class="token operator">:</span> <span class="token string">'unsettled'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span>field_obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">let</span> res_data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>menu            res_data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>overall <span class="token operator">+=</span> item<span class="token punctuation">.</span>goods_list<span class="token punctuation">.</span>length<span class="token punctuation">)</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>other_data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>comp_data <span class="token operator">=</span> res_data            <span class="token keyword">this</span><span class="token punctuation">.</span>goods_data <span class="token operator">=</span> res_data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token punctuation">{</span>                    <span class="token literal-property property">backup_data</span><span class="token operator">:</span> item<span class="token punctuation">.</span>backup_data<span class="token punctuation">,</span>                    <span class="token literal-property property">goods_list</span><span class="token operator">:</span> item<span class="token punctuation">.</span>goods_list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                    <span class="token literal-property property">max</span><span class="token operator">:</span> item<span class="token punctuation">.</span>goods_list<span class="token punctuation">.</span>length                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">onLoad</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">get_menu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li><p><code>Collection.where(condition: Object)</code> æŒ‡å®šæŸ¥è¯¢æ¡ä»¶ï¼Œè¿”å›å¸¦æ–°æŸ¥è¯¢æ¡ä»¶çš„æ–°çš„é›†åˆå¼•ç”¨</p></li><li><p><code>Collection.field(projection: Object)</code> æŒ‡å®šè¿”å›ç»“æœä¸­è®°å½•éœ€è¿”å›çš„å­—æ®µã€‚æ–¹æ³•æ¥å—ä¸€ä¸ªå¿…å¡«å¯¹è±¡ç”¨äºæŒ‡å®šéœ€è¿”å›çš„å­—æ®µï¼Œå¯¹è±¡çš„å„ä¸ª key è¡¨ç¤ºè¦è¿”å›æˆ–ä¸è¦è¿”å›çš„å­—æ®µï¼Œvalue ä¼ å…¥ true|falseï¼ˆæˆ– 1|-1ï¼‰è¡¨ç¤ºè¦è¿”å›è¿˜æ˜¯ä¸è¦è¿”å›</p></li></ul><h2 id="ç‚¹å‡»å±•å¼€å…¨éƒ¨"><a href="#ç‚¹å‡»å±•å¼€å…¨éƒ¨" class="headerlink" title="ç‚¹å‡»å±•å¼€å…¨éƒ¨"></a>ç‚¹å‡»å±•å¼€å…¨éƒ¨</h2><p>å®ç°æ€è·¯ï¼š</p><p>é€šè¿‡ <code>max</code> å€¼æ¥åˆ¤æ–­æ˜¯å¦å·²ç»å±•ç¤ºå…¨éƒ¨</p><ul><li><p>å¤§äº3ï¼ŒæŠ˜å å¤šä½™æ•°æ®</p></li><li><p>å°äº3ï¼Œå±•ç¤ºå…¨éƒ¨</p></li></ul><p><code>comp_data</code> å­˜æ”¾å®Œæ•´æ•°æ®</p><p><code>goods_data</code> å­˜æ”¾å‰ä¸‰é¡¹æ•°æ®ï¼Œ<code>goods_data[0]</code> è¡¨ç¤ºç¬¬ä¸€æ¬¡ä¸‹å•çš„å‰ä¸‰é¡¹æ•°æ®</p><p>ç‚¹å‡» <code>index</code> å¯¹åº”çš„å±•å¼€å…¨éƒ¨æŒ‰é’®ï¼Œæ›´æ–°è¯¥æ¬¡ <code>goods_data[index]</code> ä¸‹å•çš„æ‰€æœ‰æ•°æ®ï¼Œå¹¶å°†å¯¹åº”çš„ <code>max</code> å€¼æ ‡è®°ä¸º0è¡¨ç¤ºå·²å±•ç¤ºå…¨éƒ¨éšè—å±•å¼€å…¨éƒ¨æŒ‰é’®ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// psges/order-details/details.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">opEn</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods_data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'goods_list'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>comp_data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>goods_list<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods_data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'max'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŠ èœ"><a href="#åŠ èœ" class="headerlink" title="åŠ èœ"></a>åŠ èœ</h2><p>ç‚¹å‡»åŠ èœæŒ‰é’®è·³è½¬åˆ°ç‚¹å•é¡µé¢ï¼Œç”¨åˆ° <code>wx.reLaunch(Object object)</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// psges/order-details/details.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">add_Dish</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        wx<span class="token punctuation">.</span><span class="token function">reLaunch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'/pages/home-page/page'</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://april-cl.github.io/2022/03/07/guan-yu-wx-navigateto-wx-redirectto-wx-relaunch-wx-switchtab-he-wx-navigateback-de-qu-bie/">å…³äº wx.navigateToã€wx.redirectToã€wx.reLaunchã€wx.switchTab å’Œ wx.navigateBack çš„åŒºåˆ«</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆä¹ï¼‰</title>
      <link href="/2022/03/05/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-jiu/"/>
      <url>/2022/03/05/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-jiu/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¡ç®—æ¯ä¸€å¤©é”€å”®é¢"><a href="#è®¡ç®—æ¯ä¸€å¤©é”€å”®é¢" class="headerlink" title="è®¡ç®—æ¯ä¸€å¤©é”€å”®é¢"></a>è®¡ç®—æ¯ä¸€å¤©é”€å”®é¢</h1><h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><ol><li>è·å–seven_day_salesæ•°æ®è¡¨æ•°æ®</li></ol><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz0tikeoyj20an042t9i.jpg" alt="seven_day_salesæ•°æ®è¡¨"></p><ol start="2"><li>è·å–å½“å‰æ—¥æœŸè®°å½•</li></ol><ul><li><p>æ— è®°å½•ï¼Œæ–°å¢å½“å‰æ—¥æœŸé”€å”®è®°å½•</p></li><li><p>æœ‰è®°å½•ï¼Œå°†å½“å‰è®¢å•æ€»ä»·ä¸è¯¥æ—¥æœŸé”€å”®é¢ç›¸åŠ </p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// config/Date_anaysis.js</span><span class="token keyword">const</span> db <span class="token operator">=</span> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> _ <span class="token operator">=</span> db<span class="token punctuation">.</span>command<span class="token keyword">const</span> seven <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'seven_day_sales'</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">analysis</span> <span class="token punctuation">{</span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token keyword">async</span> <span class="token function">sameday</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> sales_value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">try</span> <span class="token punctuation">{</span><span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token keyword">await</span> seven<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span>time<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">await</span> seven<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>time<span class="token punctuation">,</span> sales_value<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token keyword">let</span> total_amount <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sales_value<span class="token punctuation">)</span> <span class="token operator">+</span> sales_value<span class="token keyword">let</span> final_data <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">await</span> seven<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">sales_value</span><span class="token operator">:</span>total_amount<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">throw</span> <span class="token string">'é”™è¯¯'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token punctuation">{</span>analysis<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å°ç¨‹åºç«¯è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£"><a href="#å°ç¨‹åºç«¯è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£" class="headerlink" title="å°ç¨‹åºç«¯è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£"></a>å°ç¨‹åºç«¯è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£</h1><p>è®¢é˜…æ¶ˆæ¯æ¥å£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html">wx.requestSubscribeMessage(Object object)</a></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz2y5o9ktj20yt0ozdky.jpg" alt="è®¢é˜…æ¶ˆæ¯æ¨¡æ¿.png"></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz383c6knj20ns0ev75k.jpg" alt="è®¢é˜…æ¶ˆæ¯æ¨¡æ¿è¯¦æƒ….png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages/home-page-page.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">placean_order</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        wx<span class="token punctuation">.</span><span class="token function">requestSubscribeMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            <span class="token literal-property property">tmplIds</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>tmplIds<span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sub_database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sub_database</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz1l1segsj20j20rjk03.jpg" alt="è®¢é˜…æ¶ˆæ¯.png"></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz3nzi0s6j20f20lldif.jpg" alt="æœåŠ¡é€šçŸ¥.png"></p><h1 id="ä½¿ç”¨-GoEasy"><a href="#ä½¿ç”¨-GoEasy" class="headerlink" title="ä½¿ç”¨ GoEasy"></a>ä½¿ç”¨ GoEasy</h1><p><a href="https://www.goeasy.io/cn/docs/goeasy-2.x/pubsub/message/client-pub-sub.html">Websocketæ¶ˆæ¯å‘é€å’Œæ¥æ”¶ - GoEasy PubSub</a></p><h2 id="å°ç¨‹åºç«¯"><a href="#å°ç¨‹åºç«¯" class="headerlink" title="å°ç¨‹åºç«¯"></a>å°ç¨‹åºç«¯</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// main.js</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">import</span> GoEasy <span class="token keyword">from</span> <span class="token string">'goeasy'</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>goeasy <span class="token operator">=</span> GoEasy<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token literal-property property">host</span><span class="token operator">:</span><span class="token string">"hangzhou.goeasy.io"</span><span class="token punctuation">,</span>  <span class="token comment">//è‹¥æ˜¯æ–°åŠ å¡åŒºåŸŸï¼šsingapore.goeasy.io</span>    <span class="token literal-property property">appkey</span><span class="token operator">:</span><span class="token string">"æ‚¨çš„common key"</span><span class="token punctuation">,</span>    <span class="token literal-property property">modules</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'pubsub'</span><span class="token punctuation">]</span><span class="token comment">//æ ¹æ®éœ€è¦ï¼Œä¼ å…¥â€˜pubsubâ€™æˆ–'imâ€™ï¼Œæˆ–æ•°ç»„æ–¹å¼åŒæ—¶ä¼ å…¥</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// App.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">//å»ºç«‹è¿æ¥</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>goeasy<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">//pubsubé€‰å¡«ï¼Œimå¿…å¡«</span>        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œpubsubé€‰å¡«ï¼Œimå¿…å¡«ï¼Œç”¨äºä¸Šä¸‹çº¿æé†’å’ŒæŸ¥è¯¢åœ¨çº¿ç”¨æˆ·åˆ—è¡¨æ—¶ï¼Œæ‰©å±•æ›´å¤šçš„å±æ€§</span>        <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//è¿æ¥æˆåŠŸ</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æˆåŠŸ"</span><span class="token punctuation">)</span> <span class="token comment">//è¿æ¥æˆåŠŸ</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function-variable function">onFailed</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//è¿æ¥å¤±è´¥</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function-variable function">onProgress</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">attempts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//è¿æ¥æˆ–è‡ªåŠ¨é‡è¿ä¸­</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æˆ–è‡ªåŠ¨é‡è¿ä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åå°"><a href="#åå°" class="headerlink" title="åå°"></a>åå°</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// src/main.js</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">import</span> GoEasy <span class="token keyword">from</span> <span class="token string">'goeasy'</span><span class="token comment">// å³æ—¶é€šè®¯ï¼šè®¢å•æé†’</span><span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>goeasy <span class="token operator">=</span> GoEasy<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">"hangzhou.goeasy.io"</span><span class="token punctuation">,</span>  <span class="token comment">//è‹¥æ˜¯æ–°åŠ å¡åŒºåŸŸï¼šsingapore.goeasy.io</span>  <span class="token literal-property property">appkey</span><span class="token operator">:</span> <span class="token string">"æ‚¨çš„common key"</span><span class="token punctuation">,</span>  <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pubsub'</span><span class="token punctuation">]</span><span class="token comment">//æ ¹æ®éœ€è¦ï¼Œä¼ å…¥â€˜pubsubâ€™æˆ–'imâ€™ï¼Œæˆ–æ•°ç»„æ–¹å¼åŒæ—¶ä¼ å…¥</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// src/App.vue</span><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// è®¢å•æ•°å­˜å…¥æœ¬åœ°ç¼“å­˜</span>    <span class="token keyword">const</span> order_num <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"order_num"</span><span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>order_num <span class="token operator">||</span> order_num <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'order_num'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment">//1.å»ºç«‹è¿æ¥</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>goeasy<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">"001"</span><span class="token punctuation">,</span> <span class="token comment">//pubsubé€‰å¡«ï¼Œimå¿…å¡«</span>        <span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string-property property">"avatar"</span><span class="token operator">:</span><span class="token string">"/www/xxx.png"</span><span class="token punctuation">,</span><span class="token string-property property">"nickname"</span><span class="token operator">:</span><span class="token string">"Neo"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œpubsubé€‰å¡«ï¼Œimå¿…å¡«ï¼Œç”¨äºä¸Šä¸‹çº¿æé†’å’ŒæŸ¥è¯¢åœ¨çº¿ç”¨æˆ·åˆ—è¡¨æ—¶ï¼Œæ‰©å±•æ›´å¤šçš„å±æ€§</span>        <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>  <span class="token comment">//è¿æ¥æˆåŠŸ</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æˆåŠŸ"</span><span class="token punctuation">)</span> <span class="token comment">//è¿æ¥æˆåŠŸ</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sub_message</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function-variable function">onFailed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//è¿æ¥å¤±è´¥</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥å¤±è´¥"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function-variable function">onProgress</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">attempts</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//è¿æ¥æˆ–è‡ªåŠ¨é‡è¿ä¸­</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"è¿æ¥æˆ–è‡ªåŠ¨é‡è¿ä¸­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token literal-property property">methods</span><span class="token operator">:</span><span class="token punctuation">{</span>    <span class="token comment">// 2.æ¥æ”¶è®¢é˜…æ¶ˆæ¯</span>    <span class="token function">sub_message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">var</span> pubsub <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goeasy<span class="token punctuation">.</span>pubsub<span class="token punctuation">;</span>        pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            <span class="token literal-property property">channel</span><span class="token operator">:</span> <span class="token string">"my_channel"</span><span class="token punctuation">,</span><span class="token comment">//æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„channel</span>            <span class="token function-variable function">onMessage</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                <span class="token keyword">const</span> order_num_a <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"order_num"</span><span class="token punctuation">)</span>                localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'order_num'</span><span class="token punctuation">,</span><span class="token function">Number</span><span class="token punctuation">(</span>order_num_a<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>                <span class="token keyword">const</span> order_num_b <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"order_num"</span><span class="token punctuation">)</span>                <span class="token comment">// console.log(order_num_b)</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$store<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'order_remind'</span><span class="token punctuation">,</span><span class="token function">Number</span><span class="token punctuation">(</span>order_num_b<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token comment">// console.log(message);</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Channelè®¢é˜…æˆåŠŸã€‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function-variable function">onFailed</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Channelè®¢é˜…å¤±è´¥, é”™è¯¯ç¼–ç ï¼š"</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>code <span class="token operator">+</span> <span class="token string">" é”™è¯¯ä¿¡æ¯ï¼š"</span> <span class="token operator">+</span> error<span class="token punctuation">.</span>content<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz3i4tqbaj20yv0km45x.jpg" alt="åå°è®¢é˜…æ¶ˆæ¯.png"></p><h1 id="å³æ—¶é€šè®¯åŠŸèƒ½æ–°è®¢å•æé†’"><a href="#å³æ—¶é€šè®¯åŠŸèƒ½æ–°è®¢å•æé†’" class="headerlink" title="å³æ—¶é€šè®¯åŠŸèƒ½æ–°è®¢å•æé†’"></a>å³æ—¶é€šè®¯åŠŸèƒ½æ–°è®¢å•æé†’</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages/home-page/page.vue</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token function">push_message</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">var</span> pubsub <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>goeasy<span class="token punctuation">.</span>pubsub        pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token punctuation">{</span>            <span class="token literal-property property">channel</span><span class="token operator">:</span> <span class="token string">"my_channel"</span><span class="token punctuation">,</span><span class="token comment">//æ›¿æ¢ä¸ºæ‚¨è‡ªå·±çš„channel</span>            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">"å°ç¨‹åºç«¯å‘é€"</span><span class="token punctuation">,</span><span class="token comment">//æ›¿æ¢ä¸ºæ‚¨æƒ³è¦å‘é€çš„æ¶ˆæ¯å†…å®¹</span>            <span class="token function-variable function">onSuccess</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆæ¯å‘å¸ƒæˆåŠŸã€‚"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function-variable function">onFailed</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"æ¶ˆæ¯å‘é€å¤±è´¥ï¼Œé”™è¯¯ç¼–ç ï¼š"</span><span class="token operator">+</span>error<span class="token punctuation">.</span>code<span class="token operator">+</span><span class="token string">" é”™è¯¯ä¿¡æ¯ï¼š"</span><span class="token operator">+</span>error<span class="token punctuation">.</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gzz3leb0l9g21gt0ogk7z.gif" alt="è®¢å•æé†’.gif"></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>reduceçš„ä¸€ç‚¹å°ç†è§£</title>
      <link href="/2022/02/18/reduce-de-yi-dian-xiao-li-jie/"/>
      <url>/2022/02/18/reduce-de-yi-dian-xiao-li-jie/</url>
      
        <content type="html"><![CDATA[<p>å‰é˜µå­åœ¨é¡¹ç›®ä¸­æœ‰ç”¨åˆ° <code>reduce()</code> æ–¹æ³•ï¼Œå½“æ—¶ä¸æ˜¯å¾ˆç†è§£ï¼Œåæ¥ç©ºäº†å­¦ä¹ äº†ä¸€ä¸‹ï¼Œæœ‰äº†ä¸€ç‚¹å°æ”¶è·ï¼Œè®°ä¹‹~</p><h1 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h1><p><code>Array.prototype.reduce()</code>  æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡ŒæŒ‡å®šå›è°ƒå‡½æ•°ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><p>å›è°ƒå‡½æ•°ï¼ˆå¿…é€‰ï¼‰ï¼Œæ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼ (å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼åˆ™ç¬¬ä¸€ä¸ªå€¼é™¤å¤–)çš„å‡½æ•°ï¼ŒåŒ…å«å››ä¸ªå‚æ•°ï¼š</p><ul><li><p>accumulatorï¼ˆç´¯è®¡å™¨ï¼‰ï¼Œç´¯è®¡å›è°ƒçš„è¿”å›å€¼ï¼Œå€¼ä¸ºä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶è¿”å›çš„ç´¯ç§¯å€¼æˆ–è€…åˆå§‹å€¼</p></li><li><p>currentValueï¼Œæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ </p></li><li><p>indexï¼Œæ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚å¦‚æœæä¾›äº†åˆå§‹å€¼ï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º0ï¼Œå¦åˆ™ä»ç´¢å¼•1èµ·å§‹</p></li><li><p>arrayï¼Œè°ƒç”¨reduce()çš„æ•°ç»„ï¼Œå³æºæ•°ç»„</p></li></ul></li><li><p>åˆå§‹å€¼ï¼ˆå¯é€‰ï¼‰ï¼Œä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ åœ¨æ²¡æœ‰åˆå§‹å€¼çš„<strong>ç©ºæ•°ç»„</strong>ä¸Šè°ƒç”¨ <code>reduce()</code> å°†æŠ¥é”™</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 1 + 2 + 3</span><span class="token comment">// 6</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">// 1 + 1 + 2 + 3</span><span class="token comment">// 7</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// æŠ¥é”™</span><span class="token comment">// Uncaught TypeError: Reduce of empty array with no initial value</span><span class="token comment">// at Array.reduce (&lt;anonymous&gt;)</span><span class="token comment">// at &lt;anonymous&gt;:1:4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="filter-find-forEach-map-reduce-çš„å¯¹æ¯”"><a href="#filter-find-forEach-map-reduce-çš„å¯¹æ¯”" class="headerlink" title="filter/find/forEach/map/reduce çš„å¯¹æ¯”"></a>filter/find/forEach/map/reduce çš„å¯¹æ¯”</h1><p>è¿™å‡ ä¸ªæ–¹æ³•æˆ‘æ€»æ˜¯ä¼šæ··æ·†ï¼Œåˆ—äº†ä¸ªè¡¨æ ¼æ–¹ä¾¿å¯¹æ¯”</p><table><thead><tr><th>æ–¹æ³•å</th><th>æè¿°</th><th>è¯­æ³•</th><th>å‚æ•°1</th><th>å‚æ•°2</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td>filter</td><td>è¿”å›æ»¡è¶³æ‰€æä¾›å›è°ƒå‡½æ•°ç­›é€‰æ¡ä»¶çš„æ‰€æœ‰å…ƒç´ æˆ–ç©ºæ•°ç»„</td><td>var newArray = arr.filter(callback(element[, index[, array]])[, thisArg])</td><td>ç”¨æ¥æµ‹è¯•æ•°ç»„çš„æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚è¿”å› <code>true</code> è¡¨ç¤ºè¯¥å…ƒç´ é€šè¿‡æµ‹è¯•ï¼Œä¿ç•™è¯¥å…ƒç´ ï¼Œ<code>false</code> åˆ™ä¸ä¿ç•™ã€‚å®ƒæ¥å—ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š<br><strong>element</strong> å½“å‰éå†åˆ°çš„å…ƒç´ <br><code>index</code><strong>å¯é€‰</strong> å½“å‰éå†åˆ°çš„ç´¢å¼•<br><code>array</code><strong>å¯é€‰</strong> æ•°ç»„æœ¬èº«</td><td>æ‰§è¡Œå›è°ƒæ—¶ç”¨ä½œ<code>this</code> çš„å¯¹è±¡</td><td>ä¸€ä¸ªæ–°çš„ã€ç”±é€šè¿‡æµ‹è¯•çš„å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•æ•°ç»„å…ƒç´ é€šè¿‡æµ‹è¯•ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„</td></tr><tr><td>find</td><td>è¿”å›æ»¡è¶³æ‰€æä¾›å›è°ƒå‡½æ•°ç­›é€‰æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼æˆ– <code>undefined</code></td><td>arr.find(callback(element[, index[, array]])[, thisArg])</td><td>åœ¨æ•°ç»„æ¯ä¸€é¡¹ä¸Šæ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š<br><strong>element</strong> å½“å‰éå†åˆ°çš„å…ƒç´ <br><code>index</code><strong>å¯é€‰</strong> å½“å‰éå†åˆ°çš„ç´¢å¼•<br><code>array</code><strong>å¯é€‰</strong> æ•°ç»„æœ¬èº«</td><td>æ‰§è¡Œå›è°ƒæ—¶ç”¨ä½œ<code>this</code> çš„å¯¹è±¡</td><td>æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªæ»¡è¶³æ‰€æä¾›æµ‹è¯•å‡½æ•°çš„å…ƒç´ çš„å€¼ï¼Œå¦åˆ™è¿”å› <code>undefined</code></td></tr><tr><td>forEach</td><td>å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡æä¾›çš„å›è°ƒå‡½æ•°</td><td>arr.forEach(callback(currentValue [, index [, array]])[, thisArg])</td><td>ä¸ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒæ¥å—ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š<br><strong>element</strong> å½“å‰éå†åˆ°çš„å…ƒç´ <br><code>index</code><strong>å¯é€‰</strong> å½“å‰éå†åˆ°çš„ç´¢å¼•<br><code>array</code><strong>å¯é€‰</strong> æ•°ç»„æœ¬èº«</td><td>æ‰§è¡Œå›è°ƒæ—¶ç”¨ä½œ<code>this</code> çš„å¯¹è±¡</td><td><code>undefined</code></td></tr><tr><td>map</td><td>è¿”å›æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åç»„åˆå½¢æˆçš„æ–°æ•°ç»„</td><td>var new_array = arr.map(function callback(currentValue[, index[, array]]) {  <br>// Return element for new_array  <br>}[, thisArg])</td><td>ç”Ÿæˆæ–°æ•°ç»„å…ƒç´ çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š<br><strong>element</strong> å½“å‰éå†åˆ°çš„å…ƒç´ <br><code>index</code><strong>å¯é€‰</strong> å½“å‰éå†åˆ°çš„ç´¢å¼•<br><code>array</code><strong>å¯é€‰</strong> æ•°ç»„æœ¬èº«</td><td>æ‰§è¡Œå›è°ƒæ—¶ç”¨ä½œ<code>this</code> çš„å¯¹è±¡</td><td>ä¸€ä¸ªç”±åŸæ•°ç»„æ¯ä¸ªå…ƒç´ æ‰§è¡Œå›è°ƒå‡½æ•°çš„ç»“æœç»„æˆçš„æ–°æ•°ç»„</td></tr><tr><td>reduce</td><td>è¿”å›æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å‡åºè°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åæ±‡æ€»è€Œæˆçš„å€¼</td><td>arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])</td><td>æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼ (å¦‚æœæ²¡æœ‰æä¾› <code>initialValueåˆ™ç¬¬ä¸€ä¸ªå€¼é™¤å¤–</code>)çš„å‡½æ•°ï¼Œå®ƒæ¥å—ä»¥ä¸‹å››ä¸ªå‚æ•°ï¼š<br><strong><code>accumulator</code></strong>  ç´¯è®¡å™¨ç´¯è®¡å›è°ƒçš„è¿”å›å€¼; å®ƒæ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶è¿”å›çš„ç´¯ç§¯å€¼ï¼Œæˆ–<code>initialValue</code><br><strong>element</strong> å½“å‰éå†åˆ°çš„å…ƒç´ <br><code>index</code><strong>å¯é€‰</strong> å½“å‰éå†åˆ°çš„ç´¢å¼•<br><code>array</code><strong>å¯é€‰</strong> æ•°ç»„æœ¬èº«</td><td>ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ <code>callback</code>å‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ </td><td>å‡½æ•°ç´¯è®¡å¤„ç†çš„ç»“æœ</td></tr></tbody></table><h2 id="ä½¿ç”¨-reduce-å®ç°-filter"><a href="#ä½¿ç”¨-reduce-å®ç°-filter" class="headerlink" title="ä½¿ç”¨ reduce å®ç° filter"></a>ä½¿ç”¨ reduce å®ç° filter</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>filterUsingReduce<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">filterUsingReduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">filterArray<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        filterArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>currentValue<span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> filterArray    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filterUsingReduce</span><span class="token punctuation">(</span>  <span class="token punctuation">(</span><span class="token parameter">currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> currentValue <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">// [16]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨-reduce-å®ç°-find"><a href="#ä½¿ç”¨-reduce-å®ç°-find" class="headerlink" title="ä½¿ç”¨ reduce å®ç° find"></a>ä½¿ç”¨ reduce å®ç° find</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>findUsingReduce<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">findUsingReduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">findArray<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>findArray <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">&amp;&amp;</span> findArray<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        findArray <span class="token operator">=</span> currentValue        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>index <span class="token operator">===</span> array<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> findArray <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">&amp;&amp;</span> findArray<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        findArray <span class="token operator">=</span> <span class="token keyword">undefined</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> findArray    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findUsingReduce</span><span class="token punctuation">(</span>  <span class="token punctuation">(</span><span class="token parameter">currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> currentValue <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// [4]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨-reduce-å®ç°-forEach"><a href="#ä½¿ç”¨-reduce-å®ç°-forEach" class="headerlink" title="ä½¿ç”¨ reduce å®ç° forEach"></a>ä½¿ç”¨ reduce å®ç° forEach</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>forEachUsingReduce<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">forEachUsingReduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">forEachArray<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">const</span> array1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>array1<span class="token punctuation">.</span><span class="token function">forEachUsingReduce</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>element<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>element<span class="token operator">+</span><span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// a: a1</span><span class="token comment">// b: b1</span><span class="token comment">// c: c1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä½¿ç”¨-reduce-å®ç°-map"><a href="#ä½¿ç”¨-reduce-å®ç°-map" class="headerlink" title="ä½¿ç”¨ reduce å®ç° map"></a>ä½¿ç”¨ reduce å®ç° map</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>mapUsingReduce<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">mapUsingReduce</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">mappedArray<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      mappedArray<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array<span class="token punctuation">)</span>      <span class="token keyword">return</span> mappedArray    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">mapUsingReduce</span><span class="token punctuation">(</span>  <span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> currentValue <span class="token operator">+</span> index <span class="token operator">+</span> array<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// [5, 9, 15, 23]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h1><p><a href="https://juejin.cn/post/6844904025310117901">è‡ªä»å­¦ä¼šäº† Array.reduce() ï¼Œå†ä¹Ÿç¦»ä¸å¼€å®ƒ</a></p><p><a href="https://juejin.cn/post/6916087983808626701">ä»¥å‰æˆ‘æ²¡å¾—é€‰ï¼Œç°åœ¨æˆ‘åªæƒ³ç”¨ Array.prototype.reduce</a></p><p><a href="https://juejin.cn/post/6844903870154588168#heading-6">ç”ŸåŠ¨å½¢è±¡è§£é‡ŠforEachã€filterã€mapã€someã€everyã€findã€findIndexã€reduceé—´çš„åŒºåˆ«</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆåäºŒï¼‰</title>
      <link href="/2022/01/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi-er/"/>
      <url>/2022/01/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi-er/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”Ÿæˆå°ç¨‹åºç "><a href="#ç”Ÿæˆå°ç¨‹åºç " class="headerlink" title="ç”Ÿæˆå°ç¨‹åºç "></a>ç”Ÿæˆå°ç¨‹åºç </h1><p>æ¥å£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/qr-code/wxacode.get.html">wxacode.get</a></p><p>é€šè¿‡è¯¥æ¥å£ç”Ÿæˆçš„å°ç¨‹åºç ï¼Œæ°¸ä¹…æœ‰æ•ˆï¼Œæœ‰æ•°é‡é™åˆ¶</p><p>HTTPS è°ƒç”¨ï¼š<code>POST https://api.weixin.qq.com/wxa/getwxacode?access_token=ACCESS_TOKEN</code></p><h1 id="æäº¤æ¡Œå·åˆ°æ•°æ®åº“"><a href="#æäº¤æ¡Œå·åˆ°æ•°æ®åº“" class="headerlink" title="æäº¤æ¡Œå·åˆ°æ•°æ®åº“"></a>æäº¤æ¡Œå·åˆ°æ•°æ®åº“</h1><p>å®ç°æ€è·¯ï¼š</p><ol><li><p>è·å–è¯·æ±‚å†…å®¹ï¼ˆæ¡Œå·ï¼‰</p></li><li><p>éªŒè¯æ¡Œå·æ˜¯å¦å·²ç»å­˜åœ¨</p></li><li><p>é€šè¿‡ HTTPS è°ƒç”¨æ¥å£ç”Ÿæˆè¯¥æ¡Œå·çš„å°ç¨‹åºç  </p></li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// router/qr-code/code.js</span><span class="token comment">// æ·»åŠ æ¡Œå·</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/qrcode'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>table<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body  <span class="token keyword">new</span> <span class="token class-name">postcode</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> table<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('table_qr_code').where({table:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>table<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).get()</span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'è¯¥æ¡Œå·å·²å­˜åœ¨'</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> res_code <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">qrcode</span><span class="token punctuation">(</span>table<span class="token punctuation">)</span>      <span class="token keyword">const</span> res_img <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">buffer</span><span class="token punctuation">(</span><span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> res_code<span class="token punctuation">.</span>data<span class="token punctuation">)</span>      <span class="token keyword">let</span> code_image <span class="token operator">=</span> <span class="token string">'https://'</span> <span class="token operator">+</span> res_img      <span class="token keyword">let</span> table_data <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('table_qr_code').add({data:{time:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',table:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>table<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',code:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>code_image<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}})</span><span class="token template-punctuation string">`</span></span>      <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>AddUrl<span class="token punctuation">,</span> table_data<span class="token punctuation">)</span>      <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æ·»åŠ æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// config/code-img.js</span><span class="token comment">// ç»™äºŒè¿›åˆ¶å›¾ç‰‡é‡æ–°å‘½å</span><span class="token keyword">let</span> <span class="token function-variable function">Code</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> orderCode <span class="token operator">=</span> <span class="token string">''</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    orderCode <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  orderCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> orderCode  <span class="token keyword">return</span> orderCode <span class="token operator">+</span> <span class="token string">'.jpg'</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>Code<span class="token punctuation">}</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// config/checking.js</span><span class="token comment">// æ¡Œå·ä¸ºç©ºæ ¡éªŒ</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">class</span> <span class="token class-name">postcode</span> <span class="token keyword">extends</span> <span class="token class-name">checking</span> <span class="token punctuation">{</span>  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'æ¡Œå·ä¸èƒ½ä¸ºç©º'</span><span class="token punctuation">]</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">Errunder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">Parameter</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">Blank</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// config/databaseapi.js</span><span class="token comment">// ç”Ÿæˆå°ç¨‹åºç </span><span class="token keyword">class</span> <span class="token class-name">getToken</span> <span class="token punctuation">{</span>  <span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span>  <span class="token keyword">async</span> <span class="token function">qrcode</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gettoken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'pages/index/index?number='</span> <span class="token operator">+</span> number<span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> colldata <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>Qrcode <span class="token operator">+</span> token<span class="token punctuation">,</span> <span class="token constant">OBJ</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">responseType</span><span class="token operator">:</span> <span class="token string">'arraybuffer'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> colldata    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// cos/cos.js</span><span class="token comment">// äºŒè¿›åˆ¶ä¸Šä¼ </span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">let</span> <span class="token function-variable function">buffer</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">filename<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    cos<span class="token punctuation">.</span><span class="token function">putObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      Bucket<span class="token punctuation">,</span>      Region<span class="token punctuation">,</span>      <span class="token literal-property property">Key</span><span class="token operator">:</span> filename<span class="token punctuation">,</span>      <span class="token literal-property property">Body</span><span class="token operator">:</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Location<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¯·æ±‚æ¡Œå·æ•°æ®"><a href="#è¯·æ±‚æ¡Œå·æ•°æ®" class="headerlink" title="è¯·æ±‚æ¡Œå·æ•°æ®"></a>è¯·æ±‚æ¡Œå·æ•°æ®</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// router/qr-code/code.js</span><span class="token comment">// è·å–æ¡Œå·</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/getqrcode'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>page<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">let</span> sk <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('table_qr_code').orderBy('time', 'desc').limit(10).skip(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">).get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">total</span><span class="token operator">:</span> res<span class="token punctuation">.</span>pager<span class="token punctuation">.</span>Total<span class="token punctuation">}</span>    <span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span><span class="token literal-property property">result</span><span class="token operator">:</span> data<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>total<span class="token punctuation">}</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æŸ¥è¯¢å‰7å¤©æ•°æ®"><a href="#æŸ¥è¯¢å‰7å¤©æ•°æ®" class="headerlink" title="æŸ¥è¯¢å‰7å¤©æ•°æ®"></a>æŸ¥è¯¢å‰7å¤©æ•°æ®</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// router/qr-code/code.js</span><span class="token comment">// è·å–å‰7å¤©æ•°æ®</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/salesvolume'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> catedays <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span><span class="token string">'days'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>catedays<span class="token punctuation">)</span>    <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('seven_day_sales').where({time:db.command.in(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)}).orderBy('time','asc').field({time:true,sales_value:true}).get()</span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        <span class="token literal-property property">sales_value</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span>sales_value<span class="token punctuation">,</span>        <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span>time<span class="token punctuation">,</span>        <span class="token literal-property property">unix</span><span class="token operator">:</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> days <span class="token operator">=</span> catedays<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        <span class="token literal-property property">sales_value</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>        <span class="token literal-property property">time</span><span class="token operator">:</span> item<span class="token punctuation">,</span>        <span class="token literal-property property">unix</span><span class="token operator">:</span> <span class="token function">moment</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> ab <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">let</span> obj <span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">let</span> removal <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>data<span class="token punctuation">,</span> <span class="token operator">...</span>days<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">.</span>time<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        prev<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        obj<span class="token punctuation">[</span>item<span class="token punctuation">.</span>time<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> prev    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> res_sort <span class="token operator">=</span> removal<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token constant">B</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">.</span>unix <span class="token operator">-</span> <span class="token constant">B</span><span class="token punctuation">.</span>unix<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> res_sort<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆå…«ï¼‰</title>
      <link href="/2021/12/29/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-ba/"/>
      <url>/2021/12/29/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-ba/</url>
      
        <content type="html"><![CDATA[<h1 id="ç”Ÿæˆè®¢å•ç¼–å·"><a href="#ç”Ÿæˆè®¢å•ç¼–å·" class="headerlink" title="ç”Ÿæˆè®¢å•ç¼–å·"></a>ç”Ÿæˆè®¢å•ç¼–å·</h1><p>å®ç°æ€è·¯ï¼šå½“å‰æ—¶é—´æˆ³ + 10ä½æ•´æ•°éšæœºæ•°</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// config\order.js</span><span class="token keyword">let</span> <span class="token function-variable function">Code</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">var</span> orderCode <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> <span class="token number">6</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>orderCode <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">}</span>orderCode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> orderCode<span class="token keyword">return</span> orderCode<span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token punctuation">{</span>Code<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£"><a href="#è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£" class="headerlink" title="è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£"></a>è°ƒç”¨è®¢é˜…æ¶ˆæ¯æ¥å£</h1><p>ä»¥ä¸‹ä½¿ç”¨è¯´æ˜æ‘˜è‡ª<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/subscribe-message.html">æ–‡æ¡£</a></p><p>æ­¥éª¤ä¸€ï¼šè·å–æ¨¡æ¿ ID</p><p>ç™»å½•å°ç¨‹åº -&gt; åŠŸèƒ½ -&gt; è®¢é˜…æ¶ˆæ¯ -&gt; å…¬å…±æ¨¡æ¿åº“ -&gt; æœç´¢â€™å•†å®¶ç¡®è®¤è®¢å•é€šçŸ¥â€™å¹¶é€‰ç”¨ -&gt; å¤åˆ¶æ¨¡æ¿ID</p><p>æ­¥éª¤äºŒï¼šè·å–ä¸‹å‘æƒé™</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">wx<span class="token punctuation">.</span><span class="token function">requestSubscribeMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">tmplIds</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'æ¨¡æ¿ID'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ­¥éª¤ä¸‰ï¼šè°ƒç”¨æ¥å£ä¸‹å‘è®¢é˜…æ¶ˆæ¯</p><p>æœåŠ¡ç«¯è°ƒç”¨ï¼Œè§ <a href="https://april-cl.github.io/2021/12/26/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi-yi/#toc-heading-7">å¾®ä¿¡è®¢é˜…æ¶ˆæ¯</a></p><h1 id="æäº¤è®¢å•"><a href="#æäº¤è®¢å•" class="headerlink" title="æäº¤è®¢å•"></a>æäº¤è®¢å•</h1><h2 id="è®¢å•æ•°æ®åº“è®¾è®¡"><a href="#è®¢å•æ•°æ®åº“è®¾è®¡" class="headerlink" title="è®¢å•æ•°æ®åº“è®¾è®¡"></a>è®¢å•æ•°æ®åº“è®¾è®¡</h2><pre class="line-numbers language-none"><code class="language-none">[{table_number:æ¡Œå·number_of_diners:ç”¨é¤äººæ•°order_time:ä¸‹å•æ—¶é—´sett_amount:äº¤æ˜“é‡‘é¢order_no:è®¢å•ç¼–å·transac_status:ç»“è´¦çŠ¶æ€=&gt;æœªç»“è´¦:'unsettled'|å·²ç»“è´¦:'success'order_receiving:æ¥å•çŠ¶æ€=&gt;æœªæ¥å•:'mis_orders'|å·²æ¥å•:'rec_order'menu:[{goods_list:[è´­ç‰©è½¦é‡Œçš„èœå•]}//ç¬¬ä¸€æ¬¡ä¸‹å•{goods_list:[è´­ç‰©è½¦é‡Œçš„èœå•]}//ç¬¬äºŒæ¬¡ä¸‹å•{}næ¬¡]ä¸‹å•çš„èœå“ï¼šç¬¬ä¸€æ¬¡ä¸‹å•;{äºŒæ¬¡,ä¸‰æ¬¡,næ¬¡}=&gt;åŠ èœ}]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è€ƒè™‘éœ€æ±‚"><a href="#è€ƒè™‘éœ€æ±‚" class="headerlink" title="è€ƒè™‘éœ€æ±‚"></a>è€ƒè™‘éœ€æ±‚</h2><ol><li>å®¢æˆ·åˆæ¬¡æäº¤è®¢å•</li><li>å®¢æˆ·åŠ å•</li></ol><p>ä¾æ® <code>transac_status</code> ç»“è´¦çŠ¶æ€å’Œ <code>table_number</code> å½“å‰æ¡Œå·åˆ¤æ–­ã€‚</p><p>å‘æ•°æ®æŸ¥è¯¢å½“å‰æ¡Œå·å¹¶ä¸”æœªç»“è´¦è®°å½•</p><ul><li>æ— è®°å½•åˆ™è¡¨ç¤ºä¹‹å‰çš„è®¢å•å·²ç»“ï¼Œæ­¤å•ä¸ºåˆæ¬¡ç‚¹å•ï¼Œå‘æ•°æ®åº“åˆ›å»ºæ–°çºªå½•</li><li>æœ‰è®°å½•åˆ™è¡¨ç¤ºè¯¥æ¡Œå·æ­¤å•ä¸ºåŠ å•ï¼Œå‘æ•°æ®åº“ä¿®æ”¹è®°å½•</li></ul><h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token function">sub_database</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shopping_card<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>total_price <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> sett_amount <span class="token operator">=</span> <span class="token number">0</span>    res<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>sett_amount <span class="token operator">+=</span> item<span class="token punctuation">.</span>total_price<span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> order <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token literal-property property">table_number</span><span class="token operator">:</span> <span class="token string">'004'</span><span class="token punctuation">,</span>        <span class="token literal-property property">number_of_diners</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>        <span class="token literal-property property">order_time</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        sett_amount<span class="token punctuation">,</span>        <span class="token literal-property property">order_no</span><span class="token operator">:</span> <span class="token function">Code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token literal-property property">transac_status</span><span class="token operator">:</span> <span class="token string">'unsettled'</span><span class="token punctuation">,</span>        <span class="token literal-property property">order_receiving</span><span class="token operator">:</span> <span class="token string">'mis_orders'</span><span class="token punctuation">,</span>        <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token literal-property property">backup_data</span><span class="token operator">:</span> <span class="token string">'å¤‡ç”¨å­—æ®µ'</span><span class="token punctuation">,</span> <span class="token literal-property property">goods_list</span><span class="token operator">:</span> res<span class="token punctuation">}</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> add_goods <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">backup_data</span><span class="token operator">:</span> <span class="token string">'å¤‡ç”¨å­—æ®µ'</span><span class="token punctuation">,</span> <span class="token literal-property property">goods_list</span><span class="token operator">:</span> res<span class="token punctuation">}</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token keyword">await</span> good_collect<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">table_number</span><span class="token operator">:</span> <span class="token string">'004'</span><span class="token punctuation">,</span> <span class="token literal-property property">transac_status</span><span class="token operator">:</span> <span class="token string">'unsettled'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">field</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">sett_amount</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">await</span> good_collect<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> order<span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>            <span class="token keyword">let</span> total_amount <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sett_amount<span class="token punctuation">)</span> <span class="token operator">+</span> sett_amount            <span class="token keyword">await</span> good_collect<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>query<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span>                <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>                    <span class="token literal-property property">sett_amount</span><span class="token operator">:</span> total_amount<span class="token punctuation">,</span>                    <span class="token literal-property property">order_receiving</span><span class="token operator">:</span> <span class="token string">'mis_orders'</span><span class="token punctuation">,</span>                    <span class="token literal-property property">menu</span><span class="token operator">:</span> _<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>add_goods<span class="token punctuation">)</span>                <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        res<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            <span class="token keyword">await</span> dishes_data<span class="token punctuation">.</span><span class="token function">doc</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>_id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>                <span class="token literal-property property">monthlysale</span><span class="token operator">:</span> _<span class="token punctuation">.</span><span class="token function">inc</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>quantity<span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token keyword">const</span> time_data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$Time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span>        <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">analysis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sameday</span><span class="token punctuation">(</span>time_data<span class="token punctuation">,</span> sett_amount<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆåä¸€ï¼‰</title>
      <link href="/2021/12/26/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi-yi/"/>
      <url>/2021/12/26/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¢å•ç®¡ç†é¡µ"><a href="#è®¢å•ç®¡ç†é¡µ" class="headerlink" title="è®¢å•ç®¡ç†é¡µ"></a>è®¢å•ç®¡ç†é¡µ</h1><h2 id="å‰ç«¯æ¥å£"><a href="#å‰ç«¯æ¥å£" class="headerlink" title="å‰ç«¯æ¥å£"></a>å‰ç«¯æ¥å£</h2><p>è·å–è®¢å•ï¼šobtainorder</p><p>è·å–èœå•è¯¦æƒ…ï¼švieworder</p><p>æ¥å•ï¼šreceiving</p><p>ç»“è´¦ï¼šcheckout</p><h2 id="è·å–è®¢å•ä¿¡æ¯"><a href="#è·å–è®¢å•ä¿¡æ¯" class="headerlink" title="è·å–è®¢å•ä¿¡æ¯"></a>è·å–è®¢å•ä¿¡æ¯</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/obtainorder'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>page<span class="token punctuation">,</span> transac_status<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">let</span> sk <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span>  <span class="token keyword">let</span> param <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>transac_status <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    param<span class="token punctuation">[</span><span class="token string">'transac_status'</span><span class="token punctuation">]</span> <span class="token operator">=</span> transac_status  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">delete</span> param<span class="token punctuation">.</span>transac_status  <span class="token punctuation">}</span>  <span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('order-data').where(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">OBJ</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">).orderBy('order_time', 'desc').field({menu: false}).limit(10).skip(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">).get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">total</span><span class="token operator">:</span> res<span class="token punctuation">.</span>pager<span class="token punctuation">.</span>Total<span class="token punctuation">}</span>    <span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span><span class="token literal-property property">result</span><span class="token operator">:</span> data<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>total<span class="token punctuation">}</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200.</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·å–èœå•è¯¦æƒ…"><a href="#è·å–èœå•è¯¦æƒ…" class="headerlink" title="è·å–èœå•è¯¦æƒ…"></a>è·å–èœå•è¯¦æƒ…</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/vieworder'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('order-data').doc('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').field({menu: true}).get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>menu<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°æ¥å•"><a href="#å®ç°æ¥å•" class="headerlink" title="å®ç°æ¥å•"></a>å®ç°æ¥å•</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/receiving'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span>  <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('order-data').doc('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').update({data:{order_receiving:'rec_order'}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'å·²æ¥å•ï¼Œå¿«ä¸Šèœå§'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°ç»“è´¦"><a href="#å®ç°ç»“è´¦" class="headerlink" title="å®ç°ç»“è´¦"></a>å®ç°ç»“è´¦</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/checkout'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> openid<span class="token punctuation">,</span> sett_amount<span class="token punctuation">,</span> order_no<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">let</span> newmoney <span class="token operator">=</span> <span class="token function">Price</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>sett_amount<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> subscribe <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token string-property property">'amount1'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'value'</span><span class="token operator">:</span> newmoney<span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token string-property property">'time2'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'value'</span><span class="token operator">:</span> time<span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token string-property property">'character_string3'</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'value'</span><span class="token operator">:</span> order_no<span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('order-data').doc('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').update({data:{transac_status:'success'}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span>openid<span class="token punctuation">,</span> subscribe<span class="token punctuation">)</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'ç»“è´¦æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¾®ä¿¡è®¢é˜…æ¶ˆæ¯"><a href="#å¾®ä¿¡è®¢é˜…æ¶ˆæ¯" class="headerlink" title="å¾®ä¿¡è®¢é˜…æ¶ˆæ¯"></a>å¾®ä¿¡è®¢é˜…æ¶ˆæ¯</h2><p>ç™»å½•å°ç¨‹åº -&gt; åŠŸèƒ½ -&gt; è®¢é˜…æ¶ˆæ¯ -&gt; å…¬å…±æ¨¡æ¿åº“ -&gt; æœç´¢â€™å•†å®¶ç¡®è®¤è®¢å•é€šçŸ¥â€™å¹¶é€‰ç”¨ -&gt; å¤åˆ¶æ¨¡æ¿ID</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// databaseapi.js</span><span class="token keyword">let</span> Subscribe <span class="token operator">=</span> <span class="token string">'https://api.weixin.qq.com/cgi-bin/message/subscribe/send?access_token='</span><span class="token keyword">class</span> <span class="token class-name">getToken</span> <span class="token punctuation">{</span>  <span class="token comment">// ä¸€äº›ä»£ç </span>  <span class="token keyword">async</span> <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">touser<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gettoken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> <span class="token constant">OBJ</span> <span class="token operator">=</span> <span class="token punctuation">{</span>        touser<span class="token punctuation">,</span>        data<span class="token punctuation">,</span>        <span class="token literal-property property">template_id</span><span class="token operator">:</span> <span class="token string">'ä¸Šé¢å¤åˆ¶çš„æ¨¡æ¿ID'</span><span class="token punctuation">,</span>        <span class="token literal-property property">page</span><span class="token operator">:</span> <span class="token string">'pages/my-order/my-order'</span><span class="token punctuation">,</span>        <span class="token literal-property property">miniprogram_state</span><span class="token operator">:</span> <span class="token string">'developer'</span>      <span class="token punctuation">}</span>      <span class="token keyword">let</span> colldata <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>Subscribe <span class="token operator">+</span> token<span class="token punctuation">,</span> <span class="token constant">OBJ</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> <span class="token string">'success'</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆä¸ƒï¼‰</title>
      <link href="/2021/12/20/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-qi/"/>
      <url>/2021/12/20/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="è¯¦æƒ…é¡µç»„ä»¶"><a href="#è¯¦æƒ…é¡µç»„ä»¶" class="headerlink" title="è¯¦æƒ…é¡µç»„ä»¶"></a>è¯¦æƒ…é¡µç»„ä»¶</h1><h2 id="å°è£…ç»„ä»¶"><a href="#å°è£…ç»„ä»¶" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h2><p>åœ¨ <code>pages\home-page\components</code> ç›®å½•åˆ›å»º <code>goods-details.vue</code>ï¼Œå¸ƒå±€æ ·å¼ä»£ç ç•¥</p><h2 id="è°ƒç”¨ç»„ä»¶"><a href="#è°ƒç”¨ç»„ä»¶" class="headerlink" title="è°ƒç”¨ç»„ä»¶"></a>è°ƒç”¨ç»„ä»¶</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Details<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Details<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Details <span class="token keyword">from</span> <span class="token string">'./components/goods-details.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>Details<span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ‡æ¢æ˜¾ç¤ºèœå“è¯¦æƒ…"><a href="#åˆ‡æ¢æ˜¾ç¤ºèœå“è¯¦æƒ…" class="headerlink" title="åˆ‡æ¢æ˜¾ç¤ºèœå“è¯¦æƒ…"></a>åˆ‡æ¢æ˜¾ç¤ºèœå“è¯¦æƒ…</h2><p>å®ç°æ€è·¯åŒ <a href="https://april-cl.github.io/2021/12/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-liu/#toc-heading-4">åˆ‡æ¢æ˜¾ç¤ºå…³é—­è´­ç‰©è½¦</a></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// page.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"popup_item()"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Details v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"popupItem"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Details<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Details <span class="token keyword">from</span> <span class="token string">'./components/goods-details.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Details<span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">{</span>                <span class="token literal-property property">popupItem</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">pop_Shopping</span> <span class="token punctuation">(</span><span class="token parameter">value <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>popupItem <span class="token operator">=</span> value<span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// goods-details.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"close()"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">close</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">popup_item</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·å–æ•°æ®"><a href="#è·å–æ•°æ®" class="headerlink" title="è·å–æ•°æ®"></a>è·å–æ•°æ®</h2><p>å®ç°æ€è·¯ï¼šé€šè¿‡ <code>v-bind</code> å°†çˆ¶ç»„ä»¶å‘è´­ç‰©è½¦ç»„ä»¶åŠ¨æ€èµ‹å€¼ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡ <code>pro_details</code> å­˜å‚¨çˆ¶ç»„ä»¶å½“å‰ç‚¹å‡»èœå“æ•°æ®ï¼Œè¯¦æƒ…é¡µç»„ä»¶é€šè¿‡ <code>props</code> æ¥æ”¶èœå“æ•°æ®</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// page.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>block v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, index) in goods"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"index"</span><span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>block v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(itemgood, good_index) in item.good_query"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"good_index"</span> @click<span class="token operator">=</span><span class="token string">"popup_item(true, index, good_index, item.cid, itemgood)"</span><span class="token operator">&gt;</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Details v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"popupItem"</span> <span class="token operator">:</span>pro_details<span class="token operator">=</span><span class="token string">"pro_details"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Details<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Details <span class="token keyword">from</span> <span class="token string">'./components/goods-details.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Details<span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">{</span>                <span class="token literal-property property">pro_details</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">popup_item</span> <span class="token punctuation">(</span><span class="token parameter">value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>popupItem <span class="token operator">=</span> value<span class="token keyword">this</span><span class="token punctuation">.</span>pro_details <span class="token operator">=</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood<span class="token punctuation">}</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// goods-details.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"details-name"</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>pro_details<span class="token punctuation">.</span>itemgood<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">pro_details</span><span class="token operator">:</span> Object<span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŒæ­¥è®¡ç®—èœå“åŠ å‡"><a href="#åŒæ­¥è®¡ç®—èœå“åŠ å‡" class="headerlink" title="åŒæ­¥è®¡ç®—èœå“åŠ å‡"></a>åŒæ­¥è®¡ç®—èœå“åŠ å‡</h2><p>è§ <a href="https://april-cl.github.io/2021/12/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-wu/">å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆäº”ï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆå…­ï¼‰</title>
      <link href="/2021/12/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-liu/"/>
      <url>/2021/12/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-liu/</url>
      
        <content type="html"><![CDATA[<h1 id="è´­ç‰©è½¦ç»„ä»¶"><a href="#è´­ç‰©è½¦ç»„ä»¶" class="headerlink" title="è´­ç‰©è½¦ç»„ä»¶"></a>è´­ç‰©è½¦ç»„ä»¶</h1><h2 id="å°è£…ç»„ä»¶"><a href="#å°è£…ç»„ä»¶" class="headerlink" title="å°è£…ç»„ä»¶"></a>å°è£…ç»„ä»¶</h2><p>åœ¨ <code>pages\home-page\components</code> ç›®å½•åˆ›å»º <code>shopping-cart.vue</code>ï¼Œå¸ƒå±€æ ·å¼ä»£ç ç•¥</p><h2 id="è°ƒç”¨ç»„ä»¶"><a href="#è°ƒç”¨ç»„ä»¶" class="headerlink" title="è°ƒç”¨ç»„ä»¶"></a>è°ƒç”¨ç»„ä»¶</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Cart<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Cart<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Cart <span class="token keyword">from</span> <span class="token string">'./components/shopping-cart.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>Cart<span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ‡æ¢æ˜¾ç¤ºå…³é—­è´­ç‰©è½¦"><a href="#åˆ‡æ¢æ˜¾ç¤ºå…³é—­è´­ç‰©è½¦" class="headerlink" title="åˆ‡æ¢æ˜¾ç¤ºå…³é—­è´­ç‰©è½¦"></a>åˆ‡æ¢æ˜¾ç¤ºå…³é—­è´­ç‰©è½¦</h2><h3 id="ç‚¹å‡»çˆ¶ç»„ä»¶"><a href="#ç‚¹å‡»çˆ¶ç»„ä»¶" class="headerlink" title="ç‚¹å‡»çˆ¶ç»„ä»¶"></a>ç‚¹å‡»çˆ¶ç»„ä»¶</h3><p>å®ç°æ€è·¯ï¼šç”¨ä¸€ä¸ªå¸ƒå°”å€¼æ ‡è®°è´­ç‰©è½¦æ˜¾éšçŠ¶æ€ï¼Œå½“å€¼ä¸º <code>true</code> æ—¶ï¼Œè´­ç‰©è½¦æ˜¾ç¤ºï¼Œæ­¤æ—¶è‹¥ç‚¹å‡»çˆ¶ç»„ä»¶æ§åˆ¶è´­ç‰©è½¦æ˜¾éšçŠ¶æ€å¼€å…³ï¼Œå€¼åˆ‡æ¢ä¸º <code>false</code>ï¼Œè´­ç‰©è½¦å…³é—­</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// page.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"pop_Shopping(!card)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Cart v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"card"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Cart<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Cart <span class="token keyword">from</span> <span class="token string">'./components/shopping-cart.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Cart<span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">{</span>                <span class="token literal-property property">card</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">pop_Shopping</span> <span class="token punctuation">(</span><span class="token parameter">value <span class="token operator">=</span> <span class="token boolean">true</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>card <span class="token operator">=</span> value<span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ç‚¹å‡»å­ç»„ä»¶ï¼ˆå³è´­ç‰©è½¦ç»„ä»¶ï¼‰"><a href="#ç‚¹å‡»å­ç»„ä»¶ï¼ˆå³è´­ç‰©è½¦ç»„ä»¶ï¼‰" class="headerlink" title="ç‚¹å‡»å­ç»„ä»¶ï¼ˆå³è´­ç‰©è½¦ç»„ä»¶ï¼‰"></a>ç‚¹å‡»å­ç»„ä»¶ï¼ˆå³è´­ç‰©è½¦ç»„ä»¶ï¼‰</h3><p>å®ç°æ€è·¯ï¼šç‚¹å‡»æ—¶è°ƒç”¨çˆ¶ç»„ä»¶<code>pop_Shopping</code> å‡½æ•°</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// shopping-cart.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"close()"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">close</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">pop_Shopping</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ·»åŠ èœå“è¿›è´­ç‰©è½¦"><a href="#æ·»åŠ èœå“è¿›è´­ç‰©è½¦" class="headerlink" title="æ·»åŠ èœå“è¿›è´­ç‰©è½¦"></a>æ·»åŠ èœå“è¿›è´­ç‰©è½¦</h2><p>å®ç°æ€è·¯ï¼šé€šè¿‡ <code>v-bind</code> å°†çˆ¶ç»„ä»¶å‘è´­ç‰©è½¦ç»„ä»¶åŠ¨æ€èµ‹å€¼ï¼Œç”¨ä¸€ä¸ªæ•°ç»„ <code>shopping_card</code> å­˜å‚¨çˆ¶ç»„ä»¶ä¸­è¦åŠ å…¥è´­ç‰©è½¦çš„èœå“ï¼Œè´­ç‰©è½¦ç»„ä»¶é€šè¿‡ <code>props</code> æ¥æ”¶èœå“æ•°æ®</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// page.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Cart v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"card"</span> <span class="token operator">:</span>shopping_card<span class="token operator">=</span><span class="token string">"shopping_card"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Cart<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Cart <span class="token keyword">from</span> <span class="token string">'./components/shopping-cart.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Cart<span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">{</span>                <span class="token literal-property property">shopping_card</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">plus</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">const</span> <span class="token punctuation">{</span>quantity<span class="token punctuation">,</span> image<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> _id<span class="token punctuation">}</span> <span class="token operator">=</span> itemgood<span class="token keyword">const</span> <span class="token constant">QU</span> <span class="token operator">=</span> quantity <span class="token operator">+</span> <span class="token number">1</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>good_query<span class="token punctuation">[</span>good_index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'quantity'</span><span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">)</span><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span>image<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token constant">QU</span><span class="token punctuation">,</span> unit<span class="token punctuation">,</span> <span class="token literal-property property">total_price</span><span class="token operator">:</span> unitprice <span class="token operator">*</span> <span class="token constant">QU</span><span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">}</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">shopping_Cart</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">reduce</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">const</span> <span class="token punctuation">{</span>quantity<span class="token punctuation">,</span> image<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> _id<span class="token punctuation">}</span> <span class="token operator">=</span> itemgood<span class="token keyword">const</span> <span class="token constant">QU</span> <span class="token operator">=</span> quantity <span class="token operator">-</span> <span class="token number">1</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>good_query<span class="token punctuation">[</span>good_index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'quantity'</span><span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">)</span><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">{</span>image<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> <span class="token literal-property property">quantity</span><span class="token operator">:</span> <span class="token constant">QU</span><span class="token punctuation">,</span> unit<span class="token punctuation">,</span> <span class="token literal-property property">total_price</span><span class="token operator">:</span> unitprice <span class="token operator">*</span> <span class="token constant">QU</span><span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">}</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">shopping_Cart</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">shopping_Cart</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>shopping_card<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// shopping-cart.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>block v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, index) in shopping_card"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"index"</span><span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"goods-list"</span> v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">"item.quantity &gt; 0"</span><span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"goods-list-image"</span><span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span>image <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">"item.image[0].url"</span> mode<span class="token operator">=</span><span class="token string">"aspectFill"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>image<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"goods-list-name"</span><span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-text"</span><span class="token operator">&gt;</span>                        <span class="token operator">&lt;</span>text<span class="token operator">&gt;</span>ï¿¥<span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>                        <span class="token operator">&lt;</span>text<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>total_price<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"goods-quantity"</span><span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>quantity<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">shopping_card</span><span class="token operator">:</span> Array<span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œ <code>plus</code> å’Œ <code>reduce</code> ä¸ºåŠ å‡èœå“å‡½æ•°ï¼Œè§ <a href="https://april-cl.github.io/2021/12/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-wu/">å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆäº”ï¼‰</a></p><h2 id="æ¸…ç©ºè´­ç‰©è½¦æ‰€æœ‰èœå“"><a href="#æ¸…ç©ºè´­ç‰©è½¦æ‰€æœ‰èœå“" class="headerlink" title="æ¸…ç©ºè´­ç‰©è½¦æ‰€æœ‰èœå“"></a>æ¸…ç©ºè´­ç‰©è½¦æ‰€æœ‰èœå“</h2><p>å®ç°æ€è·¯ï¼šçˆ¶ç»„ä»¶å°è£…å¥½æ¸…ç©ºæ•°æ®çš„æ¥å£ï¼Œå­ç»„ä»¶è¿›è¡Œè°ƒç”¨</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// page.vue</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">empty_data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>shopping_card <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">this</span><span class="token punctuation">.</span>itemize<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>sale_quantity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>item<span class="token punctuation">.</span>good_query<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">T</span></span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">.</span>quantity <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// shopping-cart.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"empTy()"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">empTy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">empty_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆäº”ï¼‰</title>
      <link href="/2021/12/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-wu/"/>
      <url>/2021/12/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-wu/</url>
      
        <content type="html"><![CDATA[<h1 id="èœå“æ•°é‡åŠ å‡"><a href="#èœå“æ•°é‡åŠ å‡" class="headerlink" title="èœå“æ•°é‡åŠ å‡"></a>èœå“æ•°é‡åŠ å‡</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// page.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>block v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, index) in goods"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"index"</span><span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>block v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(itemgood, good_index) in item.good_query"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"good_index"</span><span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span>view @click<span class="token punctuation">.</span>stop<span class="token operator">=</span><span class="token string">"reduce(index, good_index, item.cid, itemgood)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>                    <span class="token operator">&lt;</span>view @click<span class="token punctuation">.</span>stop<span class="token operator">=</span><span class="token string">"plus(index, good_index, item.cid, itemgood)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>Cart<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Cart<span class="token operator">&gt;</span><span class="token operator">&lt;</span>Details<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Details<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">import</span> Cart <span class="token keyword">from</span> <span class="token string">'./components/shopping-cart.vue'</span>    <span class="token keyword">import</span> Details <span class="token keyword">from</span> <span class="token string">'./components/goods-details.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>Cart<span class="token punctuation">,</span>Details<span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token punctuation">{</span>                <span class="token literal-property property">card</span><span class="token operator">:</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">plus</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">const</span> <span class="token punctuation">{</span>quantity<span class="token punctuation">,</span> image<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> _id<span class="token punctuation">}</span> <span class="token operator">=</span> itemgood                <span class="token keyword">const</span> <span class="token constant">QU</span> <span class="token operator">=</span> quantity <span class="token operator">+</span> <span class="token number">1</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>good_query<span class="token punctuation">[</span>good_index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'quantity'</span><span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">)</span>                            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">reduce</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">const</span> <span class="token punctuation">{</span>quantity<span class="token punctuation">,</span> image<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> _id<span class="token punctuation">}</span> <span class="token operator">=</span> itemgood                <span class="token keyword">const</span> <span class="token constant">QU</span> <span class="token operator">=</span> quantity <span class="token operator">-</span> <span class="token number">1</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>goods<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>good_query<span class="token punctuation">[</span>good_index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'quantity'</span><span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">shopping_Cart_add_sub</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> unitprice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>shopping_card<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'quantity'</span><span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">)</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>shopping_card<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'total_price'</span><span class="token punctuation">,</span> <span class="token constant">QU</span> <span class="token operator">*</span> unitprice<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p><code>Vue.set(object, propertyName, value)</code> å‘å“åº”å¼å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª propertyï¼Œå¹¶ç¡®ä¿è¿™ä¸ªæ–° property åŒæ ·æ˜¯å“åº”å¼çš„ï¼Œä¸”è§¦å‘è§†å›¾æ›´æ–°ã€‚å®ƒå¿…é¡»ç”¨äºå‘å“åº”å¼å¯¹è±¡ä¸Šæ·»åŠ æ–° propertyï¼Œå› ä¸º Vue æ— æ³•æ¢æµ‹æ™®é€šçš„æ–°å¢ property (æ¯”å¦‚ this.myObject.newProperty = â€˜hiâ€™)</p></blockquote><blockquote><p><code>.stop</code> é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­</p></blockquote><hr><p>ä¸‹é¢å†…å®¹éœ€ç»“åˆè´­ç‰©è½¦å’Œèœå“è¯¦æƒ…é¡µä¸€èµ·çœ‹ï¼Œå¯å…ˆç•¥è¿‡</p><h1 id="è´­ç‰©è½¦èœå“æ•°é‡åŠ å‡"><a href="#è´­ç‰©è½¦èœå“æ•°é‡åŠ å‡" class="headerlink" title="è´­ç‰©è½¦èœå“æ•°é‡åŠ å‡"></a>è´­ç‰©è½¦èœå“æ•°é‡åŠ å‡</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// shopping-cart.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>block v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"(item, index) in shopping_card"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"index"</span><span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"reduce(index, item.quantity, item._id, item.cid, item.good_index, item.unitprice)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>                <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"plus(index, item.quantity, item._id, item.cid, item.good_index, item.unitprice)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>block<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">reduce</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> quantity<span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> unitprice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">const</span> <span class="token constant">QU</span> <span class="token operator">=</span> quantity <span class="token operator">-</span> <span class="token number">1</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">shopping_Cart_add_sub</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> unitprice<span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">plus</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> quantity<span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> unitprice</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">const</span> <span class="token constant">QU</span> <span class="token operator">=</span> quantity <span class="token operator">+</span> <span class="token number">1</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">shopping_Cart_add_sub</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token constant">QU</span><span class="token punctuation">,</span> _id<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> unitprice<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¯¦æƒ…é¡µèœå“æ•°é‡åŠ å‡"><a href="#è¯¦æƒ…é¡µèœå“æ•°é‡åŠ å‡" class="headerlink" title="è¯¦æƒ…é¡µèœå“æ•°é‡åŠ å‡"></a>è¯¦æƒ…é¡µèœå“æ•°é‡åŠ å‡</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// goods-details.vue</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"reduce(pro_details)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>            <span class="token operator">&lt;</span>view @click<span class="token operator">=</span><span class="token string">"plus(pro_details)"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>        <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">pro_details</span><span class="token operator">:</span> Object<span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token function">plus</span><span class="token punctuation">(</span><span class="token parameter">pro_details</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">let</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood<span class="token punctuation">}</span> <span class="token operator">=</span> pro_details                <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">plus</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood<span class="token punctuation">)</span>                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>itemgood<span class="token punctuation">.</span>quantity<span class="token punctuation">)</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span>            <span class="token function">reduce</span><span class="token punctuation">(</span><span class="token parameter">pro_details</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">let</span> <span class="token punctuation">{</span>index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood<span class="token punctuation">}</span> <span class="token operator">=</span> pro_details                <span class="token keyword">this</span><span class="token punctuation">.</span>$parent<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> good_index<span class="token punctuation">,</span> cid<span class="token punctuation">,</span> itemgood<span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>çœ‹äº†çœ¼å½’æ¡£ç«Ÿåœäº†5å¤©æ²¡å†™ğŸ¤¦ğŸ» ä¸€å¼€å§‹æ˜¯å› ä¸ºæ‹”ç‰™ç–¼äº†ä¸¤å¤©æ²¡æœ‰å¿ƒæ€ï¼Œåé¢çªå¦‚å…¶æ¥çš„ç–«æƒ…å’Œè¢«å›°åœ¨å®¶çš„ç¥å…½åˆæå¾—æ²¡ç‚¹ç©ºé—²ğŸ¤¦ğŸ»</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çƒŸç«é›†â€”â€”ç«é”…</title>
      <link href="/2021/12/11/yan-huo-ji-huo-guo/"/>
      <url>/2021/12/11/yan-huo-ji-huo-guo/</url>
      
        <content type="html"><![CDATA[<p>å¹¿ä¸œçš„å†¬å¤©å†·çƒ­æ— å¸¸ï¼Œå¤©å†·çš„æ—¶å€™è®¡åˆ’å¥½æ‰“ç«é”…ï¼Œéš”å¤©å°±å‡æ¸©äº†ã€‚Butï¼å¯¹åƒè´§æ¥è¯´ï¼Œå¤©æ°”ç®—ä»€ä¹ˆå‘¢ğŸ˜</p><p>å°å¤«å¦»å¿™ç¢Œäº†åŠå¤©å‡†å¤‡é£Ÿæï¼Œé‚€ä¸Šä¸‰äº”å¥½å‹ï¼Œè™½ç„¶ä¸­é—´å‡ºç°ä¸€äº›ä¸æ„‰å¿«çš„æ’æ›²ï¼Œä½†å¹¸å¥½æœ€ç»ˆå¤§å®¶åƒå¾—æ»¡è¶³ğŸ²</p><p>æ­¤å¤„è¡¨æ‰¬æœ¬åœºé»‘é©¬â€”â€”ã€ç‚¸è…ç«¹ã€ï¼Œå¥½åƒåˆ°æ„å¤–ğŸ†</p><p>å¦å¤–ï¼Œã€ç‰›è‚‰ä¸¸ã€é€‰æ‰‹ä¹Ÿå‘æŒ¥å‡ºä¼˜ç§€çš„æ°´å¹³ğŸ‘</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gx9aq74s11j235s2dc1kz.jpg" alt="ç«é”….jpg"></p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èœè°± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆå››ï¼‰</title>
      <link href="/2021/12/09/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-si/"/>
      <url>/2021/12/09/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-si/</url>
      
        <content type="html"><![CDATA[<h1 id="èœå•å·¦å³è”åŠ¨"><a href="#èœå•å·¦å³è”åŠ¨" class="headerlink" title="èœå•å·¦å³è”åŠ¨"></a>èœå•å·¦å³è”åŠ¨</h1><p>éœ€æ±‚ï¼š</p><ol><li><p>æ»šåŠ¨å³è¾¹èœå“æ æ—¶ï¼Œå½“è¯¥åˆ†ç±»è¯¦æƒ…æ¨¡å—é¡¶éƒ¨æ¥è§¦åˆ°æ»šåŠ¨åŒºåŸŸçš„é¡¶éƒ¨ï¼Œå·¦è¾¹å¯¹åº”çš„åˆ†ç±»æ é«˜äº®ï¼Œå¹¶ä¸”æ˜¾ç¤ºåœ¨å¯è§†åŒºåŸŸ</p></li><li><p>ç‚¹å‡»å·¦è¾¹åˆ†ç±»æ é«˜äº®æ˜¾ç¤ºï¼Œå³è¾¹èœå“æ æ»šåŠ¨åˆ°è¯¥åˆ†ç±»é¡¶éƒ¨èœå“æ‰€åœ¨ä½ç½®ï¼ˆç±»ä¼¼äº HTML é‡Œçš„é”šç‚¹åŠŸèƒ½ï¼‰</p></li></ol><h2 id="æ»šåŠ¨å³è¾¹èœå“è”åŠ¨å·¦è¾¹åˆ†ç±»"><a href="#æ»šåŠ¨å³è¾¹èœå“è”åŠ¨å·¦è¾¹åˆ†ç±»" class="headerlink" title="æ»šåŠ¨å³è¾¹èœå“è”åŠ¨å·¦è¾¹åˆ†ç±»"></a>æ»šåŠ¨å³è¾¹èœå“è”åŠ¨å·¦è¾¹åˆ†ç±»</h2><h3 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><ol><li><p>ä½¿ç”¨å¾®ä¿¡å°ç¨‹åºæä¾›çš„API <code>wx.createSelectorQuery</code> åˆ›å»ºèŠ‚ç‚¹æŸ¥è¯¢å™¨ï¼Œè·å–å³è¾¹èœå“æ æ¯ä¸€ä¸ªåˆ†ç±»èœå“çš„é«˜åº¦</p></li><li><p>ç”¨ä¸€ä¸ªæ•°ç»„å˜é‡ <code>heightset</code> å­˜å‚¨å³è¾¹æ¯ä¸€ä¸ªåˆ†ç±»èœå“çš„é«˜åº¦</p></li><li><p>ç”¨ä¸€ä¸ªå˜é‡ <code>trigger</code> è®°å½•å½“å‰å·¦è¾¹æ‰€åœ¨ç±»ç›®é€‰ä¸­çš„å€¼</p></li><li><p>ç”¨ä¸€ä¸ªå˜é‡ <code>tophei</code> è®°å½•æ»šåŠ¨æ—¶è·ç¦»é¡¶éƒ¨çš„é«˜åº¦</p></li><li><p>å³è¾¹èœå“æ æ»šåŠ¨æ—¶è·å–å½“å‰æ»šåŠ¨çš„é«˜åº¦</p><ul><li><p>è‹¥è¯¥é«˜åº¦å¤§äº <code>tophei</code>ï¼Œå³è¾¹èœå“æ å‘ä¸‹æ»šåŠ¨ï¼Œè‹¥è¯¥é«˜åº¦å¤§äº <code>heightset</code> ä¸­ <code>trigger</code> å¯¹åº”çš„é«˜åº¦æ—¶è·³è½¬ä¸‹ä¸€ä¸ªåˆ†ç±»</p></li><li><p>è‹¥è¯¥é«˜åº¦å°äº <code>tophei</code>ï¼Œå³è¾¹èœå“æ å‘ä¸Šæ»šåŠ¨ï¼Œè‹¥è¯¥é«˜åº¦å°äº <code>heightset</code> ä¸­ <code>trigger</code> å¯¹åº”çš„é«˜åº¦æ—¶è·³è½¬ä¸Šä¸€ä¸ªåˆ†ç±»</p></li></ul></li></ol><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">goods_height</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>heightset <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> cate_height <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">const</span> query <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    query<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.rig-height'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    query<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            cate_height <span class="token operator">+=</span> item<span class="token punctuation">.</span>height            <span class="token keyword">this</span><span class="token punctuation">.</span>heightset<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cate_height<span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token function">scroll</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> scrollTop <span class="token operator">=</span> event<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>scrollTop    <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tophei<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heightset<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>trigger<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>trigger <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollTop <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>heightset<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>trigger <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>trigger <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>tophei <span class="token operator">=</span> scrollTop<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç‚¹å‡»å·¦è¾¹åˆ†ç±»è”åŠ¨å³è¾¹èœå“"><a href="#ç‚¹å‡»å·¦è¾¹åˆ†ç±»è”åŠ¨å³è¾¹èœå“" class="headerlink" title="ç‚¹å‡»å·¦è¾¹åˆ†ç±»è”åŠ¨å³è¾¹èœå“"></a>ç‚¹å‡»å·¦è¾¹åˆ†ç±»è”åŠ¨å³è¾¹èœå“</h2><h3 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h3><p>åˆ©ç”¨<a href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">æ–‡æ¡£</a>æä¾›çš„ <code>scroll-into-view</code>å®ç°ç±»ä¼¼äºé”šç‚¹çš„æ•ˆæœï¼Œç”¨ä¸€ä¸ªå˜é‡ <code>scroll_into</code> è®°å½•å½“å‰è§†å›¾å…ƒç´  id å€¼ï¼ˆæ­¤å‰å·²è®¾ç½®ä¸ºå¯¹åº”åˆ†ç±»çš„ cidï¼‰ï¼Œç‚¹å‡»å·¦è¾¹åˆ†ç±»æ—¶å°†è¯¥åˆ†ç±»çš„ cid èµ‹å€¼ç»™ <code>scroll_into</code> </p><h3 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">itemIze</span> <span class="token punctuation">(</span><span class="token parameter">index<span class="token punctuation">,</span> cid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>trigger <span class="token operator">=</span> index    <span class="token keyword">this</span><span class="token punctuation">.</span>scroll_into <span class="token operator">=</span> cid    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token comment">// é˜²æ­¢å› ä¸ºå·²ç»ç‚¹å‡»è¿‡è€Œä¸èƒ½äºŒæ¬¡è§¦å‘</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>scroll_into <span class="token operator">=</span> <span class="token string">''</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆä¸‰ï¼‰</title>
      <link href="/2021/12/07/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-san/"/>
      <url>/2021/12/07/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-san/</url>
      
        <content type="html"><![CDATA[<h1 id="åˆ›å»ºäº‘å‡½æ•°"><a href="#åˆ›å»ºäº‘å‡½æ•°" class="headerlink" title="åˆ›å»ºäº‘å‡½æ•°"></a>åˆ›å»ºäº‘å‡½æ•°</h1><p>åˆ›å»ºuniappé¡¹ç›®æ—¶ï¼Œ å¦‚æœå‹¾é€‰äº† <code>å¯ç”¨uniCloud</code> ï¼Œä¼šåˆ›å»ºä¸€ä¸ªuniCloudäº‘å¼€å‘ç¯å¢ƒï¼Œå› ä¸ºå‰é¢åœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™æ²¡æœ‰å‹¾é€‰ <code>å¯ç”¨uniCloud</code> é€‰é¡¹ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è‡ªå·±åˆ›å»ºäº‘æœåŠ¡ç©ºé—´ã€‚</p><p>åœ¨ <code>HBuilderX</code> ç¼–è¾‘å™¨æ‰“å¼€ <code>manifest.json</code> æºç è§†å›¾ï¼Œåœ¨ <code>mp-weixin</code> é€‰é¡¹æ–°å¢ cloudfunctionRoot å­—æ®µï¼ŒæŒ‡å®šæœ¬åœ°å·²å­˜åœ¨çš„ç›®å½•ä½œä¸ºäº‘å¼€å‘çš„æœ¬åœ°æ ¹ç›®å½•</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string-property property">"mp-weixin"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token string-property property">"appid"</span> <span class="token operator">:</span> <span class="token string">"APPID"</span><span class="token punctuation">,</span>    <span class="token string-property property">"setting"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token string-property property">"urlCheck"</span> <span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token string-property property">"usingComponents"</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token string-property property">"cloudfunctionRoot"</span><span class="token operator">:</span> <span class="token string">"cloudfunctions/"</span>  <span class="token comment">// +</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ <code>HBuilderX</code> è¿è¡Œå¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ç¼–è¾‘å™¨ä¸­æ–°å»º <code>cloudfunctions</code> ç›®å½•ï¼Œç„¶åå³é”® <code>æ–°å»ºNode.jsäº‘å‡½æ•°</code></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gx4lixk5hfj207m0a6myn.jpg"></p><p>ç‚¹å‡»åˆšåˆ›å»ºçš„äº‘å‡½æ•°ç›®å½•ï¼Œå³é”® <code>åœ¨å†…å»ºç»ˆç«¯æ‰“å¼€</code>ï¼Œæ‰§è¡Œ <code>npm install --save wx-server-sdk@latest</code> ã€æ–‡æ¡£ï¼š<a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/wx-server-sdk.html">åœ¨äº‘å‡½æ•°ä¸­ä½¿ç”¨ wx-server-sdk</a>ã€‘</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gx4lrwwrqwj20ji0o6gzl.jpg"></p><p>åœ¨ <code>cloudfunctions/Dish-manage/index.js</code> æ–‡ä»¶ä¸­ç¼–å†™äº‘å‡½æ•°</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// äº‘å‡½æ•°å…¥å£æ–‡ä»¶</span><span class="token keyword">const</span> cloud <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'wx-server-sdk'</span><span class="token punctuation">)</span>cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">env</span><span class="token operator">:</span> <span class="token string">'æ”¹ä¸ºä½ è‡ªå·±çš„äº‘ç¯å¢ƒid'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">const</span> db <span class="token operator">=</span> cloud<span class="token punctuation">.</span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> _ <span class="token operator">=</span> db<span class="token punctuation">.</span>command<span class="token keyword">const</span> category <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'dishes-category'</span><span class="token punctuation">)</span><span class="token comment">//èœå“ç±»ç›®æ•°æ®åº“</span><span class="token keyword">const</span> dishes <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token function">collection</span><span class="token punctuation">(</span><span class="token string">'dishes-data'</span><span class="token punctuation">)</span><span class="token comment">//èœå“æ‰€æœ‰æ•°æ®</span><span class="token comment">// äº‘å‡½æ•°å…¥å£å‡½æ•°event:å¯ä»¥æ¥åˆ°å‰ç«¯ä¼ æ¥çš„å€¼</span>exports<span class="token punctuation">.</span><span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> context</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">// 1.è¯·æ±‚æ•°æ®åº“çš„èœå“ç±»ç›®çš„æ•°æ®</span><span class="token comment">// 2.è¯·æ±‚æ‰€æœ‰èœå“çš„æ•°æ®</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> res_cate <span class="token operator">=</span> <span class="token keyword">await</span> category<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span>_<span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment">// console.log(res_cate.data)</span>      <span class="token keyword">const</span> res_dis <span class="token operator">=</span> <span class="token keyword">await</span> dishes<span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">onsale</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">let</span> newdata <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>      res_dis<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> <span class="token punctuation">{</span>category<span class="token punctuation">,</span>cid<span class="token punctuation">,</span><span class="token operator">...</span>data<span class="token punctuation">}</span> <span class="token operator">=</span> item        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>newdata<span class="token punctuation">[</span>cid<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          newdata<span class="token punctuation">[</span>cid<span class="token punctuation">]</span>  <span class="token operator">=</span> <span class="token punctuation">{</span>            category<span class="token punctuation">,</span>            cid<span class="token punctuation">,</span>            <span class="token literal-property property">good_query</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        newdata<span class="token punctuation">[</span>cid<span class="token punctuation">]</span><span class="token punctuation">.</span>good_query<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> list <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>newdata<span class="token punctuation">)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span>      <span class="token keyword">return</span><span class="token punctuation">{</span>        <span class="token literal-property property">res_cate</span><span class="token operator">:</span>res_cate<span class="token punctuation">.</span>data<span class="token punctuation">,</span>        <span class="token literal-property property">res_dis</span><span class="token operator">:</span>list      <span class="token punctuation">}</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> error  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å³é”® <code>å¯åŠ¨äº‘å‡½æ•°æœ¬åœ°è°ƒè¯•</code></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gx4mgilkvrj217w0nzk0n.jpg"></p><p>èƒ½æ­£ç¡®è¿”å›ç»“æœå³æˆåŠŸï¼Œå†å³é”®é€‰æ‹© <code>ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–ï¼ˆä¸ä¸Šä¼ node_modulesï¼‰</code>ï¼ŒæŸ¥çœ‹äº‘å¼€å‘æ§åˆ¶å°ä¸­äº‘å‡½æ•°åˆ—è¡¨æ˜¯å¦éƒ¨ç½²æˆåŠŸ</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gx4mkmbq6lj20x309fn0j.jpg"></p><h1 id="å°ç¨‹åºç«¯è°ƒç”¨äº‘å‡½æ•°"><a href="#å°ç¨‹åºç«¯è°ƒç”¨äº‘å‡½æ•°" class="headerlink" title="å°ç¨‹åºç«¯è°ƒç”¨äº‘å‡½æ•°"></a>å°ç¨‹åºç«¯è°ƒç”¨äº‘å‡½æ•°</h1><ol><li>å°ç¨‹åºç«¯åˆå§‹åŒ–</li></ol><p>è°ƒç”¨äº‘å‡½æ•°ã€æ•°æ®åº“ã€å­˜å‚¨ã€äº‘æ‰˜ç®¡ç­‰ API æ—¶ï¼Œéƒ½éœ€è¦æŒ‡å®šæ‰€éœ€è®¿é—®çš„äº‘ç¯å¢ƒ IDï¼Œæ„å³æŒ‡å®šè®¿é—®å“ªä¸ªç¯å¢ƒä¸‹çš„äº‘å‡½æ•°/æ•°æ®åº“/å­˜å‚¨/äº‘æ‰˜ç®¡/â€¦èµ„æºã€‚æœ‰ä¸¤ç§æ–¹å¼è¿›è¡ŒæŒ‡å®šï¼š1.ä½¿ç”¨é»˜è®¤ç¤ºä¾‹ <code>wx.cloud</code>ï¼›2.ä¸ºå„ä¸ªç¯å¢ƒä½¿ç”¨å•ç‹¬çš„å®ä¾‹</p><p>è¿™é‡Œä½¿ç”¨é»˜è®¤ç¤ºä¾‹ <code>wx.cloud</code> æŒ‡å®šæ‰€éœ€è®¿é—®çš„äº‘ç¯å¢ƒ ID</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// App.vue</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token function-variable function">onLaunch</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">env</span><span class="token operator">:</span> äº‘ç¯å¢ƒ <span class="token constant">ID</span><span class="token punctuation">,</span>  <span class="token literal-property property">traceUser</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å°ç¨‹åºç«¯è°ƒç”¨</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// pages\home-page\page.vue</span><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>  <span class="token keyword">async</span> <span class="token function">dishEs</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> wx<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span><span class="token function">callFunction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'è¦è°ƒç”¨çš„äº‘å‡½æ•°åç§°'</span><span class="token punctuation">,</span>       <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// ä¼ é€’ç»™äº‘å‡½æ•°çš„å‚æ•°</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆäºŒï¼‰</title>
      <link href="/2021/12/06/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-er/"/>
      <url>/2021/12/06/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-er/</url>
      
        <content type="html"><![CDATA[<p>æ ¹æ®è®¾è®¡ç¨¿åœ¨ <code>pages\é¡µé¢.vue</code> æ–‡ä»¶ä¸­å†™å¥½é¡µé¢å¸ƒå±€å’Œæ ·å¼ï¼Œæ­¤å¤„ä¸è¿°</p><h1 id="pages-json-æ–‡ä»¶"><a href="#pages-json-æ–‡ä»¶" class="headerlink" title="pages.json æ–‡ä»¶"></a>pages.json æ–‡ä»¶</h1><p><code>pages.json</code> æ–‡ä»¶ç”¨æ¥å¯¹ uni-app è¿›è¡Œå…¨å±€é…ç½®ï¼Œå†³å®šé¡µé¢æ–‡ä»¶çš„è·¯å¾„ã€çª—å£æ ·å¼ã€åŸç”Ÿçš„å¯¼èˆªæ ã€åº•éƒ¨çš„åŸç”Ÿtabbar ç­‰ã€‚<a href="https://uniapp.dcloud.io/collocation/pages">å®˜ç½‘</a></p><p>ä»¥ä¸‹å†…å®¹æ‘˜è‡ªæ–‡æ¡£</p><h2 id="é…ç½®é¡¹åˆ—è¡¨"><a href="#é…ç½®é¡¹åˆ—è¡¨" class="headerlink" title="é…ç½®é¡¹åˆ—è¡¨"></a>é…ç½®é¡¹åˆ—è¡¨</h2><table><thead><tr><th align="left">å±æ€§</th><th align="left">ç±»å‹</th><th align="left">å¿…å¡«</th></tr></thead><tbody><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=globalstyle">globalStyle</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=pages">pages</a></td><td align="left">Object Array</td><td align="left">æ˜¯</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=easycom">easycom</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=tabbar">tabBar</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=condition">condition</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=subpackages">subPackages</a></td><td align="left">Object Array</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=preloadrule">preloadRule</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/workers.html">workers</a></td><td align="left">String</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=leftwindow">leftWindow</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=topwindow">topWindow</a></td><td align="left">Object</td><td align="left">å¦</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/collocation/pages?id=rightwindow">rightWindow</a></td><td align="left">Object</td><td align="left">å¦</td></tr></tbody></table><h2 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h2><p><code>uni-app</code> é€šè¿‡ pages èŠ‚ç‚¹é…ç½®åº”ç”¨ç”±å“ªäº›é¡µé¢ç»„æˆï¼Œpages èŠ‚ç‚¹æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„æ¯ä¸ªé¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§å€¼å¦‚ä¸‹ï¼š</p><table><thead><tr><th align="left">å±æ€§</th><th align="left">ç±»å‹</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left">path</td><td align="left">String</td><td align="left">é…ç½®é¡µé¢è·¯å¾„</td></tr><tr><td align="left">style</td><td align="left">Object</td><td align="left">é…ç½®é¡µé¢çª—å£è¡¨ç°</td></tr></tbody></table><blockquote><p>æ³¨æ„</p><ul><li>pagesèŠ‚ç‚¹çš„ç¬¬ä¸€é¡¹ä¸ºåº”ç”¨å…¥å£é¡µï¼ˆå³é¦–é¡µï¼‰</li><li>åº”ç”¨ä¸­æ–°å¢/å‡å°‘é¡µé¢ï¼Œéƒ½éœ€è¦å¯¹ pages æ•°ç»„è¿›è¡Œä¿®æ”¹</li><li>æ–‡ä»¶åä¸éœ€è¦å†™åç¼€ï¼Œæ¡†æ¶ä¼šè‡ªåŠ¨å¯»æ‰¾è·¯å¾„ä¸‹çš„é¡µé¢èµ„æº</li></ul></blockquote><p>ä»£ç ç¤ºä¾‹ï¼š</p><p>å¼€å‘ç›®å½•ä¸ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">â”Œâ”€pages               â”‚  â”œâ”€indexâ”‚  â”‚  â””â”€index.vue    â”‚  â””â”€loginâ”‚     â””â”€login.vue    â”œâ”€static             â”œâ”€main.js       â”œâ”€App.vue          â”œâ”€manifest.json  â””â”€pages.json         <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ™éœ€è¦åœ¨ pages.json ä¸­å¡«å†™</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">{</span>    <span class="token string-property property">"pages"</span><span class="token operator">:</span> <span class="token punctuation">[</span>        <span class="token punctuation">{</span>            <span class="token string-property property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/index/index"</span><span class="token punctuation">,</span>             <span class="token string-property property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>            <span class="token string-property property">"path"</span><span class="token operator">:</span> <span class="token string">"pages/login/login"</span><span class="token punctuation">,</span>             <span class="token string-property property">"style"</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘å°ç¨‹åºç«¯ï¼ˆä¸€ï¼‰</title>
      <link href="/2021/12/03/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-yi/"/>
      <url>/2021/12/03/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-xiao-cheng-xu-duan-yi/</url>
      
        <content type="html"><![CDATA[<h1 id="é¡µé¢è®¾è®¡"><a href="#é¡µé¢è®¾è®¡" class="headerlink" title="é¡µé¢è®¾è®¡"></a>é¡µé¢è®¾è®¡</h1><ol><li><p>æ¬¢è¿é¡µ</p></li><li><p>é€‰æ¡Œé¡µ</p></li><li><p>ç‚¹é¤é¡µ</p></li><li><p>èœå“è¯¦æƒ…é¡µ</p></li><li><p>è®¢å•è¯¦æƒ…é¡µ</p></li><li><p>æˆ‘çš„è®¢å•é¡µ</p></li></ol><h1 id="åˆ›å»ºæ­¥éª¤"><a href="#åˆ›å»ºæ­¥éª¤" class="headerlink" title="åˆ›å»ºæ­¥éª¤"></a>åˆ›å»ºæ­¥éª¤</h1><ol><li><p>æ‰“å¼€ <code>HBuilderX</code> åˆ›å»ºä¸€ä¸ªé»˜è®¤æ¨¡æ¿çš„ <code>uni-app</code> é¡¹ç›®</p></li><li><p>åœ¨ <code>manifest.json</code> æ–‡ä»¶é…ç½® <code>appid</code></p></li><li><p>åœ¨ <code>pages</code> ç›®å½•åˆ›å»ºé¡µé¢æ–‡ä»¶</p></li><li><p>åœ¨ <code>pages.json</code> æ–‡ä»¶é…ç½®è·¯ç”±ä¿¡æ¯</p></li><li><p>å·¥å…·æ  -&gt; è¿è¡Œ -&gt; è¿è¡Œåˆ°å°ç¨‹åºæ¨¡æ‹Ÿå™¨ -&gt; å¾®ä¿¡å¼€å‘è€…å·¥å…·</p></li></ol><blockquote><p>ä¸€äº›ä¹±ä¸ƒå…«ç³Ÿçš„ç¢ç¢å¿µ<br>    åŸæœ¬æ˜¯è¾¹åšé¡¹ç›®è¾¹å†™ç¬”è®°çš„ï¼Œè¿™æ ·è®°çš„ä¹Ÿè¦æ¸…æ™°ä¸€äº›ï¼Œä¸Šä¸ªæœˆå› ä¸ºå°å­©è‚ èƒƒç‚+å…¨å®¶é£Ÿç‰©ä¸­æ¯’+ä¸€äº›æŸ´ç±³æ²¹ç›çš„çäº‹ï¼Œæ¯å¤©ç”¨äºå­¦ä¹ çš„æ—¶é—´å°±æ„ˆå‘å°‘äº†ï¼Œæœ‰ç‚¹æ— å¥ˆğŸ‚<br>    ç”Ÿæ´»ä¸€åœ°é¸¡æ¯›ï¼Œæ‰«æ‰«è¿˜æ˜¯è¦ç»§ç»­çš„é˜¿</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆåï¼‰</title>
      <link href="/2021/11/07/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi/"/>
      <url>/2021/11/07/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-shi/</url>
      
        <content type="html"><![CDATA[<h1 id="èœå“ç±»ç›®é¡µ"><a href="#èœå“ç±»ç›®é¡µ" class="headerlink" title="èœå“ç±»ç›®é¡µ"></a>èœå“ç±»ç›®é¡µ</h1><h2 id="å‰ç«¯æ¥å£"><a href="#å‰ç«¯æ¥å£" class="headerlink" title="å‰ç«¯æ¥å£"></a>å‰ç«¯æ¥å£</h2><p>æ·»åŠ èœå“ç±»ç›®ï¼šaddcategor</p><p>è·å–èœå“ç±»ç›®ï¼šobtaincate</p><h2 id="æ·»åŠ èœå“ç±»ç›®"><a href="#æ·»åŠ èœå“ç±»ç›®" class="headerlink" title="æ·»åŠ èœå“ç±»ç›®"></a>æ·»åŠ èœå“ç±»ç›®</h2><ol><li>æ ¡éªŒå‡½æ•°æ ¡éªŒæ˜¯å¦ä¸ºç©º</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">catecheck</span> <span class="token keyword">extends</span> <span class="token class-name">checking</span> <span class="token punctuation">{</span>  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'è¯·è¾“å…¥èœå“ç±»ç›®'</span><span class="token punctuation">]</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">Errunder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">Parameter</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">Blank</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>èœå“ç±»ç›®æ•°æ®åº“é›†åˆè®¾è®¡</li></ol><pre class="line-numbers language-none"><code class="language-none">[{cidï¼š'a+æ—¶é—´æˆ³',//åˆ†ç±»idcountï¼šnumber,//è¯¥åˆ†ç±»ä¸‹æœ‰å¤šå°‘å•†å“value: 'èœå“ç±»ç›®',label: 'èœå“ç±»ç›®',sele_quantity:0,//å°ç¨‹åºç«¯ç”¨æˆ·åœ¨è¯¥åˆ†ç±»ä¸‹æ·»åŠ äº†å¤šå°‘å•†å“}]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>3.æ•°æ®åº“æ“ä½œè¯­å¥</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').where({label:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).get()</span><span class="token template-punctuation string">`</span></span><span class="token comment">// è·å–æ•°æ®åº“æŒ‡å®šç±»ç›®çš„è®°å½•ï¼Œè‹¥æœ‰è®°å½•åˆ™è¯¥ç±»ç›®å·²å­˜åœ¨</span><span class="token keyword">const</span> cate <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').add({data:{value:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',label:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>cid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',count:0,sele_quantity:0}})</span><span class="token template-punctuation string">`</span></span><span class="token comment">// å‘æ•°æ®åº“æ·»åŠ èœå“ç±»ç›®è®°å½•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="4"><li>ä½¿ç”¨å‰é¢å°è£…è¿‡çš„ <code>getToken().posteve(dataUrl, query)</code> æ¥å£æŸ¥è¯¢æ˜¯å¦å·²å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å‘æ•°æ®åº“æ·»åŠ è®°å½•ï¼Œåä¹‹è¿”å›å®¢æˆ·ç«¯å·²å­˜åœ¨å“åº”</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">try</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'è¯¥ç±»ç›®å·²å­˜åœ¨'</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>AddUrl<span class="token punctuation">,</span> cate<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æ·»åŠ æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æ·»åŠ å¤±è´¥ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·å–èœå“ç±»ç›®"><a href="#è·å–èœå“ç±»ç›®" class="headerlink" title="è·å–èœå“ç±»ç›®"></a>è·å–èœå“ç±»ç›®</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/obtaincate'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>page<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">let</span> sk <span class="token operator">=</span> page <span class="token operator">*</span> <span class="token number">10</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').orderBy('cid','desc').limit(10).skip('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">total</span><span class="token operator">:</span>res<span class="token punctuation">.</span>pager<span class="token punctuation">.</span>Total<span class="token punctuation">}</span>    <span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span><span class="token literal-property property">result</span><span class="token operator">:</span>data<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>total<span class="token punctuation">}</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸€äº›è¡¥å……"><a href="#ä¸€äº›è¡¥å……" class="headerlink" title="ä¸€äº›è¡¥å……"></a>ä¸€äº›è¡¥å……</h2><ul><li><code>ctx.query</code> è·å–è§£æçš„æŸ¥è¯¢å­—ç¬¦ä¸², å½“æ²¡æœ‰æŸ¥è¯¢å­—ç¬¦ä¸²æ—¶ï¼Œè¿”å›ä¸€ä¸ªç©ºå¯¹è±¡</li><li><code>Collection.orderBy(fieldPath: string, string: order)</code> æŒ‡å®šæŸ¥è¯¢æ’åºæ¡ä»¶</li><li><code>Collection.limit(value: number)</code> æŒ‡å®šæŸ¥è¯¢ç»“æœé›†æ•°é‡ä¸Šé™</li><li><code>Collection.skip(offset: number)</code> æŒ‡å®šæŸ¥è¯¢è¿”å›ç»“æœæ—¶ä»æŒ‡å®šåºåˆ—åçš„ç»“æœå¼€å§‹è¿”å›ï¼Œå¸¸ç”¨äºåˆ†é¡µ</li></ul><h1 id="èœå“ç®¡ç†é¡µ"><a href="#èœå“ç®¡ç†é¡µ" class="headerlink" title="èœå“ç®¡ç†é¡µ"></a>èœå“ç®¡ç†é¡µ</h1><h2 id="å‰ç«¯æ¥å£-1"><a href="#å‰ç«¯æ¥å£-1" class="headerlink" title="å‰ç«¯æ¥å£"></a>å‰ç«¯æ¥å£</h2><p>è·å–èœå“å•ä½ï¼šobtainunit</p><p>æ·»åŠ èœå“å•ä½ï¼šdishunit</p><p>è·å–èœå“ï¼šobtaindishes</p><p>ä¸Šæ¶èœå“ï¼šuploaddishes</p><p>ä¸‹æ¶èœå“ï¼šfromsale</p><p>ä¿®æ”¹ä¸Šæ¶çš„èœå“ï¼šmodifydishes</p><h2 id="è·å–èœå“å•ä½"><a href="#è·å–èœå“å•ä½" class="headerlink" title="è·å–èœå“å•ä½"></a>è·å–èœå“å•ä½</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/obtainunit'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishunit').get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ·»åŠ èœå“å•ä½"><a href="#æ·»åŠ èœå“å•ä½" class="headerlink" title="æ·»åŠ èœå“å•ä½"></a>æ·»åŠ èœå“å•ä½</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/dishunit'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> unid <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>unit<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body  <span class="token keyword">new</span> <span class="token class-name">unitcheck</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishunit').where({label:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">const</span> cate <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishunit').add({data:{value:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',label:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',unid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'è¯¥èœå“å•ä½å·²å­˜åœ¨'</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>AddUrl<span class="token punctuation">,</span> cate<span class="token punctuation">)</span>      <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æ·»åŠ æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æ·»åŠ å¤±è´¥ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·å–èœå“"><a href="#è·å–èœå“" class="headerlink" title="è·å–èœå“"></a>è·å–èœå“</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/obtaindishes'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token punctuation">{</span>page<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">let</span> sk <span class="token operator">=</span> page <span class="token operator">*</span> <span class="token number">10</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-data').orderBy('time', 'desc').limit(10).skip(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sk<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">).get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>TripUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">const</span> total <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">total</span><span class="token operator">:</span>res<span class="token punctuation">.</span>pager<span class="token punctuation">.</span>Total<span class="token punctuation">}</span>    <span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">{</span><span class="token literal-property property">result</span><span class="token operator">:</span>data<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">...</span>total<span class="token punctuation">}</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸Šæ¶èœå“"><a href="#ä¸Šæ¶èœå“" class="headerlink" title="ä¸Šæ¶èœå“"></a>ä¸Šæ¶èœå“</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploaddishes'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> category<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> image<span class="token punctuation">,</span> value<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body  <span class="token keyword">new</span> <span class="token class-name">putoncheck</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> category<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> image<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-data').add({data:{    category:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',name:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',unitprice:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unitprice<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,unit:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',image:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>image<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,quantity:0,onsale:true,cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',time:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',monthlysale:0  }})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').where({cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).update({data:{count:db.command.inc(1)}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>AddUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> count<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span><span class="token string">'æäº¤æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æäº¤å¤±è´¥ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸‹æ¶èœå“"><a href="#ä¸‹æ¶èœå“" class="headerlink" title="ä¸‹æ¶èœå“"></a>ä¸‹æ¶èœå“</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/fromsale'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> value<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>query  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-data').doc('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').update({data:{onsale:false}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').where({cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).update({data:{count:db.command.inc(-1)}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> count<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'ä¸‹æ¶æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¿®æ”¹ä¸Šæ¶çš„èœå“"><a href="#ä¿®æ”¹ä¸Šæ¶çš„èœå“" class="headerlink" title="ä¿®æ”¹ä¸Šæ¶çš„èœå“"></a>ä¿®æ”¹ä¸Šæ¶çš„èœå“</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/modifydishes'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> category<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> image<span class="token punctuation">,</span> value<span class="token punctuation">,</span> valueBefore<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body  <span class="token keyword">new</span> <span class="token class-name">putoncheck</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> category<span class="token punctuation">,</span> name<span class="token punctuation">,</span> unitprice<span class="token punctuation">,</span> unit<span class="token punctuation">,</span> image<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">utcOffset</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-data').doc('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').update({data:{    category:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',name:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',unitprice:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unitprice<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,unit:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>unit<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',image:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>image<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,quantity:0,onsale:true,cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',time:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>time<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'  }})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">let</span> countBefore <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').where({cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>valueBefore<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).update({data:{count:db.command.inc(-1)}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">let</span> countAfter <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('dishes-category').where({cid:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">'}).update({data:{count:db.command.inc(1)}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> countBefore<span class="token punctuation">)</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> countAfter<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'ä¿®æ”¹æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆä¹ï¼‰</title>
      <link href="/2021/10/31/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-jiu/"/>
      <url>/2021/10/31/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-jiu/</url>
      
        <content type="html"><![CDATA[<h1 id="å•†å®¶ä¿¡æ¯æ ¡éªŒ"><a href="#å•†å®¶ä¿¡æ¯æ ¡éªŒ" class="headerlink" title="å•†å®¶ä¿¡æ¯æ ¡éªŒ"></a>å•†å®¶ä¿¡æ¯æ ¡éªŒ</h1><ul><li><p>å•†å®¶ä¿¡æ¯è¡¨å•å­—æ®µï¼š</p><ul><li>åº—é“ºåç§°</li><li>åº—é“ºåœ°å€</li><li>åº—é“ºlogo</li></ul></li><li><p>éœ€æ ¡éªŒï¼š</p><ul><li>æ‰€æœ‰å­—æ®µä¸å¾—ä¸ºç©º</li><li>ä¸èƒ½æœ‰ç©ºæ ¼ç¬¦</li></ul><p>  åœ¨ä¸æ»¡è¶³æ¡ä»¶çš„æƒ…å†µç‚¹å‡»æäº¤ç»™ç”¨æˆ·ç›¸åº”çš„æé†’</p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">Arrfun</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Parameter</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> bvc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>bvc <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>bvc<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">202</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token function">Blank</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> vbn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vbn<span class="token punctuation">)</span>    <span class="token keyword">let</span> bvc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>vbn<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>bvc <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>list<span class="token punctuation">[</span>bvc<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">202</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¸Šä¼ å•†å®¶ä¿¡æ¯æ•°æ®åˆ°æ•°æ®åº“"><a href="#ä¸Šä¼ å•†å®¶ä¿¡æ¯æ•°æ®åˆ°æ•°æ®åº“" class="headerlink" title="ä¸Šä¼ å•†å®¶ä¿¡æ¯æ•°æ®åˆ°æ•°æ®åº“"></a>ä¸Šä¼ å•†å®¶ä¿¡æ¯æ•°æ®åˆ°æ•°æ®åº“</h1><p>ä½¿ç”¨<a href="https://april-cl.github.io/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-si/">å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆå››ï¼‰</a>å°è£…çš„ <code>getToken().posteve(dataUrl, query)</code> APIæ¥å£</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadshop'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> address<span class="token punctuation">,</span> logo<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body  <span class="token keyword">new</span> <span class="token class-name">shopinfor</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> name<span class="token punctuation">,</span> address<span class="token punctuation">,</span> logo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('shop-infor').add({data:{name:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',address:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>address<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',logo:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>logo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>AddUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æäº¤æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æäº¤å¤±è´¥ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä»æ•°æ®åº“æ‹‰å–å•†å®¶ä¿¡æ¯æ•°æ®"><a href="#ä»æ•°æ®åº“æ‹‰å–å•†å®¶ä¿¡æ¯æ•°æ®" class="headerlink" title="ä»æ•°æ®åº“æ‹‰å–å•†å®¶ä¿¡æ¯æ•°æ®"></a>ä»æ•°æ®åº“æ‹‰å–å•†å®¶ä¿¡æ¯æ•°æ®</h1><p>ä½¿ç”¨<a href="https://april-cl.github.io/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-si/">å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆå››ï¼‰</a>å°è£…çš„ <code>getToken().posteve(dataUrl, query)</code> APIæ¥å£</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/obtainshop'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('shop-infor').get()</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>Tripurl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">const</span> data <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'æäº¤å¤±è´¥ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¿®æ”¹åº—é“ºä¿¡æ¯"><a href="#ä¿®æ”¹åº—é“ºä¿¡æ¯" class="headerlink" title="ä¿®æ”¹åº—é“ºä¿¡æ¯"></a>ä¿®æ”¹åº—é“ºä¿¡æ¯</h1><p>ä½¿ç”¨<a href="https://april-cl.github.io/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-si/">å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆå››ï¼‰</a>å°è£…çš„ <code>getToken().posteve(dataUrl, query)</code> APIæ¥å£</p><p>å’Œåˆæ¬¡è®¾ç½®å…±ç”¨åŒä¸€é¡µé¢ï¼Œé€šè¿‡ <a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/reference-sdk-api/database/collection/Collection.doc.html">Collection.doc(id: string): Document</a> è·å–é›†åˆä¸­æŒ‡å®šè®°å½•çš„å¼•ç”¨</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/modifyshop'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Auth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>m<span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> address<span class="token punctuation">,</span> logo<span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>body  <span class="token keyword">new</span> <span class="token class-name">shopinfor</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> name<span class="token punctuation">,</span> address<span class="token punctuation">,</span> logo<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection('shop-infor').doc('</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">').update({data:{name:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',address:'</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>address<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">',logo:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>logo<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">}})</span><span class="token template-punctuation string">`</span></span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>UpdateUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'ä¿®æ”¹æˆåŠŸ'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> <span class="token string">'ä¿®æ”¹å¤±è´¥ï¼ŒæœåŠ¡å™¨å‘ç”Ÿé”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">answer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆå…«ï¼‰</title>
      <link href="/2021/10/28/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-ba/"/>
      <url>/2021/10/28/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-ba/</url>
      
        <content type="html"><![CDATA[<h1 id="è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨"><a href="#è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨" class="headerlink" title="è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨"></a>è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨</h1><p>å¯¹è±¡å­˜å‚¨ï¼ˆCloud Object Storageï¼ŒCOSï¼‰æ˜¯è…¾è®¯äº‘æä¾›çš„ä¸€ç§å­˜å‚¨æµ·é‡æ–‡ä»¶çš„åˆ†å¸ƒå¼å­˜å‚¨æœåŠ¡ï¼Œå…·æœ‰é«˜æ‰©å±•æ€§ã€ä½æˆæœ¬ã€å¯é å®‰å…¨ç­‰ä¼˜ç‚¹ã€‚</p><p><a href="https://cloud.tencent.com/document/product/436">æ–‡æ¡£ä¼ é€é—¨</a></p><h2 id="å®‰è£…-SDK"><a href="#å®‰è£…-SDK" class="headerlink" title="å®‰è£… SDK"></a>å®‰è£… SDK</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i cos-nodejs-sdk-v5 <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åˆ›å»ºå­˜å‚¨æ¡¶"><a href="#åˆ›å»ºå­˜å‚¨æ¡¶" class="headerlink" title="åˆ›å»ºå­˜å‚¨æ¡¶"></a>åˆ›å»ºå­˜å‚¨æ¡¶</h2><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvvictlcjtj21hb0nldpp.jpg"></p><h2 id="è·å–-SecretIdã€SecretKey"><a href="#è·å–-SecretIdã€SecretKey" class="headerlink" title="è·å– SecretIdã€SecretKey"></a>è·å– SecretIdã€SecretKey</h2><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvv43hchszj215o0dz79v.jpg"></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvv43s4pppj21h90gxgsb.jpg"></p><h2 id="ä½¿ç”¨-Upload-File-æ¥å£"><a href="#ä½¿ç”¨-Upload-File-æ¥å£" class="headerlink" title="ä½¿ç”¨ Upload File æ¥å£"></a>ä½¿ç”¨ Upload File æ¥å£</h2><p>Upload File å®ç°é«˜çº§ä¸Šä¼ ï¼Œä¼ å…¥å‚æ•° SliceSize å¯ä»¥æ§åˆ¶æ–‡ä»¶å¤§å°è¶…å‡ºä¸€ä¸ªæ•°å€¼ï¼ˆé»˜è®¤1MBï¼‰æ—¶è‡ªåŠ¨ä½¿ç”¨åˆ†å—ä¸Šä¼ ï¼Œå¦åˆ™ä½¿ç”¨ç®€å•ä¸Šä¼ </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">COS</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cos-nodejs-sdk-v5'</span><span class="token punctuation">)</span><span class="token keyword">var</span> cos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">COS</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token literal-property property">SecretId</span><span class="token operator">:</span> <span class="token string">'SECRETID'</span><span class="token punctuation">,</span>  <span class="token literal-property property">SecretKey</span><span class="token operator">:</span> <span class="token string">'SECRETKEY'</span><span class="token punctuation">,</span>  <span class="token literal-property property">Protocol</span><span class="token operator">:</span> <span class="token string">'https:'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">let</span> Bucket <span class="token operator">=</span> <span class="token string">'examplebucket-1250000000'</span><span class="token keyword">let</span> Region <span class="token operator">=</span> <span class="token string">'COS_REGION'</span><span class="token keyword">let</span> <span class="token function-variable function">codfun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">filename<span class="token punctuation">,</span> path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    cos<span class="token punctuation">.</span><span class="token function">uploadFile</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      Bucket<span class="token punctuation">,</span>      Region<span class="token punctuation">,</span>      <span class="token literal-property property">Key</span><span class="token operator">:</span> filename<span class="token punctuation">,</span>        <span class="token comment">// å¯¹è±¡åœ¨å­˜å‚¨æ¡¶ä¸­çš„å”¯ä¸€æ ‡è¯†</span>      <span class="token literal-property property">FilePath</span><span class="token operator">:</span> path        <span class="token comment">// æœ¬åœ°æ–‡ä»¶è·¯å¾„</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Location<span class="token punctuation">)</span> <span class="token comment">// å¯¹è±¡çš„å¤–ç½‘è®¿é—®åŸŸå</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è·¯ç”±é¡µè°ƒç”¨æ¥å£"><a href="#è·¯ç”±é¡µè°ƒç”¨æ¥å£" class="headerlink" title="è·¯ç”±é¡µè°ƒç”¨æ¥å£"></a>è·¯ç”±é¡µè°ƒç”¨æ¥å£</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span>upload<span class="token punctuation">,</span> codfun<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../cos/cos.js'</span><span class="token punctuation">)</span>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadres'</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token function">codfun</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>file<span class="token punctuation">.</span>filename<span class="token punctuation">,</span> ctx<span class="token punctuation">.</span>file<span class="token punctuation">.</span>path<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨-postman-å‘é€è¯·æ±‚"><a href="#åœ¨-postman-å‘é€è¯·æ±‚" class="headerlink" title="åœ¨ postman å‘é€è¯·æ±‚"></a>åœ¨ postman å‘é€è¯·æ±‚</h2><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvvj46tytij20z60mbgvd.jpg" alt="nodemon-upload3.png"></p><h2 id="æœåŠ¡å™¨ç«¯æ¥å—åˆ°æ–‡ä»¶"><a href="#æœåŠ¡å™¨ç«¯æ¥å—åˆ°æ–‡ä»¶" class="headerlink" title="æœåŠ¡å™¨ç«¯æ¥å—åˆ°æ–‡ä»¶"></a>æœåŠ¡å™¨ç«¯æ¥å—åˆ°æ–‡ä»¶</h2><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvvj4i8lk1j21100hh43u.jpg" alt="nodemon-upload4.png"></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆä¸ƒï¼‰</title>
      <link href="/2021/10/27/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-qi/"/>
      <url>/2021/10/27/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸Šä¼ æ–‡ä»¶"><a href="#ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶"></a>ä¸Šä¼ æ–‡ä»¶</h1><p>Multer æ˜¯ä¸€ä¸ª node.js ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç† multipart/form-data ç±»å‹çš„è¡¨å•æ•°æ®ï¼Œå®ƒä¸»è¦ç”¨äºä¸Šä¼ æ–‡ä»¶ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> multer <span class="token parameter variable">--save</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="https://www.npmjs.com/package/multer">NPM multer</a></p><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶"><a href="#æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶"></a>æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> multer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@koa/multer'</span><span class="token punctuation">)</span><span class="token keyword">const</span> storage <span class="token operator">=</span> multer<span class="token punctuation">.</span><span class="token function">diskStorage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment">// é…ç½®ä¸Šä¼ æ–‡ä»¶çš„ç›®å½•</span>  <span class="token function-variable function">destination</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">cb</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'upload/image'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// æ›´æ”¹æ–‡ä»¶åé˜²æ­¢é‡å</span>  <span class="token function-variable function">filename</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> file<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>    <span class="token keyword">let</span> fileFormat <span class="token operator">=</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span>originalname<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileFormat<span class="token punctuation">)</span>    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">10000000</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">'.'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fileFormat<span class="token punctuation">[</span>fileFormat<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">const</span> upload <span class="token operator">=</span> <span class="token function">multer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>storage<span class="token punctuation">}</span><span class="token punctuation">)</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>upload<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è·¯ç”±é¡µ"><a href="#è·¯ç”±é¡µ" class="headerlink" title="è·¯ç”±é¡µ"></a>è·¯ç”±é¡µ</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-router'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token punctuation">{</span>upload<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../cos/cos.js'</span><span class="token punctuation">)</span>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/uploadres'</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">single</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'111111'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ postman ä¸­å‘ <code>localhost:5000/api/uploadres</code> å‘é€ <code>POST</code> è¯·æ±‚å¯çœ‹åˆ°æ–‡ä»¶å·²ä¿å­˜ä»¥åŠæœåŠ¡ç«¯å“åº”</p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvtsiwhbetj206t02xq38.jpg"></p><p><img src="http://tva1.sinaimg.cn/large/eb8a9ea3gy1gvtslr0w76j207j02fq38.jpg"></p><blockquote><p>å•çº¯æƒ³åä¸ªæ§½ğŸ˜‘<br>åŸæœ¬åšçš„æ—¶å€™æ˜¯æ²¡é—®é¢˜çš„ï¼Œç¬¬äºŒå¤©æ‰æƒ³ç€è¦æˆªå›¾åˆé‡æ–°åœ¨ postman å‘ä¸ªè¯·æ±‚ç»“æœæ­»æ´»å‘ä¸è¿‡å»ï¼Œçœ‹ commit ä¹Ÿæ²¡ä¿®æ”¹è¿‡ä»€ä¹ˆå˜›ï¼Œé‡æ–°æ¥ä¸€éä¹Ÿä¸è¡Œï¼Œåæ¥æŠŠ console.log æ³¨é‡Šå°±å¯ä»¥äº†ï¼ˆï¿£.ï¿£ï¼‰å†™ä»£ç æ˜¯ä¸€é—¨ç„å­¦ï¼Œå¹³å¿ƒé™æ°”ï¼Œlove &amp; peace â€¦</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆå…­ï¼‰</title>
      <link href="/2021/10/21/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-liu/"/>
      <url>/2021/10/21/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-liu/</url>
      
        <content type="html"><![CDATA[<h1 id="å®ç°ç™»å½•åŠŸèƒ½"><a href="#å®ç°ç™»å½•åŠŸèƒ½" class="headerlink" title="å®ç°ç™»å½•åŠŸèƒ½"></a>å®ç°ç™»å½•åŠŸèƒ½</h1><p>æ€è·¯ï¼š</p><ol><li><p>è·å–è¯·æ±‚å­—æ®µå€¼</p></li><li><p>ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢è¯­å¥ <code>db.collection("è¡¨å").where({æŸ¥è¯¢æ¡ä»¶é”®å€¼å¯¹}).get()</code></p></li><li><p>åˆ¤æ–­æŸ¥è¯¢ç»“æœï¼Œè‹¥æ²¡æœ‰è¿”å›æ•°æ®åˆ™æç¤º<code>è´¦å·æˆ–å¯†ç æœ‰è¯¯</code>ï¼Œåä¹‹ç™»å½•æˆåŠŸ</p></li></ol><h1 id="éªŒè¯-token-åˆæ³•æ€§"><a href="#éªŒè¯-token-åˆæ³•æ€§" class="headerlink" title="éªŒè¯ token åˆæ³•æ€§"></a>éªŒè¯ token åˆæ³•æ€§</h1><p>ä½¿ç”¨ <code>basic-auth</code> è§£æå‰ç«¯åœ¨ header ä¸­ä¼ æ¥çš„ tokenï¼Œä½¿ç”¨ <a href="https://github.com/auth0/node-jsonwebtoken#jwtsignpayload-secretorprivatekey-options-callback"><code>jwt.verify(token, secretOrPublicKey, [options, callback])</code></a> éªŒè¯ token åˆæ³•æ€§</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆäº”ï¼‰</title>
      <link href="/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-wu/"/>
      <url>/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-wu/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰ç«¯å­—æ®µå‚æ•°æ ¡éªŒ"><a href="#å‰ç«¯å­—æ®µå‚æ•°æ ¡éªŒ" class="headerlink" title="å‰ç«¯å­—æ®µå‚æ•°æ ¡éªŒ"></a>å‰ç«¯å­—æ®µå‚æ•°æ ¡éªŒ</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">checking</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> <span class="token operator">...</span>obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> ctx    <span class="token keyword">this</span><span class="token punctuation">.</span>obj <span class="token operator">=</span> obj    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// æ ¡éªŒå‰ç«¯ä¼ æ¥çš„å€¼ä¸ºundefined</span>  <span class="token function">Errunder</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> bvc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>bvc <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span><span class="token string">'å‚æ•°å¡«å†™é”™è¯¯'</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">// æ ¡éªŒå‰ç«¯ä¼ æ¥çš„å€¼</span>  <span class="token comment">// fieldï¼šè¦æ ¡éªŒçš„å­—æ®µ</span>  <span class="token comment">// msgï¼šæŠ¥é”™ä¿¡æ¯</span>  <span class="token comment">// numï¼šä¸‹æ ‡</span>  <span class="token function">ValidField</span> <span class="token punctuation">(</span><span class="token parameter">field<span class="token punctuation">,</span> msg<span class="token punctuation">,</span> num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token comment">// æ ¡éªŒæ‰‹æœºå·ç æ ¼å¼</span>      <span class="token string-property property">'phone'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^1[3456789]\d{9}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>      <span class="token comment">// å¯†ç æ ¡éªŒï¼š6-20ä½æ•°å­—å’Œå­—æ¯ç»“åˆ</span>      <span class="token string-property property">'password'</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?![\d]+$)(?![a-zA-Z]+$)(?![^\da-zA-Z]+$).{6,20}$</span><span class="token regex-delimiter">/</span></span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>reg<span class="token punctuation">[</span>field<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>obj<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span><span class="token number">202</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ³¨å†Œå•†å®¶è´¦å·"><a href="#æ³¨å†Œå•†å®¶è´¦å·" class="headerlink" title="æ³¨å†Œå•†å®¶è´¦å·"></a>æ³¨å†Œå•†å®¶è´¦å·</h1><p>æ€è·¯ï¼š</p><ol><li><p>ä½¿ç”¨æŸ¥è¯¢è¯­å¥å‘æ•°æ®åº“æŸ¥è¯¢æ‰‹æœºå·ç ä¹‹å‰æ˜¯å¦å·²ç»æ³¨å†Œè¿‡</p></li><li><p>å·²ç»æ³¨å†Œè¿‡ï¼šè¿”å›å“åº”ç»“æœâ€œå·²ç»æ³¨å†Œè¿‡äº†â€</p></li><li><p>è¿˜æ²¡æœ‰æ³¨å†Œè¿‡ï¼šæ ¹æ®æ³¨å†Œæ—¶é—´ç”Ÿæˆ <code>uid</code>ï¼Œä½¿ç”¨ <code>JSON.stringify()</code> æ ¼å¼åŒ–ç”Ÿæˆæ–°çºªå½•ï¼Œå‘æ•°æ®åº“æ‰§è¡Œå¢åŠ è®°å½•æ“ä½œ</p></li></ol><h1 id="ç”Ÿæˆ-token-ä»¤ç‰Œ"><a href="#ç”Ÿæˆ-token-ä»¤ç‰Œ" class="headerlink" title="ç”Ÿæˆ token ä»¤ç‰Œ"></a>ç”Ÿæˆ token ä»¤ç‰Œ</h1><p>1.ä»€ä¹ˆæ˜¯Tokenï¼Ÿ<br>åœ¨è®¡ç®—æœºèº«ä»½è®¤è¯ä¸­æ˜¯ä»¤ç‰Œï¼ˆä¸´æ—¶ï¼‰çš„æ„æ€ï¼Œåœ¨è¯æ³•åˆ†æä¸­æ˜¯æ ‡è®°çš„æ„æ€ã€‚ä¸€èˆ¬æˆ‘ä»¬æ‰€è¯´çš„çš„tokenå¤§å¤šæ˜¯æŒ‡ç”¨äºèº«ä»½éªŒè¯çš„token</p><p>2.ä¸ºä»€ä¹ˆä½¿ç”¨token?<br>æˆ‘ä»¬éœ€è¦æ¯æ¬¡éƒ½çŸ¥é“å½“å‰è¯·æ±‚çš„äººæ˜¯è°ï¼Œä½†æ˜¯åˆä¸æƒ³æ¯æ¬¡éƒ½è®©ä»–æäº¤ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™æ—¶å°±éœ€è¦æœ‰ä¸€ä¸ªç­‰åŒäºç”¨æˆ·åå¯†ç ä¹Ÿèƒ½å¤Ÿæ ‡è¯†ç”¨æˆ·èº«ä»½çš„ä¸œè¥¿ï¼Œå³â€”token.</p><p>3.åŸºäºTokençš„èº«ä»½éªŒè¯æ–¹æ³•<br>å®¢æˆ·ç«¯ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç è¯·æ±‚ç™»å½•<br>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼ŒéªŒè¯ç™»å½•æ˜¯å¦æˆåŠŸ<br>éªŒè¯æˆåŠŸåï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›ä¸€ä¸ªTokenç»™å®¢æˆ·ç«¯ï¼Œåä¹‹ï¼Œè¿”å›èº«ä»½éªŒè¯å¤±è´¥çš„ä¿¡æ¯<br>å®¢æˆ·ç«¯æ”¶åˆ°TokenåæŠŠTokenç”¨ä¸€ç§æ–¹å¼å­˜å‚¨èµ·æ¥,å¦‚( cookie / localstorage / sessionstorage / å…¶ä»– )<br>å®¢æˆ·ç«¯æ¯æ¬¡å‘èµ·è¯·æ±‚æ—¶éƒ½ä¼šå°†Tokenå‘ç»™æœåŠ¡ç«¯<br>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚åï¼ŒéªŒè¯Tokençš„åˆæ³•æ€§ï¼Œåˆæ³•å°±è¿”å›å®¢æˆ·ç«¯æ‰€éœ€æ•°æ®ï¼Œåä¹‹ï¼Œè¿”å›éªŒè¯å¤±è´¥çš„ä¿¡æ¯</p><p><a href="https://www.npmjs.com/package/jsonwebtoken">jsonwebtoken</a></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> jwt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jsonwebtoken'</span><span class="token punctuation">)</span><span class="token keyword">const</span> security <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">secretKey</span><span class="token operator">:</span> <span class="token string">'abcdefg'</span><span class="token punctuation">,</span>  <span class="token literal-property property">expiresIn</span><span class="token operator">:</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">gentoken</span> <span class="token punctuation">(</span><span class="token parameter">uid<span class="token punctuation">,</span> scope <span class="token operator">=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>secretKey<span class="token punctuation">,</span> expiresIn<span class="token punctuation">}</span> <span class="token operator">=</span> security  <span class="token keyword">const</span> token <span class="token operator">=</span> jwt<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">{</span>uid<span class="token punctuation">,</span> scope<span class="token punctuation">}</span><span class="token punctuation">,</span> secretKey<span class="token punctuation">,</span> <span class="token punctuation">{</span>expiresIn<span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> token<span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>gentoken<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆå››ï¼‰</title>
      <link href="/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-si/"/>
      <url>/2021/10/19/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-si/</url>
      
        <content type="html"><![CDATA[<h1 id="æ“ä½œæ•°æ®åº“è®°å½•"><a href="#æ“ä½œæ•°æ®åº“è®°å½•" class="headerlink" title="æ“ä½œæ•°æ®åº“è®°å½•"></a>æ“ä½œæ•°æ®åº“è®°å½•</h1><p>åœ¨ <code>databaseapi.js</code> æ–‡ä»¶ä¸­è¿›è¡Œæ•°æ®è®°å½•å¢åˆ æ”¹æŸ¥</p><p>æ€è·¯ï¼š</p><ol><li><p>å®šä¹‰ä¸€ä¸ªå˜é‡å­˜å‚¨äº‘ç¯å¢ƒ ID</p></li><li><p>å®šä¹‰ä¸€ä¸ªå˜é‡å­˜å‚¨å¯¹åº”æ“ä½œçš„è¯·æ±‚ URL</p></li><li><p>é€šè¿‡ <code>axios.post()</code> æ–¹æ³•å‘æŒ‡å®š URL å‘é€è¯·æ±‚ï¼Œè¯·æ±‚æ•°æ®ä¸º <code>env</code> ï¼ˆäº‘ç¯å¢ƒ IDï¼‰å’Œ <code>query</code> ï¼ˆæ•°æ®åº“æ“ä½œè¯­å¥è¿”å›å€¼ï¼‰ï¼Œè¿”å›ä¸€ä¸ª JSON æ•°æ®åŒ…</p></li></ol><p>ç¤ºä¾‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// databaseapi.js</span><span class="token keyword">let</span> env <span class="token operator">=</span> cloudID<span class="token keyword">let</span> AddUrl <span class="token operator">=</span> <span class="token string">'https://api.weixin.qq.com/tcb/databaseadd?access_token='</span><span class="token keyword">class</span> <span class="token class-name">getToken</span> <span class="token punctuation">{</span>  <span class="token comment">//è°ƒç”¨äº‘å¼€å‘http apiæ¥å£</span>  <span class="token keyword">async</span> <span class="token function">posteve</span><span class="token punctuation">(</span><span class="token parameter">dataUrl<span class="token punctuation">,</span> query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> token <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">gettoken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>dataUrl <span class="token operator">+</span> token<span class="token punctuation">,</span> <span class="token punctuation">{</span>env<span class="token punctuation">,</span> query<span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>errcode <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> data<span class="token punctuation">.</span>data      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token string">'è¯·æ±‚å‡ºé”™'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// app.js</span><span class="token keyword">let</span> query <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">db.collection("ceshi").add({data:{name:'name'}})</span><span class="token template-punctuation string">`</span></span><span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">posteve</span><span class="token punctuation">(</span>AddUrl<span class="token punctuation">,</span> query<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="æ’å…¥è®°å½•"><a href="#æ’å…¥è®°å½•" class="headerlink" title="æ’å…¥è®°å½•"></a>æ’å…¥è®°å½•</h2><p>è¯·æ±‚åœ°å€</p><pre class="line-numbers language-none"><code class="language-none">POST https://api.weixin.qq.com/tcb/databaseadd?access_token=ACCESS_TOKEN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åˆ é™¤è®°å½•"><a href="#åˆ é™¤è®°å½•" class="headerlink" title="åˆ é™¤è®°å½•"></a>åˆ é™¤è®°å½•</h2><p>è¯·æ±‚åœ°å€</p><pre class="line-numbers language-none"><code class="language-none">POST https://api.weixin.qq.com/tcb/databasedelete?access_token=ACCESS_TOKEN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ›´æ–°è®°å½•"><a href="#æ›´æ–°è®°å½•" class="headerlink" title="æ›´æ–°è®°å½•"></a>æ›´æ–°è®°å½•</h2><p>è¯·æ±‚åœ°å€</p><pre class="line-numbers language-none"><code class="language-none">POST https://api.weixin.qq.com/tcb/databaseupdate?access_token=ACCESS_TOKEN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æŸ¥è¯¢è®°å½•"><a href="#æŸ¥è¯¢è®°å½•" class="headerlink" title="æŸ¥è¯¢è®°å½•"></a>æŸ¥è¯¢è®°å½•</h2><p>è¯·æ±‚åœ°å€</p><pre class="line-numbers language-none"><code class="language-none">POST https://api.weixin.qq.com/tcb/databasequery?access_token=ACCESS_TOKEN<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆä¸‰ï¼‰</title>
      <link href="/2021/10/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-san/"/>
      <url>/2021/10/17/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-san/</url>
      
        <content type="html"><![CDATA[<h1 id="è·å–äº‘å¼€å‘è°ƒç”¨å‡­è¯"><a href="#è·å–äº‘å¼€å‘è°ƒç”¨å‡­è¯" class="headerlink" title="è·å–äº‘å¼€å‘è°ƒç”¨å‡­è¯"></a>è·å–äº‘å¼€å‘è°ƒç”¨å‡­è¯</h1><p><a href="https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/quickstart.html">å¾®ä¿¡å®˜æ–¹æ–‡æ¡£</a></p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/access-token/auth.getAccessToken.html">auth.getAccessToken</a></p><ol><li>å®‰è£… <code>axios</code></li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">npm install axios <span class="token operator">--</span>save        <span class="token comment">// Ajaxè¯·æ±‚æ¨¡å—</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>åˆ›å»ºæ•°æ®åº“æ“ä½œæ¥å£æ–‡ä»¶ <code>databaseapi.js</code></li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> axios <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'axios'</span><span class="token punctuation">)</span><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./handle.js'</span><span class="token punctuation">)</span><span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">'https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=APPID&amp;secret=APPSECRET'</span>   <span class="token comment">// APPIDã€APPSECRET éœ€è‡ªå·±ä¼ å…¥</span><span class="token keyword">class</span> <span class="token class-name">getToken</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">}</span>  <span class="token keyword">async</span> <span class="token function">gettoken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> token <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> token<span class="token punctuation">.</span>data<span class="token punctuation">.</span>access_token      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token string">'è·å– token é”™è¯¯'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">result</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>getToken<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>è°ƒç”¨æ•°æ®åº“æ“ä½œapiæ¥å£</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// login.js</span><span class="token keyword">const</span> <span class="token punctuation">{</span>getToken<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../config/databaseapi.js'</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gettoken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆäºŒï¼‰</title>
      <link href="/2021/10/16/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-er/"/>
      <url>/2021/10/16/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-er/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶"><a href="#è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶" class="headerlink" title="è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶"></a>è®¾ç½®å…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶</h1><ul><li><p>åœ¨å¼€å‘ä¸­ï¼Œä¸ºäº†åŠæ—¶çš„åé¦ˆä¿¡æ¯ï¼Œä¸å‰ç«¯å¯¹æ¥å¥½ï¼Œå¼‚å¸¸å¤„ç†ï¼Œæ˜¯åç«¯å¿…é¡»å»åšçš„ä¸€ç§äº‹æƒ…ï¼Œåé¦ˆæ­£ç¡®çš„ä¿¡æ¯ï¼Œå¯ä»¥åŠ å¿«bugçš„è§£å†³</p></li><li><p>åœ¨ nodeä¸­ï¼Œç”±äºåŸºæœ¬éƒ½æ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†èƒ½å¤Ÿå¤„ç†å¥½å¼‚æ­¥çš„å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ async/awaitæ¥è§£å†³</p></li></ul><ol><li>åˆ›å»ºå¼‚å¸¸åŸºç±»</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// handle.js</span><span class="token keyword">class</span> <span class="token class-name">result</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> code</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg    <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code  <span class="token punctuation">}</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>åˆ›å»ºå¤„ç†å¼‚å¸¸ä¸­é—´ä»¶</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// abnormal.js</span><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./handle.js'</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token function-variable function">abnormal</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">try</span> <span class="token punctuation">{</span>    <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> isresult <span class="token operator">=</span> err <span class="token keyword">instanceof</span> <span class="token class-name">result</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isresult<span class="token punctuation">)</span> <span class="token punctuation">{</span>      ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token literal-property property">msg</span><span class="token operator">:</span> err<span class="token punctuation">.</span>msg      <span class="token punctuation">}</span>      ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> err<span class="token punctuation">.</span>code    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>      ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'æœåŠ¡å™¨åç”Ÿé”™è¯¯'</span>      <span class="token punctuation">}</span>      ctx<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">500</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> abnormal<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>æ³¨å†Œå…¨å±€å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// app.js</span><span class="token keyword">const</span> abnormal <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./config/abnormal.js'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>abnormal<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç»Ÿä¸€è¿”å›ç»™å‰ç«¯çš„-JSON-æ ¼å¼"><a href="#ç»Ÿä¸€è¿”å›ç»™å‰ç«¯çš„-JSON-æ ¼å¼" class="headerlink" title="ç»Ÿä¸€è¿”å›ç»™å‰ç«¯çš„ JSON æ ¼å¼"></a>ç»Ÿä¸€è¿”å›ç»™å‰ç«¯çš„ JSON æ ¼å¼</h1><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// result.js</span><span class="token keyword">class</span> <span class="token class-name">result</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span> <span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> msg<span class="token operator">=</span><span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> code<span class="token operator">=</span><span class="token number">200</span><span class="token punctuation">,</span> data<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span> extra<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx <span class="token operator">=</span> ctx    <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> msg    <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data    <span class="token keyword">this</span><span class="token punctuation">.</span>extra <span class="token operator">=</span> extra  <span class="token punctuation">}</span>  <span class="token function">answer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>msg<span class="token punctuation">,</span>      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">,</span>      <span class="token literal-property property">extra</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>extra    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> result<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://blog.csdn.net/pig_is_duck/article/details/107916036?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_aggregation-2-107916036.pc_agg_rank_aggregation&amp;utm_term=node+%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86&amp;spm=1000.2123.3001.4430">KOA â€” 5. å…¨å±€å¼‚å¸¸å¤„ç†</a></p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çƒŸç«é›†â€”â€”æ¹¿ç‚’ç‰›æ²³</title>
      <link href="/2021/10/16/yan-huo-ji-shi-chao-niu-he/"/>
      <url>/2021/10/16/yan-huo-ji-shi-chao-niu-he/</url>
      
        <content type="html"><![CDATA[<p>åšä¸ºä¸€ä¸ªå¸¸å¹´åœ¨å¤–ç”Ÿæ´»çš„æ½®æ±•äººï¼Œè‚ ç²‰å’Œç‰›è‚‰ç²¿çš„å‘³é“å§‹ç»ˆåœ¨æˆ‘çš„ä¹¡æ„ä¸­è¦ç»•ã€‚å°è¯•è‡ªå·±åŠ¨æ‰‹åšè¿‡ï¼Œè‚ ç²‰ä¸€ç›´å¤åˆ»ä¸å‡ºé‚£ç§å‘³é“ï¼Œä¸æ­£å®—çš„æ¹¿ç‚’ç‰›æ²³å€’æ˜¯åšäº†å‡ å›æŒºå¾—æˆ‘æ„çš„ï¼ˆæ„Ÿè§‰çµé­‚è¿˜æ˜¯åœ¨äºæ²™èŒ¶é…±ğŸ˜‹ï¼‰</p><h1 id="ç”¨æ–™"><a href="#ç”¨æ–™" class="headerlink" title="ç”¨æ–™"></a>ç”¨æ–™</h1><table><thead><tr><th>é£Ÿæ</th><th>ç”¨é‡</th></tr></thead><tbody><tr><td>ç‰›è‚‰</td><td>æ ¹æ®ç”¨é¤äººæ•°</td></tr><tr><td>ç²¿æ¡</td><td>æ ¹æ®ç”¨é¤äººæ•°</td></tr><tr><td>é¸¡è›‹</td><td>éšæ„</td></tr><tr><td>é…±æ²¹</td><td>é€‚é‡ï¼ˆç”¨äºç‚’ç²¿æ¡ï¼‰</td></tr><tr><td>é…±æ²¹</td><td>ä¸¤å‹ºï¼ˆç”¨äºæ¹¿ç‚’æ–™æ±ï¼‰</td></tr><tr><td>æ²™èŒ¶é…±</td><td>ä¸€å‹ºï¼ˆç”¨äºè…Œåˆ¶ç‰›è‚‰ï¼‰</td></tr><tr><td>æ²™èŒ¶é…±</td><td>ä¸€å‹ºï¼ˆç”¨äºæ¹¿ç‚’æ–™æ±ï¼‰</td></tr><tr><td>é£Ÿç”¨æ²¹</td><td>é€‚é‡ï¼ˆç”¨äºè…Œåˆ¶ç‰›è‚‰ï¼‰</td></tr><tr><td>é£Ÿç”¨æ²¹</td><td>é€‚é‡ï¼ˆç”¨äºç‚’ç‰›æ²³ï¼‰</td></tr><tr><td>èšæ²¹</td><td>ä¸€å‹º</td></tr><tr><td>ç”Ÿç²‰</td><td>é€‚é‡ï¼ˆç”¨äºè…Œåˆ¶ç‰›è‚‰ï¼‰</td></tr><tr><td>ç”Ÿç²‰</td><td>é€‚é‡ï¼ˆç”¨äºæ¹¿ç‚’æ–™æ±ï¼‰</td></tr><tr><td>æ°´</td><td>åŠç¢—</td></tr></tbody></table><p>æ­¤èœè°±ç”¨é‡ä¸æ±‚ç²¾å‡†ï¼Œå› ä¸ºå¤§å¤šæ•°æ—¶å€™æˆ‘å¹¶æ²¡æœ‰æŒ‰ä¸Šé¢çš„é‡æ”¾</p><p>é”…å…·ï¼šé“¸é“ç‚’é”…</p><h1 id="ææ–™å‡†å¤‡"><a href="#ææ–™å‡†å¤‡" class="headerlink" title="ææ–™å‡†å¤‡"></a>ææ–™å‡†å¤‡</h1><ul><li><p>ç‰›è‚‰åˆ‡è–„ç‰‡åæµ¸æ³¡äºæ¸…æ°´ä¸­ï¼Œå‡ºè¡€æ°´åæ²¥å¹²ï¼ŒåŠ ã€é£Ÿç”¨æ²¹ã€ã€ã€æ²™èŒ¶é…±ã€ã€ã€ç”Ÿç²‰ã€è¿›è¡Œè…Œåˆ¶</p></li><li><p>ã€é¸¡è›‹ã€ç£•å…¥ç¢—ä¸­æ‰“æ•£å¤‡ç€</p></li><li><p>è°ƒæ¹¿ç‚’æ–™æ±ï¼šã€æ²™èŒ¶é…±ã€ + ã€é…±æ²¹ã€ + ã€èšæ²¹ã€ + ã€ç”Ÿç²‰ã€ + ã€æ°´ã€</p></li></ul><h1 id="æ¹¿ç‚’æ­¥éª¤"><a href="#æ¹¿ç‚’æ­¥éª¤" class="headerlink" title="æ¹¿ç‚’æ­¥éª¤"></a>æ¹¿ç‚’æ­¥éª¤</h1><ol><li><p>å¤§ç«èµ·é”…çƒ§å¹²æ°´åˆ†ï¼Œè½¬å°ç«æ”¾æ²¹çƒ§è‡³æœ‰ç‚¹å°çƒŸï¼Œæ”¾å…¥é¸¡è›‹æ¶²å°ç‚’è‡³æ— æµåŠ¨æ¶²ä½“çŠ¶æ€ï¼ˆé¸¡è›‹ç•™åœ¨é”…ä¸­äº¦å¯ï¼‰</p></li><li><p>æ”¾å…¥ç²¿æ¡ç‚’è‡³å¹²çˆ½çŠ¶æ€ï¼ŒåŠ å…¥é¸¡è›‹é…±æ²¹è°ƒå‘³ç‚’å‡åŒ€èµ·é”…</p></li><li><p>çƒ­æ²¹åŠ å…¥ç‰›è‚‰ç‚’è‡³å˜è‰²</p></li><li><p>åŠ å…¥æ¹¿ç‚’æ–™æ±å¤§ç«ç…®å¼€</p></li><li><p>å°†ç‚’ç†Ÿçš„ç‰›è‚‰ç åœ¨ç²¿æ¡ä¸Šï¼Œæ·‹ä¸Šæ–™æ±å³å¯</p></li></ol><h1 id="æˆå“å›¾"><a href="#æˆå“å›¾" class="headerlink" title="æˆå“å›¾"></a>æˆå“å›¾</h1><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gvgjypeoxoj6334334qv802.jpg" alt="æ¹¿ç‚’ç‰›æ²³.jpg"></p><p>è¿™ä¸ªèœè°±åšå‡ºæ¥çš„æ˜¯ä¸èƒ½å’Œå¤–é¢ä¹°çš„ç›¸æ¯”ï¼Œä½†è§£è§£é¦‹è¿˜æ˜¯OKçš„ğŸ˜</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èœè°± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®æˆ˜ç¯‡ç¬”è®° æ‰«ç ç‚¹é¤å°ç¨‹åºäº‘å¼€å‘ï¼ˆä¸€ï¼‰</title>
      <link href="/2021/10/15/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-yi/"/>
      <url>/2021/10/15/shi-zhan-pian-bi-ji-sao-ma-dian-can-xiao-cheng-xu-yun-kai-fa-yi/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ä¾æ—§æ˜¯å†™åœ¨å‰é¢çš„ç¢ç¢å¿µï¼šğŸ’­<br>    å­¦ä¹ ç¼–ç¨‹æˆ‘è§‰å¾—æœ€å¥½çš„æ–¹å¼å°±æ˜¯åŠ¨æ‰‹å†™ä»£ç âŒ¨ï¸<br>    ç›¸å¯¹äºé˜…è¯»æ–‡æ¡£ï¼Œåœ¨æå‡ºéœ€æ±‚è§£å†³éœ€æ±‚çš„è¿‡ç¨‹ä¸­ä»¥ä¸»åŠ¨æ¢ç´¢ä¸ºé©±åŠ¨å¯¹äºæˆ‘æ¥è¯´èƒ½å¤Ÿæ›´å¿«é€ŸæŒæ¡æŠ€å·§å¹¶åŠ æ·±å°è±¡ğŸ§ <br>    ä¹‹å‰åšè¿‡çš„é¡¹ç›®ä¹Ÿéƒ½ä¼šåœ¨ç¬”è®°æœ¬ä¸Šä½œè®°å½•ï¼Œä½†åæ¥å‘ç°è¿™ç§çº¸è´¨è®°å½•ä¼˜åŠ¿æŸ¥è¯¢èµ·æ¥æœ‰äº›å›°éš¾ä¹Ÿä¸å¤ªåˆ©äºå›é¡¾ï¼Œæ‰€ä»¥ç°åœ¨è¦æ…¢æ…¢å…»æˆç”¨åšå®¢æ¥è®°å½•çš„ä¹ æƒ¯â˜ºï¸</p></blockquote><h1 id="æœåŠ¡å™¨æ­å»º"><a href="#æœåŠ¡å™¨æ­å»º" class="headerlink" title="æœåŠ¡å™¨æ­å»º"></a>æœåŠ¡å™¨æ­å»º</h1><ol><li><p>ä½¿ç”¨ <code>npm init</code> åˆå§‹åŒ–é¡¹ç›®</p></li><li><p>å®‰è£…æ‰€éœ€è¦çš„æ¡†æ¶æ¨¡å—</p></li></ol><pre class="line-numbers language-none"><code class="language-none">npm install koa --save                  //koaæ¡†æ¶npm install koa-json --save             //è¿”å›ç»™å‰ç«¯çš„jsonå¯¹è±¡npm install koa-bodyparser --save       //postæäº¤çš„å¯¹è±¡npm install koa-router --save           //è·¯ç”±npm install koa2-cors --sav             //è§£å†³è·¨åŒºnpm install nodemon --save              //å¯åŠ¨æœåŠ¡å™¨ç«¯<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>åˆ›å»º <code>.gitignore</code> æ–‡ä»¶</li></ol><pre class="line-numbers language-none"><code class="language-none">/.idea/node_modulespackage-lock.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="4"><li>åˆ›å»ºå…¥å£æ–‡ä»¶ <code>app.js</code></li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> Koa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Koa</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-json'</span><span class="token punctuation">)</span><span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-bodyparser'</span><span class="token punctuation">)</span><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-router'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa2-cors'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">bodyParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>åœ¨ç¼–è¾‘å™¨ç»ˆç«¯è¾“å…¥ <code>nodemon app.js</code></li></ol><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gvgigm0j4yj60ba0440u002.jpg"></p><p>æ­å»ºå®ŒæˆğŸ‰</p><h1 id="è®¿é—®ç™»å½•é¡µ"><a href="#è®¿é—®ç™»å½•é¡µ" class="headerlink" title="è®¿é—®ç™»å½•é¡µ"></a>è®¿é—®ç™»å½•é¡µ</h1><ol><li>åˆ›å»ºç™»å½•é¡µ <code>login.js</code></li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'koa-router'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/register'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'login.js'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>åœ¨ <code>app.js</code> æ³¨å…¥æ¥å£</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> login <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router/login/login.js'</span><span class="token punctuation">)</span>router<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">,</span> login<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="3"><li><p>åœ¨ç¼–è¾‘å™¨ç»ˆç«¯è¾“å…¥ <code>nodemon app.js</code></p></li><li><p>åœ¨æµè§ˆå™¨è®¿é—® <code>http://localhost:4000/api/register</code></p></li><li><p>å›åˆ°ç¼–è¾‘å™¨ç»ˆç«¯å¯ä»¥çœ‹åˆ°</p></li></ol><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gvgixcu0boj60ay04v3zy02.jpg"></p><p>è®¿é—®æˆåŠŸğŸ‰</p>]]></content>
      
      
      <categories>
          
          <category> åç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> koa </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çƒŸç«é›†â€”â€”é²é±¼é¸¡æ±¤</title>
      <link href="/2021/10/07/yan-huo-ji-bao-yu-ji-tang/"/>
      <url>/2021/10/07/yan-huo-ji-bao-yu-ji-tang/</url>
      
        <content type="html"><![CDATA[<blockquote><p>å‰è¨€<br>    æœ€è¿‘åˆšå¥½æƒ³æŠŠæ—¥å¸¸èœè°±è®°å½•ä¸‹æ¥ï¼Œä»¥å¾€éƒ½æ˜¯è®°åœ¨äº†ä¸‹å¨æˆ¿ï¼Œå‰ä¸¤å¤©å†™åšå®¢çªç„¶æƒ³åˆ°åæ­£æ˜¯è®°å½•ï¼Œé‚£å°±å¼€ä¸ª Tag æ¥å†™èœè°±å­~</p></blockquote><p>é¦–æ¬¡å°è¯•ç‚–é²é±¼é¸¡æ±¤ï¼Œæœ¬æ¥æˆ‘æ˜¯å¯¹æ­¤ç±»è¡¥æ±¤æ— æ„Ÿçš„ï¼Œä½†å‘³é“ç«Ÿæ„å¤–åœ°å¥½å–ï¼Œæ‰€ä»¥è®°ä¸‹æ¥ğŸ¤¤</p><h1 id="ç”¨æ–™"><a href="#ç”¨æ–™" class="headerlink" title="ç”¨æ–™"></a>ç”¨æ–™</h1><table><thead><tr><th>é£Ÿæ</th><th>ç”¨é‡</th></tr></thead><tbody><tr><td>é²é±¼</td><td>5ä¸ª</td></tr><tr><td>é¸¡æ¶</td><td>1åª</td></tr><tr><td>é±¼èƒ¶</td><td>ä¸€å°æŠŠ</td></tr><tr><td>çŸ³æ–›</td><td>ä¸€å°æŠŠ</td></tr><tr><td>çº¢æ£</td><td>ä¸€å°æŠŠ</td></tr><tr><td>å§œ</td><td>ä¸€ç‰‡</td></tr><tr><td>ç›</td><td>3å°å‹º</td></tr><tr><td>å¼€æ°´</td><td>5ç¢—</td></tr></tbody></table><p>æ­¤èœè°±ç”¨é‡ä¸æ±‚ç²¾å‡†ï¼Œæ ¹æ®ç”¨é¤äººæ•°è°ƒæ•´ç”¨é‡ğŸ™†</p><p>ç‚–æ±¤ç”µå™¨ï¼šéš”æ°´ç‚–</p><h1 id="æ³¡å‘æ¸…æ´—å‡†å¤‡"><a href="#æ³¡å‘æ¸…æ´—å‡†å¤‡" class="headerlink" title="æ³¡å‘æ¸…æ´—å‡†å¤‡"></a>æ³¡å‘æ¸…æ´—å‡†å¤‡</h1><ul><li><p>é±¼èƒ¶æå‰æ³¡æ°´ï¼Œæ­¤æ¬¡æ³¡äº†çº¦3ä¸ªå°æ—¶</p></li><li><p>é²é±¼æ´—å¹²å‡€ï¼Œå¯ä»¥ç”¨ç‰™åˆ·åˆ·é²é±¼å£³</p></li><li><p>é¸¡æ¶æ´—å¹²å‡€ï¼Œé¸¡æ¶ä¹°çš„æ—¶å€™å«è€æ¿å¨˜åˆ‡æˆå°å—</p></li><li><p>çº¢æ£æ´—å¹²å‡€</p></li><li><p>çŸ³æ–›æ´—å¹²å‡€</p></li></ul><h1 id="ç‚–æ±¤è¿‡ç¨‹"><a href="#ç‚–æ±¤è¿‡ç¨‹" class="headerlink" title="ç‚–æ±¤è¿‡ç¨‹"></a>ç‚–æ±¤è¿‡ç¨‹</h1><ol><li><p>å°†æ´—å‡€çš„é²é±¼å¸¦å£³æ”¾å…¥ç”µé¥­é”…ä¸­</p></li><li><p>å…ˆæŠŠé¸¡æ¶ç„¯æ°´ï¼Œå³å†·æ°´ä¸‹é”…ï¼ŒåŒæ—¶æ”¾å…¥å§œç‰‡å»è…¥ï¼Œæ°´æ²¸è…¾åæ’‡å»æµ®æ²«è‡³ä¸å†æˆ–ä»…æœ‰å°‘é‡æµ®æ²«äº§ç”Ÿï¼Œå°†é¸¡æ¶æèµ·æ”¾å…¥å‡‰æ°´ä¸­æ´—å‡€è¡¨é¢åæ”¾å…¥ç”µç‚–é”…ä¸­</p></li><li><p>å°†æ´—å‡€çš„çº¢æ£ã€çŸ³æ–›å’Œé±¼èƒ¶æ”¾å…¥ç”µç‚–é”…ä¸­</p></li><li><p>å€’å…¥ç…®å¼€çš„ç”Ÿå‘½æºæ³‰</p></li><li><p>è°ƒæ•´ç‚–æ±¤æ—¶é—´ä¸º3.5hï¼Œå¼€å§‹ç‚–èµ·âœ¨</p></li><li><p>å‰©ä½™0.1hæ—¶åŠ å…¥é€‚é‡ç›ï¼ˆè¿™æ¬¡å®é™…ä¸Šæ˜¯åŠ äº†4å‹ºï¼Œå–ç€æ„Ÿè§‰å’¸äº†ï¼‰</p></li></ol><p>ç¨ç¨ç­‰å¾…ç‰‡åˆ»ï¼Œç¾å‘³å³å°†åˆ°æ¥ğŸ²</p><p>å“ˆå“ˆå“ˆè¿™é‡Œåº”è¯¥æ”¾ä¸ªæˆå“å›¾ï¼Œä½†æ˜¯ä»Šæ™šç€æ€¥å–æ²¡æ‹å¥½ï¼Œä¸‹æ¬¡è¡¥å›¾ğŸ“·</p>]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
        <tags>
            
            <tag> èœè°± </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æµ…æ URL</title>
      <link href="/2021/10/07/qian-xi-url/"/>
      <url>/2021/10/07/qian-xi-url/</url>
      
        <content type="html"><![CDATA[<h1 id="URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰"><a href="#URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰" class="headerlink" title="URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰"></a>URLï¼ˆç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼‰</h1><p>é€šå¸¸æ˜¯æŒ‡ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥çš„åœ°å€</p><pre class="line-numbers language-none"><code class="language-none">URL=åè®®://åŸŸåæˆ–IP:ç«¯å£/è·¯å¾„?æŸ¥è¯¢å‚æ•°#é”šç‚¹<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="åè®®"><a href="#åè®®" class="headerlink" title="åè®®"></a>åè®®</h1><p>æœåŠ¡å™¨ä¸€èˆ¬ä½¿ç”¨ä¸¤ç§åè®®ï¼š<code>HTTP</code>å’Œ<code>HTTPS</code></p><h1 id="åŸŸåæˆ–IP"><a href="#åŸŸåæˆ–IP" class="headerlink" title="åŸŸåæˆ–IP"></a>åŸŸåæˆ–IP</h1><h2 id="IP"><a href="#IP" class="headerlink" title="IP"></a>IP</h2><p>IP ä¸»è¦çº¦å®šäº†ä¸¤ä»¶äº‹ï¼š</p><ol><li>å¦‚ä½•å®šä½ä¸€å°è®¾å¤‡ï¼Œæ¯”å¦‚è¯´æˆ‘å®¶åœ¨æŸå¸‚æŸåŒºæŸæ‘æŸé—¨ç‰Œå·ï¼Œè¿™å°±æ˜¯æˆ‘å®¶çš„ç‰©ç† IP</li><li>å¦‚ä½•å°è£…æ•°æ®æŠ¥æ–‡ä»¥è·Ÿå…¶ä»–è®¾å¤‡äº¤æµ</li></ol><p>IP åˆ†ä¸ºï¼š</p><ol><li>å†…ç½‘ IP</li></ol><p>è·¯ç”±å™¨åœ¨å®¶ä¸­åˆ›å»ºä¸€ä¸ªå†…ç½‘ï¼Œå®¶é‡Œé€šè¿‡è·¯ç”±å™¨ä¸Šç½‘çš„è®¾å¤‡ä¼šåˆ†é…ä¸€ä¸ªå†…ç½‘ IP</p><ol start="2"><li>å¤–ç½‘ IP</li></ol><p>ç”¨æˆ·å‘ç½‘ç»œæœåŠ¡å•†ç§Ÿç”¨å¸¦å®½æ‰€åˆ†é…çš„ IP</p><p>å¤–ç½‘ IP å’Œå†…ç½‘ IP çš„äº’ç›¸è®¿é—®éœ€è¦ç»è¿‡è·¯ç”±å™¨ä¸­è½¬ï¼Œä½†åœ¨åŒä¸€ç½‘ç»œçš„è®¾å¤‡å¯ä»¥ç›´æ¥äº’ç›¸è®¿é—®</p><p>ç‰¹æ®Š IP</p><ol><li>127.0.0.1 è¡¨ç¤ºè‡ªå·±</li><li>localhost é€šè¿‡ host æŒ‡å®šä¸ºè‡ªå·±</li><li>0.0.0.0 ä¸è¡¨ç¤ºä»»ä½•è®¾å¤‡</li></ol><h2 id="åŸŸå"><a href="#åŸŸå" class="headerlink" title="åŸŸå"></a>åŸŸå</h2><p>åŸŸåå¯ä»¥è¯´æ˜¯ä¸€ä¸ª IP åœ°å€çš„ä»£ç§°ï¼Œç›®çš„æ˜¯ä¸ºäº†ä¾¿äºè®°å¿†åè€…</p><p>å¯ä»¥é€šè¿‡ <code>ping</code> å‘½ä»¤è·å–ä¸€ä¸ªåŸŸåå¯¹åº”çš„ IP</p><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gv65e6xhasj60d205cq6i02.jpg" alt="pingæˆªå›¾.png"></p><p>åŸŸåå’Œ IP é€šè¿‡ <code>DNS</code> å¯¹åº”èµ·æ¥ï¼Œå®ƒä»¬ä¹‹é—´å¯ä»¥æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»</p><ul><li>ä¸€ä¸ªåŸŸåå¯¹åº”å¤šä¸ª IP</li></ul><p>å‡è¡¡è´Ÿè½½ï¼Œé˜²æ­¢ä¸€å°æœåŠ¡å™¨å´©æºƒï¼Œå‡æƒ³ä¸€ä¸‹è‹¥æ˜¯é˜¿é‡ŒåŸŸååªå¯¹åº”äº†ä¸€ä¸ª IPï¼ŒåŒåä¸€çš„è®¿é—®é‡æ¿€å¢ä¼šå¯¼è‡´æ€æ ·çš„åæœ</p><ul><li>ä¸€ä¸ª IP å¯¹åº”å¤šä¸ªåŸŸå</li></ul><p>å…±äº«ä¸»æœºã€‚é¢„ç®—ä¸è¶³ä¼˜é€‰ã€‚</p><p>å»¶ä¼¸ï¼šxxx.github.io å’Œ yyy.github.io æœ‰åŒä¸€ä¸ªä¸€çº§åŸŸåï¼ˆgithub.ioï¼‰ï¼Œä½†æ˜¯æ˜¯ä¸¤ä¸ªä¸åŒçš„ç½‘ç«™</p><h1 id="ç«¯å£"><a href="#ç«¯å£" class="headerlink" title="ç«¯å£"></a>ç«¯å£</h1><p>ä¸€ä¸ªç«¯å£æä¾›ä¸€ç§æœåŠ¡ï¼Œå°±åƒä½ æ— æ³•åœ¨ç”µå½±é™¢çš„å”®ç¥¨å£ä¹°åˆ°çˆ†ç±³èŠ±</p><p><a href="https://zh.wikipedia.org/wiki/TCP/UDP%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8">ç«¯å£ç»´åŸºç™¾ç§‘</a></p><p>ç«¯å£å’Œ IP ç¼ºä¸€ä¸å¯</p><h1 id="è·¯å¾„"><a href="#è·¯å¾„" class="headerlink" title="è·¯å¾„"></a>è·¯å¾„</h1><p>å¯ä»¥ç”¨äºè¯·æ±‚ä¸åŒé¡µé¢</p><h1 id="æŸ¥è¯¢å‚æ•°"><a href="#æŸ¥è¯¢å‚æ•°" class="headerlink" title="æŸ¥è¯¢å‚æ•°"></a>æŸ¥è¯¢å‚æ•°</h1><p>å¯ä»¥åœ¨åŒä¸€é¡µé¢æ˜¾ç¤ºä¸åŒå†…å®¹</p><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gv65j1b5b9j61bl0c0q8402.jpg" alt="æŸ¥è¯¢å‚æ•°.png"></p><h1 id="é”šç‚¹"><a href="#é”šç‚¹" class="headerlink" title="é”šç‚¹"></a>é”šç‚¹</h1><p>å¯ä»¥å®šä½åˆ°é¡µé¢ä½ç½®ï¼Œä¸ä¼šå‘é€åˆ°æœåŠ¡å™¨</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è°ˆè°ˆæµè§ˆå™¨çš„ Event Loop</title>
      <link href="/2021/10/02/tan-tan-event-loop/"/>
      <url>/2021/10/02/tan-tan-event-loop/</url>
      
        <content type="html"><![CDATA[<p>å…³äº Event Loop ç½‘ç»œä¸Šçš„æ–‡ç« å†™å¾—å¾ˆè¯¦å°½ï¼Œå¤šçœ‹å‡ ç¯‡åå¤æ€è€ƒå‹¤åŠ¨ç¬”è®°å½•å¤§è‡´å°±èƒ½æ˜ç™½äº›äº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä¸€è´¯çš„å­¦ä¹ æ–¹æ³•ã€‚</p><p>åœ¨äº†è§£ Event Loop ä¹‹å‰å…ˆç†è§£ä»€ä¹ˆæ˜¯<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Call_stack">æ‰§è¡Œæ ˆï¼ˆè°ƒç”¨æ ˆï¼‰</a>ï¼Œè®°ä½ï¼Œ<strong>æ‰§è¡Œæ ˆæ˜¯å­˜å‚¨</strong> <em><strong>å‡½æ•°è°ƒç”¨</strong></em> <strong>çš„æ ˆç»“æ„ï¼Œéµå¾ªå…ˆè¿›åå‡ºçš„åŸåˆ™</strong>ï¼ˆæˆ‘å› ä¸ºè¿™ä¸€ç‚¹æ²¡æƒ³æ˜ç™½æ‰€ä»¥èŠ±äº†å¥½å¤šæ—¶é—´ ğŸ˜­ï¼‰</p><h1 id="è¿›ç¨‹ä¸çº¿ç¨‹"><a href="#è¿›ç¨‹ä¸çº¿ç¨‹" class="headerlink" title="è¿›ç¨‹ä¸çº¿ç¨‹"></a>è¿›ç¨‹ä¸çº¿ç¨‹</h1><p>å…ˆçœ‹ä¸‹è¿™ä¸ªå½¢è±¡çš„<a href="https://www.ruanyifeng.com/blog/2013/04/processes_and_threads.html">ç±»æ¯”</a></p><p>æŠŠè®¡ç®—æœºçš„æ ¸å¿ƒ CPU æ¯”ä½œä¸€åº§æ—¶åˆ»è¿è¡Œçš„å·¥å‚ã€‚</p><p>è¿›ç¨‹å°±å¥½æ¯”å·¥å‚çš„è½¦é—´ï¼Œå®ƒä»£è¡¨ CPU æ‰€èƒ½å¤„ç†çš„å•ä¸ªä»»åŠ¡ã€‚ä»»ä¸€æ—¶åˆ»ï¼ŒCPU æ€»æ˜¯è¿è¡Œä¸€ä¸ªè¿›ç¨‹ï¼Œå…¶ä»–è¿›ç¨‹å¤„äºéè¿è¡ŒçŠ¶æ€ã€‚ã€è¿›ç¨‹æ˜¯ CPU èµ„æºåˆ†é…çš„æœ€å°å•ä½ã€</p><p>çº¿ç¨‹å°±å¥½æ¯”è½¦é—´é‡Œçš„å·¥äººï¼Œè½¦é—´çš„æˆ¿é—´ï¼ˆå†…å­˜èµ„æºï¼‰å¯¹äºå·¥äººå…±äº«çš„ï¼Œè¿™äº›å·¥äººååŒå®Œæˆä¸€ä¸ªä»»åŠ¡ã€‚ã€çº¿ç¨‹æ˜¯ CPU è°ƒåº¦çš„æœ€å°å•ä½ã€</p><h1 id="å•çº¿ç¨‹çš„-JavaScript"><a href="#å•çº¿ç¨‹çš„-JavaScript" class="headerlink" title="å•çº¿ç¨‹çš„ JavaScript"></a>å•çº¿ç¨‹çš„ JavaScript</h1><p>æ‰€è°“å•çº¿ç¨‹ï¼Œæ˜¯æŒ‡åœ¨ JavaScript å¼•æ“ä¸­è´Ÿè´£è§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç çš„çº¿ç¨‹å”¯ä¸€ï¼ŒåŒä¸€æ—¶é—´ä¸Šåªèƒ½æ‰§è¡Œä¸€ä»¶ä»»åŠ¡ã€‚å‡è®¾ JavaScript æ”¯æŒå¤šçº¿ç¨‹ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹åœ¨æŸ DOM èŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œè€Œå¦ä¸€ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œåˆ é™¤è¯¥ DOM èŠ‚ç‚¹çš„ä»»åŠ¡ï¼Œè¿™æ—¶å°±ä¼šæŠŠæµè§ˆå™¨ææ‡µäº†ï¼Œæ‰€ä»¥ï¼Œä¸ºäº†é¿å…å¤æ‚æ€§ï¼Œä»ä¸€è¯ç”Ÿï¼ŒJavaScript å°±æ˜¯å•çº¿ç¨‹ï¼Œè¿™å·²ç»æˆäº†è¿™é—¨è¯­è¨€çš„æ ¸å¿ƒç‰¹å¾ã€‚</p><h1 id="åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡"><a href="#åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡" class="headerlink" title="åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡"></a>åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡</h1><p>æ—¢ç„¶ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆå½“æœ‰å¤šä¸ªä»»åŠ¡åˆ™éœ€è¦æ’é˜Ÿæ‰§è¡Œï¼Œå¦‚æœå‰ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œåä¸€ä¸ªä»»åŠ¡å°±ä¸å¾—ä¸ä¸€ç›´ç­‰ç€ï¼Œé‚£ä¹ˆç¨‹åºå¯èƒ½å› ä¸ºç­‰å¾…ä¼šå‡ºç°å‡æ­»çŠ¶æ€ï¼Œè¿™å¯¹äºä¸€ä¸ªç”¨æˆ·ä½“éªŒå¾ˆå¼ºçš„è¯­è¨€æ¥è¯´æ˜¯éå¸¸ä¸å‹å¥½çš„ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript è¯­è¨€å°†ä»»åŠ¡çš„æ‰§è¡Œæ¨¡å¼åˆ†ä¸ºä¸¤ç§ï¼šåŒæ­¥å’Œå¼‚æ­¥ã€‚</p><p>åŒæ­¥ä»»åŠ¡ï¼šå¿…é¡»ç­‰åˆ°ç»“æœæ¥äº†ä¹‹åæ‰èƒ½åšå…¶ä»–çš„äº‹æƒ…ï¼Œä¸¾ä¾‹æ¥è¯´å°±æ˜¯é€›è¡—æ—¶ä¹°è¡£æœï¼Œä½ å¿…é¡»ä»˜äº†æ¬¾æ‰èƒ½æŠŠè¡£æœå¸¦èµ°ã€‚</p><p>å¼‚æ­¥ä»»åŠ¡ï¼šä¸éœ€è¦ç­‰åˆ°ç»“æœæ¥äº†æ‰èƒ½ç»§ç»­å¾€ä¸‹èµ°ï¼Œç­‰ç»“æœæœŸé—´å¯ä»¥åšå…¶ä»–çš„äº‹æƒ…ï¼Œç»“æœæ¥äº†ä¼šæ”¶åˆ°é€šçŸ¥ã€‚ä¸¾ä¾‹æ¥è¯´å°±æ˜¯è¦åƒç«é”…ï¼Œè¦æ’å·ç­‰å«åˆ°äº†å·æ‰èƒ½è¿›å»åƒï¼Œæ’å·æœŸé—´ä½ å¯ä»¥ç»§ç»­é€›è¡—ã€‚</p><h1 id="æ‰§è¡Œæ ˆå’Œä»»åŠ¡é˜Ÿåˆ—"><a href="#æ‰§è¡Œæ ˆå’Œä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="æ‰§è¡Œæ ˆå’Œä»»åŠ¡é˜Ÿåˆ—"></a>æ‰§è¡Œæ ˆå’Œä»»åŠ¡é˜Ÿåˆ—</h1><p>JavaScript çš„ä»£ç æ‰§è¡Œæ—¶ï¼š</p><ol><li><p>ä¸»çº¿ç¨‹ä¼šä»ä¸Šåˆ°ä¸‹ä¸€æ­¥æ­¥çš„æ‰§è¡Œä»£ç ï¼ŒåŒæ­¥ä»»åŠ¡ä¼šè¢«ä¾æ¬¡åŠ å…¥æ‰§è¡Œæ ˆä¸­å…ˆæ‰§è¡Œã€‚</p></li><li><p>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªâ€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰ã€‚åªè¦<strong>å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœ</strong>ï¼Œå°±åœ¨â€ä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</p></li><li><p>ä¸€æ—¦â€æ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚</p></li><li><p>ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚</p></li></ol><h1 id="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"><a href="#å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"></a>å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</h1><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœåœ¨æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡å›è°ƒäº‹ä»¶çš„è¿‡ç¨‹ä¸­çªç„¶æœ‰é‡è¦çš„æ•°æ®éœ€è¦è·å–ï¼Œæˆ–æ˜¯è¯´æœ‰äº‹ä»¶çªç„¶éœ€è¦å¤„ç†ä¸€ä¸‹ï¼ŒæŒ‰ç…§é˜Ÿåˆ—éµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œåæ¥çš„äº‹ä»¶éƒ½æ˜¯è¢«åŠ åœ¨é˜Ÿå°¾ç­‰åˆ°å‰é¢çš„äº‹ä»¶æ‰§è¡Œå®Œäº†æ‰ä¼šè¢«æ‰§è¡Œã€‚è¿™ä¸ªæ—¶å€™å°±å‚¬ç”Ÿäº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡ä½¿å¾—ä¸€äº›å¼‚æ­¥ä»»åŠ¡å¾—åˆ°åŠæ—¶çš„å¤„ç†ã€‚</p><p>ä¹Ÿå°±æ˜¯åœ¨ä¸Šæ–‡ ã€<code>2. ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª"ä»»åŠ¡é˜Ÿåˆ—"ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨"ä»»åŠ¡é˜Ÿåˆ—"ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶</code>ã€ è¿™ä¸€æ­¥ä¸­ï¼Œå°†å¾®ä»»åŠ¡æ”¾åˆ°æœ¬å±‚å¾ªç¯çš„å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰ï¼Œå°†å®ä»»åŠ¡æ”¾åˆ°ä¸‹å±‚å¾ªç¯çš„å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆä¼˜å…ˆçº§ä½ï¼‰ã€‚</p><p>è¿™é‡Œä¹Ÿæ›´æ­£ä¸€ä¸‹ä¸Šæ–‡ ã€<code>3. ä¸€æ—¦"æ‰§è¡Œæ ˆ"ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–"ä»»åŠ¡é˜Ÿåˆ—"ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚</code>ã€ ï¼Œåº”å½“æ˜¯ ã€<code>ä¸€æ—¦"æ‰§è¡Œæ ˆ"ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–"å¾®ä»»åŠ¡ä»»åŠ¡é˜Ÿåˆ—"å¹¶å°†äº‹ä»¶å‹å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œè‡³"å¾®ä»»åŠ¡ä»»åŠ¡é˜Ÿåˆ—"ä¸ºç©ºï¼ˆåˆ°è¿™é‡Œä¹Ÿå°±æ˜¯å®Œæˆäº†ä¸€è½®äº‹ä»¶å¾ªç¯ï¼‰ï¼Œå®Œæ¯•åå°†"å®ä»»åŠ¡é˜Ÿåˆ—"é˜Ÿå¤´çš„ç¬¬ä¸€ä¸ªå®ä»»åŠ¡å‹å…¥æ‰§è¡Œæ ˆæ‰§è¡Œï¼ˆåé¢å°±å¯¹åº”äº†ä¸Šæ–‡æ­¥éª¤1ã€æ­¥éª¤2ï¼Œæœ‰ç›¸å…³çš„å¾®ä»»åŠ¡å°±è¿›å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡å°±æ’åˆ°å®ä»»åŠ¡é˜Ÿåˆ—é˜Ÿå°¾ï¼‰</code>ã€</p><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gv4hdicllnj60p309nju202.jpg" alt="ä»»åŠ¡é˜Ÿåˆ—.png"></p><p>å…³äºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡è¿™æœ‰ä¸ª<a href="https://juejin.cn/post/6844903657264136200#heading-0">ä¾‹å­</a>è§£é‡Šå¾—å¾ˆå½¢è±¡ã€‚</p><p>è®°ä½ï¼š<strong>åœ¨å½“å‰çš„å¾®ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œæˆæ—¶ï¼Œæ˜¯ä¸ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡çš„</strong></p><p>å…ˆä»‹ç»ä¸€ä¸‹(æµè§ˆå™¨ç¯å¢ƒçš„)å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡å¤§è‡´æœ‰å“ªäº›ï¼š</p><ul><li><p>å®ä»»åŠ¡</p><ul><li>scriptå…¨éƒ¨ä»£ç </li><li>setTimeout</li><li>setInterval    </li><li>I/O    </li><li>mouseover(ä¹‹ç±»çš„äº‹ä»¶)</li><li>Web APIå¤§éƒ¨åˆ†å¼‚æ­¥è¿”å›æ–¹æ³•(XHR,fetch)</li></ul></li><li><p>å¾®ä»»åŠ¡</p><ul><li>Promise.then catch finally</li><li>MutationObserver</li><li>queueMicrotask</li></ul></li></ul><h1 id="æµè§ˆå™¨ä¸­çš„-Event-Loop"><a href="#æµè§ˆå™¨ä¸­çš„-Event-Loop" class="headerlink" title="æµè§ˆå™¨ä¸­çš„ Event Loop"></a>æµè§ˆå™¨ä¸­çš„ Event Loop</h1><p>ç»ˆäºè¿›å…¥æ­£é¢˜äº†ï¼Œçœ‹å‰é¢çš„æ–‡å­—å¯èƒ½è¿˜æœ‰äº›æ™•ä¹ï¼Œç°åœ¨æˆ‘ä»¬å…ˆæ¥é€šè¿‡ä»£ç ç†è§£ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¤åˆ¶è¿™æ®µä»£ç åˆ°æ§åˆ¶å°ï¼Œä¼šå‘ç°è¾“å‡ºé¡ºåºä¸ºï¼š</p><pre class="line-numbers language-none"><code class="language-none">script startscript endpromise1promise2setTimeout<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç°åœ¨ï¼Œè”ç³»ä¸Šæ–‡æåŠçš„ <code>æ‰§è¡Œæ ˆ</code>ã€<code>å®ä»»åŠ¡</code>ã€<code>å¾®ä»»åŠ¡</code> æ¥è§£é‡Šä¸€ä¸‹ã€‚</p><p>ä¸»çº¿ç¨‹ä¼šä»ä¸Šåˆ°ä¸‹ä¸€æ­¥æ­¥çš„æ‰§è¡Œä»£ç ï¼ŒåŒæ­¥ä»»åŠ¡ä¼šè¢«ä¾æ¬¡åŠ å…¥æ‰§è¡Œæ ˆä¸­å…ˆæ‰§è¡Œï¼Œè€Œå¼‚æ­¥ä»»åŠ¡ä¼šåœ¨ä»»åŠ¡é˜Ÿåˆ—ä¸­æ”¾ç½®ä¸€ä¸ªå›è°ƒäº‹ä»¶ï¼Œç­‰å¾…æ‰§è¡Œæ ˆæ¸…ç©ºåæ‰§è¡Œã€‚è€Œæ ¹æ®äº‹ä»¶çš„ä¼˜å…ˆçº§å°†äº‹ä»¶åˆ’åˆ†åˆ°å¯¹åº”çš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚</p><pre class="line-numbers language-none"><code class="language-none">å®ä»»åŠ¡ï¼šRun script | setTimeout callback å¾®ä»»åŠ¡ï¼šPromise then | Promise thenæ‰§è¡Œæ ˆï¼šPromise callbackæ§åˆ¶å°è¾“å…¥ï¼šscript start | script end | promise1 | promise2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gv3sj3wlrog60gc0e4k3h02.gif" alt="ç¬¬ä¸€æ¬¡æ‰§è¡Œ"></p><p>åˆ°è¿™é‡Œäº‹ä»¶å¾ªç¯çš„ç¬¬ä¸€å±‚å¾ªç¯ç»“æŸï¼Œå¼€å§‹ç¬¬äºŒå±‚å¾ªç¯</p><pre class="line-numbers language-none"><code class="language-none">å®ä»»åŠ¡ï¼šsetTimeout callback å¾®ä»»åŠ¡ï¼šæ‰§è¡Œæ ˆï¼šsetTimeout callbackæ§åˆ¶å°è¾“å…¥ï¼šscript start | script end | promise1 | promise2 | setTimeout<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gv4hgiaujqg60gc0e4q4r02.gif" alt="ç¬¬äºŒæ¬¡æ‰§è¡Œ.gif"></p><p>åŠ¨å›¾ä½“éªŒæˆ³<a href="https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/">è¿™é‡Œ</a></p><p>å†æ¥çœ‹ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„æ¡ˆä¾‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2 end'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1'</span><span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1 Promise'</span><span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1 Promise then'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1 setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1 setTimeout Promise'</span><span class="token punctuation">)</span>            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout1 setTimeout Promise then'</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise'</span><span class="token punctuation">)</span>  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise then'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2'</span><span class="token punctuation">)</span>    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2 Promise'</span><span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout2 Promise then'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŠŠä»£ç copyåˆ°æµè§ˆå™¨æ§åˆ¶å°è¿è¡Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡º</p><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1gv651lb5mij60jf09340102.jpg" alt="è¿è¡Œç»“æœ.png"></p><p>ç”¨ä¸Šé¢åŒæ ·çš„æ€è·¯è§£é‡Šä¸‹</p><p>ç¬¬ä¸€æ¬¡å¾ªç¯</p><pre class="line-numbers language-none"><code class="language-none">å®ä»»åŠ¡Run script | setTimeout1 callback | setTimeout2 callbackå¾®ä»»åŠ¡async1 end | Promise thenæ§åˆ¶å°è¾“å‡ºscript start | async2 end | Promise | script end | async1 end | Promise then<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬äºŒæ¬¡å¾ªç¯</p><pre class="line-numbers language-none"><code class="language-none">å®ä»»åŠ¡setTimeout1 callback | setTimeout2 callback | setTimeout1 setTimeout callbackå¾®ä»»åŠ¡setTimeout1 Promise thenæ§åˆ¶å°è¾“å‡ºsetTimeout1 | setTimeout1 Promise | setTimeout1 Promise then<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬ä¸‰æ¬¡å¾ªç¯</p><pre class="line-numbers language-none"><code class="language-none">å®ä»»åŠ¡setTimeout2 callback | setTimeout1 setTimeout callbackå¾®ä»»åŠ¡setTimeout2 Promise thenæ§åˆ¶å°è¾“å‡ºsetTimeout2 | setTimeout2 Promise | setTimeout2 Promise then<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬å››æ¬¡å¾ªç¯</p><pre class="line-numbers language-none"><code class="language-none">å®ä»»åŠ¡setTimeout1 setTimeout callbackå¾®ä»»åŠ¡setTimeout1 setTimeout Promise thenæ§åˆ¶å°è¾“å‡ºsetTimeout1 setTimeout | setTimeout1 setTimeout Promise | setTimeout1 setTimeout Promise then<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><p>æœ¬æ¥è¿˜è¦å†å†™ Node.js ä¸­çš„ Event Loop çš„ï¼Œä½†æ˜¯å› ä¸ºæ—¶é—´å…³ç³»è€Œä¸”æˆ‘å‘ç°æˆ‘çš„ç†è§£è¿˜æ˜¯æœ‰äº›æ¨¡ç³Šï¼Œè¿™ä¸ªå°±ç•™ç€ææ˜ç™½äº†å†å†™å†™~</p><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://www.ruanyifeng.com/blog/2014/10/event-loop.html">JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop</a></p><p><a href="https://segmentfault.com/a/1190000038783854">æˆ‘æ˜¯è¿™æ ·ç†è§£EventLoopçš„</a></p><p><a href="https://juejin.cn/post/6844903764202094606#heading-19">ä¸€æ¬¡å¼„æ‡‚Event Loopï¼ˆå½»åº•è§£å†³æ­¤ç±»é¢è¯•é—®é¢˜ï¼‰</a></p><p><a href="https://juejin.cn/post/6844904106121936903">è¿™ä¸€æ¬¡ï¼ŒEvent Loop ä¸€æ³¢å¸¦èµ°</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ·±å¤œåƒç³–ï¼Œç†è§£ async å’Œ await</title>
      <link href="/2021/09/29/shen-ye-chi-tang-li-jie-async-he-await/"/>
      <url>/2021/09/29/shen-ye-chi-tang-li-jie-async-he-await/</url>
      
        <content type="html"><![CDATA[<h1 id="async-å…³é”®å­—"><a href="#async-å…³é”®å­—" class="headerlink" title="async å…³é”®å­—"></a>async å…³é”®å­—</h1><p>æ”¾åœ¨å‡½æ•°å£°æ˜ä¹‹å‰ï¼Œç”Ÿæˆä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œä¿è¯å‡½æ•°çš„è¿”å›å€¼ä¸º promise</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">"Hello"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1guwu5pbd5bj608m0370tg02.jpg" alt="async.png"></p><ul><li><p>å°† async å…³é”®å­—åŠ åˆ°å‡½æ•°ç”³æ˜ä¸­ï¼Œå¯ä»¥å‘Šè¯‰å®ƒä»¬è¿”å›çš„æ˜¯ promiseï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›å€¼</p></li><li><p>é¿å…äº†åŒæ­¥å‡½æ•°ä¸ºæ”¯æŒä½¿ç”¨ await å¸¦æ¥çš„ä»»ä½•æ½œåœ¨å¼€é”€</p></li><li><p>åœ¨å‡½æ•°å£°æ˜ä¸º async æ—¶ï¼ŒJavaScriptå¼•æ“ä¼šæ·»åŠ å¿…è¦çš„å¤„ç†ä»¥ä¼˜åŒ–ç¨‹åº</p></li></ul><h1 id="await-å…³é”®å­—"><a href="#await-å…³é”®å­—" class="headerlink" title="await å…³é”®å­—"></a>await å…³é”®å­—</h1><p>await åªåœ¨å¼‚æ­¥å‡½æ•°é‡Œé¢æ‰èµ·ä½œç”¨ã€‚å®ƒå¯ä»¥æ”¾åœ¨ä»»ä½•å¼‚æ­¥çš„ï¼ŒåŸºäº promise çš„å‡½æ•°ä¹‹å‰ã€‚å®ƒä¼šæš‚åœä»£ç åœ¨è¯¥è¡Œä¸Šï¼Œç›´åˆ° promise å®Œæˆï¼Œç„¶åè¿”å›ç»“æœå€¼ã€‚åœ¨æš‚åœçš„åŒæ—¶ï¼Œå…¶ä»–æ­£åœ¨ç­‰å¾…æ‰§è¡Œçš„ä»£ç å°±æœ‰æœºä¼šæ‰§è¡Œäº†ã€‚</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"long_time_value"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">takeLongTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/004jr3A7gy1guxxujikq9j608v06gdgr02.jpg" alt="await.png"></p><h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><a href="https://segmentfault.com/a/1190000007535316">ç†è§£ JavaScript çš„ async/await</a></p><p><a href="http://www.ruanyifeng.com/blog/2015/05/async.html">async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° uni-appï¼ˆå››ï¼‰è·¯ç”±</title>
      <link href="/2021/09/28/xiao-bai-cai-bi-ji-uni-app-si-lu-you/"/>
      <url>/2021/09/28/xiao-bai-cai-bi-ji-uni-app-si-lu-you/</url>
      
        <content type="html"><![CDATA[<h1 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h1><p>æ¡†æ¶ç»Ÿä¸€ç®¡ç†ï¼Œéœ€è¦åœ¨ pages.json é‡Œé…ç½®æ¯ä¸ªè·¯ç”±é¡µé¢çš„è·¯å¾„åŠé¡µé¢æ ·å¼ã€‚</p><h1 id="è·¯ç”±è·³è½¬"><a href="#è·¯ç”±è·³è½¬" class="headerlink" title="è·¯ç”±è·³è½¬"></a>è·¯ç”±è·³è½¬</h1><h2 id="ä½¿ç”¨-navigator-ç»„ä»¶è·³è½¬"><a href="#ä½¿ç”¨-navigator-ç»„ä»¶è·³è½¬" class="headerlink" title="ä½¿ç”¨ navigator ç»„ä»¶è·³è½¬"></a>ä½¿ç”¨ navigator ç»„ä»¶è·³è½¬</h2><p>ç±»ä¼¼ HTML ä¸­çš„ <code>&lt;a&gt;</code> ç»„ä»¶ï¼Œä½†åªèƒ½è·³è½¬æœ¬åœ°é¡µé¢ã€‚ç›®æ ‡é¡µé¢å¿…é¡»åœ¨ pages.json ä¸­æ³¨å†Œã€‚</p><table><thead><tr><th align="left">å±æ€§å</th><th align="left">ç±»å‹</th><th align="left">é»˜è®¤å€¼</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">url</td><td align="left">String</td><td align="left"></td><td align="left">åº”ç”¨å†…çš„è·³è½¬é“¾æ¥ï¼Œå€¼ä¸ºç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼Œæ³¨æ„ä¸èƒ½åŠ  <code>.vue</code> åç¼€</td></tr><tr><td align="left">open-type</td><td align="left">String</td><td align="left">navigate</td><td align="left">è·³è½¬æ–¹å¼ï¼Œæœ‰æ•ˆå€¼ï¼šnavigateã€redirectã€switchTabã€reLaunchã€navigateBackã€exit</td></tr><tr><td align="left">delta</td><td align="left">Number</td><td align="left"></td><td align="left">å½“ open-type ä¸º â€˜navigateBackâ€™ æ—¶æœ‰æ•ˆï¼Œè¡¨ç¤ºå›é€€çš„å±‚æ•°</td></tr><tr><td align="left">animation-type</td><td align="left">String</td><td align="left">pop-in/out</td><td align="left">å½“ open-type ä¸º navigateã€navigateBack æ—¶æœ‰æ•ˆï¼Œçª—å£çš„æ˜¾ç¤º/å…³é—­åŠ¨ç”»æ•ˆæœ</td></tr><tr><td align="left">animation-duration</td><td align="left">Number</td><td align="left">300</td><td align="left">å½“ open-type ä¸º navigateã€navigateBack æ—¶æœ‰æ•ˆï¼Œçª—å£æ˜¾ç¤º/å…³é—­åŠ¨ç”»çš„æŒç»­æ—¶é—´ã€‚</td></tr><tr><td align="left">hover-class</td><td align="left">String</td><td align="left">navigator-hover</td><td align="left">æŒ‡å®šç‚¹å‡»æ—¶çš„æ ·å¼ç±»ï¼Œå½“hover-class=â€noneâ€æ—¶ï¼Œæ²¡æœ‰ç‚¹å‡»æ€æ•ˆæœ</td></tr><tr><td align="left">hover-stop-propagation</td><td align="left">Boolean</td><td align="left">false</td><td align="left">æŒ‡å®šæ˜¯å¦é˜»æ­¢æœ¬èŠ‚ç‚¹çš„ç¥–å…ˆèŠ‚ç‚¹å‡ºç°ç‚¹å‡»æ€</td></tr><tr><td align="left">hover-start-time</td><td align="left">Number</td><td align="left">50</td><td align="left">æŒ‰ä½åå¤šä¹…å‡ºç°ç‚¹å‡»æ€ï¼Œå•ä½æ¯«ç§’</td></tr><tr><td align="left">hover-stay-time</td><td align="left">Number</td><td align="left">600</td><td align="left">æ‰‹æŒ‡æ¾å¼€åç‚¹å‡»æ€ä¿ç•™æ—¶é—´ï¼Œå•ä½æ¯«ç§’</td></tr><tr><td align="left">target</td><td align="left">String</td><td align="left">self</td><td align="left">åœ¨å“ªä¸ªå°ç¨‹åºç›®æ ‡ä¸Šå‘ç”Ÿè·³è½¬ï¼Œé»˜è®¤å½“å‰å°ç¨‹åºï¼Œå€¼åŸŸself/miniProgram</td></tr></tbody></table><h2 id="è°ƒç”¨-API-è·³è½¬"><a href="#è°ƒç”¨-API-è·³è½¬" class="headerlink" title="è°ƒç”¨ API è·³è½¬"></a>è°ƒç”¨ API è·³è½¬</h2><table><thead><tr><th align="left">API</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><a href="https://uniapp.dcloud.io/api/router?id=navigateto">uni.navigateTo</a></td><td align="left">ä¿ç•™å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œä½¿ç”¨uni.navigateBackå¯ä»¥è¿”å›åˆ°åŸé¡µé¢ï¼Œç›¸å½“äº open-type=â€navigateâ€</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/api/router?id=redirectto">uni.redirectTo</a></td><td align="left">å…³é—­å½“å‰é¡µé¢ï¼Œè·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œç›¸å½“äº open-type=â€redirectâ€</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/api/router?id=relaunch">uni.reLaunch</a></td><td align="left">å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢ï¼Œç›¸å½“äº open-type=â€reLaunchâ€</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/api/router?id=switchtab">uni.switchTab</a></td><td align="left">è·³è½¬åˆ° tabBar é¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰é tabBar é¡µé¢ï¼Œç›¸å½“äº open-type=â€switchTabâ€</td></tr><tr><td align="left"><a href="https://uniapp.dcloud.io/api/router?id=navigateback">uni.navigateBack</a></td><td align="left">å…³é—­å½“å‰é¡µé¢ï¼Œè¿”å›ä¸Šä¸€é¡µé¢æˆ–å¤šçº§é¡µé¢ï¼Œç›¸å½“äº open-type=â€navigateBackâ€</td></tr></tbody></table><h1 id="é¡µé¢æ ˆ"><a href="#é¡µé¢æ ˆ" class="headerlink" title="é¡µé¢æ ˆ"></a>é¡µé¢æ ˆ</h1><p>æ¡†æ¶ä»¥æ ˆçš„å½¢å¼ç®¡ç†å½“å‰æ‰€æœ‰é¡µé¢ï¼Œ å½“å‘ç”Ÿè·¯ç”±åˆ‡æ¢çš„æ—¶å€™ï¼Œé¡µé¢æ ˆçš„è¡¨ç°å¦‚ä¸‹ï¼š</p><table><thead><tr><th>ç”±æ–¹å¼</th><th>é¡µé¢æ ˆè¡¨ç°</th><th>è§¦å‘æ—¶æœº</th></tr></thead><tbody><tr><td>åˆå§‹åŒ–</td><td>æ–°é¡µé¢å…¥æ ˆ</td><td>uni-app æ‰“å¼€çš„ç¬¬ä¸€ä¸ªé¡µé¢</td></tr><tr><td>æ‰“å¼€æ–°é¡µé¢</td><td>æ–°é¡µé¢å…¥æ ˆ</td><td>è°ƒç”¨ API <code>uni.navigateTo</code>ã€ä½¿ç”¨ç»„ä»¶ <code>&lt;navigator open-type="navigator"/&gt;</code></td></tr><tr><td>é¡µé¢é‡å®šå‘</td><td>å½“å‰é¡µé¢å‡ºæ ˆï¼Œæ–°é¡µé¢å…¥æ ˆ</td><td>è°ƒç”¨ API <code>uni.redirectTo</code>ã€ä½¿ç”¨ç»„ä»¶ <code>&lt;navigator open-type="redirect"/&gt;</code></td></tr><tr><td>é¡µé¢è¿”å›</td><td>é¡µé¢ä¸æ–­å‡ºæ ˆï¼Œç›´åˆ°ç›®æ ‡è¿”å›é¡µ</td><td>è°ƒç”¨ API <code>uni.navigateBack</code>ã€ä½¿ç”¨ç»„ä»¶ <code>&lt;navigator open-type="navigateBack"/&gt;</code>ã€ç”¨æˆ·æŒ‰å·¦ä¸Šè§’è¿”å›æŒ‰é’®ã€å®‰å“ç”¨æˆ·ç‚¹å‡»ç‰©ç†backæŒ‰é”®</td></tr><tr><td>Tab åˆ‡æ¢</td><td>é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„ Tab é¡µé¢</td><td>è°ƒç”¨ API <code>uni.switchTab</code>ã€ä½¿ç”¨ç»„ä»¶ <code>&lt;navigator open-type="switchTab"/&gt;</code>ã€ç”¨æˆ·åˆ‡æ¢ Tab</td></tr><tr><td>é‡åŠ è½½</td><td>é¡µé¢å…¨éƒ¨å‡ºæ ˆï¼Œåªç•™ä¸‹æ–°çš„é¡µé¢</td><td>è°ƒç”¨ API <code>uni.reLaunch</code>ã€ä½¿ç”¨ç»„ä»¶ <code>&lt;navigator open-type="reLaunch"/&gt;</code></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° uni-appï¼ˆä¸‰ï¼‰ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2021/09/24/xiao-bai-cai-bi-ji-uni-app-san-sheng-ming-zhou-qi/"/>
      <url>/2021/09/24/xiao-bai-cai-bi-ji-uni-app-san-sheng-ming-zhou-qi/</url>
      
        <content type="html"><![CDATA[<h1 id="åº”ç”¨ç”Ÿå‘½å‘¨æœŸ"><a href="#åº”ç”¨ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="åº”ç”¨ç”Ÿå‘½å‘¨æœŸ"></a>åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</h1><blockquote><p>åº”ç”¨ç”Ÿå‘½å‘¨æœŸä»…å¯åœ¨App.vueä¸­ç›‘å¬ï¼Œåœ¨å…¶å®ƒé¡µé¢ç›‘å¬æ— æ•ˆ</p></blockquote><table><thead><tr><th align="left">å‡½æ•°å</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">onLaunch</td><td align="left">å½“ <code>uni-app</code> åˆå§‹åŒ–å®Œæˆæ—¶è§¦å‘ï¼ˆå…¨å±€åªè§¦å‘ä¸€æ¬¡ï¼‰</td></tr><tr><td align="left">onShow</td><td align="left">å½“ <code>uni-app</code> å¯åŠ¨ï¼Œæˆ–ä»åå°è¿›å…¥å‰å°æ˜¾ç¤º</td></tr><tr><td align="left">onHide</td><td align="left">å½“ <code>uni-app</code> ä»å‰å°è¿›å…¥åå°</td></tr><tr><td align="left">onError</td><td align="left">å½“ <code>uni-app</code> æŠ¥é”™æ—¶è§¦å‘</td></tr><tr><td align="left">onUniNViewMessage</td><td align="left">å¯¹ <code>nvue</code> é¡µé¢å‘é€çš„æ•°æ®è¿›è¡Œç›‘å¬</td></tr><tr><td align="left">onUnhandledRejection</td><td align="left">å¯¹æœªå¤„ç†çš„ Promise æ‹’ç»äº‹ä»¶ç›‘å¬å‡½æ•°</td></tr><tr><td align="left">onPageNotFound</td><td align="left">é¡µé¢ä¸å­˜åœ¨ç›‘å¬å‡½æ•°</td></tr><tr><td align="left">onThemeChange</td><td align="left">ç›‘å¬ç³»ç»Ÿä¸»é¢˜å˜åŒ–</td></tr></tbody></table><h1 id="é¡µé¢ç”Ÿå‘½å‘¨æœŸ"><a href="#é¡µé¢ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="é¡µé¢ç”Ÿå‘½å‘¨æœŸ"></a>é¡µé¢ç”Ÿå‘½å‘¨æœŸ</h1><blockquote><p>åœ¨æ¯ä¸ªé¡µé¢ä¸­å®šä¹‰</p></blockquote><table><thead><tr><th align="left">å‡½æ•°å</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">onInit</td><td align="left">ç›‘å¬é¡µé¢åˆå§‹åŒ–ï¼Œå…¶å‚æ•°åŒ onLoad å‚æ•°ï¼Œä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå‚æ•°ç±»å‹ä¸º Objectï¼ˆç”¨äºé¡µé¢ä¼ å‚ï¼‰ï¼Œè§¦å‘æ—¶æœºæ—©äº onLoad</td></tr><tr><td align="left">onLoad</td><td align="left">ç›‘å¬é¡µé¢åŠ è½½ï¼Œå…¶å‚æ•°ä¸ºä¸Šä¸ªé¡µé¢ä¼ é€’çš„æ•°æ®ï¼Œå‚æ•°ç±»å‹ä¸º Objectï¼ˆç”¨äºé¡µé¢ä¼ å‚ï¼‰</td></tr><tr><td align="left">onShow</td><td align="left">ç›‘å¬é¡µé¢æ˜¾ç¤ºã€‚é¡µé¢æ¯æ¬¡å‡ºç°åœ¨å±å¹•ä¸Šéƒ½è§¦å‘ï¼ŒåŒ…æ‹¬ä»ä¸‹çº§é¡µé¢ç‚¹è¿”å›éœ²å‡ºå½“å‰é¡µé¢</td></tr><tr><td align="left">onReady</td><td align="left">ç›‘å¬é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆã€‚æ³¨æ„å¦‚æœæ¸²æŸ“é€Ÿåº¦å¿«ï¼Œä¼šåœ¨é¡µé¢è¿›å…¥åŠ¨ç”»å®Œæˆå‰è§¦å‘</td></tr><tr><td align="left">onHide</td><td align="left">ç›‘å¬é¡µé¢éšè—</td></tr><tr><td align="left">onUnload</td><td align="left">ç›‘å¬é¡µé¢å¸è½½</td></tr><tr><td align="left">onResize</td><td align="left">ç›‘å¬çª—å£å°ºå¯¸å˜åŒ–</td></tr><tr><td align="left">onPullDownRefresh</td><td align="left">ç›‘å¬ç”¨æˆ·ä¸‹æ‹‰åŠ¨ä½œï¼Œä¸€èˆ¬ç”¨äºä¸‹æ‹‰åˆ·æ–°</td></tr><tr><td align="left">onReachBottom</td><td align="left">é¡µé¢æ»šåŠ¨åˆ°åº•éƒ¨çš„äº‹ä»¶ï¼ˆä¸æ˜¯scroll-viewæ»šåˆ°åº•ï¼‰ï¼Œå¸¸ç”¨äºä¸‹æ‹‰ä¸‹ä¸€é¡µæ•°æ®</td></tr><tr><td align="left">onTabItemTap</td><td align="left">ç‚¹å‡» tab æ—¶è§¦å‘ï¼Œå‚æ•°ä¸ºObjec</td></tr><tr><td align="left">onShareAppMessage</td><td align="left">ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’åˆ†äº«</td></tr><tr><td align="left">onPageScroll</td><td align="left">ç›‘å¬é¡µé¢æ»šåŠ¨ï¼Œå‚æ•°ä¸ºObject</td></tr><tr><td align="left">onNavigationBarButtonTap</td><td align="left">ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼Œå‚æ•°ä¸ºObject</td></tr><tr><td align="left">onBackPress</td><td align="left">ç›‘å¬é¡µé¢è¿”å›</td></tr><tr><td align="left">onNavigationBarSearchInputChanged</td><td align="left">ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æœç´¢è¾“å…¥æ¡†è¾“å…¥å†…å®¹å˜åŒ–äº‹ä»¶</td></tr><tr><td align="left">onNavigationBarSearchInputConfirmed</td><td align="left">ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æœç´¢è¾“å…¥æ¡†æœç´¢äº‹ä»¶ï¼Œç”¨æˆ·ç‚¹å‡»è½¯é”®ç›˜ä¸Šçš„â€œæœç´¢â€æŒ‰é’®æ—¶è§¦å‘ã€‚</td></tr><tr><td align="left">onNavigationBarSearchInputClicked</td><td align="left">ç›‘å¬åŸç”Ÿæ ‡é¢˜æ æœç´¢è¾“å…¥æ¡†ç‚¹å‡»äº‹ä»¶ï¼ˆpages.json ä¸­çš„ searchInput é…ç½® disabled ä¸º true æ—¶æ‰ä¼šè§¦å‘ï¼‰</td></tr><tr><td align="left">onShareTimeline</td><td align="left">ç›‘å¬ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’è½¬å‘åˆ°æœ‹å‹åœˆ</td></tr><tr><td align="left">onAddToFavorites</td><td align="left">ç›‘å¬ç”¨æˆ·ç‚¹å‡»å³ä¸Šè§’æ”¶è—</td></tr></tbody></table><h1 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h1><blockquote><p>å’Œ vue ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸä¸€è‡´</p></blockquote><table><thead><tr><th align="left">å‡½æ•°å</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">beforeCreate</td><td align="left">åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åè¢«è°ƒç”¨</td></tr><tr><td align="left">created</td><td align="left">åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨</td></tr><tr><td align="left">beforeMount</td><td align="left">åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</td></tr><tr><td align="left">mounted</td><td align="left">æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨</td></tr><tr><td align="left">beforeUpdate</td><td align="left">æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰</td></tr><tr><td align="left">updated</td><td align="left">ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­</td></tr><tr><td align="left">beforeDestroy</td><td align="left">å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨</td></tr><tr><td align="left">destroyed</td><td align="left">Vue å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯</td></tr></tbody></table><h1 id="æ‰§è¡Œé¡ºåº"><a href="#æ‰§è¡Œé¡ºåº" class="headerlink" title="æ‰§è¡Œé¡ºåº"></a>æ‰§è¡Œé¡ºåº</h1><ol><li>beforeCreate</li><li>onLoad</li><li>created</li><li>onShow</li><li>beforeMount</li><li>onReady</li><li>mounted</li><li>beforeUpdate</li><li>updated</li><li>è¿”å›ä¸Šä¸€é¡µæ—¶ï¼Œä¼šæ‰§è¡ŒonUnLoadï¼Œå¹¶æœªæ‰§è¡Œdestroyedï¼Œå¹¶æœªæ‰§è¡ŒonHide</li><li>è¿›å…¥ä¸‹ä¸€é¡µæ—¶ï¼Œä¼šæ‰§è¡ŒonHide</li></ol>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° uni-appï¼ˆäºŒï¼‰åŸºç¡€ç¯‡</title>
      <link href="/2021/09/23/xiao-bai-cai-bi-ji-uni-app-er-ji-chu-pian/"/>
      <url>/2021/09/23/xiao-bai-cai-bi-ji-uni-app-er-ji-chu-pian/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å‘è§„èŒƒ"><a href="#å¼€å‘è§„èŒƒ" class="headerlink" title="å¼€å‘è§„èŒƒ"></a>å¼€å‘è§„èŒƒ</h1><ul><li>é¡µé¢æ–‡ä»¶éµå¾ª Vue å•æ–‡ä»¶ç»„ä»¶ (SFC) è§„èŒƒï¼Œå³å«ä¸‰ç§ç±»å‹çš„é¡¶çº§è¯­è¨€å— <code>&lt;template&gt;</code>ã€<code>&lt;script&gt;</code> å’Œ <code>&lt;style&gt;</code></li><li>ç»„ä»¶æ ‡ç­¾é è¿‘å°ç¨‹åºè§„èŒƒï¼Œè¯¦è§ <a href="https://uniapp.dcloud.io/component/">uni-app ç»„ä»¶è§„èŒƒ</a>ã€‚uni-app çš„ç»„ä»¶åˆ†ä¸ºåŸºç¡€ç»„ä»¶å’Œæ‰©å±•ç»„ä»¶ã€‚åŸºç¡€ç»„ä»¶åœ¨ uni-app æ¡†æ¶ä¸­å·²ç»å†…ç½®ï¼Œæ¯”å¦‚ <code>&lt;view&gt;</code> ç»„ä»¶ã€‚æ‰©å±•ç»„ä»¶éœ€è¦å°†ç»„ä»¶å¯¼å…¥é¡¹ç›®ä¸­æ‰å¯ä»¥ä½¿ç”¨</li><li>æ¥å£èƒ½åŠ›ï¼ˆJS APIï¼‰é è¿‘å¾®ä¿¡å°ç¨‹åºè§„èŒƒï¼Œä½†éœ€å°†å‰ç¼€ wx æ›¿æ¢ä¸º uniï¼Œè¯¦è§ <a href="https://uniapp.dcloud.io/api/README">uni-app æ¥å£è§„èŒƒ</a></li><li>ç”Ÿå‘½å‘¨æœŸï¼š<a href="https://uniapp.dcloud.io/collocation/frame/lifecycle?id=%E5%BA%94%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">åº”ç”¨ç”Ÿå‘½å‘¨æœŸ</a>ã€<a href="https://uniapp.dcloud.io/collocation/frame/lifecycle?id=%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">é¡µé¢ç”Ÿå‘½å‘¨æœŸ</a>ã€<a href="https://uniapp.dcloud.io/collocation/frame/lifecycle?id=%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼ˆåŒ Vue è§„èŒƒï¼‰</a></li><li>å»ºè®®ä½¿ç”¨flexå¸ƒå±€</li></ul><h1 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h1><p>â”Œâ”€uniCloud              äº‘ç©ºé—´ç›®å½•ï¼Œé˜¿é‡Œäº‘ä¸ºuniCloud-aliyun,è…¾è®¯äº‘ä¸ºuniCloud-tcbï¼ˆè¯¦è§uniCloudï¼‰<br>â”‚â”€components            ç¬¦åˆvueç»„ä»¶è§„èŒƒçš„uni-appç»„ä»¶ç›®å½•<br>â”‚  â””â”€comp-a.vue         å¯å¤ç”¨çš„aç»„ä»¶<br>â”œâ”€hybrid                Appç«¯å­˜æ”¾æœ¬åœ°htmlæ–‡ä»¶çš„ç›®å½•ï¼Œ<a href="https://uniapp.dcloud.io/component/web-view">è¯¦è§</a><br>â”œâ”€platforms             å­˜æ”¾å„å¹³å°ä¸“ç”¨é¡µé¢çš„ç›®å½•ï¼Œ<a href="https://uniapp.dcloud.io/platform?id=%E6%95%B4%E4%BD%93%E7%9B%AE%E5%BD%95%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91">è¯¦è§</a><br>â”œâ”€pages                 ä¸šåŠ¡é¡µé¢æ–‡ä»¶å­˜æ”¾çš„ç›®å½•<br>â”‚  â”œâ”€index<br>â”‚  â”‚  â””â”€index.vue       indexé¡µé¢<br>â”‚  â””â”€list<br>â”‚     â””â”€list.vue        listé¡µé¢<br>â”œâ”€static                å­˜æ”¾åº”ç”¨å¼•ç”¨çš„æœ¬åœ°é™æ€èµ„æºï¼ˆå¦‚å›¾ç‰‡ã€è§†é¢‘ç­‰ï¼‰çš„ç›®å½•ï¼Œæ³¨æ„ï¼šé™æ€èµ„æºåªèƒ½å­˜æ”¾äºæ­¤<br>â”œâ”€uni_modules           å­˜æ”¾<code>[uni_module](/uni_modules)</code>è§„èŒƒçš„æ’ä»¶ã€‚<br>â”œâ”€wxcomponents          å­˜æ”¾å°ç¨‹åºç»„ä»¶çš„ç›®å½•<br>â”œâ”€main.js               Vueåˆå§‹åŒ–å…¥å£æ–‡ä»¶<br>â”œâ”€App.vue               åº”ç”¨é…ç½®ï¼Œç”¨æ¥é…ç½®Appå…¨å±€æ ·å¼ä»¥åŠç›‘å¬åº”ç”¨ç”Ÿå‘½å‘¨æœŸ<br>â”œâ”€manifest.json         é…ç½®åº”ç”¨åç§°ã€appidã€logoã€ç‰ˆæœ¬ç­‰æ‰“åŒ…ä¿¡æ¯ï¼Œ<a href="https://uniapp.dcloud.io/collocation/manifest">è¯¦è§</a><br>â””â”€pages.json            é…ç½®é¡µé¢è·¯ç”±ã€å¯¼èˆªæ¡ã€é€‰é¡¹å¡ç­‰é¡µé¢ç±»ä¿¡æ¯ï¼Œ<a href="https://uniapp.dcloud.io/collocation/pages">è¯¦è§</a></p><h2 id="å…³äºç¼–è¯‘"><a href="#å…³äºç¼–è¯‘" class="headerlink" title="å…³äºç¼–è¯‘"></a>å…³äºç¼–è¯‘</h2><ul><li><p>static ç›®å½•ä¸‹çš„æ–‡ä»¶å‡ä¼šè¢«å®Œæ•´æ‰“åŒ…è¿›å»ï¼Œä¸”ä¸ä¼šç¼–è¯‘ã€‚è¯¥ç›®å½•ä¸‹çš„ js æ–‡ä»¶ä¸ä¼šè¢«ç¼–è¯‘ï¼Œå¦‚æœé‡Œé¢æœ‰ es6 çš„ä»£ç ï¼Œä¸ç»è¿‡è½¬æ¢ç›´æ¥è¿è¡Œï¼Œåœ¨æ‰‹æœºè®¾å¤‡ä¸Šä¼šæŠ¥é”™ã€‚</p></li><li><p>é static ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼ˆvueã€jsã€css ç­‰ï¼‰åªæœ‰è¢«å¼•ç”¨åˆ°æ‰ä¼šè¢«æ‰“åŒ…ç¼–è¯‘è¿›å»ã€‚</p></li></ul><h1 id="å¼•å…¥é™æ€èµ„æº"><a href="#å¼•å…¥é™æ€èµ„æº" class="headerlink" title="å¼•å…¥é™æ€èµ„æº"></a>å¼•å…¥é™æ€èµ„æº</h1><h2 id="æ¨¡æ¿å†…"><a href="#æ¨¡æ¿å†…" class="headerlink" title="æ¨¡æ¿å†…"></a>æ¨¡æ¿å†…</h2><p>å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- ç»å¯¹è·¯å¾„ï¼Œ/staticæŒ‡æ ¹ç›®å½•ä¸‹çš„staticç›®å½•ï¼Œåœ¨clié¡¹ç›®ä¸­/staticæŒ‡srcç›®å½•ä¸‹çš„staticç›®å½• --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/static/logo.png<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@/static/logo.png<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- ç›¸å¯¹è·¯å¾„ --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../static/logo.png<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="jsæ–‡ä»¶"><a href="#jsæ–‡ä»¶" class="headerlink" title="jsæ–‡ä»¶"></a>jsæ–‡ä»¶</h2><p>å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„</p><p>ä¸æ”¯æŒä½¿ç”¨ <code>/</code> å¼€å¤´çš„æ–¹å¼å¼•å…¥</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ç»å¯¹è·¯å¾„ï¼Œ@æŒ‡å‘é¡¹ç›®æ ¹ç›®å½•ï¼Œåœ¨clié¡¹ç›®ä¸­@æŒ‡å‘srcç›®å½•</span><span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">'@/common/add.js'</span><span class="token comment">// ç›¸å¯¹è·¯å¾„</span><span class="token keyword">import</span> add <span class="token keyword">from</span> <span class="token string">'../../common/add.js'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="csså¼•å…¥"><a href="#csså¼•å…¥" class="headerlink" title="csså¼•å…¥"></a>csså¼•å…¥</h2><p>å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* ç»å¯¹è·¯å¾„ */</span><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'/common/uni.css'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'@/common/uni.css'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span class="token comment">/* ç›¸å¯¹è·¯å¾„ */</span><span class="token atrule"><span class="token rule">@import</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'../../common/uni.css'</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° uni-appï¼ˆä¸€ï¼‰åˆä½“éªŒ</title>
      <link href="/2021/09/10/xiao-bai-cai-bi-ji-xiao-cheng-xu-yi-chu-ti-yan/"/>
      <url>/2021/09/10/xiao-bai-cai-bi-ji-xiao-cheng-xu-yi-chu-ti-yan/</url>
      
        <content type="html"><![CDATA[<p>æœ€è¿‘åˆå¼€å§‹é¼“æ£å­¦ä¹  uni-app å•¦ï¼Œè™½ç„¶å¸¦å¨ƒåŸºæœ¬æ²¡å¤šå°‘æ—¶é—´ä½†æˆ‘çœŸçš„è¶…çˆ±å­¦ä¹ æ–°ç©æ„å¸¦æ¥çš„æ»¡è¶³æ„Ÿçš„ï¼ˆè¯»ä¹¦æ—¶å€™è¦æœ‰è¿™è§‰æ‚Ÿè¯¥å¤šå¥½å“‡ğŸ˜³ï¼‰</p><p>æŒ‰ç…§ä»¥å¾€çš„å­¦ä¹ ç»éªŒï¼Œé¦–å…ˆè¦å»å®˜ç½‘çœ‹ä¸€éæ•™ç¨‹ï¼Œç„¶åè·Ÿç€ç¤ºä¾‹æ’¸ä¸€ä¸ª HelloWorld å‡ºæ¥ã€‚</p><p><a href="https://uniapp.dcloud.io/README">ä»€ä¹ˆæ˜¯ uni-app</a></p><p><a href="https://ask.dcloud.net.cn/article/id-35657__page-2">ç™½è¯uni-app ã€ä¹Ÿæ˜¯htmlã€vueã€å°ç¨‹åºçš„åŒºåˆ«ã€‘</a></p><p><a href="https://segmentfault.com/a/1190000015684864">vueå’Œå¾®ä¿¡å°ç¨‹åºçš„åŒºåˆ«ã€æ¯”è¾ƒ</a></p><p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/">å¾®ä¿¡å®˜æ–¹æ–‡æ¡£ Â· å°ç¨‹åº</a></p><p>PSï¼šè¿™ä¸ªç³»åˆ—ä½›æ€§æ›´æ–°ï¼Œå°½é‡æŠŠç¬”è®°è®°å½•ä¸‹æ¥ ğŸ¤¦</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> uni-app </tag>
            
            <tag> å°ç¨‹åº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Cookieã€Sessionã€Token åˆ°åº•æ˜¯ä¸ªå•¥</title>
      <link href="/2021/09/04/sha-sha-fen-bu-qing-zhi-cookie-session-token/"/>
      <url>/2021/09/04/sha-sha-fen-bu-qing-zhi-cookie-session-token/</url>
      
        <content type="html"><![CDATA[<h1 id="HTTP-åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®"><a href="#HTTP-åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®" class="headerlink" title="HTTP åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®"></a>HTTP åè®®æ˜¯ä¸€ä¸ªæ— çŠ¶æ€åè®®</h1><p>HTTPæ˜¯æ— çŠ¶æ€çš„ï¼šåœ¨åŒä¸€ä¸ªè¿æ¥ä¸­ï¼Œä¸¤ä¸ªæ‰§è¡ŒæˆåŠŸçš„è¯·æ±‚ä¹‹é—´æ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚è¿™å°±å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œç”¨æˆ·æ²¡æœ‰åŠæ³•åœ¨åŒä¸€ä¸ªç½‘ç«™ä¸­è¿›è¡Œè¿ç»­çš„äº¤äº’ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ªç”µå•†ç½‘ç«™é‡Œï¼Œç”¨æˆ·æŠŠæŸä¸ªå•†å“åŠ å…¥åˆ°è´­ç‰©è½¦ï¼Œåˆ‡æ¢ä¸€ä¸ªé¡µé¢åå†æ¬¡æ·»åŠ äº†å•†å“ï¼Œè¿™ä¸¤æ¬¡æ·»åŠ å•†å“çš„è¯·æ±‚ä¹‹é—´æ²¡æœ‰å…³è”ï¼Œæµè§ˆå™¨æ— æ³•çŸ¥é“ç”¨æˆ·æœ€ç»ˆé€‰æ‹©äº†å“ªäº›å•†å“ã€‚</p><h1 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h1><p>æ—¢ç„¶ Web æœåŠ¡å™¨è®°ä¸ä½ä¸œè¥¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åœ¨å¤–éƒ¨æƒ³åŠæ³•è®°ä½ã€‚</p><p>ä»¥ç”µå•†ç½‘ç«™ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬ï¼ˆå®¢æˆ·ç«¯æµè§ˆå™¨ï¼‰ç¬¬ä¸€æ¬¡è®¿é—®ç”µå•†ç½‘ç«™ï¼ˆæœåŠ¡ç«¯ï¼‰æ—¶ï¼Œç”µå•†ç½‘ç«™ç»™æˆ‘ä»¬å‘æ”¾ä¸€å¼ è®°å½•ç‹¬ç‰¹èº«ä»½æ ‡è¯†æ•°æ®ã€Œä¼šå‘˜å¡ã€ï¼Œæ ¼å¼ä¸º <code>&lt;cookieå&gt;=&lt;cookieå€¼&gt;</code>ï¼Œæ”¾å…¥åˆ° <code>Set-Cookie</code> å­—æ®µé‡Œï¼ˆå³åœ¨å“åº”å¤´é‡Œé¢æ·»åŠ ä¸€ä¸ª <code>Set-Cookie</code> é€‰é¡¹ï¼‰ï¼Œéšç€å“åº”æŠ¥æ–‡å‘ç»™æµè§ˆå™¨</p><pre class="line-numbers language-none"><code class="language-none">HTTP/1.0 200 OKContent-type: text/htmlSet-Cookie: test_cookie=test[é¡µé¢å†…å®¹]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµè§ˆå™¨æ¥æ”¶åˆ°ã€Œä¼šå‘˜å¡ã€å­—æ®µä»¥åå°±æŠŠè¿™å¼ ã€Œä¼šå‘˜å¡ã€ä¿å­˜èµ·æ¥ã€‚ï¼ˆä»¥ Chrome æµè§ˆå™¨ä¸ºä¾‹ï¼Œå¯ä»¥æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å° -&gt; <code>Application</code> -&gt; <code>Cookies</code> æŸ¥çœ‹Cookieï¼‰</p><p>ä¸‹æ¬¡è¯·æ±‚æ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†æ­¤ã€Œä¼šå‘˜å¡ã€å€¼æ”¾å…¥åˆ° <code>Cookie</code> å­—æ®µä¸­å‘ç»™æœåŠ¡ç«¯ã€‚</p><pre class="line-numbers language-none"><code class="language-none">GET /sample_page.html HTTP/1.1Host: www.example.orgCookie: test_cookie=test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åï¼Œå‘ç°Cookieå­—æ®µä¸­æœ‰å€¼ï¼Œå°±èƒ½æ ¹æ®æ­¤å€¼è¯†åˆ«ç”¨æˆ·çš„èº«ä»½ç„¶åæä¾›ä¸ªæ€§åŒ–çš„æœåŠ¡ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gu67ok9y8tj60k108hq4y02.jpg" alt="Cookie.png"></p><p>Cookie æ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ï¼Œå®ƒä¼šåœ¨æµè§ˆå™¨ä¸‹æ¬¡å‘åŒä¸€æœåŠ¡å™¨å†å‘èµ·è¯·æ±‚æ—¶è¢«æºå¸¦å¹¶å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚</p><p>Cookie ä¿å­˜åœ¨å®¢æˆ·ç«¯ä¸­ï¼ŒæŒ‰åœ¨å®¢æˆ·ç«¯ä¸­çš„å­˜å‚¨ä½ç½®ï¼Œå¯åˆ†ä¸ºå†…å­˜ Cookie å’Œç¡¬ç›˜ Cookieã€‚å†…å­˜ Cookie ç”±æµè§ˆå™¨ç»´æŠ¤ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæµè§ˆå™¨å…³é—­å³æ¶ˆå¤±ï¼Œå­˜åœ¨æ—¶é—´çŸ­æš‚ã€‚ç¡¬ç›˜ Cookie ä¿å­˜åœ¨ç¡¬ç›˜é‡Œï¼Œæœ‰è¿‡æœŸæ—¶é—´ï¼Œé™¤éç”¨æˆ·æ‰‹åŠ¨æ¸…ç†æˆ–åˆ°äº†è¿‡æœŸæ—¶é—´ï¼Œç¡¬ç›˜Cookieä¸ä¼šæ¸…é™¤ï¼Œå­˜åœ¨æ—¶é—´è¾ƒé•¿ã€‚æ‰€ä»¥ï¼ŒæŒ‰å­˜åœ¨æ—¶é—´ï¼Œå¯åˆ†ä¸ºéæŒä¹… Cookie å’ŒæŒä¹… Cookie ã€‚</p><h2 id="Cookie-ä¸»è¦ç”¨é€”"><a href="#Cookie-ä¸»è¦ç”¨é€”" class="headerlink" title="Cookie ä¸»è¦ç”¨é€”"></a>Cookie ä¸»è¦ç”¨é€”</h2><ul><li>ä¼šè¯çŠ¶æ€ç®¡ç†ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€è´­ç‰©è½¦ã€æ¸¸æˆåˆ†æ•°æˆ–å…¶å®ƒéœ€è¦è®°å½•çš„ä¿¡æ¯ï¼‰</li><li>ä¸ªæ€§åŒ–è®¾ç½®ï¼ˆå¦‚ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ã€ä¸»é¢˜ç­‰ï¼‰</li><li>æµè§ˆå™¨è¡Œä¸ºè·Ÿè¸ªï¼ˆå¦‚è·Ÿè¸ªåˆ†æç”¨æˆ·è¡Œä¸ºç­‰ï¼‰</li></ul><h2 id="Cookie-è¯­æ³•"><a href="#Cookie-è¯­æ³•" class="headerlink" title="Cookie è¯­æ³•"></a>Cookie è¯­æ³•</h2><pre class="line-numbers language-none"><code class="language-none">Cookie: &lt;cookie-list&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><code>&lt;cookie-list&gt;</code>ï¼šä¸€ç³»åˆ—çš„åç§°/å€¼å¯¹ï¼Œå½¢å¼ä¸º <code>&lt;cookie-name&gt;=&lt;cookie-value&gt;</code>ã€‚åç§°/å€¼å¯¹ä¹‹é—´ç”¨åˆ†å·å’Œç©ºæ ¼ (â€˜; â€˜)éš”å¼€ã€‚è®¾ç½® Cookie çš„åç§°åŠç›¸å¯¹åº”çš„å€¼ï¼Œéƒ½å¿…é¡»æ˜¯<strong>å­—ç¬¦ä¸²ç±»å‹</strong> - å¦‚æœå€¼ä¸º Unicode å­—ç¬¦ï¼Œéœ€è¦ä¸ºå­—ç¬¦ç¼–ç ã€‚ - å¦‚æœå€¼ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼Œåˆ™éœ€è¦ä½¿ç”¨ BASE64 ç¼–ç ã€‚</p><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>domain</strong></td><td>æŒ‡å®šäº†å“ªäº›ä¸»æœºå¯ä»¥æ¥å— Cookieã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸º <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Origin">origin</a>ï¼Œ<strong>ä¸åŒ…å«å­åŸŸå</strong>ã€‚å¦‚æœæŒ‡å®šäº†<code>Domain</code>ï¼Œåˆ™ä¸€èˆ¬åŒ…å«å­åŸŸåã€‚å› æ­¤ï¼ŒæŒ‡å®š <code>Domain</code> æ¯”çœç•¥å®ƒçš„é™åˆ¶è¦å°‘ã€‚</td></tr><tr><td><strong>path</strong></td><td>æŒ‡å®šäº†ä¸»æœºä¸‹çš„å“ªäº›è·¯å¾„å¯ä»¥æ¥å— Cookieï¼ˆè¯¥ URL è·¯å¾„å¿…é¡»å­˜åœ¨äºè¯·æ±‚ URL ä¸­ï¼‰ã€‚ä»¥å­—ç¬¦ <code>%x2F</code> (â€œ/â€œ) ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦ï¼Œå­è·¯å¾„ä¹Ÿä¼šè¢«åŒ¹é…ã€‚</td></tr><tr><td><strong>maxAge</strong></td><td>cookie å¤±æ•ˆçš„æ—¶é—´ï¼Œå•ä½ç§’ã€‚å¦‚æœä¸ºæ•´æ•°ï¼Œåˆ™è¯¥ cookie åœ¨ maxAge ç§’åå¤±æ•ˆã€‚å¦‚æœä¸ºè´Ÿæ•°ï¼Œè¯¥ cookie ä¸ºä¸´æ—¶ cookie ï¼Œå…³é—­æµè§ˆå™¨å³å¤±æ•ˆï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šä»¥ä»»ä½•å½¢å¼ä¿å­˜è¯¥ cookie ã€‚å¦‚æœä¸º 0ï¼Œè¡¨ç¤ºåˆ é™¤è¯¥ cookie ã€‚é»˜è®¤ä¸º -1ã€‚ - <strong>æ¯” expires å¥½ç”¨</strong>ã€‚</td></tr><tr><td><strong>expires</strong></td><td>è¿‡æœŸæ—¶é—´ï¼Œåœ¨è®¾ç½®çš„æŸä¸ªæ—¶é—´ç‚¹åè¯¥ cookie å°±ä¼šå¤±æ•ˆã€‚ ä¸€èˆ¬æµè§ˆå™¨çš„ cookie éƒ½æ˜¯é»˜è®¤å‚¨å­˜çš„ï¼Œå½“å…³é—­æµè§ˆå™¨ç»“æŸè¿™ä¸ªä¼šè¯çš„æ—¶å€™ï¼Œè¿™ä¸ª cookie ä¹Ÿå°±ä¼šè¢«åˆ é™¤</td></tr><tr><td><strong>secure</strong></td><td>è¯¥ cookie æ˜¯å¦ä»…è¢«ä½¿ç”¨å®‰å…¨åè®®ä¼ è¾“ã€‚å®‰å…¨åè®®æœ‰ HTTPSï¼ŒSSLç­‰ï¼Œåœ¨ç½‘ç»œä¸Šä¼ è¾“æ•°æ®ä¹‹å‰å…ˆå°†æ•°æ®åŠ å¯†ã€‚é»˜è®¤ä¸ºfalseã€‚ å½“ secure å€¼ä¸º true æ—¶ï¼Œcookie åœ¨ HTTP ä¸­æ˜¯æ— æ•ˆï¼Œåœ¨ HTTPS ä¸­æ‰æœ‰æ•ˆã€‚</td></tr><tr><td><strong>httpOnly</strong></td><td><strong>å¦‚æœç»™æŸä¸ª cookie è®¾ç½®äº† httpOnly å±æ€§ï¼Œåˆ™æ— æ³•é€šè¿‡ JS è„šæœ¬ è¯»å–åˆ°è¯¥ cookie çš„ä¿¡æ¯ï¼Œä½†è¿˜æ˜¯èƒ½é€šè¿‡ Application ä¸­æ‰‹åŠ¨ä¿®æ”¹ cookieï¼Œæ‰€ä»¥åªæ˜¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥é˜²æ­¢ XSS æ”»å‡»ï¼Œä¸æ˜¯ç»å¯¹çš„å®‰å…¨</strong></td></tr></tbody></table><p>åœ¨ä¸Šé¢æåˆ°æŸ¥çœ‹ Cookie çš„æ–¹å¼ï¼ˆæ‰“å¼€æµè§ˆå™¨æ§åˆ¶å° -&gt; <code>Application</code> -&gt; <code>Cookies</code>ï¼‰ï¼Œåœ¨è¯¦æƒ…é¢æ¿å¯ä»¥å‘ç° Cookie æ˜¯å¯ç¼–è¾‘çš„ï¼Œè¿™å°±æä¾›äº† Cookie è¢«ç¯¡æ”¹çš„å¯èƒ½ã€‚å¦å¤–ï¼Œå¾ˆå¤šç¬¬ä¸‰æ–¹å¯ä»¥è·å–åˆ° Cookieï¼ŒæœåŠ¡å™¨æ— æ³•åˆ¤æ–­ Cookie æ˜¯ä¸æ˜¯çœŸå®ç”¨æˆ·å‘é€çš„ï¼Œæ‰€ä»¥å¯ä»¥ä¼ªé€  Cookie å®ç°ç™»å½•è¿›è¡Œä¸€äº› HTTP è¯·æ±‚ã€‚</p><p>ä¸ºäº†é˜²ç¯¡æ”¹ Cookieï¼Œæœ‰ä¸¤ç§æ€è·¯ï¼š</p><p>æ€è·¯ä¸€ï¼šæŠŠä¿¡æ¯éšè—åœ¨æœåŠ¡å™¨ä¸­ï¼ˆSessionï¼‰</p><p>æ€è·¯äºŒï¼šåŠ å¯†ï¼ˆTokenï¼‰</p><h1 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h1><p>Session æ˜¯å¦ä¸€ç§è®°å½•æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¼šè¯çŠ¶æ€çš„æœºåˆ¶ï¼Œå®ƒæ˜¯åŸºäº Cookie å®ç°çš„ï¼Œåœ¨ä¸€æ¬¡ä¼šè¯ä¸­å°†é‡è¦ä¿¡æ¯ä¿å­˜åœ¨ Session ä¸­ï¼ˆSession å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼‰ï¼Œæµè§ˆå™¨åªè®°å½• SessionIdï¼ˆä¸€ä¸ª SessionId å¯¹åº”ä¸€æ¬¡ä¼šè¯è¯·æ±‚ï¼ŒSessionId å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ Cookie ä¸­ï¼‰ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gu7dewfgbaj60m106wgn302.jpg" alt="Session.png"></p><h1 id="Token"><a href="#Token" class="headerlink" title="Token"></a>Token</h1><p>Token çš„æ„æ€æ˜¯ã€Œä»¤ç‰Œã€ï¼Œæ˜¯æœåŠ¡ç«¯ç”Ÿæˆçš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œä½œä¸ºå®¢æˆ·ç«¯è¿›è¡Œè¯·æ±‚çš„ä¸€ä¸ªæ ‡è¯†ã€‚é€šå¸¸ä½¿ç”¨ <a href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html">JWT</a> åŠ å¯†è®¤è¯ã€‚</p><p>å½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•åï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ª Token å¹¶å°†æ­¤ Token è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œä»¥åå®¢æˆ·ç«¯åªéœ€å¸¦ä¸Šè¿™ä¸ª Token å‰æ¥è¯·æ±‚æ•°æ®å³å¯ï¼Œæ— éœ€å†æ¬¡å¸¦ä¸Šç”¨æˆ·åå’Œå¯†ç ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gu7en0ln4sj60m106d3zq02.jpg" alt="Token.png"></p><h1 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h1><h2 id="Cookie-å’Œ-Session-çš„åŒºåˆ«"><a href="#Cookie-å’Œ-Session-çš„åŒºåˆ«" class="headerlink" title="Cookie å’Œ Session çš„åŒºåˆ«"></a>Cookie å’Œ Session çš„åŒºåˆ«</h2><p>å®‰å…¨æ€§ï¼š Session æ¯” Cookie å®‰å…¨ï¼ŒSession æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„ï¼ŒCookie æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯çš„ã€‚<br>å­˜å–å€¼çš„ç±»å‹ä¸åŒï¼šCookie åªæ”¯æŒå­˜å­—ç¬¦ä¸²æ•°æ®ï¼Œæƒ³è¦è®¾ç½®å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦å°†å…¶è½¬æ¢æˆå­—ç¬¦ä¸²ï¼ŒSession å¯ä»¥å­˜ä»»æ„æ•°æ®ç±»å‹ã€‚<br>æœ‰æ•ˆæœŸä¸åŒï¼š Cookie å¯è®¾ç½®ä¸ºé•¿æ—¶é—´ä¿æŒï¼Œæ¯”å¦‚æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„é»˜è®¤ç™»å½•åŠŸèƒ½ï¼ŒSession ä¸€èˆ¬å¤±æ•ˆæ—¶é—´è¾ƒçŸ­ï¼Œå®¢æˆ·ç«¯å…³é—­ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰æˆ–è€… Session è¶…æ—¶éƒ½ä¼šå¤±æ•ˆã€‚<br>å­˜å‚¨å¤§å°ä¸åŒï¼šå•ä¸ª Cookie ä¿å­˜çš„æ•°æ®ä¸èƒ½è¶…è¿‡ 4Kï¼ŒSession å¯å­˜å‚¨æ•°æ®è¿œé«˜äº Cookieï¼Œä½†æ˜¯å½“è®¿é—®é‡è¿‡å¤šï¼Œä¼šå ç”¨è¿‡å¤šçš„æœåŠ¡å™¨èµ„æºã€‚</p><h2 id="Token-å’Œ-Session-çš„åŒºåˆ«"><a href="#Token-å’Œ-Session-çš„åŒºåˆ«" class="headerlink" title="Token å’Œ Session çš„åŒºåˆ«"></a>Token å’Œ Session çš„åŒºåˆ«</h2><p>çŠ¶æ€ï¼šSession æ˜¯ä¸€ç§è®°å½•æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¼šè¯çŠ¶æ€çš„æœºåˆ¶ï¼Œä½¿æœåŠ¡ç«¯æœ‰çŠ¶æ€åŒ–ï¼Œå¯ä»¥è®°å½•ä¼šè¯ä¿¡æ¯ã€‚è€Œ Token æ˜¯è®¿é—®èµ„æºæ¥å£ï¼ˆAPIï¼‰æ—¶æ‰€éœ€è¦çš„èµ„æºå‡­è¯ï¼Œä½¿æœåŠ¡ç«¯æ— çŠ¶æ€åŒ–ï¼Œä¸ä¼šå­˜å‚¨ä¼šè¯ä¿¡æ¯ã€‚</p><p>æ‰©å±•æ€§ï¼šå¦‚æœæ˜¯æœåŠ¡å™¨é›†ç¾¤ï¼Œæˆ–è€…æ˜¯è·¨åŸŸçš„æœåŠ¡å¯¼å‘æ¶æ„ï¼Œå°±è¦æ±‚ Session æ•°æ®å…±äº«ï¼Œæ¯å°æœåŠ¡å™¨éƒ½èƒ½å¤Ÿè¯»å– Sessionã€‚ç”±äº Token æ˜¯å®¢æˆ·ç«¯è®¿é—®æ—¶ç›´æ¥å¸¦ç€æ•°æ®ï¼Œå› æ­¤æ— éœ€åšå…±äº«æ•°æ®çš„æ“ä½œã€‚</p><p>å‚è€ƒæ–‡ç« </p><p><a href="https://juejin.cn/post/6844904009061367821#heading-0">ä¸€æ–‡å½»åº•ææ‡‚Cookieã€Sessionã€Tokenåˆ°åº•æ˜¯ä»€ä¹ˆ</a></p><p><a href="https://juejin.cn/post/6844904034181070861">å‚»å‚»åˆ†ä¸æ¸…ä¹‹ Cookieã€Sessionã€Tokenã€JWT</a></p><p><a href="https://segmentfault.com/a/1190000017831088">sessionï¼Œcookieå’Œtokenç©¶ç«Ÿæ˜¯ä»€ä¹ˆ</a></p><p><a href="https://blog.csdn.net/think2me/article/details/38726429">å½»åº•å¼„æ¸…æ¥šsessionæ˜¯ä»€ä¹ˆï¼Ÿ</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HTTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JavaScriptå¸¸ç”¨ç»§æ‰¿æ–¹æ¡ˆï¼Œçœ‹å®Œä¸å†emo</title>
      <link href="/2021/08/31/javascript-chang-yong-ji-cheng-fang-an-kan-wan-bu-zai-emo/"/>
      <url>/2021/08/31/javascript-chang-yong-ji-cheng-fang-an-kan-wan-bu-zai-emo/</url>
      
        <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´å†™äº†ä¸€ç¯‡å…³äº<a href="https://april-cl.github.io/2021/08/20/js-de-san-zuo-da-shan-zhi-yuan-xing/">åŸå‹</a>çš„åšå®¢ï¼Œå¥½ä¼¼æ‰“é€šäº†ä»»ç£äºŒè„‰ï¼Œä»¥å‰æ–©ä¸æ–­ç†è¿˜ä¹±çš„å„ç§ç»§æ‰¿æ–¹å¼çªç„¶çœ‹å¾—æ˜ç™½äº†ï¼Œèµ¶ç´§è®°ä¸‹æ¥âœ~~~</p><p>â€”â€” ä»¥ä¸‹æ˜¯æ­£æ–‡ â€”â€”</p><h1 id="åŸå‹é“¾ç»§æ‰¿"><a href="#åŸå‹é“¾ç»§æ‰¿" class="headerlink" title="åŸå‹é“¾ç»§æ‰¿"></a>åŸå‹é“¾ç»§æ‰¿</h1><h2 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>å°†çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// åˆ›å»ºSuperTypeçš„å®ä¾‹ï¼Œå¹¶å°†è¯¥å®ä¾‹èµ‹å€¼ç»™SubType.prototype</span><span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// æ‰€æœ‰æ¶‰åŠåˆ°åŸå‹é“¾ç»§æ‰¿çš„ç»§æ‰¿æ–¹å¼éƒ½è¦ä¿®æ”¹å­ç±»æ„é€ å‡½æ•°çš„æŒ‡å‘ï¼Œå¦åˆ™å­ç±»å®ä¾‹çš„æ„é€ å‡½æ•°ä¼šæŒ‡å‘SuperTypeã€‚</span><span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸¾ä¸ªä¾‹å­"><a href="#ä¸¾ä¸ªä¾‹å­" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// çˆ¶ç±»</span><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Person'</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age <span class="token operator">||</span> <span class="token number">0</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'music'</span><span class="token punctuation">,</span> <span class="token string">'reading'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token comment">// ä¸ºçˆ¶ç±»æ–°å¢ä¸€ä¸ªæ–¹æ³•</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a person'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// å­ç±»</span><span class="token keyword">function</span> <span class="token function">Student</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">90</span><span class="token punctuation">}</span><span class="token comment">// ç»§æ‰¿ï¼ˆæ³¨æ„,ç»§æ‰¿å¿…é¡»è¦å†™åœ¨å­ç±»æ–¹æ³•å®šä¹‰çš„å‰é¢ï¼‰</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token comment">// ä¸ºå­ç±»æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼ˆåœ¨ç»§æ‰¿ä¹‹å,å¦åˆ™ä¼šè¢«è¦†ç›–ï¼‰</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">study</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am studing'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">var</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'April'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span>           <span class="token comment">// April            --å­ç±»è¦†ç›–çˆ¶ç±»çš„å±æ€§</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>age<span class="token punctuation">)</span>            <span class="token comment">// 0                --çˆ¶ç±»çš„å±æ€§</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>score<span class="token punctuation">)</span>          <span class="token comment">// 90               --å­ç±»è‡ªå·±çš„å±æ€§</span>student<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                       <span class="token comment">// I am a person    --ç»§æ‰¿è‡ªçˆ¶ç±»çš„æ–¹æ³•</span>student<span class="token punctuation">.</span><span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                     <span class="token comment">// I am studing     --å­ç±»è‡ªå·±çš„æ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­˜åœ¨çš„ç¼ºç‚¹"><a href="#å­˜åœ¨çš„ç¼ºç‚¹" class="headerlink" title="å­˜åœ¨çš„ç¼ºç‚¹"></a>å­˜åœ¨çš„ç¼ºç‚¹</h2><p>å¤šä¸ªå®ä¾‹å¯¹å¼•ç”¨ç±»å‹çš„æ“ä½œä¼šè¢«ç¯¡æ”¹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'basketball'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,basketball</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,basketball</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ„é€ å‡½æ•°ç»§æ‰¿"><a href="#æ„é€ å‡½æ•°ç»§æ‰¿" class="headerlink" title="æ„é€ å‡½æ•°ç»§æ‰¿"></a>æ„é€ å‡½æ•°ç»§æ‰¿</h1><h2 id="æ ¸å¿ƒ-1"><a href="#æ ¸å¿ƒ-1" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>å°†çˆ¶ç±»æ„é€ å‡½æ•°çš„å†…å®¹å¤åˆ¶ç»™äº†å­ç±»çš„æ„é€ å‡½æ•°</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>SubType<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä¸¾ä¸ªä¾‹å­-1"><a href="#ä¸¾ä¸ªä¾‹å­-1" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// çˆ¶ç±»</span><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'music'</span><span class="token punctuation">,</span> <span class="token string">'reading'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a person'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// å­ç±»</span><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">var</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'basketball'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,basketball</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading</span>stu1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                  <span class="token comment">// æŠ¥é”™</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­˜åœ¨çš„ç¼ºç‚¹-1"><a href="#å­˜åœ¨çš„ç¼ºç‚¹-1" class="headerlink" title="å­˜åœ¨çš„ç¼ºç‚¹"></a>å­˜åœ¨çš„ç¼ºç‚¹</h2><ul><li>åªèƒ½ç»§æ‰¿çˆ¶ç±»çš„å®ä¾‹å±æ€§å’Œæ–¹æ³•ï¼Œä¸èƒ½ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³•</li><li>æ— æ³•å®ç°å¤ç”¨ï¼Œæ¯ä¸ªå­ç±»éƒ½æœ‰çˆ¶ç±»å®ä¾‹å‡½æ•°çš„å‰¯æœ¬ï¼Œå½±å“æ€§èƒ½</li></ul><h1 id="ç»„åˆç»§æ‰¿"><a href="#ç»„åˆç»§æ‰¿" class="headerlink" title="ç»„åˆç»§æ‰¿"></a>ç»„åˆç»§æ‰¿</h1><h2 id="æ ¸å¿ƒ-2"><a href="#æ ¸å¿ƒ-2" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œç”¨å€Ÿç”¨æ„é€ å‡½æ•°æŠ€æœ¯æ¥å®ç°å®ä¾‹å±æ€§çš„ç»§æ‰¿</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸¾ä¸ªä¾‹å­-2"><a href="#ä¸¾ä¸ªä¾‹å­-2" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// çˆ¶ç±»</span><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'music'</span><span class="token punctuation">,</span><span class="token string">'reading'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token comment">// çˆ¶ç±»å‡½æ•°</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a person'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// å­ç±»</span><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>               <span class="token comment">// æ„é€ å‡½æ•°ç»§æ‰¿(ç»§æ‰¿å±æ€§)</span><span class="token punctuation">}</span><span class="token comment">// åŸå‹é“¾ç»§æ‰¿(ç»§æ‰¿æ–¹æ³•)</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student<span class="token comment">// å®ä¾‹åŒ–</span><span class="token keyword">var</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">var</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'basketball'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>           <span class="token comment">// music,reading,basketball</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>           <span class="token comment">// music,reading</span>stu1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                          <span class="token comment">// I am a person</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­˜åœ¨çš„ç¼ºç‚¹-2"><a href="#å­˜åœ¨çš„ç¼ºç‚¹-2" class="headerlink" title="å­˜åœ¨çš„ç¼ºç‚¹"></a>å­˜åœ¨çš„ç¼ºç‚¹</h2><p>åœ¨ä½¿ç”¨å­ç±»åˆ›å»ºå®ä¾‹å¯¹è±¡æ—¶ï¼Œå…¶åŸå‹ä¸­ä¼šå­˜åœ¨ä¸¤ä»½ç›¸åŒçš„å±æ€§/æ–¹æ³•</p><h1 id="åŸå‹å¼ç»§æ‰¿"><a href="#åŸå‹å¼ç»§æ‰¿" class="headerlink" title="åŸå‹å¼ç»§æ‰¿"></a>åŸå‹å¼ç»§æ‰¿</h1><h2 id="æ ¸å¿ƒ-3"><a href="#æ ¸å¿ƒ-3" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>åˆ©ç”¨ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ï¼Œå°†æŸä¸ªå¯¹è±¡ç›´æ¥èµ‹å€¼ç»™ç©ºå¯¹è±¡æ„é€ å‡½æ•°çš„åŸå‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ–è€…ç”¨ <code>ES 5</code> çš„ <code>Object.create()</code> ä»£æ›¿ä¸Šé¢çš„ object æ–¹æ³•</p><h2 id="ä¸¾ä¸ªä¾‹å­-3"><a href="#ä¸¾ä¸ªä¾‹å­-3" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Nicholas"</span><span class="token punctuation">,</span>  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Shelby"</span><span class="token punctuation">,</span> <span class="token string">"Court"</span><span class="token punctuation">,</span> <span class="token string">"Van"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token keyword">var</span> anotherPerson <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>anotherPerson<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Greg"</span>anotherPerson<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Rob"</span><span class="token punctuation">)</span><span class="token keyword">var</span> yetAnotherPerson <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>yetAnotherPerson<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"Linda"</span>yetAnotherPerson<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">"Barbie"</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>friends<span class="token punctuation">)</span>   <span class="token comment">// Shelby,Court,Van,Rob,Barbie</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­˜åœ¨çš„ç¼ºç‚¹-3"><a href="#å­˜åœ¨çš„ç¼ºç‚¹-3" class="headerlink" title="å­˜åœ¨çš„ç¼ºç‚¹"></a>å­˜åœ¨çš„ç¼ºç‚¹</h2><ul><li><p>åŸå‹é“¾ç»§æ‰¿å¤šä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§æŒ‡å‘ç›¸åŒï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ã€‚</p></li><li><p>æ— æ³•ä¼ é€’å‚æ•°</p></li></ul><h1 id="å¯„ç”Ÿå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿå¼ç»§æ‰¿"></a>å¯„ç”Ÿå¼ç»§æ‰¿</h1><h2 id="æ ¸å¿ƒ-4"><a href="#æ ¸å¿ƒ-4" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>å¯„ç”Ÿå¼ç»§æ‰¿å…¶å®å°±æ˜¯åœ¨åŸå‹å¼ç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œåšäº†ä¸€äº›å¢å¼º</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createAnother</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// é€šè¿‡è°ƒç”¨ object() å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡</span>  <span class="token keyword">var</span> clone <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>   <span class="token comment">// ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡</span>  clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// è¿”å›è¿™ä¸ªå¯¹è±¡</span>  <span class="token keyword">return</span> clone <span class="token comment">// è¿”å›è¿™ä¸ªå¯¹è±¡</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸¾ä¸ªä¾‹å­-4"><a href="#ä¸¾ä¸ªä¾‹å­-4" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">createAnother</span><span class="token punctuation">(</span><span class="token parameter">original</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">var</span> clone <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span>  clone<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"hi"</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> clone<span class="token punctuation">}</span><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"Nicholas"</span><span class="token punctuation">,</span>  <span class="token literal-property property">friends</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"Shelby"</span><span class="token punctuation">,</span> <span class="token string">"Court"</span><span class="token punctuation">,</span> <span class="token string">"Van"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token keyword">var</span> anotherPerson <span class="token operator">=</span> <span class="token function">createAnother</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>anotherPerson<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// hi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­˜åœ¨çš„ç¼ºç‚¹-4"><a href="#å­˜åœ¨çš„ç¼ºç‚¹-4" class="headerlink" title="å­˜åœ¨çš„ç¼ºç‚¹"></a>å­˜åœ¨çš„ç¼ºç‚¹</h2><ul><li><p>åŸå‹é“¾ç»§æ‰¿å¤šä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§æŒ‡å‘ç›¸åŒï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ã€‚</p></li><li><p>æ— æ³•ä¼ é€’å‚æ•°</p></li></ul><h1 id="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"><a href="#å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿" class="headerlink" title="å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿"></a>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿</h1><h2 id="æ ¸å¿ƒ-5"><a href="#æ ¸å¿ƒ-5" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p>ç»“åˆå€Ÿç”¨æ„é€ å‡½æ•°ä¼ é€’å‚æ•°å’Œå¯„ç”Ÿæ¨¡å¼å®ç°ç»§æ‰¿</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">inheritPrototype</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">var</span> prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// åˆ›å»ºå¯¹è±¡ï¼Œåˆ›å»ºçˆ¶ç±»åŸå‹çš„ä¸€ä¸ªå‰¯æœ¬</span>  prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType                    <span class="token comment">// å¢å¼ºå¯¹è±¡ï¼Œå¼¥è¡¥å› é‡å†™åŸå‹è€Œå¤±å»çš„é»˜è®¤çš„constructor å±æ€§</span>  subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype                      <span class="token comment">// æŒ‡å®šå¯¹è±¡ï¼Œå°†æ–°åˆ›å»ºçš„å¯¹è±¡èµ‹å€¼ç»™å­ç±»çš„åŸå‹</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸¾ä¸ªä¾‹å­-5"><a href="#ä¸¾ä¸ªä¾‹å­-5" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">inheritPrototype</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span> superType</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">var</span> prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>  prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType   subType<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype<span class="token punctuation">}</span><span class="token comment">// çˆ¶ç±»åˆå§‹åŒ–å®ä¾‹å±æ€§å’ŒåŸå‹å±æ€§</span><span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Person'</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age <span class="token operator">||</span> <span class="token number">0</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'music'</span><span class="token punctuation">,</span> <span class="token string">'reading'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a person'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// å€Ÿç”¨æ„é€ å‡½æ•°ä¼ é€’å¢å¼ºå­ç±»å®ä¾‹å±æ€§ï¼ˆæ”¯æŒä¼ å‚å’Œé¿å…ç¯¡æ”¹ï¼‰</span><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// å°†çˆ¶ç±»åŸå‹æŒ‡å‘å­ç±»</span><span class="token function">inheritPrototype</span><span class="token punctuation">(</span>Student<span class="token punctuation">,</span> Person<span class="token punctuation">)</span><span class="token comment">// æ–°å¢å­ç±»åŸå‹å±æ€§</span><span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">study</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am studing'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">var</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"stu1"</span><span class="token punctuation">)</span><span class="token keyword">var</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"stu2"</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'basketball'</span><span class="token punctuation">)</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'swimming'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,basketball</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,swimming</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>è¿™ä¸ªç»§æ‰¿æ–¹æ¡ˆæ˜¯ç›®å‰æœ€æˆç†Ÿçš„æ–¹æ¡ˆ</strong></p><h1 id="ES6ç±»ç»§æ‰¿extends"><a href="#ES6ç±»ç»§æ‰¿extends" class="headerlink" title="ES6ç±»ç»§æ‰¿extends"></a>ES6ç±»ç»§æ‰¿extends</h1><h2 id="æ ¸å¿ƒ-6"><a href="#æ ¸å¿ƒ-6" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h2><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes">ES6 ç±»çš„å®šä¹‰</a></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">SubType</span> <span class="token keyword">extends</span> <span class="token class-name">SuperType</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸¾ä¸ªä¾‹å­-6"><a href="#ä¸¾ä¸ªä¾‹å­-6" class="headerlink" title="ä¸¾ä¸ªä¾‹å­"></a>ä¸¾ä¸ªä¾‹å­</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token operator">||</span> <span class="token string">'Person'</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age <span class="token operator">||</span> <span class="token number">0</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'music'</span><span class="token punctuation">,</span> <span class="token string">'reading'</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am a person'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name        <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">90</span>    <span class="token punctuation">}</span>    <span class="token function">study</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am studing'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">var</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"stu1"</span><span class="token punctuation">)</span><span class="token keyword">var</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">"stu2"</span><span class="token punctuation">)</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'basketball'</span><span class="token punctuation">)</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'swimming'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,basketball</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span>   <span class="token comment">// music,reading,swimming</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://juejin.cn/post/6844903696111763470">JavaScriptå¸¸ç”¨å…«ç§ç»§æ‰¿æ–¹æ¡ˆ</a></p><p><a href="https://segmentfault.com/a/1190000015727237">ä¸€ç¯‡æ–‡ç« ç†è§£JSç»§æ‰¿â€”â€”åŸå‹é“¾/æ„é€ å‡½æ•°/ç»„åˆ/åŸå‹å¼/å¯„ç”Ÿå¼/å¯„ç”Ÿç»„åˆ/Class extends</a></p><p><a href="https://segmentfault.com/a/1190000014476341">JSä¸­çš„ç»§æ‰¿(ä¸Š)</a></p><p><a href="https://github.com/noahlam/articles/blob/master/JS%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF(%E4%B8%8B).md">JSä¸­çš„ç»§æ‰¿(ä¸‹)</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° Vue ï¼ˆäº”ï¼‰ç”Ÿå‘½å‘¨æœŸ</title>
      <link href="/2021/08/30/xiao-bai-cai-bi-ji-vue-wu-sheng-ming-zhou-qi/"/>
      <url>/2021/08/30/xiao-bai-cai-bi-ji-vue-wu-sheng-ming-zhou-qi/</url>
      
        <content type="html"><![CDATA[<p><img src="https://cn.vuejs.org/images/lifecycle.png" alt="ç”Ÿå‘½å‘¨æœŸå›¾ç¤º"></p><h1 id="é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­"></a>é€‰é¡¹-ç”Ÿå‘½å‘¨æœŸé’©å­</h1><p>æ‰€æœ‰çš„ç”Ÿå‘½å‘¨æœŸé’©å­è‡ªåŠ¨ç»‘å®š this ä¸Šä¸‹æ–‡åˆ°å®ä¾‹ä¸­ï¼Œä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°æ¥å®šä¹‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸæ–¹æ³• </p><h2 id="beforeCreate"><a href="#beforeCreate" class="headerlink" title="beforeCreate"></a>beforeCreate</h2><p>åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹åï¼Œæ•°æ®è§‚æµ‹ (data observer) å’Œ event/watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><h2 id="created"><a href="#created" class="headerlink" title="created"></a>created</h2><p>åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®è§‚æµ‹ (data observer)ï¼Œproperty å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch/event äº‹ä»¶å›è°ƒã€‚ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$el property ç›®å‰å°šä¸å¯ç”¨ã€‚</p><h2 id="beforeMount"><a href="#beforeMount" class="headerlink" title="beforeMount"></a>beforeMount</h2><p>åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„ render å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="mounted"><a href="#mounted" class="headerlink" title="mounted"></a>mounted</h2><p>å®ä¾‹è¢«æŒ‚è½½åè°ƒç”¨ï¼Œè¿™æ—¶ el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢äº†ã€‚å¦‚æœæ ¹å®ä¾‹æŒ‚è½½åˆ°äº†ä¸€ä¸ªæ–‡æ¡£å†…çš„å…ƒç´ ä¸Šï¼Œå½“ mounted è¢«è°ƒç”¨æ—¶ vm.$el ä¹Ÿåœ¨æ–‡æ¡£å†…ã€‚</p><p>æ³¨æ„ mounted ä¸ä¼šä¿è¯æ‰€æœ‰çš„å­ç»„ä»¶ä¹Ÿéƒ½ä¸€èµ·è¢«æŒ‚è½½ã€‚å¦‚æœä½ å¸Œæœ›ç­‰åˆ°æ•´ä¸ªè§†å›¾éƒ½æ¸²æŸ“å®Œæ¯•ï¼Œå¯ä»¥åœ¨ mounted å†…éƒ¨ä½¿ç”¨ vm.$nextTick</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="beforeUpdate"><a href="#beforeUpdate" class="headerlink" title="beforeUpdate"></a>beforeUpdate</h2><p>æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰ã€‚è¿™é‡Œé€‚åˆåœ¨æ›´æ–°ä¹‹å‰è®¿é—®ç°æœ‰çš„ DOMï¼Œæ¯”å¦‚æ‰‹åŠ¨ç§»é™¤å·²æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨ã€‚</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ï¼Œå› ä¸ºåªæœ‰åˆæ¬¡æ¸²æŸ“ä¼šåœ¨æœåŠ¡ç«¯è¿›è¡Œã€‚</strong></p><h2 id="updated"><a href="#updated" class="headerlink" title="updated"></a>updated</h2><p>ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ï¼Œåœ¨è¿™ä¹‹åä¼šè°ƒç”¨è¯¥é’©å­ã€‚</p><p>å½“è¿™ä¸ªé’©å­è¢«è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOM å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥ä½ ç°åœ¨å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ã€‚å¦‚æœè¦ç›¸åº”çŠ¶æ€æ”¹å˜ï¼Œé€šå¸¸æœ€å¥½ä½¿ç”¨è®¡ç®—å±æ€§æˆ– watcher å–è€Œä»£ä¹‹ã€‚</p><p>æ³¨æ„ updated ä¸ä¼šä¿è¯æ‰€æœ‰çš„å­ç»„ä»¶ä¹Ÿéƒ½ä¸€èµ·è¢«é‡ç»˜ã€‚å¦‚æœä½ å¸Œæœ›ç­‰åˆ°æ•´ä¸ªè§†å›¾éƒ½é‡ç»˜å®Œæ¯•ï¼Œå¯ä»¥åœ¨ updated é‡Œä½¿ç”¨ vm.$nextTickï¼š</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="activated"><a href="#activated" class="headerlink" title="activated"></a>activated</h2><p>è¢« keep-alive ç¼“å­˜çš„ç»„ä»¶æ¿€æ´»æ—¶è°ƒç”¨ã€‚</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="deactivated"><a href="#deactivated" class="headerlink" title="deactivated"></a>deactivated</h2><p>è¢« keep-alive ç¼“å­˜çš„ç»„ä»¶åœç”¨æ—¶è°ƒç”¨ã€‚</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="beforeDestroy"><a href="#beforeDestroy" class="headerlink" title="beforeDestroy"></a>beforeDestroy</h2><p>å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="destroyed"><a href="#destroyed" class="headerlink" title="destroyed"></a>destroyed</h2><p>å®ä¾‹é”€æ¯åè°ƒç”¨ã€‚è¯¥é’©å­è¢«è°ƒç”¨åï¼Œå¯¹åº” Vue å®ä¾‹çš„æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£ç»‘ï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨è¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿéƒ½è¢«é”€æ¯ã€‚</p><p><strong>è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</strong></p><h2 id="errorCaptured"><a href="#errorCaptured" class="headerlink" title="errorCaptured"></a>errorCaptured</h2><p>å½“æ•è·ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨ã€‚æ­¤é’©å­ä¼šæ”¶åˆ°ä¸‰ä¸ªå‚æ•°ï¼šé”™è¯¯å¯¹è±¡ã€å‘ç”Ÿé”™è¯¯çš„ç»„ä»¶å®ä¾‹ä»¥åŠä¸€ä¸ªåŒ…å«é”™è¯¯æ¥æºä¿¡æ¯çš„å­—ç¬¦ä¸²ã€‚æ­¤é’©å­å¯ä»¥è¿”å› false ä»¥é˜»æ­¢è¯¥é”™è¯¯ç»§ç»­å‘ä¸Šä¼ æ’­ã€‚</p><h1 id="å®ä¾‹æ–¹æ³•-ç”Ÿå‘½å‘¨æœŸ"><a href="#å®ä¾‹æ–¹æ³•-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="å®ä¾‹æ–¹æ³• / ç”Ÿå‘½å‘¨æœŸ"></a>å®ä¾‹æ–¹æ³• / ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="vm-mount-elementOrSelector"><a href="#vm-mount-elementOrSelector" class="headerlink" title="vm.$mount( [elementOrSelector] )"></a>vm.$mount( [elementOrSelector] )</h2><ul><li><p>å‚æ•°ï¼š</p><ul><li><p>{Element | string} [elementOrSelector]</p></li><li><p>{boolean} [hydrating]</p></li></ul></li><li><p>è¿”å›å€¼ï¼švm - å®ä¾‹è‡ªèº«</p></li><li><p>ç”¨æ³•ï¼š</p><p>  å¦‚æœ Vue å®ä¾‹åœ¨å®ä¾‹åŒ–æ—¶æ²¡æœ‰æ”¶åˆ° el é€‰é¡¹ï¼Œåˆ™å®ƒå¤„äºâ€œæœªæŒ‚è½½â€çŠ¶æ€ï¼Œæ²¡æœ‰å…³è”çš„ DOM å…ƒç´ ã€‚å¯ä»¥ä½¿ç”¨ vm.$mount() æ‰‹åŠ¨åœ°æŒ‚è½½ä¸€ä¸ªæœªæŒ‚è½½çš„å®ä¾‹ã€‚</p><p>  å¦‚æœæ²¡æœ‰æä¾› elementOrSelector å‚æ•°ï¼Œæ¨¡æ¿å°†è¢«æ¸²æŸ“ä¸ºæ–‡æ¡£ä¹‹å¤–çš„çš„å…ƒç´ ï¼Œå¹¶ä¸”ä½ å¿…é¡»ä½¿ç”¨åŸç”Ÿ DOM API æŠŠå®ƒæ’å…¥æ–‡æ¡£ä¸­ã€‚</p><p>  è¿™ä¸ªæ–¹æ³•è¿”å›å®ä¾‹è‡ªèº«ï¼Œå› è€Œå¯ä»¥é“¾å¼è°ƒç”¨å…¶å®ƒå®ä¾‹æ–¹æ³•ã€‚</p></li></ul><h2 id="vm-forceUpdate"><a href="#vm-forceUpdate" class="headerlink" title="vm.$forceUpdate()"></a>vm.$forceUpdate()</h2><ul><li><p>ç”¨æ³•ï¼š</p><p>  è¿«ä½¿ Vue å®ä¾‹é‡æ–°æ¸²æŸ“ã€‚æ³¨æ„å®ƒä»…ä»…å½±å“å®ä¾‹æœ¬èº«å’Œæ’å…¥æ’æ§½å†…å®¹çš„å­ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ‰€æœ‰å­ç»„ä»¶ã€‚</p></li></ul><h2 id="vm-nextTick-callback"><a href="#vm-nextTick-callback" class="headerlink" title="vm.$nextTick( [callback] )"></a>vm.$nextTick( [callback] )</h2><ul><li><p>å‚æ•°ï¼š</p><p>  {Function} [callback]</p></li><li><p>ç”¨æ³•ï¼š</p><p>  å°†å›è°ƒå»¶è¿Ÿåˆ°ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ä¹‹åæ‰§è¡Œã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨å®ƒï¼Œç„¶åç­‰å¾… DOM æ›´æ–°ã€‚å®ƒè·Ÿå…¨å±€æ–¹æ³• Vue.nextTick ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯å›è°ƒçš„ this è‡ªåŠ¨ç»‘å®šåˆ°è°ƒç”¨å®ƒçš„å®ä¾‹ä¸Šã€‚</p></li></ul><h2 id="vm-destroy"><a href="#vm-destroy" class="headerlink" title="vm.$destroy()"></a>vm.$destroy()</h2><ul><li><p>ç”¨æ³•ï¼š</p><p>  å®Œå…¨é”€æ¯ä¸€ä¸ªå®ä¾‹ã€‚æ¸…ç†å®ƒä¸å…¶å®ƒå®ä¾‹çš„è¿æ¥ï¼Œè§£ç»‘å®ƒçš„å…¨éƒ¨æŒ‡ä»¤åŠäº‹ä»¶ç›‘å¬å™¨ã€‚</p><p>  è§¦å‘ beforeDestroy å’Œ destroyed çš„é’©å­ã€‚</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° Vue ï¼ˆå››ï¼‰ç»„ä»¶</title>
      <link href="/2021/08/29/xiao-bai-cai-bi-ji-vue-si-zu-jian/"/>
      <url>/2021/08/29/xiao-bai-cai-bi-ji-vue-si-zu-jian/</url>
      
        <content type="html"><![CDATA[<p>ç»„ä»¶ç³»ç»Ÿæ˜¯Vueçš„ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨å°å‹ã€ç‹¬ç«‹å’Œé€šå¸¸å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤§å‹åº”ç”¨ã€‚</p><h1 id="è‡ªå®šä¹‰ç»„ä»¶"><a href="#è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="è‡ªå®šä¹‰ç»„ä»¶"></a>è‡ªå®šä¹‰ç»„ä»¶</h1><ul><li>å…¨å±€ç»„ä»¶</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å®šä¹‰ä¸€ä¸ªåä¸º button-counter çš„æ–°ç»„ä»¶</span>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'button-counter'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">'&lt;button v-on:click="count++"&gt;You clicked me {{ count }} times.&lt;/button&gt;'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>     <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#components-demo'</span><span class="token punctuation">,</span>    <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div id="components-demo"&gt;  &lt;button-counter&gt;&lt;/button-counter&gt;&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>å•æ–‡ä»¶ç»„ä»¶</li></ul><p>å•æ–‡ä»¶ç»„ä»¶ä¿å­˜åœ¨æ–‡ä»¶æ‰©å±•åä¸º<code>.vue</code>çš„æ–‡ä»¶ä¸­ï¼Œåœ¨<code>main.js</code>æ–‡ä»¶ä¸­ç”¨<code>import</code>å¼•å…¥</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>button v<span class="token operator">-</span>on<span class="token operator">:</span>click<span class="token operator">=</span><span class="token string">"count++"</span><span class="token operator">&gt;</span>      You clicked me <span class="token punctuation">{</span><span class="token punctuation">{</span> count <span class="token punctuation">}</span><span class="token punctuation">}</span> times<span class="token punctuation">.</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span>      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>ç›¸æ¯”äºå…¨å±€ç»„ä»¶ï¼Œå•æ–‡ä»¶ç»„ä»¶æ²¡æœ‰å”¯ä¸€å‘½åçš„é™åˆ¶ï¼Œè€Œä¸”æ”¯æŒCSSï¼Œå¯ä»¥ç”¨é¢„å¤„ç†å™¨æ„å»ºã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° Vue ï¼ˆä¸‰ï¼‰ä¿®é¥°ç¬¦</title>
      <link href="/2021/08/28/xiao-bai-cai-bi-ji-vue-san-xiu-shi-fu/"/>
      <url>/2021/08/28/xiao-bai-cai-bi-ji-vue-san-xiu-shi-fu/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¿®é¥°ç¬¦"><a href="#ä¿®é¥°ç¬¦" class="headerlink" title="ä¿®é¥°ç¬¦"></a>ä¿®é¥°ç¬¦</h1><p>ä¿®é¥°ç¬¦ (modifier) æ˜¯ä»¥åŠè§’å¥å·<code>.</code>æŒ‡æ˜çš„ç‰¹æ®Šåç¼€ï¼Œç”¨äºæŒ‡å‡ºä¸€ä¸ªæŒ‡ä»¤åº”è¯¥ä»¥ç‰¹æ®Šæ–¹å¼ç»‘å®šã€‚</p><p>å¸¸è§çš„ä¿®é¥°ç¬¦</p><ul><li><code>.stop</code>ï¼šé˜»æ­¢äº‹ä»¶å†’æ³¡</li><li><code>.prevent</code>ï¼šå–æ¶ˆäº‹ä»¶é»˜è®¤è¡Œä¸º</li><li><code>.sync</code>ï¼šç”¨äºå¯¹<code>prop</code>çš„åŒå‘ç»‘å®š</li></ul><p>è¿™é‡Œæœ‰ä¸€ä¸ªå…³äº<code>.sync</code>ç”¨æ³•çš„<a href="https://codesandbox.io/s/musing-greider-pk5ze?file=/src/App.vue">ä¾‹å­</a></p><p>çˆ¶ç»„ä»¶ä»£ç </p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;template&gt;  &lt;div id="app"&gt;    {{total}}&lt;br/&gt;    ä½¿ç”¨@update:total    &lt;Child :total="total" @update:total="total = $event"&gt;&lt;/Child&gt;    ä½¿ç”¨.sync    &lt;Child :total.sync="total"&gt;&lt;/Child&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from "./Child.vue"export default {  name: "App",  data: () =&gt; {    return {      total: 100    }  },  components: {    Child: Child  }};&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­ç»„ä»¶ä»£ç </p><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;template&gt;&lt;div&gt;  &lt;button @click="$emit('update:total', total+10)"&gt;+10&lt;/button&gt;  &lt;button @click="$emit('update:total', total-10)"&gt;-10&lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default {  props: ['total']}&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»¥ä¸Šä»£ç å®ç°é€šè¿‡ç‚¹å‡»å­ç»„ä»¶æŒ‰é’®ä¿®æ”¹çˆ¶ç»„ä»¶æ•°æ®ã€‚é€šè¿‡ä¾‹å­å¯ä»¥çœ‹åˆ°<code>.sync</code>èƒ½å¤Ÿå®ç°å’Œ<code>@update:total="total = $event"</code>ä¸€æ ·çš„æ•ˆæœã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆè¯† MVC</title>
      <link href="/2021/08/27/qian-xi-mvc/"/>
      <url>/2021/08/27/qian-xi-mvc/</url>
      
        <content type="html"><![CDATA[<h1 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="headerlink" title="è®¾è®¡æ¨¡å¼"></a>è®¾è®¡æ¨¡å¼</h1><p>å®˜æ–¹ä¸€ç‚¹çš„è§£é‡Šï¼šè®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“</p><p>emmmmmm æµ…æ˜¾ä¸€ç‚¹ç†è§£å°±æ˜¯<strong>å¯¹é€šç”¨ä»£ç å†™æ³•æ¨¡å¼å–ä¸ªåå­—</strong></p><h1 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h1><ul><li><p>M(Model)</p><p>æ¨¡å‹å±‚ï¼Œç”¨äºå°è£…ä¸åº”ç”¨ç¨‹åºçš„ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„æ•°æ®ä»¥åŠå¯¹æ•°æ®çš„å¤„ç†æ–¹æ³•</p></li><li><p>V(View)</p><p>è§†å›¾å±‚ï¼Œç•Œé¢è®¾è®¡äººå‘˜è¿›è¡Œå›¾å½¢ç•Œé¢è®¾è®¡ï¼Œæ˜¯ç”¨æˆ·çœ‹åˆ°å¹¶ä¸ä¹‹äº¤äº’çš„ç•Œé¢</p></li><li><p>C(Controller)</p><p>æ§åˆ¶å±‚ï¼Œè¿æ¥è§†å›¾å’Œæ¨¡å‹æ¡¥æ¢ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œæ ¹æ®è§†å›¾å±‚è¾“å…¥çš„æŒ‡ä»¤ï¼Œé€‰å–æ¨¡å‹å±‚æ•°æ®ï¼Œè¿›è¡Œç›¸åº”æ“ä½œæ•´åˆå°†ç»“æœåé¦ˆç»™è§†å›¾å±‚</p></li></ul><p>ç”¨ä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨ä¸ºä¾‹</p><p>Model / View / Controller ä¼ªä»£ç </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// Model.js</span>Model <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* ç¨‹åºéœ€è¦æ“ä½œçš„æ•°æ®æˆ–ä¿¡æ¯ */</span> <span class="token punctuation">}</span>ï¼Œ    <span class="token literal-property property">create</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* å¢æ•°æ® */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token keyword">delete</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">/* åˆ æ•°æ® */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">update</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>data<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">//ä½¿ç”¨æ–°æ•°æ®æ›¿æ¢æ—§æ•°æ®</span>       eventBus<span class="token punctuation">.</span><span class="token function">trigger</span><span class="token punctuation">(</span><span class="token string">'m:upate'</span><span class="token punctuation">)</span> <span class="token comment">// eventBusè§¦å‘'m:update'ä¿¡æ¯, é€šçŸ¥Viewåˆ·æ–° </span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">get</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">/* è·å–æ•°æ® */</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token comment">// View.js</span>View <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token comment">/* éœ€è¦åˆ·æ–°çš„å…ƒç´  */</span><span class="token punctuation">,</span>    <span class="token literal-property property">html</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„å†…å®¹</span><span class="token template-punctuation string">`</span></span>    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        v<span class="token punctuation">.</span>el<span class="token operator">:</span> <span class="token comment">/* éœ€è¦åˆ·æ–°çš„å…ƒç´  */</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/* åˆ·æ–°é¡µé¢ */</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// Controller.js</span>Controller <span class="token operator">=</span> <span class="token punctuation">{</span>   <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      v<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Viewåˆå§‹åŒ–</span>      v<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// ç¬¬ä¸€æ¬¡æ¸²æŸ“</span>      c<span class="token punctuation">.</span><span class="token function">autoBindEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è‡ªåŠ¨çš„äº‹ä»¶ç»‘å®š</span>      eventBus<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'m:update'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> v<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// å½“eventBusè§¦å‘'m:update'æ—¶Viewåˆ·æ–°</span>   <span class="token punctuation">}</span><span class="token punctuation">,</span>   <span class="token literal-property property">events</span><span class="token operator">:</span><span class="token punctuation">{</span> <span class="token comment">/* äº‹ä»¶ä»¥å“ˆå¸Œè¡¨æ–¹å¼è®°å½• */</span> <span class="token punctuation">}</span>ï¼Œ   <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      data <span class="token operator">=</span> <span class="token comment">/* æ”¹å˜åçš„æ–°æ•°æ® */</span>      m<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>   <span class="token punctuation">}</span>ï¼Œ   <span class="token function">autoBindEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* è‡ªåŠ¨ç»‘å®šäº‹ä»¶ */</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="https://codesandbox.io/s/goofy-zeh-enq6s?file=/src/index.js">åœ¨ codesandbox ä¸Šé¢„è§ˆ</a></p><h1 id="æŠ½è±¡æ€ç»´"><a href="#æŠ½è±¡æ€ç»´" class="headerlink" title="æŠ½è±¡æ€ç»´"></a>æŠ½è±¡æ€ç»´</h1><h2 id="æœ€å°çŸ¥è¯†åŸåˆ™"><a href="#æœ€å°çŸ¥è¯†åŸåˆ™" class="headerlink" title="æœ€å°çŸ¥è¯†åŸåˆ™"></a>æœ€å°çŸ¥è¯†åŸåˆ™</h2><p>éœ€è¦çŸ¥é“çš„çŸ¥è¯†è¶Šå°‘è¶Šå¥½</p><p>ä¾‹å­ ğŸŒ°</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// XXX.js</span><span class="token keyword">import</span> <span class="token string">'XXX.css'</span>  <span class="token comment">// å¯¼å…¥æ ·å¼æ–‡ä»¶</span><span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;é¡µé¢è¦å†™çš„å†…å®¹&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token comment">/* å…¶ä»–ä»£ç  */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨  <code>.html</code> æ–‡ä»¶ä¸­å¼•å…¥è¿™ä¸ª <code>.js</code> æ–‡ä»¶ï¼ˆä¸‹é¢â€˜æ¨¡å—â€™æŒ‡è¿™ä¸ª <code>.js</code> æ–‡ä»¶ï¼‰å³å¯è·å¾—è¿™ä¸ªæ¨¡å—æœ‰å…³çš„ Dom å…ƒç´ ã€æ ·å¼å’Œè¡Œä¸ºï¼Œå¯¹äº <code>.html</code> æ–‡ä»¶è€Œè¨€ä¸éœ€è¦å†å¼•å…¥ä¸€ä¸ªç›¸å…³çš„æ ·å¼æ–‡ä»¶ï¼Œå¹¶ä¸”ä¹Ÿä¸éœ€è¦ç¼–å†™è¿™ä¸ªæ¨¡å—æ‰€éœ€çš„ Dom ç»“æ„</p><p>è¿™æ ·åšä¼šä½¿å¾—é¡µé¢ä¸€å¼€å§‹æ˜¯ç©ºç™½çš„ï¼Œå¯ä»¥ç”¨åŠ èŠèŠ±å›¾ã€åŠ éª¨æ¶ã€åŠ å ä½å†…å®¹ç­‰æ–¹æ³•è§£å†³</p><h2 id="ä»¥ä¸å˜åº”ä¸‡å˜"><a href="#ä»¥ä¸å˜åº”ä¸‡å˜" class="headerlink" title="ä»¥ä¸å˜åº”ä¸‡å˜"></a>ä»¥ä¸å˜åº”ä¸‡å˜</h2><p>æ—¢ç„¶ MVC æ¨¡å¼å¯ä»¥é€‚ç”¨æ¯ä¸ªæ¨¡å—çš„å†™æ³•ï¼Œé‚£å°±æ¯ä¸ªæ¨¡å—éƒ½è¿™æ ·å†™å¥½äº†ï¼ˆè¿™é‡Œéœ€è¦ä¸¤ä¸ªä¾‹å­å¯¹æ¯”ï¼‰</p><p>ä»£ä»·æ˜¯æœ‰æ—¶å€™ä¼šæœ‰ä¸€äº›å¤šä½™ä¸ç”¨çš„ä»£ç </p><h2 id="è¡¨é©±åŠ¨ç¼–ç¨‹"><a href="#è¡¨é©±åŠ¨ç¼–ç¨‹" class="headerlink" title="è¡¨é©±åŠ¨ç¼–ç¨‹"></a>è¡¨é©±åŠ¨ç¼–ç¨‹</h2><p>è¡¨é©±åŠ¨ç¼–ç¨‹æ˜¯æŒ‡å°†é‡è¦çš„ä¿¡æ¯å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œåˆ©ç”¨è¡¨æ¥ç¼–ç¨‹ç®€åŒ–é‡å¤çš„ä»£ç ï¼Œä»è€Œä¸å¿…ä½¿ç”¨å¾ˆå¤šçš„é€»è¾‘ï¼ˆif æˆ– switchï¼‰è¯­å¥</p><p>åœ¨ä¸Šä¾‹ä¸­ c å¯¹è±¡çš„ events å±æ€§å°±æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">events</span><span class="token operator">:</span> <span class="token punctuation">{</span>   <span class="token string-property property">'click #add1'</span><span class="token operator">:</span> <span class="token string">'add'</span><span class="token punctuation">,</span>   <span class="token string-property property">'click #minus1'</span><span class="token operator">:</span> <span class="token string">'minus'</span><span class="token punctuation">,</span>   <span class="token string-property property">'click #mul2'</span><span class="token operator">:</span> <span class="token string">'mul'</span><span class="token punctuation">,</span>   <span class="token string-property property">'click #divide2'</span><span class="token operator">:</span> <span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“è§¦å‘ç‚¹å‡»äº‹ä»¶çš„å¯¹è±¡æ˜¯#add1æ—¶åˆ™æ‰§è¡Œaddå‡½æ•°ï¼Œä»£ç æ•ˆæœç­‰åŒäºç›´æ¥åœ¨#add1å…ƒç´ ä¸Šç»‘å®šclickäº‹ä»¶æ‰§è¡Œaddå‡½æ•°ã€‚å½“åœ¨äº‹ä»¶ç±»å‹æˆ–ç›‘å¬å¯¹è±¡å¤šæ—¶ä½¿ç”¨å“ˆå¸Œè¡¨çš„ä¼˜ç‚¹å°±æ›´åŠ æ˜æ˜¾ï¼šä»£ç å¤æ‚åº¦ç¨³å®šæ›´æ˜“äºç†è§£</p><h2 id="äº‹ä¸è¿‡ä¸‰"><a href="#äº‹ä¸è¿‡ä¸‰" class="headerlink" title="äº‹ä¸è¿‡ä¸‰"></a>äº‹ä¸è¿‡ä¸‰</h2><p>â€œé‡å¤å³æ˜¯åŸç½ªâ€</p><p>åŒæ ·çš„ä»£ç å†™ä¸‰éï¼Œå°±åº”è¯¥æŠ½ç¦»æˆä¸€ä¸ªå‡½æ•°</p><p>åŒæ ·çš„å±æ€§å†™ä¸‰éï¼Œå°±åº”è¯¥åšæˆå…±æœ‰å±æ€§ï¼ˆåŸå‹æˆ–ç±»ï¼‰</p><p>åŒæ ·çš„åŸå‹å†™ä¸‰éï¼Œå°±åº”è¯¥ç”¨ç»§æ‰¿</p><h2 id="ä¿¯ç°å…¨å±€"><a href="#ä¿¯ç°å…¨å±€" class="headerlink" title="ä¿¯ç°å…¨å±€"></a>ä¿¯ç°å…¨å±€</h2><p>æŠŠæ‰€æœ‰çš„å¯¹è±¡çœ‹æˆç‚¹</p><p>ä¸€ä¸ªç‚¹å’Œä¸€ä¸ªç‚¹æ€ä¹ˆé€šä¿¡</p><p>ä¸€ä¸ªç‚¹å’Œå¤šä¸ªç‚¹æ€ä¹ˆé€šä¿¡</p><p>å¤šä¸ªç‚¹å’Œå¤šä¸ªç‚¹æ€ä¹ˆé€šä¿¡</p><p>æ‰¾å‡ºä¸€ä¸ªä¸“ç”¨çš„ç‚¹ EventBusï¼ˆäº‹ä»¶æ€»çº¿ï¼‰è´Ÿè´£é€šä¿¡</p><p>EventBus ä¸»è¦ç”¨äºå¯¹è±¡é—´çš„é€šä¿¡ã€‚å¦‚ä¸Šä¾‹ä¸­é€šè¿‡å®šä¹‰ä¸€ä¸ª jQuery åŒ…è£…çš„ window å¯¹è±¡è·å– jQuery æ–¹æ³•ï¼Œå¦‚ <code>on()</code>ã€ <code>trigger()</code> ç­‰ã€‚</p><h2 id="view-render-data"><a href="#view-render-data" class="headerlink" title="view = render(data)"></a>view = render(data)</h2><p>é€šè¿‡ render æ”¹å˜è§†å›¾ï¼Œåªè¦æ”¹å˜dataï¼Œå°±å¯ä»¥å¾—åˆ°å¯¹åº”çš„view, ä½¿ç”¨è™šæ‹Ÿ DOM èƒ½è®© render åªæ›´æ–°è¯¥æ›´æ–°çš„åœ°æ–¹ï¼Œä»è€Œè§£å†³æ€§èƒ½é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> è®¾è®¡æ¨¡å¼ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° Vue ï¼ˆäºŒï¼‰æŒ‡ä»¤</title>
      <link href="/2021/08/26/xiao-bai-cai-bi-ji-vue-er-zhi-ling/"/>
      <url>/2021/08/26/xiao-bai-cai-bi-ji-vue-er-zhi-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="æŒ‡ä»¤"><a href="#æŒ‡ä»¤" class="headerlink" title="æŒ‡ä»¤"></a>æŒ‡ä»¤</h1><p>æ–‡æ¡£å…³äºæŒ‡ä»¤çš„è§£é‡Šï¼š</p><pre class="line-numbers language-none"><code class="language-none">æŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ v- å‰ç¼€çš„ç‰¹æ®Š attributeã€‚æŒ‡ä»¤ attribute çš„å€¼é¢„æœŸæ˜¯å•ä¸ª JavaScript è¡¨è¾¾å¼ (v-for æ˜¯ä¾‹å¤–æƒ…å†µ)ã€‚æŒ‡ä»¤çš„èŒè´£æ˜¯ï¼Œå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äº DOMã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><code>v-text</code>ï¼šç›¸å½“äº<code>{{ æ•°æ® }}</code>ã€‚</li><li><code>v-html</code>ï¼šå¯ç”¨äºæ•°æ®å†…å®¹å«æœ‰HTMLä¸å¸Œæœ›è¢«ä½œä¸ºVueæ¨¡ç‰ˆè¿›è¡Œç¼–è¯‘æ—¶ã€‚</li><li><code>v-show</code>ï¼šæ ¹æ®è¡¨è¾¾å¼çš„å€¼åˆ‡æ¢å…ƒç´ çš„æ˜¾ç¤ºå’Œéšè—ã€‚</li><li><code>v-if</code>ï¼šæ ¹æ®è¡¨è¾¾å¼çš„çœŸå€¼æ¡ä»¶æ¸²æŸ“å…ƒç´ ã€‚</li><li><code>v-else</code>ï¼šå‰ä¸€å…„å¼Ÿå…ƒç´ å¿…é¡»æœ‰<code>v-if</code>æˆ–<code>v-else-if</code>ã€‚</li><li><code>v-else-if</code>ï¼šå‰ä¸€å…„å¼Ÿå…ƒç´ å¿…é¡»æœ‰<code>v-if</code>æˆ–<code>v-else-if</code>ã€‚</li><li><code>v-for</code>ï¼šåŸºäºæºæ•°æ®å¤šæ¬¡æ¸²æŸ“å…ƒç´ æˆ–æ¨¡æ¿å—ã€‚æ­¤</li><li><code>v-on</code>ï¼šå¯ç¼©å†™æˆ<code>@</code>ï¼Œç”¨äºç»‘å®šäº‹ä»¶ç›‘å¬å™¨ã€‚</li><li><code>v-bind</code>ï¼šå¯ç¼©å†™æˆ<code>:</code>ï¼Œç”¨äºç»‘å®švueå±æ€§ã€‚</li><li><code>v-model</code>ï¼šåœ¨è¡¨å•æ§ä»¶æˆ–è€…ç»„ä»¶ä¸Šåˆ›å»ºåŒå‘ç»‘å®šã€‚</li><li><code>v-slot</code></li><li><code>v-pre</code>ï¼šä¸ç¼–è¯‘å†…å®¹ã€‚</li><li><code>v-cloak</code></li><li><code>v-once</code></li></ul><h1 id="æŒ‡ä»¤å‚æ•°"><a href="#æŒ‡ä»¤å‚æ•°" class="headerlink" title="æŒ‡ä»¤å‚æ•°"></a>æŒ‡ä»¤å‚æ•°</h1><p>ä¸€äº›æŒ‡ä»¤èƒ½å¤Ÿæ¥æ”¶ä¸€ä¸ªâ€œå‚æ•°â€ï¼Œåœ¨æŒ‡ä»¤åç§°ä¹‹åä»¥å†’å·è¡¨ç¤ºã€‚å¦‚</p><pre class="line-numbers language-none"><code class="language-none">v-bind:class="className"v-on:click="doSomething"v-on:[eventName]="doSomething"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçš„<code>class</code>ã€<code>click</code>ã€<code>[eventName]</code>å°±æ˜¯å‚æ•°ï¼Œ<code>[eventName]</code>å¯ä»¥åŠ¨æ€ç›‘å¬äº‹ä»¶ç±»å‹ï¼Œæ¯”å¦‚å½“ eventName çš„å€¼ä¸º â€œclickâ€ æ—¶ï¼Œv-on:[eventName] å°†ç­‰ä»·äº v-on:clickã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®° Vue ï¼ˆä¸€ï¼‰åŸºç¡€ç¯‡</title>
      <link href="/2021/08/25/xiao-bai-cai-bi-ji-vue-yi-ji-chu-pian/"/>
      <url>/2021/08/25/xiao-bai-cai-bi-ji-vue-yi-ji-chu-pian/</url>
      
        <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼š</p><p><strong>å­¦ä¹ Vueè¦è½¬åŒ–æ€æƒ³</strong>ï¼šä¸è¦æƒ³ç€æ€ä¹ˆæ“ä½œ DOMï¼Œè€Œæ˜¯æƒ³ç€å¦‚ä½•æ“ä½œæ•°æ®ï¼</p><p>Vue çš„æ–‡æ¡£å¾ˆé€šä¿—æ˜“æ‡‚ï¼Œå­¦ä¹ ç»†èŠ‚ç§»æ­¥<a href="https://cn.vuejs.org/v2/guide/">å®˜ç½‘</a></p><h1 id="å…³äº-Vue"><a href="#å…³äº-Vue" class="headerlink" title="å…³äº Vue"></a>å…³äº Vue</h1><p>Vue æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ï¼ˆç”±æµ…å…¥æ·±ï¼‰æ¡†æ¶ã€‚</p><p>ä½¿ç”¨æ–¹å¼</p><ul><li>ä½¿ç”¨ <code>&lt;script&gt;</code> å¼•å…¥ï¼Œå¯ä»¥åˆ° <a href="https://www.bootcdn.cn/">BootCDN</a> æœç´¢ <code>Vue</code></li><li>ä½¿ç”¨ NPM å®‰è£…</li><li>ä½¿ç”¨ <a href="https://cli.vuejs.org/zh/guide/"><code>vue-cli</code></a> åˆ›å»º Vue åº”ç”¨</li></ul><h1 id="Vue-çš„ä¸¤ä¸ªæ„å»ºç‰ˆæœ¬"><a href="#Vue-çš„ä¸¤ä¸ªæ„å»ºç‰ˆæœ¬" class="headerlink" title="Vue çš„ä¸¤ä¸ªæ„å»ºç‰ˆæœ¬"></a>Vue çš„ä¸¤ä¸ªæ„å»ºç‰ˆæœ¬</h1><ul><li><p>å®Œæ•´ç‰ˆï¼šåŒæ—¶åŒ…å«ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚</p><p>å¯¹åº”æ–‡ä»¶åï¼švue.js/vue.min.js</p></li><li><p>è¿è¡Œæ—¶ï¼šç”¨æ¥åˆ›å»º Vue å®ä¾‹ã€æ¸²æŸ“å¹¶å¤„ç†è™šæ‹Ÿ DOM ç­‰çš„ä»£ç ã€‚åŸºæœ¬ä¸Šå°±æ˜¯é™¤å»ç¼–è¯‘å™¨çš„å…¶å®ƒä¸€åˆ‡ã€‚</p><p>å¯¹åº”æ–‡ä»¶åï¼švue.runtime.js/vue.runtime.min.js</p></li></ul><p>PSï¼š.min.js æ–‡ä»¶ä¸ºæ— æ³¨é‡Šæ— æ ¼å¼è¢«å‹ç¼©çš„ js æ–‡ä»¶</p><p>ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«ï¼š</p><p>å®Œæ•´ç‰ˆèƒ½å¤Ÿç¼–è¯‘ <code>template</code>ï¼Œæ¯”å¦‚ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ç»™ template é€‰é¡¹ï¼ˆ<code>.vue</code>æ–‡ä»¶/å•æ–‡ä»¶ç»„ä»¶ï¼‰ï¼Œæˆ–æŒ‚è½½åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šå¹¶ä»¥å…¶ DOM å†…éƒ¨çš„ HTML ä½œä¸ºæ¨¡æ¿ã€‚</p><p>ä½¿ç”¨ webpack æˆ– @vue/cli å¼•å…¥æ—¶éœ€é¢å¤–è®¾ç½®</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// å•æ–‡ä»¶ç»„ä»¶</span><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>greeting<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token function-variable function">data</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span>        <span class="token literal-property property">greeting</span><span class="token operator">:</span> <span class="token string">"Hello World!"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span><span class="token comment">/* ä¸€äº›æ ·å¼ */</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿è¡Œæ—¶ç‰ˆæœ¬ä¸èƒ½ç¼–è¯‘ <code>template</code> ï¼Œå®ƒé€šè¿‡ <code>render(createElement)</code> æ¸²æŸ“èŠ‚ç‚¹ã€‚</p><p>ä½¿ç”¨ webpack æˆ– @vue/cli å¼•å…¥æ—¶é»˜è®¤ä½¿ç”¨æ­¤ç‰ˆ</p><p>ä¸Šé¢çš„ä¾‹å­ç”¨ <code>render</code> æ¸²æŸ“</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">createElement</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">,</span> <span class="token string">'Hello World!'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€ä½³å®è·µï¼šæ€»æ˜¯ä½¿ç”¨è¿è¡Œæ—¶ç‰ˆæœ¬ï¼Œé…åˆä½¿ç”¨ <a href="https://vue-loader.vuejs.org/zh/#vue-loader-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><code>vue-loader</code></a> åœ¨æ„å»ºæ—¶æŠŠ <code>.vue</code> æ–‡ä»¶å†…éƒ¨çš„æ¨¡æ¿é¢„ç¼–è¯‘æˆ JavaScript </p><h1 id="Vue-å®ä¾‹"><a href="#Vue-å®ä¾‹" class="headerlink" title="Vue å®ä¾‹"></a>Vue å®ä¾‹</h1><p>æ¯ä¸ª Vue åº”ç”¨éƒ½æ˜¯é€šè¿‡ç”¨ Vue å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue å®ä¾‹å¼€å§‹çš„</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>  <span class="token comment">// é€‰é¡¹</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><a href="https://codesandbox.io/s/vue">å¼€å§‹ä½¿ç”¨ Vue å§ ğŸŒ</a></p><p>ğŸ¤« å¯ä»¥åº·åº· public/index.htmlã€src/main.js å’Œ src/App.vue å…ˆç†Ÿæ‚‰ä¸‹ Vue æ˜¯æ€ä¹ˆç”¨çš„</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®°--Reactï¼ˆäº”ï¼‰å—æ§ç»„ä»¶ä¸éå—æ§ç»„ä»¶</title>
      <link href="/2021/08/23/xiao-bai-cai-bi-ji-react-wu-shou-kong-zu-jian-yu-fei-shou-kong-zu-jian/"/>
      <url>/2021/08/23/xiao-bai-cai-bi-ji-react-wu-shou-kong-zu-jian-yu-fei-shou-kong-zu-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="å—æ§ç»„ä»¶"><a href="#å—æ§ç»„ä»¶" class="headerlink" title="å—æ§ç»„ä»¶"></a>å—æ§ç»„ä»¶</h1><p>åœ¨HTMLçš„è¡¨å•å…ƒç´ ä¸­ï¼Œå®ƒä»¬é€šå¸¸è‡ªå·±ç»´æŠ¤ä¸€å¥—stateï¼Œå¹¶éšç€ç”¨æˆ·çš„è¾“å…¥è‡ªå·±è¿›è¡ŒUIä¸Šçš„æ›´æ–°ï¼Œè¿™ç§è¡Œä¸ºæ˜¯ä¸è¢«æˆ‘ä»¬ç¨‹åºæ‰€ç®¡æ§çš„ã€‚è€Œå¦‚æœå°†Reacté‡Œçš„stateå±æ€§å’Œè¡¨å•å…ƒç´ çš„å€¼å»ºç«‹ä¾èµ–å…³ç³»ï¼Œå†é€šè¿‡onChangeäº‹ä»¶ä¸setState()ç»“åˆæ›´æ–°stateå±æ€§ï¼Œå°±èƒ½è¾¾åˆ°æ§åˆ¶ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢«Reactä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšå—æ§ç»„ä»¶</p><p>ä¸Šé¢è¿™æ®µæè¿°ç”¨ä»£ç ç¿»è¯‘å¤§æ¦‚æ˜¯è¿™æ ·å­çš„ï¼š</p><p>å‡è®¾ HTML ä¸­æœ‰ä¸€ä¸ªè¿™æ ·çš„è¡¨å•</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>    åå­—:    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨æˆ·åœ¨ç•Œé¢ä¸Šçš„è¾“å…¥æ¡†è¾“å…¥å†…å®¹æ—¶ï¼Œè¡¨å•å…ƒç´ ä¼šæ ¹æ®ç”¨æˆ·çš„è¾“å…¥è‡ªå·±è¿›è¡Œ UI ä¸Šçš„æ›´æ–°ï¼ˆè¡¨å•å…ƒç´ ä¸ŠæŠ½è±¡çš„ state ä½œç”¨ï¼‰</p><p>åœ¨ React ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æ§åˆ¶è¾“å…¥æ¡†å†…å®¹ï¼Œå¯ä»¥åœ¨ this.state ä¸­å®šä¹‰ä¸€ä¸ª valueå±æ€§ï¼Œå¹¶å°†è¡¨å•å…ƒç´ ä¸Šçš„ value æŒ‡å®šä¸ºè¿™ä¸ªå±æ€§</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">NameForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">          åå­—:          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç„¶è€Œå½“æˆ‘ä»¬å°è¯•åœ¨è¡¨å•å…ƒç´ ä¸­è¾“å…¥å†…å®¹æ—¶å°±ä¼šå‘ç°è¿™ä¸ªè¡¨å•å…ƒç´ çš„å†…å®¹å¹¶æ²¡æœ‰è¿›è¡Œæ›´æ–°ï¼Œè¿™æ˜¯å› ä¸ºè¡¨å•å…ƒç´ çš„ value è¢« this.state.value æ§åˆ¶ï¼Œå½“ç”¨æˆ·è¾“å…¥æ–°çš„å†…å®¹æ—¶ï¼Œthis.state.value å¹¶ä¸ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ä½†æ˜¯å¯ä»¥ç”¨ä¸€ä¸ª onChange äº‹ä»¶æ¥ç›‘å¬è¾“å…¥å†…å®¹çš„æ”¹å˜å¹¶ä½¿ç”¨ setState æ›´æ–° this.state.value</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">NameForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// é€šè¿‡ this.state.value è·å–</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'æäº¤çš„åå­—: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">          åå­—:          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>æäº¤<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™å°±æ˜¯å—æ§ç»„ä»¶çš„å¸¸ç”¨å§¿åŠ¿äº†ï¼Œåœ¨è¡¨å•å…ƒç´ ä¸Šè®¾ç½® value å±æ€§ï¼Œé€šè¿‡ onChange äº‹ä»¶ä¸ setState() ç»“åˆæ›´æ–° value å±æ€§</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FInput</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fn<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="éå—æ§ç»„ä»¶"><a href="#éå—æ§ç»„ä»¶" class="headerlink" title="éå—æ§ç»„ä»¶"></a>éå—æ§ç»„ä»¶</h1><p>æœ‰æ—¶æˆ‘ä»¬ä»…ä»…æ˜¯æƒ³è¦è·å–æŸä¸ªè¡¨å•å…ƒç´ çš„å€¼ï¼Œè€Œä¸å…³å¿ƒå®ƒæ˜¯å¦‚ä½•æ”¹å˜çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ref æ¥ä» DOM èŠ‚ç‚¹ä¸­è·å–è¡¨å•æ•°æ®ï¼Œå¹¶ä¸éœ€è¦ä¸ºæ¯ä¸ªçŠ¶æ€æ›´æ–°éƒ½ç¼–å†™æ•°æ®å¤„ç†å‡½æ•°</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">NameForm</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>input <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// é€šè¿‡ this.input.current.value è·å–</span>    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'A name was submitted: '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">.</span>current<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>    event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">onSubmit</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">          Name:          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>input<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Submit<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éå—æ§ç»„ä»¶çœ‹èµ·æ¥æ›´åƒä¼ ç»Ÿçš„ HTML è¡¨å•ï¼Œç®€å•æ¥å†™å°±æ˜¯ï¼š</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FInput</span></span> <span class="token attr-name">defaultValue</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>x<span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>input<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="å¦‚ä½•é€‰æ‹©"><a href="#å¦‚ä½•é€‰æ‹©" class="headerlink" title="å¦‚ä½•é€‰æ‹©"></a>å¦‚ä½•é€‰æ‹©</h1><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®˜æ–¹æ¨èä½¿ç”¨å—æ§ç»„ä»¶æ¥å¤„ç†è¡¨å•æ•°æ®</p><table><thead><tr><th>åº”ç”¨åœºæ™¯</th><th>éå—æ§ç»„ä»¶</th><th>å—æ§ç»„ä»¶</th></tr></thead><tbody><tr><td>ä¸€æ¬¡æ€§å€¼æ£€ç´¢ï¼ˆä¾‹å¦‚æäº¤æ—¶ï¼‰</td><td>âœ…</td><td>âœ…</td></tr><tr><td>æäº¤æ—¶éªŒè¯</td><td>âœ…</td><td>âœ…</td></tr><tr><td>å³æ—¶éªŒè¯</td><td>âŒ</td><td>âœ…</td></tr><tr><td>æœ‰æ¡ä»¶ç¦ç”¨æŒ‰é’®</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å¼ºåˆ¶è¾“å…¥æ ¼å¼</td><td>âŒ</td><td>âœ…</td></tr><tr><td>ä¸€ä¸ªæ•°æ®çš„å¤šä¸ªè¾“å…¥</td><td>âŒ</td><td>âœ…</td></tr><tr><td>åŠ¨æ€è¾“å…¥</td><td>âŒ</td><td>âœ…</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‚£äº›å¹´ï¼Œè¢« AJAX æŠ˜ç£¨çš„å‰ç«¯å°ç™½</title>
      <link href="/2021/08/22/js-de-san-zuo-da-shan-zhi-ajax/"/>
      <url>/2021/08/22/js-de-san-zuo-da-shan-zhi-ajax/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åˆšå¼€å§‹å­¦ <code>JavaScript</code> æ—¶ï¼Œæœ€æ·±æ¶ç—›ç»çš„ä¸‰ä¸ª JSæ€ªğŸ‘¹ï¼š<strong>thiså¦–</strong>ã€<strong>åŸå‹ç²¾</strong>å’Œ <strong>AJAXé­”</strong></p><p>æœ€è¿‘åœ¨å†™æ€»ç»“å›é¡¾æ—¶ç«Ÿæ„å¤–å‘ç°è¿™ä¸‰å¤§æ€ªæ—©å·²åœ¨ä¸çŸ¥ä¸è§‰ä¸­è¢«æˆ‘æ¶ˆåŒ–å¸æ”¶äº†ï¼Œè¶ç€çƒ­ä¹è®°ä¸‹æ¥âœ~~~</p><p>æœ‰è¯·ä»Šå¤©çš„å‡ºåœºå˜‰å®¾ğŸ¤ï¼šAJAXé­”</p><h1 id="ä»€ä¹ˆæ˜¯-AJAX"><a href="#ä»€ä¹ˆæ˜¯-AJAX" class="headerlink" title="ä»€ä¹ˆæ˜¯ AJAX"></a>ä»€ä¹ˆæ˜¯ AJAX</h1><p>AJAX æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå¿«é€ŸåŠ¨æ€ç½‘é¡µçš„æŠ€æœ¯ï¼Œå®ƒä½¿ç”¨ <code>XMLHttpRequest</code> å¯¹è±¡ä¸æœåŠ¡å™¨é€šä¿¡ã€‚ å®ƒå¯ä»¥ä½¿ç”¨JSONï¼ŒXMLï¼ŒHTMLå’Œtextæ–‡æœ¬ç­‰æ ¼å¼å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚AJAXæœ€å¸å¼•äººçš„å°±æ˜¯å®ƒçš„â€œ<strong>å¼‚æ­¥</strong>â€ç‰¹æ€§ï¼Œå®ƒå¯ä»¥åœ¨ä¸é‡æ–°åˆ·æ–°é¡µé¢çš„æƒ…å†µä¸‹ä¸æœåŠ¡å™¨é€šä¿¡ï¼Œäº¤æ¢æ•°æ®ï¼Œæˆ–æ›´æ–°é¡µé¢ã€‚</p><h1 id="ä»€ä¹ˆæ˜¯å¼‚æ­¥"><a href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯å¼‚æ­¥"></a>ä»€ä¹ˆæ˜¯å¼‚æ­¥</h1><p>ä¸ç­‰ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç›´æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡</p><p>ä¸¾ä¸ªä¾‹å­ ğŸŒ°</p><p>å‘¨æœ«æˆ‘å’Œé—ºèœœå»é€›gaiï¼Œæˆ‘ä»¬æ‰“ç®—å»åƒæµ·åº•æï¼Œæ’é˜Ÿçš„äººå¾ˆå¤šï¼Œäºæ˜¯æˆ‘ä»¬æ‰‹æœºæ‰«ç æ’å·ï¼Œç„¶åç»§ç»­é€›gaiï¼Œè¿‡ä¸€ä¼šæ”¶åˆ°å«å·é€šçŸ¥å°±å¯ä»¥è¿›å»åƒç«é”…å•¦~</p><p>ã€Œæ’å·ã€è¿™ä»¶äº‹å¹¶æ²¡æœ‰ç«‹å³å¾—åˆ°ç»“æœï¼ˆè¿›å»åƒç«é”…ï¼‰ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡</p><p>AJAX è¯·æ±‚æ•°æ®æµç¨‹ä¸æ­¤ç±»ä¼¼ã€‚</p><p>æµè§ˆå™¨é€šè¿‡ <code>XMLHttpRequest</code> å¯¹è±¡å‘æœåŠ¡å™¨å‘å‡ºHTTPè¯·æ±‚ä¸æ¥æ”¶HTTPå“åº”ï¼Œæµè§ˆå™¨æ¥ç€åšå…¶ä»–äº‹æƒ…ï¼Œç­‰æ”¶åˆ° <code>XMLHttpRequest</code> å¯¹è±¡è¿”å›æ¥çš„æ•°æ®å†æ¸²æŸ“é¡µé¢ã€‚</p><h1 id="AJAX-çš„ä½¿ç”¨"><a href="#AJAX-çš„ä½¿ç”¨" class="headerlink" title="AJAX çš„ä½¿ç”¨"></a>AJAX çš„ä½¿ç”¨</h1><h2 id="1-åˆ›å»ºAjaxæ ¸å¿ƒå¯¹è±¡XMLHttpRequest"><a href="#1-åˆ›å»ºAjaxæ ¸å¿ƒå¯¹è±¡XMLHttpRequest" class="headerlink" title="1. åˆ›å»ºAjaxæ ¸å¿ƒå¯¹è±¡XMLHttpRequest"></a>1. åˆ›å»ºAjaxæ ¸å¿ƒå¯¹è±¡XMLHttpRequest</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> httpRequest <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Mozilla, Safari, IE7+ ...</span>    httpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>ActiveXObject<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// IE 6 and older</span>    httpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-å‘é€HTTPè¯·æ±‚"><a href="#2-å‘é€HTTPè¯·æ±‚" class="headerlink" title="2. å‘é€HTTPè¯·æ±‚"></a>2. å‘é€HTTPè¯·æ±‚</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">httpRequest<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> async<span class="token punctuation">)</span>httpRequest<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>methodï¼šHTTPè¯·æ±‚æ–¹æ³• - æœ‰GETï¼ŒPOSTï¼ŒHEADä»¥åŠæœåŠ¡å™¨æ”¯æŒçš„å…¶ä»–æ–¹æ³•</p><p>urlï¼šæ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šçš„ä½ç½®ã€‚ç”±äºå®‰å…¨åŸå› ï¼Œé»˜è®¤ä¸èƒ½è°ƒç”¨ç¬¬ä¸‰æ–¹URLåŸŸå</p><p>asyncï¼šç”¨äºè®¾ç½®è¯·æ±‚trueï¼ˆå¼‚æ­¥ï¼‰æˆ– falseï¼ˆåŒæ­¥ï¼‰ </p><p>send() æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä»»ä½•ä½ æƒ³å‘é€ç»™æœåŠ¡å™¨çš„å†…å®¹ã€‚</p><p>å¦‚æœæ˜¯ POST è¯·æ±‚çš„è¯ï¼Œéœ€æ³¨æ„ï¼š</p><ul><li>åœ¨è°ƒç”¨ send() æ–¹æ³•è·å–è¡¨å•æ•°æ®å‰è¦è®¾ç½®è¯·æ±‚å¤´çš„æ ¼å¼å†…å®¹</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">httpRequest<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/x-www-form-urlencoded'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>å‘é€è¡¨å•æ•°æ®æ—¶åº”è¯¥ç”¨æœåŠ¡å™¨å¯ä»¥è§£æçš„æ ¼å¼ï¼ŒåƒæŸ¥è¯¢è¯­å¥ï¼ŒJSONï¼ŒXMLç­‰</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// ä¸¾ä¾‹</span>httpRequest<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"name=xcl&amp;anothername=April"</span><span class="token punctuation">)</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="3-å¤„ç†æœåŠ¡å™¨å“åº”"><a href="#3-å¤„ç†æœåŠ¡å™¨å“åº”" class="headerlink" title="3. å¤„ç†æœåŠ¡å™¨å“åº”"></a>3. å¤„ç†æœåŠ¡å™¨å“åº”</h2><p>æœ‰å…³çš„ API ï¼š</p><ul><li><p>XMLHttpRequest.onreadystatechangeï¼šåªè¦ readyState å±æ€§å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè°ƒç”¨ç›¸åº”çš„å¤„ç†å‡½æ•° </p></li><li><p>XMLHttpRequest.responseï¼šè¿”å›å“åº”çš„æ­£æ–‡ï¼Œè¿”å›çš„ç±»å‹å–å†³äº responseType å±æ€§</p></li><li><p>XMLHttpRequest.responseTextï¼šæœåŠ¡å™¨ä»¥æ–‡æœ¬å­—ç¬¦çš„å½¢å¼è¿”å›</p></li><li><p>XMLHttpRequest.responseXMLï¼šä»¥ XMLDocument å¯¹è±¡æ–¹å¼è¿”å›ï¼Œä¹‹åå°±å¯ä»¥ä½¿ç”¨JavaScriptæ¥å¤„ç†</p></li><li><p>XMLHttpRequest.readyStateï¼šè¿”å›ä¸€ä¸ª XMLHttpRequest ä»£ç†å½“å‰æ‰€å¤„çš„çŠ¶æ€ï¼ˆè¯·æ±‚çš„çŠ¶æ€ç ï¼‰ï¼Œå®ƒçš„å€¼å«ä¹‰ï¼š</p><ul><li><p>0 æœªåˆå§‹åŒ– â€“ å°šæœªè°ƒç”¨.open()æ–¹æ³•</p></li><li><p>1 å¯åŠ¨ â€“ å·²ç»è°ƒç”¨.open()æ–¹æ³•ï¼Œä½†å°šæœªè°ƒç”¨.send()æ–¹æ³•</p></li><li><p>2 å‘é€ â€“ å·²ç»è°ƒç”¨.send()æ–¹æ³•ï¼Œä½†å°šæœªæ¥æ”¶åˆ°å“åº”</p></li><li><p>3 æ¥æ”¶ â€“ å·²ç»æ¥æ”¶åˆ°éƒ¨åˆ†å“åº”æ•°æ®</p></li><li><p>4 å®Œæˆ â€“ å·²ç»æ¥æ”¶åˆ°å…¨éƒ¨å“åº”æ•°æ®ï¼Œè€Œä¸”å·²ç»å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨äº†</p></li></ul></li><li><p>XMLHttpRequest.statusï¼šè¿”å›äº† XMLHttpRequest å“åº”ä¸­çš„æ•°å­—çŠ¶æ€ï¼ˆè¯·æ±‚çš„å“åº”çŠ¶æ€ç ï¼‰ï¼Œå®ƒçš„å€¼å«ä¹‰ï¼š</p><ul><li><p>1** ä¿¡æ¯ â€“ æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œéœ€è¦è¯·æ±‚è€…ç»§ç»­æ‰§è¡Œæ“ä½œ</p></li><li><p>2** æˆåŠŸ â€“ æ“ä½œè¢«æˆåŠŸæ¥æ”¶å¹¶å¤„ç†</p></li><li><p>3** é‡å®šå‘ â€“ éœ€è¦è¿›ä¸€æ­¥çš„æ“ä½œä»¥å®Œæˆè¯·æ±‚</p></li><li><p>4** å®¢æˆ·ç«¯é”™è¯¯ â€“ è¯·æ±‚åŒ…å«è¯­æ³•é”™è¯¯æˆ–æ— æ³•å®Œæˆè¯·æ±‚</p></li><li><p>5** æœåŠ¡å™¨é”™è¯¯ â€“ æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†é”™è¯¯</p></li></ul><p>  ä¸€èˆ¬é€šè¿‡æ£€æŸ¥å“åº”ç  200 OK åˆ¤æ–­ AJAX æœ‰æ²¡æœ‰æˆåŠŸ</p></li></ul><p>ä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨å¼‚æ­¥ AJAXï¼ˆå³ open() çš„ç¬¬ä¸‰ä¸ªå‚æ•°æœªç‰¹åˆ«æŒ‡å®šæˆ–è®¾ä¸º trueï¼‰ï¼Œåœ¨å‘é€è¯·æ±‚æ—¶ï¼Œæä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°è´Ÿè´£å¤„ç†å“åº”ï¼Œä»£ç å¤§æ¦‚é•¿è¿™æ ·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">httpRequest<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>httpRequest<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> httpRequest<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">/* å¯¹ httpRequest.response çš„ä¸€äº›æ“ä½œ */</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ˜¯ä½¿ç”¨åŒæ­¥ AJAXï¼ˆå³ open() çš„ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ä¸º falseï¼‰ï¼Œåˆ™ç›´æ¥åœ¨ send() æ–¹æ³•ä¹‹åæ‰§è¡Œè¦è¿›è¡Œçš„æ“ä½œå³å¯ã€‚ä½†ä¸å»ºè®®è¿™æ ·åšï¼Œå®ƒçš„ç”¨æˆ·ä½“éªŒå¾ˆç³Ÿç³•ï¼Œå¯èƒ½ä¼šä½¿é¡µé¢åœ¨è¯·æ±‚æœŸé—´å¡ä½</p><p>AJAX çš„ç”¨æ³•å¤§æ¦‚å°±æ˜¯å¦‚æ­¤ï¼ŒæŠŠæ‰€æœ‰ä»£ç æ•´åˆåˆ°ä¸€å—æ˜¯è¿™æ ·çš„ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> httpRequest <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// Mozilla, Safari, IE7+ ...</span>    httpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>ActiveXObject<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// IE 6 and older</span>    httpRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span><span class="token punctuation">}</span>httpRequest<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> async<span class="token punctuation">)</span>httpRequest<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>httpRequest<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">if</span> <span class="token punctuation">(</span>httpRequest<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> httpRequest<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>         <span class="token comment">/* å¯¹ httpRequest.response çš„ä¸€äº›æ“ä½œ */</span>     <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ‰‹åŠ¨å°è£…-AJAX"><a href="#æ‰‹åŠ¨å°è£…-AJAX" class="headerlink" title="æ‰‹åŠ¨å°è£… AJAX"></a>æ‰‹åŠ¨å°è£… AJAX</h1><p>è¿™é‡Œä¼šç”¨åˆ° <code>Promise</code> å¯¹è±¡ã€<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDNä¼ é€é—¨</a>ã€‘</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">ajax</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> <span class="token punctuation">{</span>success<span class="token punctuation">,</span> fail<span class="token punctuation">}</span> <span class="token operator">=</span> options        <span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span>        request<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> request<span class="token punctuation">.</span>response<span class="token punctuation">)</span>                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token function">reject</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™ä¸ªå°è£…åªæ˜¯ä¸ºäº†ç†Ÿæ‚‰ <code>Promise</code> çš„ç”¨æ³•ï¼Œå°šè¿˜å­˜åœ¨è®¸å¤šé—®é¢˜ï¼ˆpost æ— æ³•ä¸Šä¼ æ•°æ®ã€ä¸èƒ½è®¾ç½®è¯·æ±‚å¤´ç­‰ï¼‰</p><h1 id="jQuery-ajax"><a href="#jQuery-ajax" class="headerlink" title="jQuery.ajax"></a>jQuery.ajax</h1><p><a href="https://www.jquery123.com/jQuery.ajax/">jQuery.ajax() æ–‡æ¡£</a></p><p>ç”¨æ³•ï¼š</p><ul><li><p>jQuery.ajax()</p></li><li><p>jQuery.ajax( url [, settings ] )</p></li><li><p>jQuery.ajax( [settings ] )</p></li></ul><p>è¿”å› jqXHR å¯¹è±¡ï¼Œå¸¸ç”¨ APIï¼š</p><ul><li><p>jqXHR.done(function(data, textStatus, jqXHR) {})ï¼šä¸€ä¸ªå¯ä¾›é€‰æ‹©çš„ success å›è°ƒé€‰é¡¹çš„æ„é€ å‡½æ•°</p></li><li><p>jqXHR.fail(function(jqXHR, textStatus, errorThrown) {})ï¼šä¸€ç§å¯ä¾›é€‰æ‹©çš„ error å›è°ƒé€‰é¡¹çš„æ„é€ å‡½æ•°</p></li><li><p>jqXHR.always(function(data|jqXHR, textStatus, jqXHR|errorThrown) { })ï¼šä¸€ç§å¯ä¾›é€‰æ‹©çš„ complete å›è°ƒé€‰é¡¹çš„æ„é€ å‡½æ•°</p></li><li><p>jqXHR.then(function(data, textStatus, jqXHR) {}, function(jqXHR, textStatus, errorThrown) {})ï¼šåŒ…å«äº† .done() å’Œ .fail()æ–¹æ³•çš„åŠŸèƒ½</p></li></ul><h1 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h1><p><a href="http://www.axios-js.com/zh-cn/docs/">axios æ–‡æ¡£</a></p><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/AJAX/Getting_Started">Ajax æ–‡æ¡£ MDN</a></p><p><a href="https://juejin.cn/post/6844903618764603399">AjaxåŸç†ä¸€ç¯‡å°±å¤Ÿäº†</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‚£äº›å¹´ï¼Œè¢«åŸå‹æŠ˜ç£¨çš„å‰ç«¯å°ç™½</title>
      <link href="/2021/08/20/js-de-san-zuo-da-shan-zhi-yuan-xing/"/>
      <url>/2021/08/20/js-de-san-zuo-da-shan-zhi-yuan-xing/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åˆšå¼€å§‹å­¦ <code>JavaScript</code> æ—¶ï¼Œæœ€æ·±æ¶ç—›ç»çš„ä¸‰ä¸ª JSæ€ªğŸ‘¹ï¼š<strong>thiså¦–</strong>ã€<strong>åŸå‹ç²¾</strong>å’Œ <strong>AJAXé­”</strong></p><p>æœ€è¿‘åœ¨å†™æ€»ç»“å›é¡¾æ—¶ç«Ÿæ„å¤–å‘ç°è¿™ä¸‰å¤§æ€ªæ—©å·²åœ¨ä¸çŸ¥ä¸è§‰ä¸­è¢«æˆ‘æ¶ˆåŒ–å¸æ”¶äº†ï¼Œè¶ç€çƒ­ä¹è®°ä¸‹æ¥âœ~~~</p><p>æœ‰è¯·ä»Šå¤©çš„å‡ºåœºå˜‰å®¾ğŸ¤ï¼šåŸå‹ç²¾</p><h1 id="å†…å­˜å›¾å­¦ä¹ æ³•"><a href="#å†…å­˜å›¾å­¦ä¹ æ³•" class="headerlink" title="å†…å­˜å›¾å­¦ä¹ æ³•"></a>å†…å­˜å›¾å­¦ä¹ æ³•</h1><p>åœ¨äº†è§£åŸå‹å‰ï¼Œå…ˆæ¥å­¦ä¸€ä¸ªå†…å­˜å›¾çš„ç®€å•ç”»æ³•ã€‚</p><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gtq38p614lj60k20c6dhz02.jpg" alt="å†…å­˜å›¾ç”»æ³•ç¤ºä¾‹.png"></p><p>æ³¨ï¼šå›¾ç¤ºå¯¹è±¡å±æ€§ä¸å®Œå…¨ï¼Œ<code>#æ•°å­—</code>ä»£è¡¨å†…å­˜åœ°å€ï¼Œå…¶æ•°å€¼ä¸ºè™šæ‹Ÿæ•°å€¼ï¼Œä»…ä½œç¤ºä¾‹ï¼Œä¸‹åŒ</p><p>ä»¥ <code>window</code> å¯¹è±¡ä¸ºä¾‹ï¼Œå±æ€§åä¿å­˜å±æ€§å€¼åœ°å€ï¼Œä¾‹å¦‚ï¼Œå±æ€§ <code>Object</code> ä¿å­˜ <code>Object å¯¹è±¡</code>çš„åœ°å€ï¼Œå³ <code>window</code> å¯¹è±¡çš„å±æ€§ <code>Object</code> æŒ‡å‘å†…å­˜ä¸­çš„<code>Object å¯¹è±¡</code></p><p>ã€è¿™é‡Œè¦æ˜ç™½ <code>Object </code>å’Œ <code>Object å¯¹è±¡</code>æ˜¯ä¸¤ä¸ªä¸œè¥¿ï¼Œ<code>Object </code>æ˜¯å­˜æ”¾ <code>Object å¯¹è±¡</code>çš„åœ°å€ï¼Œè€Œ <code>Object å¯¹è±¡</code>æ˜¯ Heap ä¸­çš„ä¸€å¨å†…å­˜æ•°æ®ï¼ŒåŒç†ï¼Œ<code>console</code> å’Œ <code>console å¯¹è±¡</code>ã€<code>Array</code> å’Œ <code>Array å¯¹è±¡</code>ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ ğŸ”‘ ã€‘</p><h1 id="ä½ æœ‰æˆ‘æœ‰å…¨éƒ½æœ‰"><a href="#ä½ æœ‰æˆ‘æœ‰å…¨éƒ½æœ‰" class="headerlink" title="ä½ æœ‰æˆ‘æœ‰å…¨éƒ½æœ‰"></a>ä½ æœ‰æˆ‘æœ‰å…¨éƒ½æœ‰</h1><p>å‡è®¾ç°åœ¨è¦å£°æ˜ä¸€ä¸ªå£«å…µï¼Œå£«å…µè¦åŒ…å«çš„å±æ€§ï¼š[ç¼–å·ï¼Œç”Ÿå‘½å€¼ï¼Œæ”»å‡»ï¼ˆåŠ¨ä½œï¼‰ï¼Œé˜²å¾¡ï¼ˆåŠ¨ä½œï¼‰]</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> å£«å…µ <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">ç¼–å·</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token literal-property property">ç”Ÿå‘½åŠ›</span><span class="token operator">:</span> <span class="token number">59</span><span class="token punctuation">,</span>    <span class="token function-variable function">æ”»å‡»</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">é˜²å¾¡</span><span class="token operator">:</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”»ä¸ªå†…å­˜å›¾çœ‹çœ‹</p><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gtq52cd045j60dg07fwfn02.jpg" alt="ä¸€ä¸ªå£«å…µå†…å­˜å›¾.png"></p><p>å¥½å•¦ï¼Œé‚£ç°åœ¨å¦‚æœè¦åˆ¶é€ ä¸€ç™¾ä¸ªå£«å…µå‘¢ï¼Ÿ</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> å£«å…µä»¬ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">var</span> å£«å…µ<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> å£«å…µ <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token literal-property property">ç¼–å·</span><span class="token operator">:</span> i<span class="token punctuation">,</span>        <span class="token literal-property property">ç”Ÿå‘½åŠ›</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>        <span class="token function-variable function">æ”»å‡»</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>        <span class="token literal-property property">é˜²å¾¡</span><span class="token operator">:</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span>    å£«å…µä»¬<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>å£«å…µ<span class="token punctuation">)</span><span class="token punctuation">}</span>å…µè¥<span class="token punctuation">.</span><span class="token function">æ‰¹é‡åˆ¶é€ </span><span class="token punctuation">(</span>å£«å…µä»¬<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gtq59j0fdyj60fn0mqwjp02.jpg" alt="ä¸€ç™¾ä¸ªå£«å…µå†…å­˜å›¾.png"></p><p>ä»å†…å­˜å›¾ä¸éš¾çœ‹å‡ºï¼Œè¿™æ ·çš„ä»£ç ååˆ†æµªè´¹å†…å­˜ã€‚</p><p>å¯¹äºæ¯ä¸ªå£«å…µè€Œè¨€ï¼Œç¼–å·å’Œç”Ÿå‘½å€¼æ˜¯å„ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºä¸€ç™¾æ¬¡ï¼Œä½†æ”»å‡»ã€é˜²å¾¡æ˜¯ä¸€æ ·çš„ï¼Œåªéœ€è¦å„è‡ªå¼•ç”¨åŒä¸€ä¸ªå‡½æ•°å°±å¯ä»¥äº†ã€‚</p><p>æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£ä¸ºä»€ä¹ˆä¸æŠŠè¿™äº›ç›¸åŒçš„ä»£ç æ•´åˆåˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œè®©è¿™äº›å£«å…µéƒ½èƒ½ä»è¿™ä¸ªåœ°æ–¹æ‹¿åˆ°è¿™äº›å±æ€§ï¼Œå¦å¤–åˆå¯¹æ¯ä¸ªå£«å…µè‡ªèº«çš„å±æ€§è¿›è¡Œå•ç‹¬èµ‹å€¼</p><p>è¿™é‡Œå¼•å…¥ä¸¤ä¸ªçŸ¥è¯†ç‚¹ï¼š</p><ul><li><p>æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆ<code>object</code>ï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆç§°ä¹‹ä¸º<code>__proto__</code>ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain">ã€ŒMDN ä¼ é€é—¨ã€</a></p></li><li><p><code>Object.create()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„ <code>__proto__</code><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create">ã€ŒMDN ä¼ é€é—¨ã€</a></p></li></ul><p>è¿™ä¸ªåŸå‹å¯¹è±¡ä¸å°±å¯ä»¥ç”¨æ¥å……å½“é‚£ä¸ªæ•´åˆç›¸åŒä»£ç çš„åœ°æ–¹ï¼Œç„¶åè®©ã€Œå£«å…µã€çš„ <code>__proto__</code> æŒ‡å‘ã€Œå£«å…µåŸå‹ã€</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> å£«å…µåŸå‹ <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token function-variable function">æ”»å‡»</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">é˜²å¾¡</span><span class="token operator">:</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">var</span> å£«å…µä»¬ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">var</span> å£«å…µ<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µ<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>å£«å…µåŸå‹<span class="token punctuation">)</span>    å£«å…µ<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ç¼–å· <span class="token operator">=</span> i    å£«å…µ<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>ç”Ÿå‘½åŠ› <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span>å…µè¥<span class="token punctuation">.</span><span class="token function">æ‰¹é‡åˆ¶é€ </span><span class="token punctuation">(</span>å£«å…µä»¬<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gtswk5jlv2j60od0d8dir02.jpg" alt="å£«å…µåŸå‹å›¾ç¬¬1ç‰ˆ.png"></p><p>ç°åœ¨å‡è‹¥å…µè¥è¦å†åˆ¶é€ 50åå£«å…µï¼Œé‚£ä¹ˆåˆ¶é€ å£«å…µï¼ˆforå¾ªç¯å†…ï¼‰çš„ä»£ç å°±è¦å†é‡æ–°å†™ä¸€éã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£å°±æŠŠåˆ¶é€ å£«å…µæŠ½ç¦»æˆä¸€ä¸ªå‡½æ•°ï¼Œåé¢æœ‰éœ€è¦å°±è°ƒç”¨è¿™ä¸ªå‡½æ•°å¥½äº†</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> å£«å…µåŸå‹ <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token function-variable function">æ”»å‡»</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">é˜²å¾¡</span><span class="token operator">:</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">var</span> å£«å…µä»¬ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">var</span> å£«å…µæ•° <span class="token operator">=</span> å£«å…µä»¬<span class="token punctuation">.</span>length<span class="token keyword">function</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span><span class="token parameter">ç¼–å·i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> å£«å…µ <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>å£«å…µåŸå‹<span class="token punctuation">)</span>    å£«å…µ<span class="token punctuation">.</span>ç¼–å· <span class="token operator">=</span> ç¼–å·i    å£«å…µ<span class="token punctuation">.</span>ç”Ÿå‘½åŠ› <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">return</span> å£«å…µ<span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µä»¬<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span>å£«å…µæ•° <span class="token operator">=</span> å£«å…µä»¬<span class="token punctuation">.</span>lengthå…µè¥<span class="token punctuation">.</span><span class="token function">æ‰¹é‡åˆ¶é€ </span><span class="token punctuation">(</span>å£«å…µä»¬<span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> å£«å…µæ•°<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> å£«å…µæ•° <span class="token operator">+</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µä»¬<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span>å…µè¥<span class="token punctuation">.</span><span class="token function">æ‰¹é‡åˆ¶é€ </span><span class="token punctuation">(</span>å£«å…µä»¬<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gtswkp12bkj60wr0ge45o02.jpg" alt="å£«å…µåŸå‹å›¾ç¬¬2ç‰ˆ.png"></p><p>æ³¨ï¼šå†…å­˜å›¾ä¸­è“è‰²åŒºåŸŸæ˜¯ JS å†…ç½®çš„ï¼Œåªæ˜¯å‰é¢çš„å›¾æ²¡æœ‰è¡¥å…¨</p><p>ä»å†…å­˜å›¾ä¸éš¾çœ‹å‡ºï¼Œè™½ç„¶åˆ¶é€ å£«å…µå‡½æ•°åˆ¶é€ å‡ºæ¥çš„å£«å…µçš„ <code>__proto__</code> æ˜¯æŒ‡å‘å£«å…µåŸå‹çš„ï¼Œä½†åˆ¶é€ å£«å…µå‡½æ•°æœ¬èº«å’Œå£«å…µåŸå‹å´æ²¡æœ‰è”ç³»ï¼Œè¿™æ ·æ˜¾å¾—ä»£ç åˆ†æ•£ã€‚é‚£ä¹ˆè¯•ç€æŠŠåˆ¶é€ å£«å…µå‡½æ•°å’Œå£«å…µåŸå‹ç»“åˆä¸€èµ·</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> å£«å…µä»¬ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">var</span> å£«å…µæ•° <span class="token operator">=</span> å£«å…µä»¬<span class="token punctuation">.</span>length<span class="token keyword">function</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span><span class="token parameter">ç¼–å·i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> å£«å…µ <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>åˆ¶é€ å£«å…µ<span class="token punctuation">.</span>å£«å…µåŸå‹<span class="token punctuation">)</span>    å£«å…µ<span class="token punctuation">.</span>ç¼–å· <span class="token operator">=</span> ç¼–å·i    å£«å…µ<span class="token punctuation">.</span>ç”Ÿå‘½åŠ› <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">return</span> å£«å…µ<span class="token punctuation">}</span>åˆ¶é€ å£«å…µ<span class="token punctuation">.</span>å£«å…µåŸå‹ <span class="token operator">=</span> <span class="token punctuation">{</span>       <span class="token comment">// è¿™æ­¥æŠŠåˆ¶é€ å£«å…µå’Œå£«å…µåŸå‹ç»‘å®š</span>    <span class="token function-variable function">æ”»å‡»</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">é˜²å¾¡</span><span class="token operator">:</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span>    <span class="token literal-property property">constructor</span><span class="token operator">:</span> åˆ¶é€ å£«å…µ   <span class="token comment">// è¿™æ­¥æŠŠå£«å…µåŸå‹å’Œåˆ¶é€ å£«å…µç»‘å®š</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µä»¬<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span>å£«å…µæ•° <span class="token operator">=</span> å£«å…µä»¬<span class="token punctuation">.</span>lengthå…µè¥<span class="token punctuation">.</span><span class="token function">æ‰¹é‡åˆ¶é€ </span><span class="token punctuation">(</span>å£«å…µä»¬<span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> å£«å…µæ•°<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> å£«å…µæ•° <span class="token operator">+</span> <span class="token number">50</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µä»¬<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span>å…µè¥<span class="token punctuation">.</span><span class="token function">æ‰¹é‡åˆ¶é€ </span><span class="token punctuation">(</span>å£«å…µä»¬<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://ww1.sinaimg.cn/large/004jr3A7gy1gtt2jrkzecj60v90gedme02.jpg" alt="å£«å…µåŸå‹å›¾ç¬¬3ç‰ˆ.png"></p><p>å¥½å•¦ï¼Œç°åœ¨å°±é€šè¿‡è¿™ä¸ªå›¾æ¥äº†è§£æœ‰å…³<strong>åŸå‹</strong>çš„æ¦‚å¿µ</p><ul><li><p>åŸå‹</p><p>  åœ¨javascriptä¸­ï¼Œå‡½æ•°å¯ä»¥æœ‰å±æ€§ã€‚ æ¯ä¸ª<strong>å‡½æ•°</strong>éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„<strong>å±æ€§</strong>å«ä½œåŸå‹ï¼ˆprototypeï¼‰ï¼Œé»˜è®¤æŒ‡å‘ä¸€ä¸ªè‡ªå¸¦å±æ€§constructorï¼ˆè¿™ä¸ªå±æ€§å€¼æŒ‡å‘å‡½æ•°æœ¬èº«ï¼‰çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥é‡å†™ï¼ˆè”ç³»ä¸Šé¢ä»£ç  <code>åˆ¶é€ å£«å…µ.å£«å…µåŸå‹ = {/* ä¸€äº›ä»£ç  */}</code>ï¼‰</p></li><li><p>åŸå‹å¯¹è±¡</p><p>  æ¯ä¸ªå®ä¾‹<strong>å¯¹è±¡</strong>éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆ__proto__ï¼‰æŒ‡å‘å®ƒçš„<strong>æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡</strong>ï¼ˆå¦‚å†…å­˜å›¾ä¸­çš„ <code>#789å£«å…µåŸå‹å¯¹è±¡</code>ï¼‰ã€‚è¯¥åŸå‹å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªè‡ªå·±çš„åŸå‹å¯¹è±¡ï¼ˆ__proto__ï¼‰ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ä¸º nullã€‚æ³¨æ„<strong>å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡</strong></p></li><li><p>åŸå‹é“¾</p><p>  å†…å­˜å›¾ä¸­é€šè¿‡__proto__æŒ‡å‘åŸå‹çš„é“¾æ¥</p><p>  å›¾ä¸­ å£«å…µ-&gt;å£«å…µåŸå‹-&gt;Object.prototype-&gt;null è¿™æ¡çº¿å°±æ˜¯ä¸€æ¡åŸå‹é“¾</p></li><li><p>æ„é€ å‡½æ•°</p><p>  åˆ¶é€ å£«å…µå‡½æ•°å°±æ˜¯æ„é€ å‡½æ•°ã€‚</p><p>  æ„é€ å‡½æ•°æœ¬èº«è´Ÿè´£ç»™å¯¹è±¡æœ¬èº«æ·»åŠ å±æ€§ï¼ˆå¦‚ å£«å…µ.ç¼–å· = ç¼–å·iï¼‰</p><p>  æ„é€ å‡½æ•°.prototypeè´Ÿè´£ä¿å­˜å¯¹è±¡çš„å…±æœ‰å±æ€§ï¼ˆå¦‚ å£«å…µåŸå‹ï¼‰</p><p>  æ‰€æœ‰æ„é€ å‡½æ•°ï¼ˆä¸“é—¨ç”±äºåˆ›å»ºå¯¹è±¡çš„å‡½æ•°ï¼‰é¦–å­—æ¯å¤§å†™</p><p>  æ‰€æœ‰è¢«æ„é€ å‡ºæ¥çš„å¯¹è±¡é¦–å­—æ¯å°å†™</p></li></ul><h1 id="åŸå‹ç²¾-CP-â€”-prototype-å’Œ-proto"><a href="#åŸå‹ç²¾-CP-â€”-prototype-å’Œ-proto" class="headerlink" title="åŸå‹ç²¾ CP â€” prototype å’Œ __proto__"></a>åŸå‹ç²¾ CP â€” prototype å’Œ __proto__</h1><p>çœ‹å®Œæœ‰å…³<strong>åŸå‹</strong>çš„æ¦‚å¿µï¼Œæœ€è¿·æƒ‘çš„å°±æ˜¯ prototype å’Œ __proto__ åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ« ğŸ¤”</p><p><code>prototype</code> å’Œ <code>__proto__</code> éƒ½å­˜ç€åŸå‹çš„åœ°å€</p><p><code>prototype</code> ï¼šæŒ‚åœ¨<strong>å‡½æ•°</strong>ä¸Šï¼Œè¢«æ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡çš„ __proto__ æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼Œç”¨æ¥å®ç°åŸºäºåŸå‹çš„ç»§æ‰¿ä¸å±æ€§çš„å…±äº«</p><p><code>__proto__</code> ï¼šæŒ‚åœ¨<strong>å¯¹è±¡</strong>ä¸Šï¼Œå®ƒçš„å€¼æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œæ„æˆåŸå‹é“¾ï¼ŒåŒæ ·ç”¨äºå®ç°åŸºäºåŸå‹çš„ç»§æ‰¿</p><p>ä¸‰ä¸ªé‡è¦çŸ¥è¯† ğŸ§¨ï¼š</p><ol><li><p>å¯¹è±¡.__proto__ === æ„é€ å‡½æ•°.prototype</p></li><li><p>Object.prototype æ˜¯æ‰€æœ‰å¯¹è±¡çš„ï¼ˆç›´æ¥æˆ–é—´æ¥ï¼‰åŸå‹å¯¹è±¡ï¼ŒObject.prototype çš„åŸå‹å¯¹è±¡ä¸º null</p></li><li><p>ä»»ä½•å‡½æ•°.__proto__ === Function.prototype</p></li></ol><p>ä¸‹é¢æ¥ä¸€ä¸ªæ— å¥–é—®ç­” ğŸ®</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token keyword">null</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>trueï¼Œæ ¹æ®çŸ¥è¯†2</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>trueï¼Œæ ¹æ®çŸ¥è¯†2</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>f<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>trueï¼Œæ ¹æ®çŸ¥è¯†3</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>trueï¼Œæ ¹æ®çŸ¥è¯†1</p><h1 id="new-è¿ç®—ç¬¦"><a href="#new-è¿ç®—ç¬¦" class="headerlink" title="new è¿ç®—ç¬¦"></a>new è¿ç®—ç¬¦</h1><p>new å…³é”®å­—ä¼šè¿›è¡Œå¦‚ä¸‹çš„æ“ä½œï¼š</p><ol><li>åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å•JavaScriptå¯¹è±¡ï¼ˆå³{}ï¼‰</li><li>ä¸ºæ­¥éª¤1æ–°åˆ›å»ºçš„å¯¹è±¡æ·»åŠ å±æ€§__proto__ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ </li><li>å°†æ­¥éª¤1æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸ºthisçš„ä¸Šä¸‹æ–‡ </li><li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å›this</li></ol><p>å›åˆ°åˆ¶é€ å£«å…µæœ€åé‚£æ®µä»£ç </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">function</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span><span class="token parameter">ç¼–å·i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> å£«å…µ <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>åˆ¶é€ å£«å…µ<span class="token punctuation">.</span>å£«å…µåŸå‹<span class="token punctuation">)</span>    å£«å…µ<span class="token punctuation">.</span>ç¼–å· <span class="token operator">=</span> ç¼–å·i    å£«å…µ<span class="token punctuation">.</span>ç”Ÿå‘½åŠ› <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>    <span class="token keyword">return</span> å£«å…µ<span class="token punctuation">}</span>åˆ¶é€ å£«å…µ<span class="token punctuation">.</span>å£«å…µåŸå‹ <span class="token operator">=</span> <span class="token punctuation">{</span>       <span class="token comment">// è¿™æ­¥æŠŠåˆ¶é€ å£«å…µå’Œå£«å…µåŸå‹ç»‘å®š</span>    <span class="token function-variable function">æ”»å‡»</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">é˜²å¾¡</span><span class="token operator">:</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span>    <span class="token literal-property property">constructor</span><span class="token operator">:</span> åˆ¶é€ å£«å…µ   <span class="token comment">// è¿™æ­¥æŠŠå£«å…µåŸå‹å’Œåˆ¶é€ å£«å…µç»‘å®š</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µä»¬<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¢æˆ new å†™æ³•</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span class="token keyword">function</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span><span class="token parameter">ç¼–å·i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>ç¼–å· <span class="token operator">=</span> ç¼–å·i    <span class="token keyword">this</span><span class="token punctuation">.</span>ç”Ÿå‘½åŠ› <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token class-name">åˆ¶é€ å£«å…µ</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">æ”»å‡»</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* å‘¼ä¸€å·´æŒ */</span><span class="token punctuation">}</span><span class="token class-name">åˆ¶é€ å£«å…µ</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>æ”»å‡» <span class="token operator">=</span> <span class="token function">funcrion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/* é—ª */</span><span class="token punctuation">}</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    å£«å…µä»¬<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">åˆ¶é€ å£«å…µ</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">// çœç•¥éƒ¨åˆ†ä»£ç </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/23987456">JS çš„ new åˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿ</a></p><p><a href="https://www.zhihu.com/question/34183746">jsä¸­__proto__å’Œprototypeçš„åŒºåˆ«å’Œå…³ç³»ï¼Ÿ</a></p><hr><p>å†™åœ¨åé¢ï¼šå› ä¸ºæ—¶é—´å…³ç³»ï¼Œè¿™ç¯‡æ–‡ç« å†™å¾—æœ‰äº›åˆ†æ•£æ‚ä¹±ï¼Œæœ‰ç©ºå†å¥½å¥½æ¢³ç†ä¸€éã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®°--Reactï¼ˆå››ï¼‰ Class ç»„ä»¶äº‹ä»¶ç»‘å®š</title>
      <link href="/2021/08/20/xiao-bai-cai-bi-ji-react-si-shi-jian-bang-ding/"/>
      <url>/2021/08/20/xiao-bai-cai-bi-ji-react-si-shi-jian-bang-ding/</url>
      
        <content type="html"><![CDATA[<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token string">"./styles.css"</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>click1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">click2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click1<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click2<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">A</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾æ¬¡ç‚¹å‡»4ä¸ªæŒ‰é’®ï¼Œæ§åˆ¶å°è¾“å‡º</p><pre class="line-numbers language-none"><code class="language-none">undefinedA {props: Object, context: Object, refs: Object, updater: Object, click1: Æ’ bound click()â€¦}A {props: Object, context: Object, refs: Object, updater: Object, click1: Æ’ bound click()â€¦}A {props: Object, context: Object, refs: Object, updater: Object, click1: Æ’ bound click()â€¦}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¬¬ä¸€ç§æƒ…å†µä¸ <a href="https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/">JavaScript å‡½æ•°å·¥ä½œåŸç†</a>æœ‰å…³ï¼Œthis æœ€ç»ˆæ˜¯æŒ‡å‘ window çš„ã€‚</p><p>åœ¨ Class ç»„ä»¶ä¸­ï¼Œäº‹ä»¶ç»‘å®šçš„æ­£ç¡®å§¿åŠ¿åº”è¯¥æ˜¯è¿™æ · â¬‡</p><p>ä¼ ä¸€ä¸ªåŒ¿åå‡½æ•°ç»™ onClick</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨ bind ç»‘å®š this</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>click1 <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click1<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨ç®­å¤´å‡½æ•°å®šä¹‰</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">click2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// ä¸‹é¢è¿™ç§å†™æ³•å’Œåœ¨ constructor ä¸­å†™ this.click2 = () =&gt; {} æ˜¯ç­‰ä»·çš„</span><span class="token comment">// click2 = () =&gt; {}</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click2<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Click</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨ç±»ä¸­ <code>click() {}</code> å’Œ <code>click = () =&gt; {}</code> ä¸¤ç§å†™æ³•çš„åŒºåˆ«ï¼š</p><ul><li><code>click() {}</code> æ˜¯å¯¹è±¡çš„å…±æœ‰å±æ€§ï¼ˆä¹Ÿå°±æ˜¯åŸå‹ä¸Šçš„å±æ€§ï¼‰</li><li><code>click = () =&gt; {}</code> æ˜¯å¯¹è±¡æœ¬èº«çš„å±æ€§</li></ul><blockquote><p>è§‰å¾— this éº»çƒ¦ï¼Œé‚£ç”¨å‡½æ•°ç»„ä»¶å°±å¥½å•¦ ğŸ˜Š</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®°--Reactï¼ˆä¸‰ï¼‰å‡½æ•°ç»„ä»¶</title>
      <link href="/2021/08/19/xiao-bai-cai-bi-ji-react-san-han-shu-zu-jian/"/>
      <url>/2021/08/19/xiao-bai-cai-bi-ji-react-san-han-shu-zu-jian/</url>
      
        <content type="html"><![CDATA[<p>å†™åœ¨å‰é¢ï¼šå­¦ä¹  <code>React</code> è¦æ—¶åˆ»å‘Šè¯‰è‡ªå·±å°±æ˜¯åœ¨å†™ <code>JavaScript</code></p><h1 id="å‡½æ•°ç»„ä»¶çš„åˆ›å»ºæ–¹å¼"><a href="#å‡½æ•°ç»„ä»¶çš„åˆ›å»ºæ–¹å¼" class="headerlink" title="å‡½æ•°ç»„ä»¶çš„åˆ›å»ºæ–¹å¼"></a>å‡½æ•°ç»„ä»¶çš„åˆ›å»ºæ–¹å¼</h1><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// ç®­å¤´å‡½æ•°å½¢å¼</span><span class="token keyword">const</span> <span class="token function-variable function">Hello</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// function å½¢å¼</span><span class="token keyword">function</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å°±æ˜¯å¦‚æ­¤ï¼Œå’Œ JS å‡½æ•°çš„åˆ›å»ºä¸€æ ·ï¼ˆå¿ƒé‡Œé»˜å¿µå­¦ä¹  <code>React</code> è¦æ—¶åˆ»å‘Šè¯‰è‡ªå·±å°±æ˜¯åœ¨å†™ <code>JavaScript</code>ï¼‰</p><h1 id="Props-å¤–éƒ¨æ•°æ®"><a href="#Props-å¤–éƒ¨æ•°æ®" class="headerlink" title="Props å¤–éƒ¨æ•°æ®"></a>Props å¤–éƒ¨æ•°æ®</h1><p>å°±æ˜¯å‡½æ•°ç»„ä»¶çš„å‚æ•°</p><h1 id="State-å’Œç”Ÿå‘½å‘¨æœŸ"><a href="#State-å’Œç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="State å’Œç”Ÿå‘½å‘¨æœŸ"></a>State å’Œç”Ÿå‘½å‘¨æœŸ</h1><p><strong>æ²¡æœ‰</strong> </p><p>é‚£æˆ‘èµ°ï¼Ÿ ğŸ¤·â€â™€ï¸</p><p>åˆ«æ€¥ï¼ŒReact v16.8.0 æ¨å‡º Hooks APIï¼Œå¯å‰å®³äº†ï¼Œäº†è§£ä¸‹å§~</p><h1 id="Hooks"><a href="#Hooks" class="headerlink" title="Hooks"></a>Hooks</h1><p>Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„<strong>å‡½æ•°</strong>ï¼Œä½¿ç”¨å®ƒä»¬æœ‰ä¸¤ä¸ªé¢å¤–çš„è§„åˆ™ï¼š</p><ul><li>åªèƒ½åœ¨<strong>å‡½æ•°æœ€å¤–å±‚</strong>è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ã€‚</li><li>åªèƒ½åœ¨ <strong>React çš„å‡½æ•°ç»„ä»¶</strong>ä¸­è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚</li></ul><h2 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h2><p>è¿˜è®°å¾—åœ¨ Class ç»„ä»¶ä¸­æ€ä¹ˆä½¿ç”¨ <code>state</code> çš„å—</p><p>çœ‹è¿™ä¸ªä¾‹å­ ğŸŒ°</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">          Click me        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘ä»¬é€šè¿‡åœ¨æ„é€ å‡½æ•°ä¸­è®¾ç½® state åˆå§‹å€¼ä¸º { count: 0 } ï¼Œå½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®åï¼Œæˆ‘ä»¬é€šè¿‡è°ƒç”¨ this.setState() æ¥å¢åŠ  state.countã€‚</p><p>å›é¡¾ä¸€ä¸‹ä¸Šé¢å‡½æ•°ç»„ä»¶çš„åˆ›å»ºæ–¹å¼ï¼Œæˆ‘ä»¬ä¼¼ä¹æ— æ³•å¾ˆæ–¹ä¾¿åœ°å‘é‡Œé¢æ·»åŠ ä¸€äº› state ä½¿å¾— state å˜åŒ–æ—¶èƒ½è‡ªåŠ¨æ›´æ–° UI</p><p>è¿™æ—¶å°±è¯¥ä¸»è§’ <code>useState</code> ç™»åœºå•¦ ğŸ˜</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">Example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">You clicked </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token plain-text"> times</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">       Click me      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨ useState å®šä¹‰ state å˜é‡è¿”å›çš„æ˜¯ä¸€ä¸ªæœ‰ä¸¤ä¸ªå€¼çš„æ•°ç»„ã€‚ç¬¬ä¸€ä¸ªå€¼æ˜¯å½“å‰çš„ stateï¼Œç¬¬äºŒä¸ªå€¼æ˜¯æ›´æ–° state çš„å‡½æ•°ã€‚</p><p>useState() æ–¹æ³•é‡Œé¢å”¯ä¸€çš„å‚æ•°å°±æ˜¯åˆå§‹ stateã€‚è¿™é‡Œå£°æ˜äº†ä¸€ä¸ªå« count çš„ state å˜é‡ï¼Œç„¶åæŠŠå®ƒè®¾ä¸º 0ã€‚</p><p>é€šè¿‡è°ƒç”¨ setCount æ¥æ›´æ–°å½“å‰çš„ countã€‚</p><blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ol><li>å¦‚æœ state æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¸èƒ½éƒ¨åˆ† setStateï¼Œå› ä¸º setState ä¸ä¼šåˆå¹¶å±æ€§</li><li>å¯¹äº setState(obj)ï¼Œå¦‚æœ obj åœ°å€ä¸å˜ï¼Œé‚£ä¹ˆ React å°±è®¤ä¸ºæ•°æ®æ²¡æœ‰å˜åŒ–</li></ol></blockquote><h2 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h2><p>useEffect ç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ Class ç»„ä»¶ä¸­çš„ componentDidMountã€componentDidUpdate å’Œ componentWillUnmount å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª APIã€‚</p><p>æ¥çœ‹ä¸‹ useEffect çš„ç”¨æ³•</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// æ¨¡æ‹Ÿ componentDidMountï¼Œæ³¨æ„ç¬¬äºŒä¸ªå‚æ•°</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* åªåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¼šæ‰§è¡Œ */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">// æ¨¡æ‹Ÿ componentDidUpdateï¼Œæ³¨æ„ç¬¬äºŒä¸ªå‚æ•°</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ä»»æ„å±æ€§æ›´æ–°å°±ä¼šæ‰§è¡Œï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹Ÿä¼š */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* åªæœ‰næ›´æ–°æ‰ä¼šæ‰§è¡Œï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹Ÿä¼š */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">// æ¨¡æ‹Ÿ componentWillUnmountï¼Œæ³¨æ„ç¬¬ä¸€ä¸ªå‚æ•°çš„ return è¯­å¥</span><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* æ‰§è¡Œç»„ä»¶å¸è½½çš„æ—¶å€™æ¸…é™¤æ“ä½œï¼ˆä¿æŠ¤ç¯å¢ƒï¼‰ */</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¦‚æœåŒæ—¶å­˜åœ¨å¤šä¸ª useEffectï¼Œä¼šæŒ‰ç…§å‡ºç°æ¬¡åºæ‰§è¡Œ</p></blockquote><h2 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a>useLayoutEffect</h2><p>åœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚</p><blockquote><p>ç‰¹ç‚¹</p><ul><li>useLayoutEffect æ€»æ˜¯æ¯” useEffect å…ˆæ‰§è¡Œ</li><li>useLayoutEffect é‡Œçš„ä»»åŠ¡æœ€å¥½æ˜¯å½±å“äº† Layout</li></ul></blockquote><pre class="line-numbers language-none"><code class="language-none">App() ---&gt; æ‰§è¡Œ ---&gt; VDOM ---&gt; DOM ---&gt; æ”¹å˜å¤–è§‚ ---&gt; useEffect                                    â†‘                              useLayoutEffect<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h2><p>ç”¨æ³•</p><ol><li>å£°æ˜ä¸€ä¸ª context å¯¹è±¡<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> MyContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>ä½¿ç”¨ &lt;MyContext.Provider&gt; åœˆå®šä½œç”¨åŸŸ<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyContext.Provider</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">520</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Childlren</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyContext.Provider</span></span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>åœ¨ä½œç”¨åŸŸå†…ä½¿ç”¨ useContext(MyContext) è·å–ä¸Šä¸‹æ–‡<pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">Chrilren</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span>MyContext<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a>useReducer</h2><p>ä½¿ç”¨å®˜ç½‘ä¸Šçš„ä¾‹å­</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// ç¬¬ 1 æ­¥ï¼šåˆ›å»ºåˆå§‹å€¼ initialCount</span><span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">initialCount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> initialCount<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// ç¬¬ 2 æ­¥ï¼šåˆ›å»ºæ‰€æœ‰æ“ä½œ reducer(state, action)</span><span class="token keyword">function</span> <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">switch</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">case</span> <span class="token string">'increment'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'decrement'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token literal-property property">count</span><span class="token operator">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token keyword">case</span> <span class="token string">'reset'</span><span class="token operator">:</span>      <span class="token keyword">return</span> <span class="token function">init</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">default</span><span class="token operator">:</span>      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Counter</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>initialCount<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// ç¬¬ 3 æ­¥ï¼šä¼ ç»™ useReducer ï¼Œå¾—åˆ°è¯»å†™ API</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>state<span class="token punctuation">,</span> dispatch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useReducer</span><span class="token punctuation">(</span>reducer<span class="token punctuation">,</span> initialCount<span class="token punctuation">,</span> init<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      Count: </span><span class="token punctuation">{</span>state<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>        <span class="token comment">// ç¬¬ 4 æ­¥ï¼šè°ƒç”¨ dispatch({type: 'æ“ä½œç±»å‹'})</span>        <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'reset'</span><span class="token punctuation">,</span> <span class="token literal-property property">payload</span><span class="token operator">:</span> initialCount<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        Reset      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'decrement'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">-</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'increment'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a>useMemo</h2><p>ä½¿ç”¨èƒŒæ™¯ï¼šReact é»˜è®¤æœ‰å¤šä½™çš„ render</p><pre class="line-numbers language-none"><code class="language-none">&lt;çˆ¶ç»„ä»¶&gt;    &lt;å­ç»„ä»¶ /&gt;&lt;/çˆ¶ç»„ä»¶&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å½“ &lt;çˆ¶ç»„ä»¶&gt; ä¸­ state å˜åŒ–æ—¶ï¼Œ &lt;å­ç»„ä»¶&gt; è·Ÿç€é‡æ–°æ¸²æŸ“ï¼Œä½†å¦‚æœ &lt;å­ç»„ä»¶&gt; çš„ props æ²¡æœ‰å˜åŒ–æ˜¯æ²¡å¿…è¦é‡æ–°æ¸²æŸ“çš„ã€‚</p><p>ç”¨ &lt;å­ç»„ä»¶2&gt; = React.memo(&lt;å­ç»„ä»¶&gt;) å¯ä»¥è§£å†³ï¼Œä½†æ˜¯æœ‰ Bug ï¼šåœ¨ &lt;å­ç»„ä»¶&gt; å†…æ·»åŠ äº†ç›‘å¬å‡½æ•°åå°±ä¼šå¤±æ•ˆã€‚åŸå› æ˜¯å‡½æ•°æ˜¯å¯¹è±¡ï¼Œ &lt;çˆ¶ç»„ä»¶&gt; é‡æ–°æ¸²æŸ“ä¼šå¯¼è‡´å‡½æ•°åœ°å€ä¸åŒä»è€Œä½¿ props å‘ç”Ÿå˜åŒ–ã€‚</p><p>ç”¨ useMemo åŒ…è£… &lt;å­ç»„ä»¶&gt; å†…çš„ç›‘å¬å‡½æ•°ã€‚</p><p>ç”¨æ³•</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> memoizedValue <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">computeExpensiveValue</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŠŠâ€œåˆ›å»ºâ€å‡½æ•°å’Œä¾èµ–é¡¹æ•°ç»„ä½œä¸ºå‚æ•°ä¼ å…¥ <code>useMemo</code>ï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— <code>memoized</code> å€¼</p><h2 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a>useCallback</h2><p>useCallback(fn, deps) ç›¸å½“äº useMemo(() =&gt; fn, deps)</p><h2 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a>useRef</h2><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> refContainer <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>useRef è¿”å›ä¸€ä¸ªå¯å˜çš„ <code>ref</code> å¯¹è±¡ï¼Œå…¶ <code>.current</code> å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆ<code>initialValue</code>ï¼‰ã€‚è¿”å›çš„ <code>ref</code> å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…æŒç»­å­˜åœ¨ã€‚</p><p>è¯»å–æ–¹å¼ï¼šrefContainer.current</p><p><code>useRef</code> å¸¸ç”¨äºè®¿é—®å­ç»„ä»¶</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">TextInputWithFocusButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> inputEl <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">const</span> <span class="token function-variable function">onButtonClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// `current` æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´ &lt;input&gt;</span>    inputEl<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputEl<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onButtonClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Focus the input</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>  <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è‡ªå®šä¹‰-Hook"><a href="#è‡ªå®šä¹‰-Hook" class="headerlink" title="è‡ªå®šä¹‰ Hook"></a>è‡ªå®šä¹‰ Hook</h2><p>è‡ªå®šä¹‰ Hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ â€œuseâ€ å¼€å¤´ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ Hookï¼Œé€šå¸¸ç”¨äºå°è£…æ•°æ®æ“ä½œã€‚</p><p>ä¸‹é¢æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ Hook ç¤ºä¾‹</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token comment">// useRecords.jsx</span><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useRecords</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">[</span>records<span class="token punctuation">,</span> setRecords<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// ä¸€äº›å¢åˆ æŸ¥æ”¹çš„æ“ä½œ</span>  <span class="token keyword">const</span> <span class="token function-variable function">findRecord</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">const</span> <span class="token function-variable function">addRecord</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">const</span> <span class="token function-variable function">deleteRecord</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">const</span> <span class="token function-variable function">updateRecord</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span>records<span class="token punctuation">,</span> addRecord<span class="token punctuation">,</span> deleteRecord<span class="token punctuation">,</span> findRecord<span class="token punctuation">,</span> updateRecord<span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨è‡ªå®šä¹‰ Hook </p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span>records<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// å…¶ä»–ä»£ç </span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é‚£äº›å¹´ï¼Œè¢« this æŠ˜ç£¨çš„å‰ç«¯å°ç™½</title>
      <link href="/2021/08/18/js-de-san-zuo-da-shan-zhi-this/"/>
      <url>/2021/08/18/js-de-san-zuo-da-shan-zhi-this/</url>
      
        <content type="html"><![CDATA[<p>åœ¨åˆšå¼€å§‹å­¦ <code>JavaScript</code> æ—¶ï¼Œæœ€æ·±æ¶ç—›ç»çš„ä¸‰ä¸ª JSæ€ªğŸ‘¹ï¼š<strong>thiså¦–</strong>ã€<strong>åŸå‹ç²¾</strong>å’Œ <strong>AJAXé­”</strong></p><p>æœ€è¿‘åœ¨å†™æ€»ç»“å›é¡¾æ—¶ç«Ÿæ„å¤–å‘ç°è¿™ä¸‰å¤§æ€ªæ—©å·²åœ¨ä¸çŸ¥ä¸è§‰ä¸­è¢«æˆ‘æ¶ˆåŒ–å¸æ”¶äº†ï¼Œè¶ç€çƒ­ä¹è®°ä¸‹æ¥âœ~~~</p><p>æœ‰è¯·ä»Šå¤©çš„å‡ºåœºå˜‰å®¾ğŸ¤ï¼šthiså¦–</p><h1 id="thiså¦–-çš„å‰ä¸–ä»Šç”Ÿ"><a href="#thiså¦–-çš„å‰ä¸–ä»Šç”Ÿ" class="headerlink" title="thiså¦– çš„å‰ä¸–ä»Šç”Ÿ"></a>thiså¦– çš„å‰ä¸–ä»Šç”Ÿ</h1><p>å‡è®¾ç°åœ¨æœ‰ä¸€å¯¹è±¡ğŸ˜ğŸ˜</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'April-cl'</span><span class="token punctuation">,</span>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>    <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// å¾…è¡¥å……</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æˆ‘æƒ³è¦è°ƒç”¨ person.sayHi(â€¦)ï¼Œæ‰“å°å‡ºã€Œä½ å¥½ï¼Œæˆ‘æ˜¯ April-clï¼Œä»Šå¹´ 18 å²ã€</p><p>emmmmmmmmm æˆ‘è¦æ€æ ·å†™ <code>sayHi</code> å‘¢ï¼Œè¿™æ ·å—ï¼Ÿ</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½ï¼Œæˆ‘æ˜¯ ${name}ï¼Œä»Šå¹´ ${age} å²'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æ–¹å¼ï¼š<code>person.sayHi(person.name, person.age)</code></p><p>è¿™ä¼¼ä¹å¯ä»¥ï¼Œä½†æ˜¯â€¦çœ‹èµ·æ¥å‚»å‚»çš„ğŸ˜³</p><p>é‚£è¦ä¸ï¼Œç»™ <code>sayHi</code> ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Ÿä»£ç æ”¹æˆè¿™æ ·ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">self</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½ï¼Œæˆ‘æ˜¯ ${self.name}ï¼Œä»Šå¹´ ${self.age} å²'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æ–¹å¼ï¼š<code>person.sayHi(person)</code></p><p>å¿ƒé‡Œå˜€å˜€å’•ï¼šå¯æˆ‘å°±æƒ³æŠŠå‚æ•°é‡Œçš„ <code>person</code> çœæ‰</p><p>ğŸ’¡ æœ‰äº†ï¼Œç»™å‚æ•°é‡Œçš„ <code>person</code> ç©¿ä¸Šéšèº«è¡£ã€‚å¯æ˜¯æ²¡æœ‰äº†å®å‚ï¼Œ<code>sayHi</code> å£°æ˜çš„å½¢å‚æ€ä¹ˆåŠï¼Ÿ</p><p>å¥½åŠï¼Œç»™ <code>self</code> ä¹Ÿç©¿ä¸Šéšèº«è¡£ï¼Œç”¨ä¸€ä¸ªé©»å®ˆçš„å°å¦–ç²¾ <code>this</code> æ¥ä»£æ›¿ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// this å°±æ˜¯ self</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ä½ å¥½ï¼Œæˆ‘æ˜¯ ${this.name}ï¼Œä»Šå¹´ ${this.age} å²'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è°ƒç”¨æ–¹å¼ï¼š<code>person.sayHi()</code></p><p>ç°åœ¨çœ‹ç€æ˜äº†äº†ï¼Œ<code>this</code> æ˜¯ <code>sayHi</code> éšè—çš„ç¬¬ä¸€ä¸ªå½¢å‚ã€‚åœ¨è°ƒç”¨ <code>person.sayHi()</code> æ—¶ï¼Œè¿™ä¸ª <code>person</code> ä¼šã€Œå˜æˆã€ <code>this</code></p><h1 id="ä»¤å°ç™½é—»é£ä¸§èƒ†çš„-thiså¦–-ç°èº«å•¦"><a href="#ä»¤å°ç™½é—»é£ä¸§èƒ†çš„-thiså¦–-ç°èº«å•¦" class="headerlink" title="ä»¤å°ç™½é—»é£ä¸§èƒ†çš„ thiså¦– ç°èº«å•¦"></a>ä»¤å°ç™½é—»é£ä¸§èƒ†çš„ thiså¦– ç°èº«å•¦</h1><p>ä¿—è¯è¯´çŸ¥å½¼çŸ¥å·±æ–¹èƒ½ç™¾æˆ˜ç™¾èƒœï¼Œé‚£å°±å…ˆè¦äº†è§£ <code>this</code> çš„5ç§ç»‘å®šæ–¹å¼</p><ul><li>é»˜è®¤ç»‘å®š</li><li>éšå¼ç»‘å®š</li><li>æ˜¾ç¤ºç»‘å®š</li><li>newç»‘å®š</li><li>ç®­å¤´å‡½æ•°ç»‘å®š</li></ul><h2 id="é»˜è®¤ç»‘å®š"><a href="#é»˜è®¤ç»‘å®š" class="headerlink" title="é»˜è®¤ç»‘å®š"></a>é»˜è®¤ç»‘å®š</h2><p>å‰ç½®çŸ¥è¯†ï¼ˆç³»ç»Ÿä¸¢ç»™äº†ä½ ä¸€æœ¬ç§˜ç± ğŸ““ ï¼‰ï¼š</p><p>åœ¨å…¨å±€å—çº§ä½œç”¨åŸŸ</p><ul><li>æ‰€æœ‰ JavaScript å…¨å±€å¯¹è±¡ã€å‡½æ•°ä»¥åŠå˜é‡å‡è‡ªåŠ¨æˆä¸º window å¯¹è±¡çš„æˆå‘˜</li><li>éä¸¥æ ¼æ¨¡å¼ä¸‹ this æŒ‡å‘ window</li><li>ç”¨ let æˆ– const å£°æ˜ä¸ä¼šè¢«ç»‘å®šåˆ° window ä¸Š</li></ul><p>å¥½äº†ï¼Œæ¥ä¸‹æ¥æ‰“æ€ªå‡çº§ â¬†</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo a:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'foo b:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this a:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this b:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¹æ®ç§˜ç±</p><p><code>a</code> å’Œ <code>foo</code> å˜é‡ä¼šè¢«ç»‘å®šåœ¨ <code>window</code> ä¸Šï¼Œè€Œ <code>b</code> åˆ™ä¸ä¼šï¼ˆå³ <code>window.b</code> æ˜¯ <code>undefined</code>ï¼‰ï¼Œè€Œ <code>this</code> æŒ‡å‘ <code>window</code>ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯</p><pre class="line-numbers language-none"><code class="language-none">this a:1this b:undefinedfoo a:1foo b:undefined<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="éšå¼ç»‘å®š"><a href="#éšå¼ç»‘å®š" class="headerlink" title="éšå¼ç»‘å®š"></a>éšå¼ç»‘å®š</h2><p>å›é¡¾ä¸Šæ–‡ã€thiså¦– çš„å‰ä¸–ä»Šç”Ÿã€ï¼Œ<code>this</code> éšå¼ç»‘å®šçš„å¯¹è±¡å…¶å®å°±æ˜¯ç©¿äº†éšèº«è¡£çš„ <code>person</code></p><p>âœ¨ Get æ–°ç§˜ç±ï¼šå½“å‡½æ•°å¼•ç”¨æœ‰ä¸Šä¸‹æ–‡å¯¹è±¡æ—¶, å¦‚ obj.foo() çš„è°ƒç”¨æ–¹å¼, foo å†…çš„ this æŒ‡å‘ obj </p><p>ä½†æ˜¯æ±Ÿæ¹–é™©æ¶ï¼Œè‹¥æ˜¯æœ‰äººæŠ«ç€å±‚ã€Œé©¬ç”²ã€è¯“éª— thiså¦–ï¼Œå°±ä¼šé€ æˆ thiså¦– å’Œç©¿ç€éšèº«è¡£çš„æ­£ä¸»å½¢åŒé™Œè·¯ï¼Œè¯·çœ‹é¢˜ï¼š</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> foo <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">var</span> foo2 <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å¼€ç…§å¦–é•œï¼ˆæ§åˆ¶å°ï¼‰ï¼Œä¼šå‘ç°æ­¤æ—¶ç»“æœ</p><pre class="line-numbers language-none"><code class="language-none">12<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ï¼Ÿï¼Ÿï¼Ÿ</p><p>ä¸éš¾ç†è§£ <code>obj.foo()</code> çš„ç»“æœæ˜¯ 1ï¼Œä½† <code>foo2()</code> å±…ç„¶æ‰“å°å‡ºçš„æ˜¯<code>window</code> ä¸‹çš„ <code>a</code> ğŸ˜®</p><p>è¿™ä¾¿æ˜¯è¿™å±‚ã€Œé©¬ç”²ã€çš„å‰å®³ä¹‹å¤„äº†ï¼šä½¿ç”¨å¦ä¸€ä¸ªå˜é‡æ¥ç»™å‡½æ•°å–åˆ«åé€ æˆä¸¢å¤±ç»‘å®šå¯¹è±¡ï¼ˆç§˜ç±å‡çº§ â¬†ï¸ ï¼‰</p><h2 id="æ˜¾å¼ç»‘å®š"><a href="#æ˜¾å¼ç»‘å®š" class="headerlink" title="æ˜¾å¼ç»‘å®š"></a>æ˜¾å¼ç»‘å®š</h2><p>å˜¿å˜¿ ğŸ˜ ä½ æœ‰å¼ è‰¯è®¡ï¼Œæˆ‘æœ‰è¿‡å¢™æ¢¯ ~</p><p>æ‹¿å‡ºå“†å•¦Aæ¢¦çš„é“å…·ã€éç”Ÿç‰©å‚¬çœ å–‡å­ğŸ“¢ã€ï¼š <code>call</code> <code>apply</code> <code>bind</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> foo <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token keyword">var</span> foo2 <span class="token operator">=</span> obj<span class="token punctuation">.</span>foo<span class="token punctuation">;</span>obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token function">foo2</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>      <span class="token comment">// ä¸Šé¢ä»£ç ä¸éšå¼ç»‘å®šç¤ºä¾‹ä¸€è‡´ï¼Œæ–°å¢æ­¤è¡Œä»£ç </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å½“å½“å½“ï¼Œ<code>foo2.call(obj)</code> æ‰“å°å‡ºçš„æ˜¯ 1ã€‚</p><p>è¿™å°±æ˜¯åˆ©ç”¨ <code>call</code> ã€ <code>apply</code> æˆ–è€… <code>bind</code> æ–¹æ³•æ”¹å˜å‡½æ•°å†…thisçš„æŒ‡å‘çš„æ˜¾ç¤ºç»‘å®šã€‚</p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/call">MDN Function.prototype.call()</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/apply">MDN Function.prototype.apply()</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function/bind">MDN Function.prototype.bind()</a></p><h2 id="newç»‘å®š"><a href="#newç»‘å®š" class="headerlink" title="newç»‘å®š"></a>newç»‘å®š</h2><p>ä½¿ç”¨newæ¥è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œä¼šæ„é€ ä¸€ä¸ªæ–°å¯¹è±¡å¹¶æŠŠè¿™ä¸ªæ–°å¯¹è±¡ç»‘å®šåˆ°è°ƒç”¨å‡½æ•°ä¸­çš„this</p><p><del>è¿™é‡Œç•™å‘</del>ï¼Œç­‰<a href="https://april-cl.github.io/2021/08/20/js-de-san-zuo-da-shan-zhi-yuan-xing/#toc-heading-4">å…³äº <code>new</code> çš„åšå®¢</a>å†™å¥½äº†å†æ¥å¡«</p><h2 id="ç®­å¤´å‡½æ•°ç»‘å®š"><a href="#ç®­å¤´å‡½æ•°ç»‘å®š" class="headerlink" title="ç®­å¤´å‡½æ•°ç»‘å®š"></a>ç®­å¤´å‡½æ•°ç»‘å®š</h2><p>å®é™…ä¸Šç®­å¤´å‡½æ•°é‡Œå¹¶æ²¡æœ‰ thisï¼Œå¦‚æœåœ¨ç®­å¤´å‡½æ•°é‡Œçœ‹åˆ° thisï¼Œç›´æ¥æŠŠå®ƒå½“ä½œç®­å¤´å‡½æ•°å¤–é¢çš„ this å³å¯ã€‚å¤–é¢çš„ this æ˜¯ä»€ä¹ˆï¼Œç®­å¤´å‡½æ•°é‡Œé¢çš„ this å°±è¿˜æ˜¯ä»€ä¹ˆï¼Œå› ä¸ºç®­å¤´å‡½æ•°æœ¬èº«ä¸æ”¯æŒ thisã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š</p><p><a href="https://zhuanlan.zhihu.com/p/23804247">this çš„å€¼åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸€æ¬¡è¯´æ¸…æ¥š</a></p><p><a href="https://zhuanlan.zhihu.com/p/25991271">ä½ æ€ä¹ˆè¿˜æ²¡ææ‡‚ thisï¼Ÿ</a></p><p><a href="https://zhuanlan.zhihu.com/p/30164164">JS é‡Œä¸ºä»€ä¹ˆä¼šæœ‰ this</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®°--Reactï¼ˆäºŒï¼‰Class ç»„ä»¶</title>
      <link href="/2021/08/17/xiao-bai-cai-bi-ji-react-er-class-zu-jian/"/>
      <url>/2021/08/17/xiao-bai-cai-bi-ji-react-er-class-zu-jian/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸¤ç§æ–¹å¼åˆ›å»º-Class-ç»„ä»¶"><a href="#ä¸¤ç§æ–¹å¼åˆ›å»º-Class-ç»„ä»¶" class="headerlink" title="ä¸¤ç§æ–¹å¼åˆ›å»º Class ç»„ä»¶"></a>ä¸¤ç§æ–¹å¼åˆ›å»º Class ç»„ä»¶</h1><ol><li><p>ES5 æ–¹å¼ï¼ˆå·²è¿‡æ—¶ï¼‰</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">const</span> <span class="token constant">A</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hi</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">A</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ES6 æ–¹å¼</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">hi</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>        <span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token constant">B</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¼ºè¡Œè®°å¿†ç‚¹ï¼š<code>extends</code> ã€<code>constructor</code>ã€<code>super</code>ã€‚<br>å¦‚æœå†™äº† <code>constructor</code> æ²¡å†™ <code>super</code> ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥è¦ä¹ˆä¸å†™ <code>constructor</code> ï¼ˆå³ä¸åˆå§‹åŒ–ï¼‰ï¼Œè¦ä¹ˆå°±å†™å…¨ã€‚<code>super</code> çš„ä½œç”¨ï¼šå°†çˆ¶ç±»çš„thiså¯¹è±¡ç»§æ‰¿ç»™å­ç±»ã€‚</p></blockquote></li></ol><h1 id="Props-å¤–éƒ¨æ•°æ®"><a href="#Props-å¤–éƒ¨æ•°æ®" class="headerlink" title="Props å¤–éƒ¨æ•°æ®"></a>Props å¤–éƒ¨æ•°æ®</h1><p>ä½œç”¨ï¼šæ¥å—å¤–éƒ¨æ•°æ®æˆ–å‡½æ•°<br>è¯»å–ï¼šthis.props<br>ä¸ä¹‹ç›¸å…³çš„é’©å­ï¼šUNSAFE_componentWillReceiveProps(newProps)<br>æ³¨æ„äº‹é¡¹ï¼šæ°¸è¿œä¸è¦æ”¹å†™ Propsï¼Œåº”è¯¥ç”± Props çš„ä¸»äººå¯¹æ•°æ®è¿›è¡Œæ›´æ”¹</p><h1 id="State-å’Œ-setState"><a href="#State-å’Œ-setState" class="headerlink" title="State å’Œ setState"></a>State å’Œ setState</h1><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>    <span class="token comment">// åˆå§‹åŒ– state</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token literal-property property">m</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'April-cl'</span><span class="token punctuation">,</span>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// setState çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ–°çš„ stateï¼Œæ³¨æ„è¿™é‡Œå¹¶æ²¡æœ‰æ”¹å˜ state.m</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment">// è¿™é‡Œæ§åˆ¶å°æ‰“å° n çš„å€¼ä¸º 1 ï¼ŒsetState ä¸ä¼šç«‹å³æ”¹å˜ this.stateï¼Œä¼šåœ¨å½“å‰ä»£ç è¿è¡Œå®Œåå†å»æ›´æ–° this.stateï¼Œä»è€Œè§¦å‘ UI æ›´æ–°</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function-variable function">onClick1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// setState çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> state<span class="token punctuation">.</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> state<span class="token punctuation">.</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function-variable function">onClick2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// setState çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æˆåŠŸåæ‰§è¡Œçš„å›è°ƒå‡½æ•°</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">n</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>App<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>m<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">         </span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>n<span class="token punctuation">}</span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onClick1<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onClick2<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">+3</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">export</span> <span class="token keyword">default</span> App<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ³¨æ„ç‚¹</p><ul><li>setState ä¸ä¼šç«‹å³æ”¹å˜ this.state</li><li>setState çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ¥å—ä¸¤ç§å½¢å¼çš„å‚æ•°ï¼Œæ¨èä½¿ç”¨å‡½æ•°</li></ul></blockquote><h1 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h1><h2 id="ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"><a href="#ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº"></a>ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåº</h2><h3 id="æŒ‚è½½"><a href="#æŒ‚è½½" class="headerlink" title="æŒ‚è½½"></a>æŒ‚è½½</h3><ul><li>constructor</li><li>static getDerivedStateFromProps</li><li>render</li><li>componentDidMount</li></ul><h3 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h3><ul><li>static getDerivedStateFromProps</li><li>shouldComponentUpdate</li><li>render</li><li>getSnapshotBeforeUpdate</li><li>componentDidUpdate</li></ul><h3 id="å¸è½½"><a href="#å¸è½½" class="headerlink" title="å¸è½½"></a>å¸è½½</h3><ul><li>componentWillUnmount</li></ul><h2 id="ç”Ÿå‘½å‘¨æœŸå‡½æ•°"><a href="#ç”Ÿå‘½å‘¨æœŸå‡½æ•°" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸå‡½æ•°"></a>ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h2><h3 id="constructor-NaN"><a href="#constructor-NaN" class="headerlink" title="constructor"></a>constructor</h3><p>åœ¨ <code>React</code> ç»„ä»¶æŒ‚è½½ä¹‹å‰è¢«è°ƒç”¨ï¼Œåœ¨ä¸º <code>React.Component</code> å­ç±»å®ç°æ„é€ å‡½æ•°æ—¶ï¼Œåº”åœ¨å…¶ä»–è¯­å¥ä¹‹å‰è°ƒç”¨ <code>super()</code></p><p>ç”¨é€”ï¼š</p><ul><li><p>åˆå§‹åŒ– stateï¼Œä½†ä¸èƒ½è°ƒç”¨ setState</p></li><li><p>ä¸º<a href="https://zh-hans.reactjs.org/docs/handling-events.html">äº‹ä»¶å¤„ç†å‡½æ•°</a>ç»‘å®šå®ä¾‹</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">/* å…¶å®ƒä»£ç ç•¥ */</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>onClick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢ä¹Ÿå¯ä»¥ç”¨æ–°è¯­æ³•ä»£æ›¿ ğŸ‘‡</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">/* å…¶å®ƒä»£ç ç•¥ */</span><span class="token punctuation">}</span><span class="token function-variable function">onClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#constructor">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="static-getDerivedStateFromProp-ï¼ˆä¸å¸¸ç”¨ï¼‰"><a href="#static-getDerivedStateFromProp-ï¼ˆä¸å¸¸ç”¨ï¼‰" class="headerlink" title="static getDerivedStateFromProp ï¼ˆä¸å¸¸ç”¨ï¼‰"></a>static getDerivedStateFromProp ï¼ˆä¸å¸¸ç”¨ï¼‰</h3><p>åœ¨è°ƒç”¨ <code>render</code> æ–¹æ³•ä¹‹å‰è°ƒç”¨ï¼Œåœ¨åˆå§‹åŒ–å’Œåç»­æ›´æ–°éƒ½ä¼šè¢«è°ƒç”¨</p><p>è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° stateï¼Œå¦‚æœè¿”å› null åˆ™ä¸æ›´æ–°ä»»ä½•å†…å®¹</p><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#static-getderivedstatefromprops">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="render"><a href="#render" class="headerlink" title="render"></a>render</h3><p>æ˜¯ <code>Class ç»„ä»¶</code>ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•</p><p>ç”¨äºå±•ç°è§†å›¾</p><p>åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Œå¦‚æœæœ‰å¤šä¸ªå…ƒç´ åˆ™éœ€ç”¨ <code>&lt;&gt;&lt;/&gt;</code> åŒ…è£¹èµ·æ¥</p><p><code>render</code> é‡Œé¢å¯ä»¥å†™</p><ul><li>if â€¦ else â€¦</li><li>? : è¡¨è¾¾å¼</li><li>array.map å¾ªç¯</li></ul><blockquote><p>å¦‚æœ <code>shouldComponentUpdate()</code> è¿”å› <code>false</code>ï¼Œåˆ™ä¸ä¼šè°ƒç”¨ <code>render()</code></p></blockquote><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#render">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="componentDidMount"><a href="#componentDidMount" class="headerlink" title="componentDidMount"></a>componentDidMount</h3><p>åœ¨ç»„ä»¶æŒ‚è½½åï¼ˆæ’å…¥ DOM æ ‘ä¸­ï¼‰ç«‹å³è°ƒç”¨</p><p>å®˜æ–¹æ¨èåœ¨æ­¤å¤„å‘èµ·<strong>åŠ è½½æ•°æ®</strong>çš„ <code>AJAX</code> è¯·æ±‚</p><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#componentdidmount">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate"></a>shouldComponentUpdate</h3><p>è¿”å› true æ—¶å…è®¸æ›´æ–° UIï¼Œè¿”å› false æ—¶é˜»æ­¢æ›´æ–° UI</p><p>å…è®¸æ‰‹åŠ¨åˆ¤æ–­å¸ˆå‚…è¦è¿›è¡Œç»„ä»¶æ›´æ–°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®åº”ç”¨åœºæ™¯çµæ´»åœ°è®¾ç½®è¿”å›å€¼ï¼Œä»¥é¿å…ä¸å¿…è¦çš„æ›´æ–°</p><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#shouldcomponentupdate">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="getSnapshotBeforeUpdate-ï¼ˆä¸å¸¸ç”¨ï¼‰"><a href="#getSnapshotBeforeUpdate-ï¼ˆä¸å¸¸ç”¨ï¼‰" class="headerlink" title="getSnapshotBeforeUpdate ï¼ˆä¸å¸¸ç”¨ï¼‰"></a>getSnapshotBeforeUpdate ï¼ˆä¸å¸¸ç”¨ï¼‰</h3><p>åœ¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“è¾“å‡ºï¼ˆæäº¤åˆ° DOM èŠ‚ç‚¹ï¼‰ä¹‹å‰è°ƒç”¨ã€‚å®ƒä½¿å¾—ç»„ä»¶èƒ½åœ¨å‘ç”Ÿæ›´æ”¹ä¹‹å‰ä» DOM ä¸­æ•è·ä¸€äº›ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œæ»šåŠ¨ä½ç½®ï¼‰ã€‚æ­¤ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä»»ä½•è¿”å›å€¼å°†ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>componentDidUpdate</code></p><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#getsnapshotbeforeupdate">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="componentDidUpdate"><a href="#componentDidUpdate" class="headerlink" title="componentDidUpdate"></a>componentDidUpdate</h3><p>åœ¨è§†å›¾æ›´æ–°åæ‰§è¡Œä»£ç ï¼Œé¦–æ¬¡æ¸²æŸ“ä¸ä¼šæ‰§è¡Œ</p><p>åœ¨æ­¤å¤„ç›´æ¥è°ƒç”¨ <code>setState</code> å¿…é¡»è¢«åŒ…è£¹åœ¨ä¸€ä¸ªæ¡ä»¶è¯­å¥é‡Œ</p><p>å®˜æ–¹æ¨èåœ¨æ­¤å¤„å‘èµ·<strong>æ›´æ–°æ•°æ®</strong>çš„ <code>AJAX</code> è¯·æ±‚</p><blockquote><p>å¦‚æœ <code>shouldComponentUpdate()</code> è¿”å›å€¼ä¸º <code>false</code>ï¼Œåˆ™ä¸ä¼šè°ƒç”¨ <code>componentDidUpdate()</code></p></blockquote><p><a href="https://zh-hans.reactjs.org/docs/react-component.html#componentdidupdate">å®˜æ–¹æ–‡æ¡£</a></p>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>git çš„é…ç½®å’Œå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2021/08/16/git-de-pei-zhi-he-chang-yong-ming-ling/"/>
      <url>/2021/08/16/git-de-pei-zhi-he-chang-yong-ming-ling/</url>
      
        <content type="html"><![CDATA[<h1 id="æœ¬åœ°ä»“åº“é…ç½®"><a href="#æœ¬åœ°ä»“åº“é…ç½®" class="headerlink" title="æœ¬åœ°ä»“åº“é…ç½®"></a>æœ¬åœ°ä»“åº“é…ç½®</h1><p>æ‰“å¼€ Cmder ï¼ˆä»»æ„ç›®å½•å‡å¯ï¼Œå› ä¸ºæ˜¯å…¨å±€å®‰è£…ï¼‰ï¼Œé€è¡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> config <span class="token parameter variable">--global</span> user.name ä½ çš„è‹±æ–‡å<span class="token function">git</span> config <span class="token parameter variable">--global</span> user.email ä½ çš„é‚®ç®±<span class="token function">git</span> config <span class="token parameter variable">--global</span> push.default simple<span class="token function">git</span> config <span class="token parameter variable">--global</span> core.quotepath <span class="token boolean">false</span><span class="token function">git</span> config <span class="token parameter variable">--global</span> core.editor <span class="token string">"code --wait"</span><span class="token function">git</span> config <span class="token parameter variable">--global</span> core.autocrlf input<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¿œç¨‹ä»“åº“é…ç½®ï¼ˆGitHubï¼‰"><a href="#è¿œç¨‹ä»“åº“é…ç½®ï¼ˆGitHubï¼‰" class="headerlink" title="è¿œç¨‹ä»“åº“é…ç½®ï¼ˆGitHubï¼‰"></a>è¿œç¨‹ä»“åº“é…ç½®ï¼ˆGitHubï¼‰</h1><ol><li>è¿è¡Œ <code>$ ssh-keygen -t rsa -b 4096 -C ä½ çš„GitHubç”µå­é‚®ä»¶åœ°å€</code>ï¼Œä¸€ç›´å›è½¦åˆ°æ²¡æœ‰æç¤ºã€‚</li><li>è¿è¡Œ <code>cat ~/.ssh/id_rsa.pub</code>ï¼Œå¤åˆ¶å…¬é’¥å†…å®¹ã€‚</li><li>ç™»å½• GitHubï¼ŒSetting -&gt; SSh and GPG keys -&gt; New SSH key -&gt; Title å¯ä»¥éšä¾¿å‘½åï¼Œå°±æ˜¯ç”µè„‘çš„ä»£å·ï¼Œç„¶åç²˜è´´åˆšåˆšå¤åˆ¶çš„å…¬é’¥å†…å®¹åˆ° Key æ–‡æœ¬æ¡†ç‚¹å‡» Add SSH key å³å¯ã€‚</li></ol><p>å‚è€ƒé“¾æ¥ ğŸ”—<br><a href="https://docs.github.com/cn/github/authenticating-to-github/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">GitHub Docs ç”Ÿæˆ SSH å¯†é’¥</a></p><h1 id="git-å¸¸ç”¨å‘½ä»¤"><a href="#git-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="git å¸¸ç”¨å‘½ä»¤"></a>git å¸¸ç”¨å‘½ä»¤</h1><p>åˆå§‹åŒ–ä»“åº“ï¼š<code>git init</code></p><p>æŠŠä¿®æ”¹æ·»åŠ åˆ°ä»“åº“ï¼š<code>git add ä¿®æ”¹çš„æ–‡ä»¶å</code></p><p>æŠŠä¿®æ”¹æäº¤åˆ°ä»“åº“ï¼š<code>git commit -m 'æäº¤å'</code></p><p>æŸ¥çœ‹å½“å‰ä»“åº“ä¿®æ”¹çŠ¶æ€ï¼š<code>git status</code></p><p>æŸ¥çœ‹å†å²æäº¤è®°å½•ï¼š<code>git log</code></p><p>å›é€€åˆ°ä¸Šä¸€ç‰ˆæœ¬ï¼š<code>git reset --hard HEAD^</code></p><p>å›é€€åˆ°æŒ‡å®šç‰ˆæœ¬å·ï¼š<code>git reset --hard ç‰ˆæœ¬å·å‰nä½ï¼ˆæˆ‘ä¸€èˆ¬å¤åˆ¶6-10ä½ï¼‰</code></p><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆç¬¬ä¸€æ¬¡åˆ›å»ºè¿œç¨‹ä»“åº“æ—¶ GitHub æœ‰æç¤ºä¸‹é¢ä»£ç ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> origin è¿œç¨‹ä»“åº“sshé“¾æ¥<span class="token function">git</span> branch <span class="token parameter variable">-M</span> main<span class="token function">git</span> push <span class="token parameter variable">-u</span> origin main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆå·²ç»æ¨é€è¿‡è¿œç¨‹ä»“åº“äº†ï¼‰ï¼š<code>git push</code></p><p>æŸ¥çœ‹åˆ†æ”¯ï¼š<code>git branch</code></p><p>åˆ›å»ºåˆ†æ”¯ï¼š<code>git brach åˆ†æ”¯å</code></p><p>åˆ‡æ¢åˆ†æ”¯ï¼š<code>git checkout åˆ†æ”¯å</code></p><p>å‚è€ƒé“¾æ¥ ğŸ”—<br><a href="https://www.liaoxuefeng.com/wiki/896043488029600">å»–é›ªå³°çš„ Git æ•™ç¨‹</a></p>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤è¡Œ</title>
      <link href="/2021/08/16/yi-xie-chang-yong-de-ming-ling-xing/"/>
      <url>/2021/08/16/yi-xie-chang-yong-de-ming-ling-xing/</url>
      
        <content type="html"><![CDATA[<blockquote><p>ç¨‹åºå‘˜çš„å®¿å‘½ â€”â€” å¢åˆ æ”¹æŸ¥</p></blockquote><h1 id="æŸ¥ï¼šæŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•"><a href="#æŸ¥ï¼šæŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="æŸ¥ï¼šæŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•"></a>æŸ¥ï¼šæŸ¥çœ‹æ–‡ä»¶æˆ–ç›®å½•</h1><ul><li>æŸ¥çœ‹å½“å‰ç›®å½•ç»å¯¹è·¯å¾„ï¼špwd</li><li>æŸ¥çœ‹å½“å‰ç›®å½•å†…å®¹ï¼šls</li><li>æŸ¥çœ‹æŒ‡å®šç›®å½•å†…å®¹ï¼šls è·¯å¾„</li><li>æŸ¥çœ‹æ–‡ä»¶å†…å®¹<ul><li>æŸ¥çœ‹å…¨éƒ¨å†…å®¹ï¼šcat è·¯å¾„</li><li>æŸ¥çœ‹å‰ xx è¡Œå†…å®¹ï¼šhead -n xx è·¯å¾„</li><li>æŸ¥çœ‹å xx è¡Œå†…å®¹ï¼štail -n xx è·¯å¾„</li><li>åˆ†å±æŸ¥çœ‹å†…å®¹ï¼šless è·¯å¾„</li></ul></li></ul><h1 id="å¢ï¼šåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•"><a href="#å¢ï¼šåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="å¢ï¼šåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•"></a>å¢ï¼šåˆ›å»ºæ–‡ä»¶æˆ–ç›®å½•</h1><ul><li>åˆ›å»ºæ–‡ä»¶<ul><li>ç”Ÿæˆç©ºæ–‡ä»¶ï¼štouch æ–‡ä»¶å</li><li>ç”Ÿæˆæœ‰å†…å®¹çš„æ–‡ä»¶ï¼ˆæ–‡ä»¶åé‡å¤ä¼šæ›¿æ¢æ—§å†…å®¹ï¼‰ï¼šecho å†…å®¹ &gt; æ–‡ä»¶å</li><li>å°†å†…å®¹è¿½åŠ åœ¨æ–‡ä»¶ä¸­ï¼ˆä¸ä¼šæ›¿æ¢æ—§å†…å®¹ï¼‰ï¼šecho å†…å®¹ &gt;&gt; æ–‡ä»¶å</li><li>ä¸ç¼–è¯‘å†…å®¹ä¸­çš„è½¬ä¹‰å­—ç¬¦ï¼šecho -e â€œå†…å®¹â€ &gt; æ–‡ä»¶å</li><li>åŒæ—¶ç”Ÿæˆå¤šä¸ªæ–‡ä»¶ï¼štouch æ–‡ä»¶å11 æ–‡ä»¶å22</li><li>å¤åˆ¶æ–‡ä»¶ï¼šcp æ–‡ä»¶å1 æ–‡ä»¶å2</li></ul></li><li>åˆ›å»ºç›®å½•<ul><li>ç”Ÿæˆç©ºç›®å½•ï¼šmkdir ç›®å½•å</li><li>ç”Ÿæˆå¤šçº§ç›®å½•ï¼š mkdir -p ç›®å½•å1/ç›®å½•å2/ç›®å½•å3</li><li>åŒæ—¶ç”Ÿæˆå¤šä¸ªç›®å½•ï¼šmkdir -p ç›®å½•å1 ç›®å½•å2/ç›®å½•å3</li><li>å¤åˆ¶ç›®å½•ï¼šcp -r ç›®å½•å1 ç›®å½•å2</li></ul></li></ul><h1 id="åˆ ï¼šåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•"><a href="#åˆ ï¼šåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="åˆ ï¼šåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•"></a>åˆ ï¼šåˆ é™¤æ–‡ä»¶æˆ–ç›®å½•</h1><ul><li>åˆ é™¤æ–‡ä»¶ï¼šrm æ–‡ä»¶å</li><li>åˆ é™¤ç›®å½•<ul><li>åˆ é™¤ç›®å½•ï¼š rm -r ç›®å½•å</li><li>å¼ºåˆ¶åˆ é™¤ç›®å½•ï¼šrm -rf ç›®å½•å</li></ul></li></ul><p><strong>ä¸è¦æ‰‹è´±æŠŠç³»ç»Ÿæ–‡ä»¶åˆ äº†~~~</strong></p><p>ä¸ºé¿å…è¯¯åˆ ç³»ç»Ÿæ–‡ä»¶ï¼Œè¿›å…¥å‘½ä»¤è¡Œç¬¬ä¸€ä»¶äº‹æ‰§è¡Œ <code>cd ~</code> è¿›å…¥åˆ°ç”¨æˆ·ç›®å½•ã€‚</p><h1 id="æ”¹ï¼šä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•"><a href="#æ”¹ï¼šä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•" class="headerlink" title="æ”¹ï¼šä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•"></a>æ”¹ï¼šä¿®æ”¹æ–‡ä»¶æˆ–ç›®å½•</h1><ul><li>é‡å‘½åæ–‡ä»¶ï¼šmv æ–‡ä»¶å1 æ–‡ä»¶å2</li><li>ç§»åŠ¨æ–‡ä»¶åˆ°åˆ«çš„ç›®å½•ï¼šmv æ–‡ä»¶å ç›®å½•å</li><li>æ›´æ–°æ–‡ä»¶æœ€åçš„ä¿®æ”¹æ—¶é—´ï¼ˆå’Œç”Ÿæˆç©ºæ–‡ä»¶ä¸€æ ·ï¼‰ï¼šç”Ÿæˆç©ºæ–‡ä»¶ï¼štouch æ–‡ä»¶å</li><li>ä½¿ç”¨é»˜è®¤ç¨‹åºæ‰“å¼€æ–‡ä»¶ï¼šstart æ–‡ä»¶å</li><li>ä½¿ç”¨VSCodeæ‰“å¼€æ–‡ä»¶ï¼šcode æ–‡ä»¶å</li></ul><h1 id="å‘½ä»¤ç»„åˆ"><a href="#å‘½ä»¤ç»„åˆ" class="headerlink" title="å‘½ä»¤ç»„åˆ"></a>å‘½ä»¤ç»„åˆ</h1><ul><li>å‘½ä»¤1æˆåŠŸåæ‰§è¡Œå‘½ä»¤2ï¼šå‘½ä»¤1 &amp;&amp; å‘½ä»¤2</li><li>ä¸ç®¡å‘½ä»¤1è¿è¡Œç»“æœå¦‚ä½•éƒ½æ‰§è¡Œå‘½ä»¤2ï¼šå‘½ä»¤1 ; å‘½ä»¤2</li></ul><h1 id="è„šæœ¬æ–‡ä»¶"><a href="#è„šæœ¬æ–‡ä»¶" class="headerlink" title="è„šæœ¬æ–‡ä»¶"></a>è„šæœ¬æ–‡ä»¶</h1><ol><li>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œåç¼€å¯æœ‰å¯æ— ã€‚</li><li>æ‰§è¡Œ <code>chmod +x æ–‡ä»¶</code>ï¼Œæ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚</li><li>æŠŠè¦æ‰§è¡Œçš„å‘½ä»¤å†™åˆ°æ–‡ä»¶é‡Œï¼ˆä¸‹é¢ä»£ç ä¸¾ä¾‹è¯´æ˜ï¼Œè¿™é‡Œçš„ <code>$1</code> åé¢é€šè¿‡å‚æ•°ä¼ å…¥ï¼‰ã€‚<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token variable">$1</span><span class="token builtin class-name">cd</span> <span class="token variable">$1</span><span class="token function">touch</span> new.txt<span class="token builtin class-name">echo</span> Hello <span class="token operator">&gt;</span> new.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li>æ‰§è¡Œ <code>sh æ–‡ä»¶ å‚æ•°</code> æˆ– <code>./æ–‡ä»¶</code></li></ol>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–°æ‰‹å‰ç«¯çš„è£…æœºæ”»ç•¥ï¼Œæ‹¿æ¥å§ä½ </title>
      <link href="/2021/08/16/xin-shou-qian-duan-de-zhuang-ji-gong-lue-na-lai-ba-ni/"/>
      <url>/2021/08/16/xin-shou-qian-duan-de-zhuang-ji-gong-lue-na-lai-ba-ni/</url>
      
        <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´ä¹°äº†æ–°ç”µè„‘ï¼Œè£…äº†å¾ˆå¤šå­¦ä¹ ç”¨çš„è½¯ä»¶ï¼Œè¿™é‡Œè®°ä¸‹æ¥æ–¹ä¾¿åé¢æŸ¥æ‰¾ ğŸ”</p><h1 id="Chrome-æµè§ˆå™¨"><a href="#Chrome-æµè§ˆå™¨" class="headerlink" title="Chrome æµè§ˆå™¨"></a>Chrome æµè§ˆå™¨</h1><h1 id="Cmder-æ§åˆ¶å°è½¯ä»¶"><a href="#Cmder-æ§åˆ¶å°è½¯ä»¶" class="headerlink" title="Cmder æ§åˆ¶å°è½¯ä»¶"></a>Cmder æ§åˆ¶å°è½¯ä»¶</h1><p>å®‰è£…åé…ç½®ï¼š</p><ul><li>é»˜è®¤å‘½ä»¤è¡Œæ”¹ä¸º bashã€‚è®¾ç½® -&gt; é€šç”¨ -&gt; é€‰æ‹©ä½ çš„å¯åŠ¨ä»»åŠ¡æˆ–è€…å¸¦å‚æ•°çš„shell -&gt; {bash::bash}</li></ul><h1 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h1><p>å®‰è£…åé…ç½®ï¼š</p><ul><li>ä½¿ç”¨æ·˜å®æºã€‚ <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i <span class="token parameter variable">-g</span> nrmnrm <span class="token function">ls</span>nrm use taobao<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h1><h1 id="7zip-è§£å‹è½¯ä»¶"><a href="#7zip-è§£å‹è½¯ä»¶" class="headerlink" title="7zip è§£å‹è½¯ä»¶"></a>7zip è§£å‹è½¯ä»¶</h1><h1 id="Everything-æ–‡ä»¶æœç´¢"><a href="#Everything-æ–‡ä»¶æœç´¢" class="headerlink" title="Everything æ–‡ä»¶æœç´¢"></a>Everything æ–‡ä»¶æœç´¢</h1><h1 id="å¾®ä¿¡-PC-ç‰ˆ"><a href="#å¾®ä¿¡-PC-ç‰ˆ" class="headerlink" title="å¾®ä¿¡ PC ç‰ˆ"></a>å¾®ä¿¡ PC ç‰ˆ</h1><h1 id="Snipaste-æˆªå›¾è½¯ä»¶"><a href="#Snipaste-æˆªå›¾è½¯ä»¶" class="headerlink" title="Snipaste æˆªå›¾è½¯ä»¶"></a>Snipaste æˆªå›¾è½¯ä»¶</h1><h1 id="VSCode-ç¼–è¾‘å™¨"><a href="#VSCode-ç¼–è¾‘å™¨" class="headerlink" title="VSCode ç¼–è¾‘å™¨"></a>VSCode ç¼–è¾‘å™¨</h1><p>å®‰è£…åé…ç½®ï¼š</p><ul><li>è‡ªåŠ¨ä¿å­˜ã€‚è®¾ç½® -&gt; Auto Save: onFocusChange</li><li>æ±‰åŒ–ã€‚æ‰©å±• -&gt; æœç´¢ chinese</li><li>æ£€æŸ¥æ‹¼å†™ã€‚æ‰©å±• -&gt; æœç´¢ Code Spell Checker</li><li>git æ“ä½œã€‚æ‰©å±• -&gt; Git Easy</li><li><a href="https://github.com/cmderdev/cmder/wiki/Seamless-VS-Code-Integration">é…åˆ Cmder</a>ã€‚</li></ul><p>å¿«æ·é”®ï¼š<br>æ‰¾æ–‡ä»¶ ctrl + p<br>è¾“å‘½ä»¤ ctrl + shift + p<br>å¤šä½ç½®è¾“å…¥ at + å•å‡»</p><h1 id="WebStorm-ç¼–è¾‘å™¨"><a href="#WebStorm-ç¼–è¾‘å™¨" class="headerlink" title="WebStorm ç¼–è¾‘å™¨"></a>WebStorm ç¼–è¾‘å™¨</h1><p>å®‰è£…åé…ç½®ï¼š</p><ul><li>é…åˆ Cmderã€‚Setting -&gt; Tools -&gt; Terminal -&gt; Shell Path -&gt; ç”¨ Everything æœç´¢ <code>git-for-windows</code> ï¼Œå¤åˆ¶åŒ…å« <code>cmder\vendor\git-for-windows\bin\bash.exe</code> çš„è·¯å¾„ã€‚</li><li>é…ç½® Gitã€‚Setting -&gt; Version Control -&gt; Git -&gt; Path to Git executable -&gt;  ç”¨ Everything æœç´¢ <code>git-for-windows</code> ï¼Œå¤åˆ¶åŒ…å« <code>cmder\vendor\git-for-windows\bin\git.exe</code> çš„è·¯å¾„ã€‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> ç”µè„‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å‘½ä»¤è¡Œ </tag>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å°ç™½èœç¬”è®°--Reactï¼ˆä¸€ï¼‰åŸºç¡€ç¯‡</title>
      <link href="/2021/08/14/xiao-bai-cai-bi-ji-react-yi/"/>
      <url>/2021/08/14/xiao-bai-cai-bi-ji-react-yi/</url>
      
        <content type="html"><![CDATA[<h2 id="å†™åœ¨å‰é¢çš„ç¢ç¢å¿µğŸ’¬ï¼š"><a href="#å†™åœ¨å‰é¢çš„ç¢ç¢å¿µğŸ’¬ï¼š" class="headerlink" title="å†™åœ¨å‰é¢çš„ç¢ç¢å¿µğŸ’¬ï¼š"></a>å†™åœ¨å‰é¢çš„ç¢ç¢å¿µğŸ’¬ï¼š</h2><p>ä»å¤§å­¦è‡ªå­¦å‰ç«¯åˆ°æ¯•ä¸šåšéå‰ç«¯å·¥ä½œå†åˆ°è£¸è¾é‡æ–°å­¦å‰ç«¯ï¼Œä¸¤æ¬¡å­¦ä¹ çš„ä½“ä¼šè¿˜æ˜¯æœ‰æ‰€ä¸åŒçš„ã€‚ç¬¬ä¸€æ¬¡å­¦ä¹ çš„ç»å†å°±åƒç›²äººæ‘¸è±¡ï¼Œæ‘¸åˆ°å•¥æ˜¯å•¥ï¼Œè·Ÿç€ç½‘ä¸Šçš„æ•™ç¨‹åšï¼Œè‡ªå·±è®¾ç½®éœ€æ±‚ç„¶åä¸æ–­å†™bugï¼Œå½“æ—¶è¿˜æ˜¯å­¦ç”Ÿï¼Œæ—¶é—´ä¹Ÿå¤šï¼Œåšäº†å‡ ä¸ªè‡ªè®¤ä¸ºä¸é”™çš„é¡¹ç›®ï¼Œå‡­ç€ä¸€è‚¡åˆç”Ÿç‰›çŠŠä¸æ€•è™çš„åŠ²å„¿å…´å†²å†²çš„æ‰¾å·¥ä½œï¼Œå½“ç„¶ç»“æœæ˜¯æ²¡æ‰¾ç€ï¼Œå¥½åƒä¸€è‚¡çƒ­æƒ…è¢«æµ‡äº†ç›†å†°æ°´ã€‚åé¢åœ¨äº²æˆšä»‹ç»ä¸‹åšäº†ä»½ä¸æ­è¾¹çš„å·¥ä½œï¼Œç®—æ˜¯æ¸©æ°´ç…®é’è›™çš„è¿‡äº†ä¸‰å¹´ï¼ŒæœŸé—´ä¹Ÿæœ‰æ®µæ—¶é—´åœ¨åšæŒå­¦ä¹ å‰ç«¯çŸ¥è¯†ï¼Œä½†ç»ˆç©¶è¿˜æ˜¯è¿«äºæ—¶é—´å’Œå·¥ä½œçš„å‹åŠ›ï¼Œé¡¶å¤šç®—æ˜¯å­¦äº†ç‚¹æ°´èŠ±ã€‚å› ä¸ºå·¥ä½œçš„å…³ç³»ï¼Œä¸ºæé«˜æ•ˆç‡ï¼Œåæ¥èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨å­¦ä¹ VBAå’ŒExcelå‡½æ•°ã€‚è™½ç„¶åªç®—æ¶‰çŒäº†äº›çš®æ¯›ï¼Œä½†åº†å¹¸è‡ªå·±ä¸€ç›´åœ¨åšæŒå­¦ä¹ ï¼Œè„‘å­ä¸å¤ªç”Ÿé”ˆï¼Œç¬¬äºŒæ¬¡å­¦ä¹ è™½ç„¶ä¸å¦‚ç¬¬ä¸€æ¬¡æŒæ¡å¾—å¿«ï¼Œä½†å¤šåš¼å‡ éæ€»èƒ½åŠ æ·±å°è±¡ã€‚å½“ç„¶äº†ï¼Œç¬¬äºŒæ¬¡å­¦ä¹ æ›´åŠ æ˜¯å¾—ç›Šäºæœ‰äº†ç³»ç»Ÿçš„å­¦ä¹ æ–¹æ³•å’Œå‰äººçš„æŒ‡å¯¼ï¼Œå†…å¿ƒé‡Œè¿˜æ˜¯ååˆ†æ„Ÿæ¿€è¿™äº›è€å¸ˆä»¬çš„ã€‚å¥½åƒè¯´å¾—æœ‰ç‚¹å¤šï¼Œè¿™ä¸ªç­‰æœ‰ç©ºå†æ•´ç†å‡ºæ¥å§ã€‚å› ä¸ºæ˜¯åˆšå†™å®Œå‡ ä¸ªReactçš„é¡¹ç›®ï¼Œæ‰€ä»¥æƒ³ç€è¶çƒ­æ‰“é“æŠŠç¬”è®°å†™åˆ°åšå®¢é‡Œï¼Œæ–¹ä¾¿æ¸©æ•…çŸ¥æ–°ã€‚</p><h1 id="React-æ€ä¹ˆç”¨"><a href="#React-æ€ä¹ˆç”¨" class="headerlink" title="React æ€ä¹ˆç”¨"></a>React æ€ä¹ˆç”¨</h1><ol><li><p>é€šè¿‡ CDN å¼•å…¥</p><p> ç”¨ &lt;script&gt; å…ˆå¼•å…¥ <code>react.x.min.js</code> å†å¼•å…¥ <code>react-dom.x.min.js</code><br> å¯ä»¥åˆ° <a href="https://www.bootcdn.cn/">BootCDN</a> æœç´¢ CDN</p></li><li><p>é€šè¿‡ webpack å¼•å…¥</p><p> ä½¿ç”¨ä½ å–œæ¬¢çš„åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…</p> <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">yarn</span> <span class="token function">add</span> react react-dom<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> åœ¨é¡¹ç›®ä¸­é€šè¿‡ <code>import</code> å¼•å…¥</p> <pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">'react-dom'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>é€šå…¥ Create React App å¼•å…¥</p><p> å‰ç½®æ¡ä»¶ï¼š<code>Node.js</code> <code>Cmder</code></p><p> åœ¨é¢„å¤‡åˆ›å»ºé¡¹ç›®çš„åœ°æ–¹æ‰“å¼€ <code>Cmder</code> æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ˆ<del>å…³äº <code>Cmder</code> ç­‰å®‰è£…é…ç½®åé¢æœ‰ç©ºæ•´ç†å‡ºæ¥</del> æ•´ç†å¥½äº†ï¼Œåœ¨è¿™ï¼š<a href="https://april-cl.github.io/2021/08/16/xin-shou-qian-duan-de-zhuang-ji-gong-lue-na-lai-ba-ni/">æ–°æ‰‹å‰ç«¯çš„è£…æœºæ”»ç•¥ï¼Œæ‹¿æ¥å§ä½ </a> ğŸ™†â€â™€ï¼‰</p> <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">npx create-react-app my-app<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p> å› ä¸ºæ˜¯è‡ªå·±åšé¡¹ç›®ï¼Œæ‰€ä»¥ä¸€èˆ¬ç”¨çš„ç¬¬3ç§æ–¹å¼åˆ›å»º React åº”ç”¨ï¼Œè¿™ç§æ–¹å¼ä¼šé…ç½®å¥½å¼€å‘ç¯å¢ƒã€‚æˆåŠŸåçš„ç›®å½•æ˜¯è¿™æ ·çš„</p> <pre class="line-numbers language-none"><code class="language-none">my-appâ”œâ”€ .gitâ”œâ”€ .gitignoreâ”œâ”€ package.jsonâ”œâ”€ publicâ”‚  â”œâ”€ favicon.icoâ”‚  â”œâ”€ index.htmlâ”‚  â”œâ”€ logo192.pngâ”‚  â”œâ”€ logo512.pngâ”‚  â”œâ”€ manifest.jsonâ”‚  â””â”€ robots.txtâ”œâ”€ README.mdâ”œâ”€ srcâ”‚  â”œâ”€ App.cssâ”‚  â”œâ”€ App.jsâ”‚  â”œâ”€ App.test.jsâ”‚  â”œâ”€ index.cssâ”‚  â”œâ”€ index.jsâ”‚  â”œâ”€ logo.svgâ”‚  â”œâ”€ reportWebVitals.jsâ”‚  â””â”€ setupTests.jsâ””â”€ yarn.lock<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h1 id="JSX-æ˜¯ä»€ä¹ˆ"><a href="#JSX-æ˜¯ä»€ä¹ˆ" class="headerlink" title="JSX æ˜¯ä»€ä¹ˆ"></a>JSX æ˜¯ä»€ä¹ˆ</h1><p>å…ˆæ¥çœ‹ä¸€æ®µæœ‰è¶£çš„ä»£ç å§</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, world!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å’‹ä¸€çœ‹ä¼šä»¥ä¸ºæ˜¯ä¸€ä¸ªæ™®é€šçš„ <code>JavaScript</code> å˜é‡å£°æ˜ï¼Œä½†ä»”ç»†çœ‹è¿™ä¸ªå˜é‡çš„å€¼æ˜¯ä¸€ä¸ªå¹¶æ²¡æœ‰ç”¨å¼•å·åŒ…è£¹çš„ <code>HTML</code> æ ‡ç­¾ã€‚è¿™å°±æ˜¯ <code>JSX</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ª <code>JavaScript</code> çš„è¯­æ³•æ‰©å±•ã€‚ä¸€èˆ¬å»ºè®®åœ¨ <code>React</code> ä¸­é…åˆä½¿ç”¨ <code>JSX</code>ï¼Œ<code>JSX</code> å¯ä»¥å¾ˆå¥½åœ°æè¿° UI åº”è¯¥å‘ˆç°å‡ºå®ƒåº”æœ‰äº¤äº’çš„æœ¬è´¨å½¢å¼ã€‚<code>JSX</code> å…·æœ‰ <code>JavaScript</code> çš„å…¨éƒ¨åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥ç”Ÿæˆ <code>React</code> â€œå…ƒç´ â€ã€‚</p><p><code>webpack</code> å†…ç½®äº† <code>babel-loader</code>ï¼Œå¯ä»¥å°† JSX ç¼–è¯‘æˆ JS ä»£ç ï¼Œè¿™é‡Œæ¶‰åŠåˆ°ç¼–è¯‘åŸç†ä¸è¿°ï¼Œä¸Šé¢çš„ä»£ç è¢«ç¼–è¯‘æˆï¼š</p><pre class="line-numbers language-none"><code class="language-none">var element = React.createElement("h1", null, "Hello, world!");<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸ºä»€ä¹ˆä½¿ç”¨ <code>JSX</code> <a href="https://zh-hans.reactjs.org/docs/introducing-jsx.html">å®˜ç½‘</a>æœ‰è§£é‡Šï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p><p>ä½¿ç”¨ <code>JSX</code> çš„æ³¨æ„äº‹é¡¹  </p><ul><li>é©¼å³°å‘½åæ³•<br>  å› ä¸º <code>JSX</code> è¯­æ³•ä¸Šæ›´æ¥è¿‘ <code>JavaScript</code> è€Œä¸æ˜¯ <code>HTML</code>ï¼Œæ‰€ä»¥ <code>React DOM</code> ä½¿ç”¨ <code>camelCase</code>ï¼ˆé©¼å³°å‘½åæ³•ï¼‰æ¥å®šä¹‰å±æ€§çš„åç§°ï¼Œè€Œä¸ä½¿ç”¨ <code>HTML</code> å±æ€§åç§°çš„å‘½åçº¦å®šã€‚ä¾‹å¦‚ï¼Œ<code>JSX</code> é‡Œçš„ <code>class</code> å˜æˆäº† <code>className</code>ã€‚</li><li>åµŒå…¥è¡¨è¾¾å¼<br>  æ ‡ç­¾é‡Œçš„æ‰€æœ‰ <code>JS</code> ä»£ç éƒ½è¦ç”¨ <code>{}</code> åŒ…èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨åˆ°å˜é‡ <code>n</code>ï¼Œåˆ™éœ€å†™æˆ <code>{n}</code>ï¼›ä½¿ç”¨åˆ°å¯¹è±¡ <code>{n: 1}</code>ï¼Œåˆ™éœ€å†™æˆ <code>{{n: 1}}</code></li><li>å…»æˆ <code>return</code> åé¢åŠ  <code>()</code> çš„ä¹ æƒ¯</li></ul><h1 id="React-å…ƒç´ "><a href="#React-å…ƒç´ " class="headerlink" title="React å…ƒç´ "></a>React å…ƒç´ </h1><p>å…ƒç´ æ˜¯æ„æˆ <code>React</code> åº”ç”¨çš„æœ€å°å•ä½ã€‚<code>React DOM</code> è´Ÿè´£æ›´æ–° <code>DOM</code> æ¥ä¸ <code>React å…ƒç´ </code>ä¿æŒä¸€è‡´ã€‚</p><h2 id="å…ƒç´ æ¸²æŸ“"><a href="#å…ƒç´ æ¸²æŸ“" class="headerlink" title="å…ƒç´ æ¸²æŸ“"></a>å…ƒç´ æ¸²æŸ“</h2><p>é€šè¿‡ <code>ReactDOM.render(element, container[, callback])</code> å°† <code>React å…ƒç´ (element)</code>æ¸²æŸ“åˆ° <code>DOM èŠ‚ç‚¹(container)</code>ã€‚</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello, world</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>è¿™é‡Œå‡è®¾HTML æ–‡ä»¶æŸå¤„æœ‰ä¸€ä¸ª <code>id</code> ä¸º <code>root</code> çš„ <code>div</code>ã€‚</p><p><code>React å…ƒç´ </code>æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚ä¸€æ—¦è¢«åˆ›å»ºï¼Œä½ å°±æ— æ³•æ›´æ”¹å®ƒçš„å­å…ƒç´ æˆ–è€…å±æ€§ã€‚æ›´æ–° UI å”¯ä¸€çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å…ƒç´ ï¼Œå¹¶å°†å…¶ä¼ å…¥ <code>ReactDOM.render()</code>ã€‚<code>React DOM</code> ä¼šå°†å…ƒç´ å’Œå®ƒçš„å­å…ƒç´ ä¸å®ƒä»¬ä¹‹å‰çš„çŠ¶æ€è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶åªä¼šè¿›è¡Œå¿…è¦çš„æ›´æ–°æ¥ä½¿ <code>DOM</code> è¾¾åˆ°é¢„æœŸçš„çŠ¶æ€ã€‚</p><h1 id="React-ç»„ä»¶"><a href="#React-ç»„ä»¶" class="headerlink" title="React ç»„ä»¶"></a>React ç»„ä»¶</h1><h2 id="Elementå…ƒç´ -VS-Componentç»„ä»¶"><a href="#Elementå…ƒç´ -VS-Componentç»„ä»¶" class="headerlink" title="Elementå…ƒç´  VS Componentç»„ä»¶"></a>Elementå…ƒç´  VS Componentç»„ä»¶</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> div <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>         <span class="token comment">// div æ˜¯ React å…ƒç´ </span><span class="token keyword">const</span> <span class="token function-variable function">Div</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>   <span class="token comment">// Div æ˜¯ React ç»„ä»¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç®€å•ç†è§£å°±æ˜¯ä¸€ä¸ªè¿”å› <code>React å…ƒç´ </code> çš„ <strong><code>å‡½æ•°</code></strong> å°±æ˜¯ç»„ä»¶ã€‚</p><p>åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œ <code>JSX</code> æ‰€æ¥æ”¶çš„å±æ€§ä»¥åŠå­ç»„ä»¶ä¼šè¢«è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º <code>props</code>ã€‚</p><blockquote><p>æ³¨æ„ï¼š ç»„ä»¶åç§°å¿…é¡»ä»¥<strong>å¤§å†™å­—æ¯</strong>å¼€å¤´ã€‚React ä¼šå°†ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶è§†ä¸ºåŸç”Ÿ DOM æ ‡ç­¾ã€‚</p></blockquote><h2 id="class-ç»„ä»¶"><a href="#class-ç»„ä»¶" class="headerlink" title="class ç»„ä»¶"></a>class ç»„ä»¶</h2><p>ä½¿ç”¨ ES6 çš„ class å®šä¹‰ç»„ä»¶</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Welcome</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‡½æ•°ç»„ä»¶"><a href="#å‡½æ•°ç»„ä»¶" class="headerlink" title="å‡½æ•°ç»„ä»¶"></a>å‡½æ•°ç»„ä»¶</h2><p>ä½¿ç”¨ JavaScript å‡½æ•° å®šä¹‰ç»„ä»¶</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Welcome</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="ç»„ä»¶æ¸²æŸ“"><a href="#ç»„ä»¶æ¸²æŸ“" class="headerlink" title="ç»„ä»¶æ¸²æŸ“"></a>ç»„ä»¶æ¸²æŸ“</h2><p>ä¸Šé¢ä¾‹å­ class ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶æ˜¯è¿™æ ·è°ƒç”¨çš„ï¼š</p><pre class="line-numbers language-jsx" data-language="jsx"><code class="language-jsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Welcome</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>April-cl<span class="token punctuation">'</span></span> <span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨é¡µé¢ä¸Šä¼šæ¸²æŸ“æˆ <code>Hello, April-cl</code></p><p><code>&lt;Welcome name='April-cl' /&gt;</code> ä¼šè¢«ç¼–è¯‘æˆ <code>React.createElement(Welcome, {name: 'April-cl'})</code></p><p><code>React.createElement</code>çš„é€»è¾‘ï¼š</p><ul><li>å¦‚æœä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸² <code>'div'</code>ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ª <code>div</code></li><li>å¦‚æœä¼ å…¥ä¸€ä¸ª<code>å‡½æ•°</code>ï¼Œåˆ™ä¼šè°ƒç”¨è¯¥å‡½æ•°ï¼Œ<code>è·å–å…¶è¿”å›å€¼</code></li><li>å¦‚æœä¼ å…¥ä¸€ä¸ª<code>ç±»</code>ï¼Œåˆ™åœ¨ç±»å‰é¢åŠ ä¸ª <code>new</code> ï¼ˆè¿™ä¼šå¯¼è‡´æ‰§è¡Œ <code>constructor</code>ï¼‰ï¼Œè·å–ä¸€ä¸ªç»„ä»¶å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å¯¹è±¡çš„ <code>render</code> æ–¹æ³•ï¼Œ<code>è·å–å…¶è¿”å›å€¼</code></li></ul>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> React </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
